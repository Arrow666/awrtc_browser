(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["awrtc"] = factory();
	else
		root["awrtc"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/awrtc/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js":
/*!******************************************************************!*\
  !*** ./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nvar SDPUtils = __webpack_require__(/*! sdp */ \"./node_modules/sdp/sdp.js\");\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy9ydGNwZWVyY29ubmVjdGlvbi1zaGltL3J0Y3BlZXJjb25uZWN0aW9uLmpzPzcyNWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViLGVBQWUsbUJBQU8sQ0FBQyxzQ0FBSzs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsbUJBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsc0NBQXNDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0NBQWdDO0FBQzNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsNEJBQTRCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLHlCQUF5Qiw0QkFBNEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9ydGNwZWVyY29ubmVjdGlvbi1zaGltL3J0Y3BlZXJjb25uZWN0aW9uLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTRFBVdGlscyA9IHJlcXVpcmUoJ3NkcCcpO1xuXG5mdW5jdGlvbiBmaXhTdGF0c1R5cGUoc3RhdCkge1xuICByZXR1cm4ge1xuICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsXG4gICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsXG4gICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gIH1bc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCBjYXBzLCB0eXBlLCBzdHJlYW0sIGR0bHNSb2xlKSB7XG4gIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uKHRyYW5zY2VpdmVyLmtpbmQsIGNhcHMpO1xuXG4gIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzKFxuICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpO1xuXG4gIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyhcbiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXG4gICAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogZHRsc1JvbGUgfHwgJ2FjdGl2ZScpO1xuXG4gIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcXHJcXG4nO1xuXG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHtcbiAgICBzZHAgKz0gJ2E9c2VuZHJlY3ZcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgIHNkcCArPSAnYT1zZW5kb25seVxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHtcbiAgICBzZHAgKz0gJ2E9cmVjdm9ubHlcXHJcXG4nO1xuICB9IGVsc2Uge1xuICAgIHNkcCArPSAnYT1pbmFjdGl2ZVxcclxcbic7XG4gIH1cblxuICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgdmFyIHRyYWNrSWQgPSB0cmFuc2NlaXZlci5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkIHx8XG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZDtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkID0gdHJhY2tJZDtcbiAgICAvLyBzcGVjLlxuICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIChzdHJlYW0gPyBzdHJlYW0uaWQgOiAnLScpICsgJyAnICtcbiAgICAgICAgdHJhY2tJZCArICdcXHJcXG4nO1xuICAgIHNkcCArPSAnYT0nICsgbXNpZDtcbiAgICAvLyBmb3IgQ2hyb21lLiBMZWdhY3kgc2hvdWxkIG5vIGxvbmdlciBiZSByZXF1aXJlZC5cbiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICAgJyAnICsgbXNpZDtcblxuICAgIC8vIFJUWFxuICAgIGlmICh0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICcgJyArIG1zaWQ7XG4gICAgICBzZHAgKz0gJ2E9c3NyYy1ncm91cDpGSUQgJyArXG4gICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsgJyAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgICAnXFxyXFxuJztcbiAgICB9XG4gIH1cbiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi5cbiAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xcclxcbic7XG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufVxuXG4vLyBFZGdlIGRvZXMgbm90IGxpa2Vcbi8vIDEpIHN0dW46IGZpbHRlcmVkIGFmdGVyIDE0MzkzIHVubGVzcyA/dHJhbnNwb3J0PXVkcCBpcyBwcmVzZW50XG4vLyAyKSB0dXJuOiB0aGF0IGRvZXMgbm90IGhhdmUgYWxsIG9mIHR1cm46aG9zdDpwb3J0P3RyYW5zcG9ydD11ZHBcbi8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXNcbi8vIDQpIHR1cm46IG9jY3VycmluZyBtdWxpcGxlIHRpbWVzXG5mdW5jdGlvbiBmaWx0ZXJJY2VTZXJ2ZXJzKGljZVNlcnZlcnMsIGVkZ2VWZXJzaW9uKSB7XG4gIHZhciBoYXNUdXJuID0gZmFsc2U7XG4gIGljZVNlcnZlcnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGljZVNlcnZlcnMpKTtcbiAgcmV0dXJuIGljZVNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHNlcnZlcikge1xuICAgIGlmIChzZXJ2ZXIgJiYgKHNlcnZlci51cmxzIHx8IHNlcnZlci51cmwpKSB7XG4gICAgICB2YXIgdXJscyA9IHNlcnZlci51cmxzIHx8IHNlcnZlci51cmw7XG4gICAgICBpZiAoc2VydmVyLnVybCAmJiAhc2VydmVyLnVybHMpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdSVENJY2VTZXJ2ZXIudXJsIGlzIGRlcHJlY2F0ZWQhIFVzZSB1cmxzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgdXJscyA9PT0gJ3N0cmluZyc7XG4gICAgICBpZiAoaXNTdHJpbmcpIHtcbiAgICAgICAgdXJscyA9IFt1cmxzXTtcbiAgICAgIH1cbiAgICAgIHVybHMgPSB1cmxzLmZpbHRlcihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgdmFyIHZhbGlkVHVybiA9IHVybC5pbmRleE9mKCd0dXJuOicpID09PSAwICYmXG4gICAgICAgICAgICB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJlxuICAgICAgICAgICAgdXJsLmluZGV4T2YoJ3R1cm46WycpID09PSAtMSAmJlxuICAgICAgICAgICAgIWhhc1R1cm47XG5cbiAgICAgICAgaWYgKHZhbGlkVHVybikge1xuICAgICAgICAgIGhhc1R1cm4gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmwuaW5kZXhPZignc3R1bjonKSA9PT0gMCAmJiBlZGdlVmVyc2lvbiA+PSAxNDM5MyAmJlxuICAgICAgICAgICAgdXJsLmluZGV4T2YoJz90cmFuc3BvcnQ9dWRwJykgPT09IC0xO1xuICAgICAgfSk7XG5cbiAgICAgIGRlbGV0ZSBzZXJ2ZXIudXJsO1xuICAgICAgc2VydmVyLnVybHMgPSBpc1N0cmluZyA/IHVybHNbMF0gOiB1cmxzO1xuICAgICAgcmV0dXJuICEhdXJscy5sZW5ndGg7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gRGV0ZXJtaW5lcyB0aGUgaW50ZXJzZWN0aW9uIG9mIGxvY2FsIGFuZCByZW1vdGUgY2FwYWJpbGl0aWVzLlxuZnVuY3Rpb24gZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKGxvY2FsQ2FwYWJpbGl0aWVzLCByZW1vdGVDYXBhYmlsaXRpZXMpIHtcbiAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHtcbiAgICBjb2RlY3M6IFtdLFxuICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLFxuICAgIGZlY01lY2hhbmlzbXM6IFtdXG4gIH07XG5cbiAgdmFyIGZpbmRDb2RlY0J5UGF5bG9hZFR5cGUgPSBmdW5jdGlvbihwdCwgY29kZWNzKSB7XG4gICAgcHQgPSBwYXJzZUludChwdCwgMTApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29kZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoY29kZWNzW2ldLnBheWxvYWRUeXBlID09PSBwdCB8fFxuICAgICAgICAgIGNvZGVjc1tpXS5wcmVmZXJyZWRQYXlsb2FkVHlwZSA9PT0gcHQpIHtcbiAgICAgICAgcmV0dXJuIGNvZGVjc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHJ0eENhcGFiaWxpdHlNYXRjaGVzID0gZnVuY3Rpb24obFJ0eCwgclJ0eCwgbENvZGVjcywgckNvZGVjcykge1xuICAgIHZhciBsQ29kZWMgPSBmaW5kQ29kZWNCeVBheWxvYWRUeXBlKGxSdHgucGFyYW1ldGVycy5hcHQsIGxDb2RlY3MpO1xuICAgIHZhciByQ29kZWMgPSBmaW5kQ29kZWNCeVBheWxvYWRUeXBlKHJSdHgucGFyYW1ldGVycy5hcHQsIHJDb2RlY3MpO1xuICAgIHJldHVybiBsQ29kZWMgJiYgckNvZGVjICYmXG4gICAgICAgIGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24obENvZGVjKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgckNvZGVjID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjc1tpXTtcbiAgICAgIGlmIChsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpICYmXG4gICAgICAgICAgbENvZGVjLmNsb2NrUmF0ZSA9PT0gckNvZGVjLmNsb2NrUmF0ZSkge1xuICAgICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3J0eCcgJiZcbiAgICAgICAgICAgIGxDb2RlYy5wYXJhbWV0ZXJzICYmIHJDb2RlYy5wYXJhbWV0ZXJzLmFwdCkge1xuICAgICAgICAgIC8vIGZvciBSVFggd2UgbmVlZCB0byBmaW5kIHRoZSBsb2NhbCBydHggdGhhdCBoYXMgYSBhcHRcbiAgICAgICAgICAvLyB3aGljaCBwb2ludHMgdG8gdGhlIHNhbWUgbG9jYWwgY29kZWMgYXMgdGhlIHJlbW90ZSBvbmUuXG4gICAgICAgICAgaWYgKCFydHhDYXBhYmlsaXR5TWF0Y2hlcyhsQ29kZWMsIHJDb2RlYyxcbiAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLCByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJDb2RlYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkockNvZGVjKSk7IC8vIGRlZXBjb3B5XG4gICAgICAgIC8vIG51bWJlciBvZiBjaGFubmVscyBpcyB0aGUgaGlnaGVzdCBjb21tb24gbnVtYmVyIG9mIGNoYW5uZWxzXG4gICAgICAgIHJDb2RlYy5udW1DaGFubmVscyA9IE1hdGgubWluKGxDb2RlYy5udW1DaGFubmVscyxcbiAgICAgICAgICAgIHJDb2RlYy5udW1DaGFubmVscyk7XG4gICAgICAgIC8vIHB1c2ggckNvZGVjIHNvIHdlIHJlcGx5IHdpdGggb2ZmZXJlciBwYXlsb2FkIHR5cGVcbiAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmNvZGVjcy5wdXNoKHJDb2RlYyk7XG5cbiAgICAgICAgLy8gZGV0ZXJtaW5lIGNvbW1vbiBmZWVkYmFjayBtZWNoYW5pc21zXG4gICAgICAgIHJDb2RlYy5ydGNwRmVlZGJhY2sgPSByQ29kZWMucnRjcEZlZWRiYWNrLmZpbHRlcihmdW5jdGlvbihmYikge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbENvZGVjLnJ0Y3BGZWVkYmFjay5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGxDb2RlYy5ydGNwRmVlZGJhY2tbal0udHlwZSA9PT0gZmIudHlwZSAmJlxuICAgICAgICAgICAgICAgIGxDb2RlYy5ydGNwRmVlZGJhY2tbal0ucGFyYW1ldGVyID09PSBmYi5wYXJhbWV0ZXIpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZJWE1FOiBhbHNvIG5lZWQgdG8gZGV0ZXJtaW5lIC5wYXJhbWV0ZXJzXG4gICAgICAgIC8vICBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5wZWVyL29ydGMvaXNzdWVzLzU2OVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGxvY2FsQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihsSGVhZGVyRXh0ZW5zaW9uKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5sZW5ndGg7XG4gICAgICAgICBpKyspIHtcbiAgICAgIHZhciBySGVhZGVyRXh0ZW5zaW9uID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnNbaV07XG4gICAgICBpZiAobEhlYWRlckV4dGVuc2lvbi51cmkgPT09IHJIZWFkZXJFeHRlbnNpb24udXJpKSB7XG4gICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLnB1c2gockhlYWRlckV4dGVuc2lvbik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gRklYTUU6IGZlY01lY2hhbmlzbXNcbiAgcmV0dXJuIGNvbW1vbkNhcGFiaWxpdGllcztcbn1cblxuLy8gaXMgYWN0aW9uPXNldExvY2FsRGVzY3JpcHRpb24gd2l0aCB0eXBlIGFsbG93ZWQgaW4gc2lnbmFsaW5nU3RhdGVcbmZ1bmN0aW9uIGlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoYWN0aW9uLCB0eXBlLCBzaWduYWxpbmdTdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIG9mZmVyOiB7XG4gICAgICBzZXRMb2NhbERlc2NyaXB0aW9uOiBbJ3N0YWJsZScsICdoYXZlLWxvY2FsLW9mZmVyJ10sXG4gICAgICBzZXRSZW1vdGVEZXNjcmlwdGlvbjogWydzdGFibGUnLCAnaGF2ZS1yZW1vdGUtb2ZmZXInXVxuICAgIH0sXG4gICAgYW5zd2VyOiB7XG4gICAgICBzZXRMb2NhbERlc2NyaXB0aW9uOiBbJ2hhdmUtcmVtb3RlLW9mZmVyJywgJ2hhdmUtbG9jYWwtcHJhbnN3ZXInXSxcbiAgICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBbJ2hhdmUtbG9jYWwtb2ZmZXInLCAnaGF2ZS1yZW1vdGUtcHJhbnN3ZXInXVxuICAgIH1cbiAgfVt0eXBlXVthY3Rpb25dLmluZGV4T2Yoc2lnbmFsaW5nU3RhdGUpICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gbWF5YmVBZGRDYW5kaWRhdGUoaWNlVHJhbnNwb3J0LCBjYW5kaWRhdGUpIHtcbiAgLy8gRWRnZSdzIGludGVybmFsIHJlcHJlc2VudGF0aW9uIGFkZHMgc29tZSBmaWVsZHMgdGhlcmVmb3JlXG4gIC8vIG5vdCBhbGwgZmllbGTRlSBhcmUgdGFrZW4gaW50byBhY2NvdW50LlxuICB2YXIgYWxyZWFkeUFkZGVkID0gaWNlVHJhbnNwb3J0LmdldFJlbW90ZUNhbmRpZGF0ZXMoKVxuICAgICAgLmZpbmQoZnVuY3Rpb24ocmVtb3RlQ2FuZGlkYXRlKSB7XG4gICAgICAgIHJldHVybiBjYW5kaWRhdGUuZm91bmRhdGlvbiA9PT0gcmVtb3RlQ2FuZGlkYXRlLmZvdW5kYXRpb24gJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5pcCA9PT0gcmVtb3RlQ2FuZGlkYXRlLmlwICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUucG9ydCA9PT0gcmVtb3RlQ2FuZGlkYXRlLnBvcnQgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5wcmlvcml0eSA9PT0gcmVtb3RlQ2FuZGlkYXRlLnByaW9yaXR5ICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUucHJvdG9jb2wgPT09IHJlbW90ZUNhbmRpZGF0ZS5wcm90b2NvbCAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLnR5cGUgPT09IHJlbW90ZUNhbmRpZGF0ZS50eXBlO1xuICAgICAgfSk7XG4gIGlmICghYWxyZWFkeUFkZGVkKSB7XG4gICAgaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICB9XG4gIHJldHVybiAhYWxyZWFkeUFkZGVkO1xufVxuXG5cbmZ1bmN0aW9uIG1ha2VFcnJvcihuYW1lLCBkZXNjcmlwdGlvbikge1xuICB2YXIgZSA9IG5ldyBFcnJvcihkZXNjcmlwdGlvbik7XG4gIGUubmFtZSA9IG5hbWU7XG4gIC8vIGxlZ2FjeSBlcnJvciBjb2RlcyBmcm9tIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2lkbC1ET01FeGNlcHRpb24tZXJyb3ItbmFtZXNcbiAgZS5jb2RlID0ge1xuICAgIE5vdFN1cHBvcnRlZEVycm9yOiA5LFxuICAgIEludmFsaWRTdGF0ZUVycm9yOiAxMSxcbiAgICBJbnZhbGlkQWNjZXNzRXJyb3I6IDE1LFxuICAgIFR5cGVFcnJvcjogdW5kZWZpbmVkLFxuICAgIE9wZXJhdGlvbkVycm9yOiB1bmRlZmluZWRcbiAgfVtuYW1lXTtcbiAgcmV0dXJuIGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2luZG93LCBlZGdlVmVyc2lvbikge1xuICAvLyBodHRwczovL3czYy5naXRodWIuaW8vbWVkaWFjYXB0dXJlLW1haW4vI21lZGlhc3RyZWFtXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdGhlIHRyYWNrIHRvIHRoZSBzdHJlYW0gYW5kXG4gIC8vIGRpc3BhdGNoIHRoZSBldmVudCBvdXJzZWx2ZXMuXG4gIGZ1bmN0aW9uIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbSkge1xuICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7XG4gICAgc3RyZWFtLmRpc3BhdGNoRXZlbnQobmV3IHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoJ2FkZHRyYWNrJyxcbiAgICAgICAge3RyYWNrOiB0cmFja30pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVRyYWNrRnJvbVN0cmVhbUFuZEZpcmVFdmVudCh0cmFjaywgc3RyZWFtKSB7XG4gICAgc3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICBzdHJlYW0uZGlzcGF0Y2hFdmVudChuZXcgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2tFdmVudCgncmVtb3ZldHJhY2snLFxuICAgICAgICB7dHJhY2s6IHRyYWNrfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZUFkZFRyYWNrKHBjLCB0cmFjaywgcmVjZWl2ZXIsIHN0cmVhbXMpIHtcbiAgICB2YXIgdHJhY2tFdmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICB0cmFja0V2ZW50LnRyYWNrID0gdHJhY2s7XG4gICAgdHJhY2tFdmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgIHRyYWNrRXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IHJlY2VpdmVyfTtcbiAgICB0cmFja0V2ZW50LnN0cmVhbXMgPSBzdHJlYW1zO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgcGMuX2Rpc3BhdGNoRXZlbnQoJ3RyYWNrJywgdHJhY2tFdmVudCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihjb25maWcpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuXG4gICAgdmFyIF9ldmVudFRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBbJ2FkZEV2ZW50TGlzdGVuZXInLCAncmVtb3ZlRXZlbnRMaXN0ZW5lcicsICdkaXNwYXRjaEV2ZW50J11cbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgcGNbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzID0gbnVsbDtcblxuICAgIHRoaXMubmVlZE5lZ290aWF0aW9uID0gZmFsc2U7XG5cbiAgICB0aGlzLmxvY2FsU3RyZWFtcyA9IFtdO1xuICAgIHRoaXMucmVtb3RlU3RyZWFtcyA9IFtdO1xuXG4gICAgdGhpcy5fbG9jYWxEZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fcmVtb3RlRGVzY3JpcHRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnO1xuICAgIHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlID0gJ25ldyc7XG4gICAgdGhpcy5jb25uZWN0aW9uU3RhdGUgPSAnbmV3JztcbiAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7XG5cbiAgICBjb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbmZpZyB8fCB7fSkpO1xuXG4gICAgdGhpcy51c2luZ0J1bmRsZSA9IGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJztcbiAgICBpZiAoY29uZmlnLnJ0Y3BNdXhQb2xpY3kgPT09ICduZWdvdGlhdGUnKSB7XG4gICAgICB0aHJvdyhtYWtlRXJyb3IoJ05vdFN1cHBvcnRlZEVycm9yJyxcbiAgICAgICAgICAncnRjcE11eFBvbGljeSBcXCduZWdvdGlhdGVcXCcgaXMgbm90IHN1cHBvcnRlZCcpKTtcbiAgICB9IGVsc2UgaWYgKCFjb25maWcucnRjcE11eFBvbGljeSkge1xuICAgICAgY29uZmlnLnJ0Y3BNdXhQb2xpY3kgPSAncmVxdWlyZSc7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7XG4gICAgICBjYXNlICdhbGwnOlxuICAgICAgY2FzZSAncmVsYXknOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kgPSAnYWxsJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuYnVuZGxlUG9saWN5KSB7XG4gICAgICBjYXNlICdiYWxhbmNlZCc6XG4gICAgICBjYXNlICdtYXgtY29tcGF0JzpcbiAgICAgIGNhc2UgJ21heC1idW5kbGUnOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5idW5kbGVQb2xpY3kgPSAnYmFsYW5jZWQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMgfHwgW10sIGVkZ2VWZXJzaW9uKTtcblxuICAgIHRoaXMuX2ljZUdhdGhlcmVycyA9IFtdO1xuICAgIGlmIChjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemUpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemU7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IHdpbmRvdy5SVENJY2VHYXRoZXJlcih7XG4gICAgICAgICAgaWNlU2VydmVyczogY29uZmlnLmljZVNlcnZlcnMsXG4gICAgICAgICAgZ2F0aGVyUG9saWN5OiBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnLmljZUNhbmRpZGF0ZVBvb2xTaXplID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG5cbiAgICAvLyBwZXItdHJhY2sgaWNlR2F0aGVycywgaWNlVHJhbnNwb3J0cywgZHRsc1RyYW5zcG9ydHMsIHJ0cFNlbmRlcnMsIC4uLlxuICAgIC8vIGV2ZXJ5dGhpbmcgdGhhdCBpcyBuZWVkZWQgdG8gZGVzY3JpYmUgYSBTRFAgbS1saW5lLlxuICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107XG5cbiAgICB0aGlzLl9zZHBTZXNzaW9uSWQgPSBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCgpO1xuICAgIHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uID0gMDtcblxuICAgIHRoaXMuX2R0bHNSb2xlID0gdW5kZWZpbmVkOyAvLyByb2xlIGZvciBhPXNldHVwIHRvIHVzZSBpbiBhbnN3ZXJzLlxuXG4gICAgdGhpcy5faXNDbG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnbG9jYWxEZXNjcmlwdGlvbicsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9sb2NhbERlc2NyaXB0aW9uO1xuICAgIH1cbiAgfSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdyZW1vdGVEZXNjcmlwdGlvbicsIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHNldCB1cCBldmVudCBoYW5kbGVycyBvbiBwcm90b3R5cGVcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uaWNlY2FuZGlkYXRlID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9uYWRkc3RyZWFtID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9udHJhY2sgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25yZW1vdmVzdHJlYW0gPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlID0gbnVsbDtcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLm9ubmVnb3RpYXRpb25uZWVkZWQgPSBudWxsO1xuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUub25kYXRhY2hhbm5lbCA9IG51bGw7XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24obmFtZSwgZXZlbnQpIHtcbiAgICBpZiAodGhpcy5faXNDbG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBpZiAodHlwZW9mIHRoaXNbJ29uJyArIG5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzWydvbicgKyBuYW1lXShldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScpO1xuICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJywgZXZlbnQpO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxTdHJlYW1zO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtcztcbiAgfTtcblxuICAvLyBpbnRlcm5hbCBoZWxwZXIgdG8gY3JlYXRlIGEgdHJhbnNjZWl2ZXIgb2JqZWN0LlxuICAvLyAod2hpY2ggaXMgbm90IHlldCB0aGUgc2FtZSBhcyB0aGUgV2ViUlRDIDEuMCB0cmFuc2NlaXZlcilcbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVUcmFuc2NlaXZlciA9IGZ1bmN0aW9uKGtpbmQsIGRvTm90QWRkKSB7XG4gICAgdmFyIGhhc0J1bmRsZVRyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aCA+IDA7XG4gICAgdmFyIHRyYW5zY2VpdmVyID0ge1xuICAgICAgdHJhY2s6IG51bGwsXG4gICAgICBpY2VHYXRoZXJlcjogbnVsbCxcbiAgICAgIGljZVRyYW5zcG9ydDogbnVsbCxcbiAgICAgIGR0bHNUcmFuc3BvcnQ6IG51bGwsXG4gICAgICBsb2NhbENhcGFiaWxpdGllczogbnVsbCxcbiAgICAgIHJlbW90ZUNhcGFiaWxpdGllczogbnVsbCxcbiAgICAgIHJ0cFNlbmRlcjogbnVsbCxcbiAgICAgIHJ0cFJlY2VpdmVyOiBudWxsLFxuICAgICAga2luZDoga2luZCxcbiAgICAgIG1pZDogbnVsbCxcbiAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6IG51bGwsXG4gICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsLFxuICAgICAgc3RyZWFtOiBudWxsLFxuICAgICAgYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtczogW10sXG4gICAgICB3YW50UmVjZWl2ZTogdHJ1ZVxuICAgIH07XG4gICAgaWYgKHRoaXMudXNpbmdCdW5kbGUgJiYgaGFzQnVuZGxlVHJhbnNwb3J0KSB7XG4gICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQgPSB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQ7XG4gICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRyYW5zcG9ydHMgPSB0aGlzLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cygpO1xuICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ID0gdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQ7XG4gICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0ID0gdHJhbnNwb3J0cy5kdGxzVHJhbnNwb3J0O1xuICAgIH1cbiAgICBpZiAoIWRvTm90QWRkKSB7XG4gICAgICB0aGlzLnRyYW5zY2VpdmVycy5wdXNoKHRyYW5zY2VpdmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zY2VpdmVyO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uKHRyYWNrLCBzdHJlYW0pIHtcbiAgICBpZiAodGhpcy5faXNDbG9zZWQpIHtcbiAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdBdHRlbXB0ZWQgdG8gY2FsbCBhZGRUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi4nKTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUV4aXN0cyA9IHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgIH0pO1xuXG4gICAgaWYgKGFscmVhZHlFeGlzdHMpIHtcbiAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZEFjY2Vzc0Vycm9yJywgJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicpO1xuICAgIH1cblxuICAgIHZhciB0cmFuc2NlaXZlcjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXRoaXMudHJhbnNjZWl2ZXJzW2ldLnRyYWNrICYmXG4gICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnNbaV0ua2luZCA9PT0gdHJhY2sua2luZCkge1xuICAgICAgICB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRyYW5zY2VpdmVyKSB7XG4gICAgICB0cmFuc2NlaXZlciA9IHRoaXMuX2NyZWF0ZVRyYW5zY2VpdmVyKHRyYWNrLmtpbmQpO1xuICAgIH1cblxuICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7XG5cbiAgICBpZiAodGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID09PSAtMSkge1xuICAgICAgdGhpcy5sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgIH1cblxuICAgIHRyYW5zY2VpdmVyLnRyYWNrID0gdHJhY2s7XG4gICAgdHJhbnNjZWl2ZXIuc3RyZWFtID0gc3RyZWFtO1xuICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlciA9IG5ldyB3aW5kb3cuUlRDUnRwU2VuZGVyKHRyYWNrLFxuICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0KTtcbiAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAyNSkge1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgcGMuYWRkVHJhY2sodHJhY2ssIHN0cmVhbSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2xvbmUgaXMgbmVjZXNzYXJ5IGZvciBsb2NhbCBkZW1vcyBtb3N0bHksIGF0dGFjaGluZyBkaXJlY3RseVxuICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS5cbiAgICAgIC8vIEZpeGVkIGluIDE1MDI1IChvciBlYXJsaWVyKVxuICAgICAgdmFyIGNsb25lZFN0cmVhbSA9IHN0cmVhbS5jbG9uZSgpO1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2ssIGlkeCkge1xuICAgICAgICB2YXIgY2xvbmVkVHJhY2sgPSBjbG9uZWRTdHJlYW0uZ2V0VHJhY2tzKClbaWR4XTtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5hYmxlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgY2xvbmVkVHJhY2suZW5hYmxlZCA9IGV2ZW50LmVuYWJsZWQ7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjbG9uZWRTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICBwYy5hZGRUcmFjayh0cmFjaywgY2xvbmVkU3RyZWFtKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICBpZiAodGhpcy5faXNDbG9zZWQpIHtcbiAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdBdHRlbXB0ZWQgdG8gY2FsbCByZW1vdmVUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAoIShzZW5kZXIgaW5zdGFuY2VvZiB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayAnICtcbiAgICAgICAgICAnZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuJyk7XG4gICAgfVxuXG4gICAgdmFyIHRyYW5zY2VpdmVyID0gdGhpcy50cmFuc2NlaXZlcnMuZmluZChmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gdC5ydHBTZW5kZXIgPT09IHNlbmRlcjtcbiAgICB9KTtcblxuICAgIGlmICghdHJhbnNjZWl2ZXIpIHtcbiAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZEFjY2Vzc0Vycm9yJyxcbiAgICAgICAgICAnU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uJyk7XG4gICAgfVxuICAgIHZhciBzdHJlYW0gPSB0cmFuc2NlaXZlci5zdHJlYW07XG5cbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpO1xuICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlciA9IG51bGw7XG4gICAgdHJhbnNjZWl2ZXIudHJhY2sgPSBudWxsO1xuICAgIHRyYW5zY2VpdmVyLnN0cmVhbSA9IG51bGw7XG5cbiAgICAvLyByZW1vdmUgdGhlIHN0cmVhbSBmcm9tIHRoZSBzZXQgb2YgbG9jYWwgc3RyZWFtc1xuICAgIHZhciBsb2NhbFN0cmVhbXMgPSB0aGlzLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQuc3RyZWFtO1xuICAgIH0pO1xuICAgIGlmIChsb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pID09PSAtMSAmJlxuICAgICAgICB0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPiAtMSkge1xuICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuc3BsaWNlKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSwgMSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgdmFyIHNlbmRlciA9IHBjLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgICAgfSk7XG4gICAgICBpZiAoc2VuZGVyKSB7XG4gICAgICAgIHBjLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gISF0cmFuc2NlaXZlci5ydHBTZW5kZXI7XG4gICAgfSlcbiAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICAgIH0pO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gISF0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICB9KVxuICAgIC5tYXAoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIHJldHVybiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICB9KTtcbiAgfTtcblxuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlSWNlR2F0aGVyZXIgPSBmdW5jdGlvbihzZHBNTGluZUluZGV4LFxuICAgICAgdXNpbmdCdW5kbGUpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIGlmICh1c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faWNlR2F0aGVyZXJzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO1xuICAgIH1cbiAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgd2luZG93LlJUQ0ljZUdhdGhlcmVyKHtcbiAgICAgIGljZVNlcnZlcnM6IHRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLFxuICAgICAgZ2F0aGVyUG9saWN5OiB0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGljZUdhdGhlcmVyLCAnc3RhdGUnLFxuICAgICAgICB7dmFsdWU6ICduZXcnLCB3cml0YWJsZTogdHJ1ZX1cbiAgICApO1xuXG4gICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMgPSBbXTtcbiAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJDYW5kaWRhdGVzID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBlbmQgPSAhZXZlbnQuY2FuZGlkYXRlIHx8IE9iamVjdC5rZXlzKGV2ZW50LmNhbmRpZGF0ZSkubGVuZ3RoID09PSAwO1xuICAgICAgLy8gcG9seWZpbGwgc2luY2UgUlRDSWNlR2F0aGVyZXIuc3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluXG4gICAgICAvLyBFZGdlIDEwNTQ3IHlldC5cbiAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gZW5kID8gJ2NvbXBsZXRlZCcgOiAnZ2F0aGVyaW5nJztcbiAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMgIT09IG51bGwpIHtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWNlR2F0aGVyZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9jYWxjYW5kaWRhdGUnLFxuICAgICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uYnVmZmVyQ2FuZGlkYXRlcyk7XG4gICAgcmV0dXJuIGljZUdhdGhlcmVyO1xuICB9O1xuXG4gIC8vIHN0YXJ0IGdhdGhlcmluZyBmcm9tIGFuIFJUQ0ljZUdhdGhlcmVyLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2dhdGhlciA9IGZ1bmN0aW9uKG1pZCwgc2RwTUxpbmVJbmRleCkge1xuICAgIHZhciBwYyA9IHRoaXM7XG4gICAgdmFyIGljZUdhdGhlcmVyID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7XG4gICAgaWYgKGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID1cbiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzO1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzID0gbnVsbDtcbiAgICBpY2VHYXRoZXJlci5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2NhbGNhbmRpZGF0ZScsXG4gICAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJDYW5kaWRhdGVzKTtcbiAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBpZiAocGMudXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDApIHtcbiAgICAgICAgLy8gaWYgd2Uga25vdyB0aGF0IHdlIHVzZSBidW5kbGUgd2UgY2FuIGRyb3AgY2FuZGlkYXRlcyB3aXRoXG4gICAgICAgIC8vINGVZHBNTGluZUluZGV4ID4gMC4gSWYgd2UgZG9uJ3QgZG8gdGhpcyB0aGVuIG91ciBzdGF0ZSBnZXRzXG4gICAgICAgIC8vIGNvbmZ1c2VkIHNpbmNlIHdlIGRpc3Bvc2UgdGhlIGV4dHJhIGljZSBnYXRoZXJlci5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKTtcbiAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IHtzZHBNaWQ6IG1pZCwgc2RwTUxpbmVJbmRleDogc2RwTUxpbmVJbmRleH07XG5cbiAgICAgIHZhciBjYW5kID0gZXZ0LmNhbmRpZGF0ZTtcbiAgICAgIC8vIEVkZ2UgZW1pdHMgYW4gZW1wdHkgb2JqZWN0IGZvciBSVENJY2VDYW5kaWRhdGVDb21wbGV0ZeKApVxuICAgICAgdmFyIGVuZCA9ICFjYW5kIHx8IE9iamVjdC5rZXlzKGNhbmQpLmxlbmd0aCA9PT0gMDtcbiAgICAgIGlmIChlbmQpIHtcbiAgICAgICAgLy8gcG9seWZpbGwgc2luY2UgUlRDSWNlR2F0aGVyZXIuc3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluXG4gICAgICAgIC8vIEVkZ2UgMTA1NDcgeWV0LlxuICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09ICduZXcnIHx8IGljZUdhdGhlcmVyLnN0YXRlID09PSAnZ2F0aGVyaW5nJykge1xuICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpY2VHYXRoZXJlci5zdGF0ZSA9ICdnYXRoZXJpbmcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJUQ0ljZUNhbmRpZGF0ZSBkb2Vzbid0IGhhdmUgYSBjb21wb25lbnQsIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgIGNhbmQuY29tcG9uZW50ID0gMTtcbiAgICAgICAgLy8gYWxzbyB0aGUgdXNlcm5hbWVGcmFnbWVudC4gVE9ETzogdXBkYXRlIFNEUCB0byB0YWtlIGJvdGggdmFyaWFudHMuXG4gICAgICAgIGNhbmQudWZyYWcgPSBpY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKS51c2VybmFtZUZyYWdtZW50O1xuXG4gICAgICAgIHZhciBzZXJpYWxpemVkQ2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7XG4gICAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IE9iamVjdC5hc3NpZ24oZXZlbnQuY2FuZGlkYXRlLFxuICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoc2VyaWFsaXplZENhbmRpZGF0ZSkpO1xuXG4gICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPSBzZXJpYWxpemVkQ2FuZGlkYXRlO1xuICAgICAgICBldmVudC5jYW5kaWRhdGUudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSxcbiAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCxcbiAgICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LFxuICAgICAgICAgICAgdXNlcm5hbWVGcmFnbWVudDogZXZlbnQuY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnRcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgbG9jYWwgZGVzY3JpcHRpb24uXG4gICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zKHBjLl9sb2NhbERlc2NyaXB0aW9uLnNkcCk7XG4gICAgICBpZiAoIWVuZCkge1xuICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz1cbiAgICAgICAgICAgICdhPScgKyBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlICsgJ1xcclxcbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleF0gKz1cbiAgICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgIH1cbiAgICAgIHBjLl9sb2NhbERlc2NyaXB0aW9uLnNkcCA9XG4gICAgICAgICAgU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24ocGMuX2xvY2FsRGVzY3JpcHRpb24uc2RwKSArXG4gICAgICAgICAgc2VjdGlvbnMuam9pbignJyk7XG4gICAgICB2YXIgY29tcGxldGUgPSBwYy50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBjLmljZUdhdGhlcmluZ1N0YXRlICE9PSAnZ2F0aGVyaW5nJykge1xuICAgICAgICBwYy5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdnYXRoZXJpbmcnO1xuICAgICAgICBwYy5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEVtaXQgY2FuZGlkYXRlLiBBbHNvIGVtaXQgbnVsbCBjYW5kaWRhdGUgd2hlbiBhbGwgZ2F0aGVyZXJzIGFyZVxuICAgICAgLy8gY29tcGxldGUuXG4gICAgICBpZiAoIWVuZCkge1xuICAgICAgICBwYy5fZGlzcGF0Y2hFdmVudCgnaWNlY2FuZGlkYXRlJywgZXZlbnQpO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBsZXRlKSB7XG4gICAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCdpY2VjYW5kaWRhdGUnLCBuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTtcbiAgICAgICAgcGMuaWNlR2F0aGVyaW5nU3RhdGUgPSAnY29tcGxldGUnO1xuICAgICAgICBwYy5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIGVtaXQgYWxyZWFkeSBnYXRoZXJlZCBjYW5kaWRhdGVzLlxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMuZm9yRWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUoZSk7XG4gICAgICB9KTtcbiAgICB9LCAwKTtcbiAgfTtcblxuICAvLyBDcmVhdGUgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuICAgIHZhciBpY2VUcmFuc3BvcnQgPSBuZXcgd2luZG93LlJUQ0ljZVRyYW5zcG9ydChudWxsKTtcbiAgICBpY2VUcmFuc3BvcnQub25pY2VzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcGMuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgICAgcGMuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIH07XG5cbiAgICB2YXIgZHRsc1RyYW5zcG9ydCA9IG5ldyB3aW5kb3cuUlRDRHRsc1RyYW5zcG9ydChpY2VUcmFuc3BvcnQpO1xuICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHBjLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuICAgIGR0bHNUcmFuc3BvcnQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gb25lcnJvciBkb2VzIG5vdCBzZXQgc3RhdGUgdG8gZmFpbGVkIGJ5IGl0c2VsZi5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkdGxzVHJhbnNwb3J0LCAnc3RhdGUnLFxuICAgICAgICAgIHt2YWx1ZTogJ2ZhaWxlZCcsIHdyaXRhYmxlOiB0cnVlfSk7XG4gICAgICBwYy5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBpY2VUcmFuc3BvcnQ6IGljZVRyYW5zcG9ydCxcbiAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnRcbiAgICB9O1xuICB9O1xuXG4gIC8vIERlc3Ryb3kgSUNFIGdhdGhlcmVyLCBJQ0UgdHJhbnNwb3J0IGFuZCBEVExTIHRyYW5zcG9ydC5cbiAgLy8gV2l0aG91dCB0cmlnZ2VyaW5nIHRoZSBjYWxsYmFja3MuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzID0gZnVuY3Rpb24oXG4gICAgICBzZHBNTGluZUluZGV4KSB7XG4gICAgdmFyIGljZUdhdGhlcmVyID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlR2F0aGVyZXI7XG4gICAgaWYgKGljZUdhdGhlcmVyKSB7XG4gICAgICBkZWxldGUgaWNlR2F0aGVyZXIub25sb2NhbGNhbmRpZGF0ZTtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VHYXRoZXJlcjtcbiAgICB9XG4gICAgdmFyIGljZVRyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZVRyYW5zcG9ydDtcbiAgICBpZiAoaWNlVHJhbnNwb3J0KSB7XG4gICAgICBkZWxldGUgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2U7XG4gICAgICBkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlVHJhbnNwb3J0O1xuICAgIH1cbiAgICB2YXIgZHRsc1RyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmR0bHNUcmFuc3BvcnQ7XG4gICAgaWYgKGR0bHNUcmFuc3BvcnQpIHtcbiAgICAgIGRlbGV0ZSBkdGxzVHJhbnNwb3J0Lm9uZHRsc3N0YXRlY2hhbmdlO1xuICAgICAgZGVsZXRlIGR0bHNUcmFuc3BvcnQub25lcnJvcjtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5kdGxzVHJhbnNwb3J0O1xuICAgIH1cbiAgfTtcblxuICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdHJhbnNjZWl2ZSA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLFxuICAgICAgc2VuZCwgcmVjdikge1xuICAgIHZhciBwYXJhbXMgPSBnZXRDb21tb25DYXBhYmlsaXRpZXModHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsXG4gICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7XG4gICAgaWYgKHNlbmQgJiYgdHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgICBwYXJhbXMuZW5jb2RpbmdzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgIHBhcmFtcy5ydGNwID0ge1xuICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZSxcbiAgICAgICAgY29tcG91bmQ6IHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kXG4gICAgICB9O1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBhcmFtcy5ydGNwLnNzcmMgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmM7XG4gICAgICB9XG4gICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc2VuZChwYXJhbXMpO1xuICAgIH1cbiAgICBpZiAocmVjdiAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciAmJiBwYXJhbXMuY29kZWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIHJlbW92ZSBSVFggZmllbGQgaW4gRWRnZSAxNDk0MlxuICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbydcbiAgICAgICAgICAmJiB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzXG4gICAgICAgICAgJiYgZWRnZVZlcnNpb24gPCAxNTAxOSkge1xuICAgICAgICB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocCkge1xuICAgICAgICAgIGRlbGV0ZSBwLnJ0eDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gW3t9XTtcbiAgICAgIH1cbiAgICAgIHBhcmFtcy5ydGNwID0ge1xuICAgICAgICBjb21wb3VuZDogdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY29tcG91bmRcbiAgICAgIH07XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY25hbWUpIHtcbiAgICAgICAgcGFyYW1zLnJ0Y3AuY25hbWUgPSB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jbmFtZTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCkge1xuICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjO1xuICAgICAgfVxuICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIucmVjZWl2ZShwYXJhbXMpO1xuICAgIH1cbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIC8vIE5vdGU6IHByYW5zd2VyIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgaWYgKFsnb2ZmZXInLCAnYW5zd2VyJ10uaW5kZXhPZihkZXNjcmlwdGlvbi50eXBlKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ1R5cGVFcnJvcicsXG4gICAgICAgICAgJ1Vuc3VwcG9ydGVkIHR5cGUgXCInICsgZGVzY3JpcHRpb24udHlwZSArICdcIicpKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoJ3NldExvY2FsRGVzY3JpcHRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbi50eXBlLCBwYy5zaWduYWxpbmdTdGF0ZSkgfHwgcGMuX2lzQ2xvc2VkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsXG4gICAgICAgICAgJ0NhbiBub3Qgc2V0IGxvY2FsICcgKyBkZXNjcmlwdGlvbi50eXBlICtcbiAgICAgICAgICAnIGluIHN0YXRlICcgKyBwYy5zaWduYWxpbmdTdGF0ZSkpO1xuICAgIH1cblxuICAgIHZhciBzZWN0aW9ucztcbiAgICB2YXIgc2Vzc2lvbnBhcnQ7XG4gICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHtcbiAgICAgIC8vIFZFUlkgbGltaXRlZCBzdXBwb3J0IGZvciBTRFAgbXVuZ2luZy4gTGltaXRlZCB0bzpcbiAgICAgIC8vICogY2hhbmdpbmcgdGhlIG9yZGVyIG9mIGNvZGVjc1xuICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgICBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICB2YXIgY2FwcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ubG9jYWxDYXBhYmlsaXRpZXMgPSBjYXBzO1xuICAgICAgfSk7XG5cbiAgICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICAgIHBjLl9nYXRoZXIodHJhbnNjZWl2ZXIubWlkLCBzZHBNTGluZUluZGV4KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpIHtcbiAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhwYy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgICAnYT1pY2UtbGl0ZScpLmxlbmd0aCA+IDA7XG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07XG4gICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyO1xuICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0O1xuICAgICAgICB2YXIgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzO1xuICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzO1xuXG4gICAgICAgIC8vIHRyZWF0IGJ1bmRsZS1vbmx5IGFzIG5vdC1yZWplY3RlZC5cbiAgICAgICAgdmFyIHJlamVjdGVkID0gU0RQVXRpbHMuaXNSZWplY3RlZChtZWRpYVNlY3Rpb24pICYmXG4gICAgICAgICAgICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGlmICghcmVqZWN0ZWQgJiYgIXRyYW5zY2VpdmVyLnJlamVjdGVkKSB7XG4gICAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTtcbiAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhcbiAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7XG4gICAgICAgICAgaWYgKGlzSWNlTGl0ZSkge1xuICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMucm9sZSA9ICdzZXJ2ZXInO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghcGMudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcGMuX2dhdGhlcih0cmFuc2NlaXZlci5taWQsIHNkcE1MaW5lSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgaXNJY2VMaXRlID8gJ2NvbnRyb2xsaW5nJyA6ICdjb250cm9sbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHRsc1RyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuXG4gICAgICAgICAgdmFyIHBhcmFtcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhsb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTtcblxuICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpc1xuICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi5cbiAgICAgICAgICBwYy5fdHJhbnNjZWl2ZSh0cmFuc2NlaXZlcixcbiAgICAgICAgICAgICAgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHBjLl9sb2NhbERlc2NyaXB0aW9uID0ge1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwXG4gICAgfTtcbiAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdoYXZlLWxvY2FsLW9mZmVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBjLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIC8vIE5vdGU6IHByYW5zd2VyIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgaWYgKFsnb2ZmZXInLCAnYW5zd2VyJ10uaW5kZXhPZihkZXNjcmlwdGlvbi50eXBlKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ1R5cGVFcnJvcicsXG4gICAgICAgICAgJ1Vuc3VwcG9ydGVkIHR5cGUgXCInICsgZGVzY3JpcHRpb24udHlwZSArICdcIicpKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoJ3NldFJlbW90ZURlc2NyaXB0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb24udHlwZSwgcGMuc2lnbmFsaW5nU3RhdGUpIHx8IHBjLl9pc0Nsb3NlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IHNldCByZW1vdGUgJyArIGRlc2NyaXB0aW9uLnR5cGUgK1xuICAgICAgICAgICcgaW4gc3RhdGUgJyArIHBjLnNpZ25hbGluZ1N0YXRlKSk7XG4gICAgfVxuXG4gICAgdmFyIHN0cmVhbXMgPSB7fTtcbiAgICBwYy5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICBzdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgfSk7XG4gICAgdmFyIHJlY2VpdmVyTGlzdCA9IFtdO1xuICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpO1xuICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwO1xuICAgIHZhciB1c2luZ0J1bmRsZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LFxuICAgICAgICAnYT1ncm91cDpCVU5ETEUgJykubGVuZ3RoID4gMDtcbiAgICBwYy51c2luZ0J1bmRsZSA9IHVzaW5nQnVuZGxlO1xuICAgIHZhciBpY2VPcHRpb25zID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsXG4gICAgICAgICdhPWljZS1vcHRpb25zOicpWzBdO1xuICAgIGlmIChpY2VPcHRpb25zKSB7XG4gICAgICBwYy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcyA9IGljZU9wdGlvbnMuc3Vic3RyKDE0KS5zcGxpdCgnICcpXG4gICAgICAgICAgLmluZGV4T2YoJ3RyaWNrbGUnKSA+PSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gICAgICB2YXIga2luZCA9IFNEUFV0aWxzLmdldEtpbmQobWVkaWFTZWN0aW9uKTtcbiAgICAgIC8vIHRyZWF0IGJ1bmRsZS1vbmx5IGFzIG5vdC1yZWplY3RlZC5cbiAgICAgIHZhciByZWplY3RlZCA9IFNEUFV0aWxzLmlzUmVqZWN0ZWQobWVkaWFTZWN0aW9uKSAmJlxuICAgICAgICAgIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9YnVuZGxlLW9ubHknKS5sZW5ndGggPT09IDA7XG4gICAgICB2YXIgcHJvdG9jb2wgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKVsyXTtcblxuICAgICAgdmFyIGRpcmVjdGlvbiA9IFNEUFV0aWxzLmdldERpcmVjdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTtcbiAgICAgIHZhciByZW1vdGVNc2lkID0gU0RQVXRpbHMucGFyc2VNc2lkKG1lZGlhU2VjdGlvbik7XG5cbiAgICAgIHZhciBtaWQgPSBTRFBVdGlscy5nZXRNaWQobWVkaWFTZWN0aW9uKSB8fCBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTtcblxuICAgICAgLy8gUmVqZWN0IGRhdGFjaGFubmVscyB3aGljaCBhcmUgbm90IGltcGxlbWVudGVkIHlldC5cbiAgICAgIGlmIChyZWplY3RlZCB8fCAoa2luZCA9PT0gJ2FwcGxpY2F0aW9uJyAmJiAocHJvdG9jb2wgPT09ICdEVExTL1NDVFAnIHx8XG4gICAgICAgICAgcHJvdG9jb2wgPT09ICdVRFAvRFRMUy9TQ1RQJykpKSB7XG4gICAgICAgIC8vIFRPRE86IHRoaXMgaXMgZGFuZ2Vyb3VzIGluIHRoZSBjYXNlIHdoZXJlIGEgbm9uLXJlamVjdGVkIG0tbGluZVxuICAgICAgICAvLyAgICAgYmVjb21lcyByZWplY3RlZC5cbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdID0ge1xuICAgICAgICAgIG1pZDogbWlkLFxuICAgICAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLFxuICAgICAgICAgIHJlamVjdGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZWplY3RlZCAmJiBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gJiZcbiAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVqZWN0ZWQpIHtcbiAgICAgICAgLy8gcmVjeWNsZSBhIHJlamVjdGVkIHRyYW5zY2VpdmVyLlxuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSBwYy5fY3JlYXRlVHJhbnNjZWl2ZXIoa2luZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFuc2NlaXZlcjtcbiAgICAgIHZhciBpY2VHYXRoZXJlcjtcbiAgICAgIHZhciBpY2VUcmFuc3BvcnQ7XG4gICAgICB2YXIgZHRsc1RyYW5zcG9ydDtcbiAgICAgIHZhciBydHBSZWNlaXZlcjtcbiAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgdmFyIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXM7XG5cbiAgICAgIHZhciB0cmFjaztcbiAgICAgIC8vIEZJWE1FOiBlbnN1cmUgdGhlIG1lZGlhU2VjdGlvbiBoYXMgcnRjcC1tdXggc2V0LlxuICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnM7XG4gICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnM7XG4gICAgICBpZiAoIXJlamVjdGVkKSB7XG4gICAgICAgIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbixcbiAgICAgICAgICAgIHNlc3Npb25wYXJ0KTtcbiAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgICBzZXNzaW9ucGFydCk7XG4gICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnY2xpZW50JztcbiAgICAgIH1cbiAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPVxuICAgICAgICAgIFNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG5cbiAgICAgIHZhciBydGNwUGFyYW1ldGVycyA9IFNEUFV0aWxzLnBhcnNlUnRjcFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcblxuICAgICAgdmFyIGlzQ29tcGxldGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnLCBzZXNzaW9ucGFydCkubGVuZ3RoID4gMDtcbiAgICAgIHZhciBjYW5kcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9Y2FuZGlkYXRlOicpXG4gICAgICAgICAgLm1hcChmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGNhbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5kLmNvbXBvbmVudCA9PT0gMTtcbiAgICAgICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgd2UgY2FuIHVzZSBCVU5ETEUgYW5kIGRpc3Bvc2UgdHJhbnNwb3J0cy5cbiAgICAgIGlmICgoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyB8fCBkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJykgJiZcbiAgICAgICAgICAhcmVqZWN0ZWQgJiYgdXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgJiZcbiAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0pIHtcbiAgICAgICAgcGMuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyhzZHBNTGluZUluZGV4KTtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyID1cbiAgICAgICAgICAgIHBjLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcjtcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZVRyYW5zcG9ydCA9XG4gICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0O1xuICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uZHRsc1RyYW5zcG9ydCA9XG4gICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydDtcbiAgICAgICAgaWYgKHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydHBTZW5kZXIpIHtcbiAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwU2VuZGVyLnNldFRyYW5zcG9ydChcbiAgICAgICAgICAgICAgcGMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwUmVjZWl2ZXIpIHtcbiAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwUmVjZWl2ZXIuc2V0VHJhbnNwb3J0KFxuICAgICAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInICYmICFyZWplY3RlZCkge1xuICAgICAgICB0cmFuc2NlaXZlciA9IHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSB8fFxuICAgICAgICAgICAgcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKGtpbmQpO1xuICAgICAgICB0cmFuc2NlaXZlci5taWQgPSBtaWQ7XG5cbiAgICAgICAgaWYgKCF0cmFuc2NlaXZlci5pY2VHYXRoZXJlcikge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyID0gcGMuX2NyZWF0ZUljZUdhdGhlcmVyKHNkcE1MaW5lSW5kZXgsXG4gICAgICAgICAgICAgIHVzaW5nQnVuZGxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYW5kcy5sZW5ndGggJiYgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgIGlmIChpc0NvbXBsZXRlICYmICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHtcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuZHMuZm9yRWFjaChmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpO1xuXG4gICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZFxuICAgICAgICAvLyBpbiBhZGFwdGVyLmpzXG4gICAgICAgIGlmIChlZGdlVmVyc2lvbiA8IDE1MDE5KSB7XG4gICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzID0gbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihcbiAgICAgICAgICAgICAgZnVuY3Rpb24oY29kZWMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgfHwgW3tcbiAgICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAyKSAqIDEwMDFcbiAgICAgICAgfV07XG5cbiAgICAgICAgLy8gVE9ETzogcmV3cml0ZSB0byB1c2UgaHR0cDovL3czYy5naXRodWIuaW8vd2VicnRjLXBjLyNzZXQtYXNzb2NpYXRlZC1yZW1vdGUtc3RyZWFtc1xuICAgICAgICB2YXIgaXNOZXdUcmFjayA9IGZhbHNlO1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jykge1xuICAgICAgICAgIGlzTmV3VHJhY2sgPSAhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciB8fFxuICAgICAgICAgICAgICBuZXcgd2luZG93LlJUQ1J0cFJlY2VpdmVyKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQsIGtpbmQpO1xuXG4gICAgICAgICAgaWYgKGlzTmV3VHJhY2spIHtcbiAgICAgICAgICAgIHZhciBzdHJlYW07XG4gICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrO1xuICAgICAgICAgICAgLy8gRklYTUU6IGRvZXMgbm90IHdvcmsgd2l0aCBQbGFuIEIuXG4gICAgICAgICAgICBpZiAocmVtb3RlTXNpZCAmJiByZW1vdGVNc2lkLnN0cmVhbSA9PT0gJy0nKSB7XG4gICAgICAgICAgICAgIC8vIG5vLW9wLiBhIHN0cmVhbSBpZCBvZiAnLScgbWVhbnM6IG5vIGFzc29jaWF0ZWQgc3RyZWFtLlxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZW1vdGVNc2lkKSB7XG4gICAgICAgICAgICAgIGlmICghc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0pIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0sICdpZCcsIHtcbiAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnN0cmVhbTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHJhY2ssICdpZCcsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbW90ZU1zaWQudHJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc3RyZWFtID0gc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIXN0cmVhbXMuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdCA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdHJlYW0gPSBzdHJlYW1zLmRlZmF1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RyZWFtKSB7XG4gICAgICAgICAgICAgIGFkZFRyYWNrVG9TdHJlYW1BbmRGaXJlRXZlbnQodHJhY2ssIHN0cmVhbSk7XG4gICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnRyYWNrKSB7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgICAgIHZhciBuYXRpdmVUcmFjayA9IHMuZ2V0VHJhY2tzKCkuZmluZChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjay5pZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG5hdGl2ZVRyYWNrKSB7XG4gICAgICAgICAgICAgIHJlbW92ZVRyYWNrRnJvbVN0cmVhbUFuZEZpcmVFdmVudChuYXRpdmVUcmFjaywgcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMgPSBsb2NhbENhcGFiaWxpdGllcztcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzID0gcmVtb3RlQ2FwYWJpbGl0aWVzO1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciA9IHJ0cFJlY2VpdmVyO1xuICAgICAgICB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycyA9IHJ0Y3BQYXJhbWV0ZXJzO1xuICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycyA9IHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG5cbiAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluXG4gICAgICAgIC8vIHNldExvY2FsRGVzY3JpcHRpb24uXG4gICAgICAgIHBjLl90cmFuc2NlaXZlKHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgaXNOZXdUcmFjayk7XG4gICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInICYmICFyZWplY3RlZCkge1xuICAgICAgICB0cmFuc2NlaXZlciA9IHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTtcbiAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjtcbiAgICAgICAgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0O1xuICAgICAgICBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDtcbiAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXM7XG5cbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPVxuICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgICAgcGMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlbW90ZUNhcGFiaWxpdGllcyA9XG4gICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM7XG4gICAgICAgIHBjLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydGNwUGFyYW1ldGVycyA9IHJ0Y3BQYXJhbWV0ZXJzO1xuXG4gICAgICAgIGlmIChjYW5kcy5sZW5ndGggJiYgaWNlVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgIGlmICgoaXNJY2VMaXRlIHx8IGlzQ29tcGxldGUpICYmXG4gICAgICAgICAgICAgICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHtcbiAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuZHMuZm9yRWFjaChmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF1c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7XG4gICAgICAgICAgaWYgKGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxpbmcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGR0bHNUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgb2ZmZXIgY29udGFpbmVkIFJUWCBidXQgdGhlIGFuc3dlciBkaWQgbm90LFxuICAgICAgICAvLyByZW1vdmUgUlRYIGZyb20gc2VuZEVuY29kaW5nUGFyYW1ldGVycy5cbiAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhcbiAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpO1xuXG4gICAgICAgIHZhciBoYXNSdHggPSBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIGMubmFtZS50b0xvd2VyQ2FzZSgpID09PSAncnR4JztcbiAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICBpZiAoIWhhc1J0eCAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBjLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLFxuICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3JlY3Zvbmx5JyxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpO1xuXG4gICAgICAgIC8vIFRPRE86IHJld3JpdGUgdG8gdXNlIGh0dHA6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jc2V0LWFzc29jaWF0ZWQtcmVtb3RlLXN0cmVhbXNcbiAgICAgICAgaWYgKHJ0cFJlY2VpdmVyICYmXG4gICAgICAgICAgICAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JykpIHtcbiAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrO1xuICAgICAgICAgIGlmIChyZW1vdGVNc2lkKSB7XG4gICAgICAgICAgICBpZiAoIXN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dKSB7XG4gICAgICAgICAgICAgIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkVHJhY2tUb1N0cmVhbUFuZEZpcmVFdmVudCh0cmFjaywgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0pO1xuICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV1dKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFzdHJlYW1zLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgc3RyZWFtcy5kZWZhdWx0ID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkVHJhY2tUb1N0cmVhbUFuZEZpcmVFdmVudCh0cmFjaywgc3RyZWFtcy5kZWZhdWx0KTtcbiAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbXMuZGVmYXVsdF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGSVhNRTogYWN0dWFsbHkgdGhlIHJlY2VpdmVyIHNob3VsZCBiZSBjcmVhdGVkIGxhdGVyLlxuICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHBjLl9kdGxzUm9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwYy5fZHRsc1JvbGUgPSBkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInID8gJ2FjdGl2ZScgOiAncGFzc2l2ZSc7XG4gICAgfVxuXG4gICAgcGMuX3JlbW90ZURlc2NyaXB0aW9uID0ge1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwXG4gICAgfTtcbiAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgcGMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdoYXZlLXJlbW90ZS1vZmZlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhzdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKHNpZCkge1xuICAgICAgdmFyIHN0cmVhbSA9IHN0cmVhbXNbc2lkXTtcbiAgICAgIGlmIChzdHJlYW0uZ2V0VHJhY2tzKCkubGVuZ3RoKSB7XG4gICAgICAgIGlmIChwYy5yZW1vdGVTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgICAgICBwYy5yZW1vdGVTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2FkZHN0cmVhbScpO1xuICAgICAgICAgIGV2ZW50LnN0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHBjLl9kaXNwYXRjaEV2ZW50KCdhZGRzdHJlYW0nLCBldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWNlaXZlckxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgdmFyIHRyYWNrID0gaXRlbVswXTtcbiAgICAgICAgICB2YXIgcmVjZWl2ZXIgPSBpdGVtWzFdO1xuICAgICAgICAgIGlmIChzdHJlYW0uaWQgIT09IGl0ZW1bMl0uaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmlyZUFkZFRyYWNrKHBjLCB0cmFjaywgcmVjZWl2ZXIsIFtzdHJlYW1dKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlyZUFkZFRyYWNrKHBjLCBpdGVtWzBdLCBpdGVtWzFdLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvLyBjaGVjayB3aGV0aGVyIGFkZEljZUNhbmRpZGF0ZSh7fSkgd2FzIGNhbGxlZCB3aXRoaW4gZm91ciBzZWNvbmRzIGFmdGVyXG4gICAgLy8gc2V0UmVtb3RlRGVzY3JpcHRpb24uXG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIShwYyAmJiBwYy50cmFuc2NlaXZlcnMpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignVGltZW91dCBmb3IgYWRkUmVtb3RlQ2FuZGlkYXRlLiBDb25zaWRlciBzZW5kaW5nICcgK1xuICAgICAgICAgICAgICAnYW4gZW5kLW9mLWNhbmRpZGF0ZXMgbm90aWZpY2F0aW9uJyk7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIDQwMDApO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIC8qIG5vdCB5ZXRcbiAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VHYXRoZXJlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5jbG9zZSgpO1xuICAgICAgfVxuICAgICAgKi9cbiAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0KSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjXG4gICAgdGhpcy5faXNDbG9zZWQgPSB0cnVlO1xuICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTtcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHNpZ25hbGluZyBzdGF0ZS5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9IGZ1bmN0aW9uKG5ld1N0YXRlKSB7XG4gICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9IG5ld1N0YXRlO1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnKTtcbiAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsIGV2ZW50KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBmaXJlIHRoZSBuZWdvdGlhdGlvbm5lZWRlZCBldmVudC5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYyA9IHRoaXM7XG4gICAgaWYgKHRoaXMuc2lnbmFsaW5nU3RhdGUgIT09ICdzdGFibGUnIHx8IHRoaXMubmVlZE5lZ290aWF0aW9uID09PSB0cnVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubmVlZE5lZ290aWF0aW9uID0gdHJ1ZTtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChwYy5uZWVkTmVnb3RpYXRpb24pIHtcbiAgICAgICAgcGMubmVlZE5lZ290aWF0aW9uID0gZmFsc2U7XG4gICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKTtcbiAgICAgICAgcGMuX2Rpc3BhdGNoRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJywgZXZlbnQpO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9O1xuXG4gIC8vIFVwZGF0ZSB0aGUgaWNlIGNvbm5lY3Rpb24gc3RhdGUuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG5ld1N0YXRlO1xuICAgIHZhciBzdGF0ZXMgPSB7XG4gICAgICAnbmV3JzogMCxcbiAgICAgIGNsb3NlZDogMCxcbiAgICAgIGNoZWNraW5nOiAwLFxuICAgICAgY29ubmVjdGVkOiAwLFxuICAgICAgY29tcGxldGVkOiAwLFxuICAgICAgZGlzY29ubmVjdGVkOiAwLFxuICAgICAgZmFpbGVkOiAwXG4gICAgfTtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ICYmICF0cmFuc2NlaXZlci5yZWplY3RlZCkge1xuICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlXSsrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbmV3U3RhdGUgPSAnbmV3JztcbiAgICBpZiAoc3RhdGVzLmZhaWxlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2ZhaWxlZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuY2hlY2tpbmcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdjaGVja2luZyc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuZGlzY29ubmVjdGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuY29tcGxldGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY29tcGxldGVkJztcbiAgICB9XG5cbiAgICBpZiAobmV3U3RhdGUgIT09IHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKSB7XG4gICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnKTtcbiAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9uIHN0YXRlLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTdGF0ZTtcbiAgICB2YXIgc3RhdGVzID0ge1xuICAgICAgJ25ldyc6IDAsXG4gICAgICBjbG9zZWQ6IDAsXG4gICAgICBjb25uZWN0aW5nOiAwLFxuICAgICAgY29ubmVjdGVkOiAwLFxuICAgICAgY29tcGxldGVkOiAwLFxuICAgICAgZGlzY29ubmVjdGVkOiAwLFxuICAgICAgZmFpbGVkOiAwXG4gICAgfTtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ICYmIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQgJiZcbiAgICAgICAgICAhdHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKztcbiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RhdGVdKys7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gSUNFVHJhbnNwb3J0LmNvbXBsZXRlZCBhbmQgY29ubmVjdGVkIGFyZSB0aGUgc2FtZSBmb3IgdGhpcyBwdXJwb3NlLlxuICAgIHN0YXRlcy5jb25uZWN0ZWQgKz0gc3RhdGVzLmNvbXBsZXRlZDtcblxuICAgIG5ld1N0YXRlID0gJ25ldyc7XG4gICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RpbmcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0aW5nJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5kaXNjb25uZWN0ZWQgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICdkaXNjb25uZWN0ZWQnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLm5ldyA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ25ldyc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGVkJztcbiAgICB9XG5cbiAgICBpZiAobmV3U3RhdGUgIT09IHRoaXMuY29ubmVjdGlvblN0YXRlKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnKTtcbiAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBjID0gdGhpcztcblxuICAgIGlmIChwYy5faXNDbG9zZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtYWtlRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yJyxcbiAgICAgICAgICAnQ2FuIG5vdCBjYWxsIGNyZWF0ZU9mZmVyIGFmdGVyIGNsb3NlJykpO1xuICAgIH1cblxuICAgIHZhciBudW1BdWRpb1RyYWNrcyA9IHBjLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQua2luZCA9PT0gJ2F1ZGlvJztcbiAgICB9KS5sZW5ndGg7XG4gICAgdmFyIG51bVZpZGVvVHJhY2tzID0gcGMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0KSB7XG4gICAgICByZXR1cm4gdC5raW5kID09PSAndmlkZW8nO1xuICAgIH0pLmxlbmd0aDtcblxuICAgIC8vIERldGVybWluZSBudW1iZXIgb2YgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyB3ZSBuZWVkIHRvIHNlbmQvcmVjdi5cbiAgICB2YXIgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChvZmZlck9wdGlvbnMpIHtcbiAgICAgIC8vIFJlamVjdCBDaHJvbWUgbGVnYWN5IGNvbnN0cmFpbnRzLlxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5tYW5kYXRvcnkgfHwgb2ZmZXJPcHRpb25zLm9wdGlvbmFsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAnTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLicpO1xuICAgICAgfVxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSB0cnVlKSB7XG4gICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSBmYWxzZSkge1xuICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IHRydWUpIHtcbiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgbnVtQXVkaW9UcmFja3MtLTtcbiAgICAgICAgaWYgKG51bUF1ZGlvVHJhY2tzIDwgMCkge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLndhbnRSZWNlaXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICBudW1WaWRlb1RyYWNrcy0tO1xuICAgICAgICBpZiAobnVtVmlkZW9UcmFja3MgPCAwKSB7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIud2FudFJlY2VpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIE0tbGluZXMgZm9yIHJlY3Zvbmx5IHN0cmVhbXMuXG4gICAgd2hpbGUgKG51bUF1ZGlvVHJhY2tzID4gMCB8fCBudW1WaWRlb1RyYWNrcyA+IDApIHtcbiAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA+IDApIHtcbiAgICAgICAgcGMuX2NyZWF0ZVRyYW5zY2VpdmVyKCdhdWRpbycpO1xuICAgICAgICBudW1BdWRpb1RyYWNrcy0tO1xuICAgICAgfVxuICAgICAgaWYgKG51bVZpZGVvVHJhY2tzID4gMCkge1xuICAgICAgICBwYy5fY3JlYXRlVHJhbnNjZWl2ZXIoJ3ZpZGVvJyk7XG4gICAgICAgIG51bVZpZGVvVHJhY2tzLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHBjLl9zZHBTZXNzaW9uSWQsXG4gICAgICAgIHBjLl9zZHBTZXNzaW9uVmVyc2lvbisrKTtcbiAgICBwYy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgLy8gRm9yIGVhY2ggdHJhY2ssIGNyZWF0ZSBhbiBpY2UgZ2F0aGVyZXIsIGljZSB0cmFuc3BvcnQsXG4gICAgICAvLyBkdGxzIHRyYW5zcG9ydCwgcG90ZW50aWFsbHkgcnRwc2VuZGVyIGFuZCBydHByZWNlaXZlci5cbiAgICAgIHZhciB0cmFjayA9IHRyYW5zY2VpdmVyLnRyYWNrO1xuICAgICAgdmFyIGtpbmQgPSB0cmFuc2NlaXZlci5raW5kO1xuICAgICAgdmFyIG1pZCA9IHRyYW5zY2VpdmVyLm1pZCB8fCBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTtcbiAgICAgIHRyYW5zY2VpdmVyLm1pZCA9IG1pZDtcblxuICAgICAgaWYgKCF0cmFuc2NlaXZlci5pY2VHYXRoZXJlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciA9IHBjLl9jcmVhdGVJY2VHYXRoZXJlcihzZHBNTGluZUluZGV4LFxuICAgICAgICAgICAgcGMudXNpbmdCdW5kbGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB3aW5kb3cuUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhraW5kKTtcbiAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZFxuICAgICAgLy8gaW4gYWRhcHRlci5qc1xuICAgICAgaWYgKGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHtcbiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzID0gbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHtcbiAgICAgICAgLy8gd29yayBhcm91bmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTY1NTJcbiAgICAgICAgLy8gYnkgYWRkaW5nIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTFcbiAgICAgICAgaWYgKGNvZGVjLm5hbWUgPT09ICdIMjY0JyAmJlxuICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9ICcxJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZvciBzdWJzZXF1ZW50IG9mZmVycywgd2UgbWlnaHQgaGF2ZSB0byByZS11c2UgdGhlIHBheWxvYWRcbiAgICAgICAgLy8gdHlwZSBvZiB0aGUgbGFzdCBvZmZlci5cbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyAmJlxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcykge1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihyZW1vdGVDb2RlYykge1xuICAgICAgICAgICAgaWYgKGNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcmVtb3RlQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpICYmXG4gICAgICAgICAgICAgICAgY29kZWMuY2xvY2tSYXRlID09PSByZW1vdGVDb2RlYy5jbG9ja1JhdGUpIHtcbiAgICAgICAgICAgICAgY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgPSByZW1vdGVDb2RlYy5wYXlsb2FkVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oaGRyRXh0KSB7XG4gICAgICAgIHZhciByZW1vdGVFeHRlbnNpb25zID0gdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucyB8fCBbXTtcbiAgICAgICAgcmVtb3RlRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHJIZHJFeHQpIHtcbiAgICAgICAgICBpZiAoaGRyRXh0LnVyaSA9PT0gckhkckV4dC51cmkpIHtcbiAgICAgICAgICAgIGhkckV4dC5pZCA9IHJIZHJFeHQuaWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBnZW5lcmF0ZSBhbiBzc3JjIG5vdywgdG8gYmUgdXNlZCBsYXRlciBpbiBydHBTZW5kZXIuc2VuZFxuICAgICAgdmFyIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzIHx8IFt7XG4gICAgICAgIHNzcmM6ICgyICogc2RwTUxpbmVJbmRleCArIDEpICogMTAwMVxuICAgICAgfV07XG4gICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgLy8gYWRkIFJUWFxuICAgICAgICBpZiAoZWRnZVZlcnNpb24gPj0gMTUwMTkgJiYga2luZCA9PT0gJ3ZpZGVvJyAmJlxuICAgICAgICAgICAgIXNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHggPSB7XG4gICAgICAgICAgICBzc3JjOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAxXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHJhbnNjZWl2ZXIud2FudFJlY2VpdmUpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIgPSBuZXcgd2luZG93LlJUQ1J0cFJlY2VpdmVyKFxuICAgICAgICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCwga2luZCk7XG4gICAgICB9XG5cbiAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzID0gbG9jYWxDYXBhYmlsaXRpZXM7XG4gICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICB9KTtcblxuICAgIC8vIGFsd2F5cyBvZmZlciBCVU5ETEUgYW5kIGRpc3Bvc2Ugb24gcmV0dXJuIGlmIG5vdCBzdXBwb3J0ZWQuXG4gICAgaWYgKHBjLl9jb25maWcuYnVuZGxlUG9saWN5ICE9PSAnbWF4LWNvbXBhdCcpIHtcbiAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHBjLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdC5taWQ7XG4gICAgICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcbiAgICB9XG4gICAgc2RwICs9ICdhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG4nO1xuXG4gICAgcGMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgIHNkcCArPSB3cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsXG4gICAgICAgICAgJ29mZmVyJywgdHJhbnNjZWl2ZXIuc3RyZWFtLCBwYy5fZHRsc1JvbGUpO1xuICAgICAgc2RwICs9ICdhPXJ0Y3AtcnNpemVcXHJcXG4nO1xuXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgJiYgcGMuaWNlR2F0aGVyaW5nU3RhdGUgIT09ICduZXcnICYmXG4gICAgICAgICAgKHNkcE1MaW5lSW5kZXggPT09IDAgfHwgIXBjLnVzaW5nQnVuZGxlKSkge1xuICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbENhbmRpZGF0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGNhbmQpIHtcbiAgICAgICAgICBjYW5kLmNvbXBvbmVudCA9IDE7XG4gICAgICAgICAgc2RwICs9ICdhPScgKyBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZShjYW5kKSArICdcXHJcXG4nO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgc2RwICs9ICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGRlc2MgPSBuZXcgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiAnb2ZmZXInLFxuICAgICAgc2RwOiBzZHBcbiAgICB9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGMgPSB0aGlzO1xuXG4gICAgaWYgKHBjLl9pc0Nsb3NlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICdDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGFmdGVyIGNsb3NlJykpO1xuICAgIH1cblxuICAgIGlmICghKHBjLnNpZ25hbGluZ1N0YXRlID09PSAnaGF2ZS1yZW1vdGUtb2ZmZXInIHx8XG4gICAgICAgIHBjLnNpZ25hbGluZ1N0YXRlID09PSAnaGF2ZS1sb2NhbC1wcmFuc3dlcicpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobWFrZUVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcicsXG4gICAgICAgICAgJ0NhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgaW4gc2lnbmFsaW5nU3RhdGUgJyArIHBjLnNpZ25hbGluZ1N0YXRlKSk7XG4gICAgfVxuXG4gICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHBjLl9zZHBTZXNzaW9uSWQsXG4gICAgICAgIHBjLl9zZHBTZXNzaW9uVmVyc2lvbisrKTtcbiAgICBpZiAocGMudXNpbmdCdW5kbGUpIHtcbiAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHBjLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdC5taWQ7XG4gICAgICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcbiAgICB9XG4gICAgc2RwICs9ICdhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG4nO1xuXG4gICAgdmFyIG1lZGlhU2VjdGlvbnNJbk9mZmVyID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhcbiAgICAgICAgcGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO1xuICAgIHBjLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICBpZiAoc2RwTUxpbmVJbmRleCArIDEgPiBtZWRpYVNlY3Rpb25zSW5PZmZlcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucmVqZWN0ZWQpIHtcbiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhcHBsaWNhdGlvbicpIHtcbiAgICAgICAgICBpZiAodHJhbnNjZWl2ZXIucHJvdG9jb2wgPT09ICdEVExTL1NDVFAnKSB7IC8vIGxlZ2FjeSBmbXRcbiAgICAgICAgICAgIHNkcCArPSAnbT1hcHBsaWNhdGlvbiAwIERUTFMvU0NUUCA1MDAwXFxyXFxuJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2RwICs9ICdtPWFwcGxpY2F0aW9uIDAgJyArIHRyYW5zY2VpdmVyLnByb3RvY29sICtcbiAgICAgICAgICAgICAgICAnIHdlYnJ0Yy1kYXRhY2hhbm5lbFxcclxcbic7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICBzZHAgKz0gJ209YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXFxyXFxuJyArXG4gICAgICAgICAgICAgICdhPXJ0cG1hcDowIFBDTVUvODAwMFxcclxcbic7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgIHNkcCArPSAnbT12aWRlbyAwIFVEUC9UTFMvUlRQL1NBVlBGIDEyMFxcclxcbicgK1xuICAgICAgICAgICAgICAnYT1ydHBtYXA6MTIwIFZQOC85MDAwMFxcclxcbic7XG4gICAgICAgIH1cbiAgICAgICAgc2RwICs9ICdjPUlOIElQNCAwLjAuMC4wXFxyXFxuJyArXG4gICAgICAgICAgICAnYT1pbmFjdGl2ZVxcclxcbicgK1xuICAgICAgICAgICAgJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXFxyXFxuJztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBGSVhNRTogbG9vayBhdCBkaXJlY3Rpb24uXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuc3RyZWFtKSB7XG4gICAgICAgIHZhciBsb2NhbFRyYWNrO1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgIGxvY2FsVHJhY2sgPSB0cmFuc2NlaXZlci5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgbG9jYWxUcmFjayA9IHRyYW5zY2VpdmVyLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhbFRyYWNrKSB7XG4gICAgICAgICAgLy8gYWRkIFJUWFxuICAgICAgICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAxOSAmJiB0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nICYmXG4gICAgICAgICAgICAgICF0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHggPSB7XG4gICAgICAgICAgICAgIHNzcmM6IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArIDFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLlxuICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhcbiAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpO1xuXG4gICAgICB2YXIgaGFzUnR4ID0gY29tbW9uQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oYykge1xuICAgICAgICByZXR1cm4gYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdydHgnO1xuICAgICAgfSkubGVuZ3RoO1xuICAgICAgaWYgKCFoYXNSdHggJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4O1xuICAgICAgfVxuXG4gICAgICBzZHAgKz0gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNvbW1vbkNhcGFiaWxpdGllcyxcbiAgICAgICAgICAnYW5zd2VyJywgdHJhbnNjZWl2ZXIuc3RyZWFtLCBwYy5fZHRsc1JvbGUpO1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzICYmXG4gICAgICAgICAgdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUpIHtcbiAgICAgICAgc2RwICs9ICdhPXJ0Y3AtcnNpemVcXHJcXG4nO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGRlc2MgPSBuZXcgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgIHNkcDogc2RwXG4gICAgfSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgdmFyIHBjID0gdGhpcztcbiAgICB2YXIgc2VjdGlvbnM7XG4gICAgaWYgKGNhbmRpZGF0ZSAmJiAhKGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgY2FuZGlkYXRlLnNkcE1pZCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZCcpKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBuZWVkcyB0byBnbyBpbnRvIG9wcyBxdWV1ZS5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAoIXBjLl9yZW1vdGVEZXNjcmlwdGlvbikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KG1ha2VFcnJvcignSW52YWxpZFN0YXRlRXJyb3InLFxuICAgICAgICAgICAgJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUgd2l0aG91dCBhIHJlbW90ZSBkZXNjcmlwdGlvbicpKTtcbiAgICAgIH0gZWxzZSBpZiAoIWNhbmRpZGF0ZSB8fCBjYW5kaWRhdGUuY2FuZGlkYXRlID09PSAnJykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBjLnRyYW5zY2VpdmVycy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGlmIChwYy50cmFuc2NlaXZlcnNbal0ucmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYy50cmFuc2NlaXZlcnNbal0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7XG4gICAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zKHBjLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApO1xuICAgICAgICAgIHNlY3Rpb25zW2pdICs9ICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgICAgICBwYy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwID1cbiAgICAgICAgICAgICAgU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24ocGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkgK1xuICAgICAgICAgICAgICBzZWN0aW9ucy5qb2luKCcnKTtcbiAgICAgICAgICBpZiAocGMudXNpbmdCdW5kbGUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNkcE1MaW5lSW5kZXggPSBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleDtcbiAgICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjLnRyYW5zY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHBjLnRyYW5zY2VpdmVyc1tpXS5taWQgPT09IGNhbmRpZGF0ZS5zZHBNaWQpIHtcbiAgICAgICAgICAgICAgc2RwTUxpbmVJbmRleCA9IGk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBwYy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07XG4gICAgICAgIGlmICh0cmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmICh0cmFuc2NlaXZlci5yZWplY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNhbmQgPSBPYmplY3Qua2V5cyhjYW5kaWRhdGUuY2FuZGlkYXRlKS5sZW5ndGggPiAwID9cbiAgICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZGlkYXRlLmNhbmRpZGF0ZSkgOiB7fTtcbiAgICAgICAgICAvLyBJZ25vcmUgQ2hyb21lJ3MgaW52YWxpZCBjYW5kaWRhdGVzIHNpbmNlIEVkZ2UgZG9lcyBub3QgbGlrZSB0aGVtLlxuICAgICAgICAgIGlmIChjYW5kLnByb3RvY29sID09PSAndGNwJyAmJiAoY2FuZC5wb3J0ID09PSAwIHx8IGNhbmQucG9ydCA9PT0gOSkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC5cbiAgICAgICAgICBpZiAoY2FuZC5jb21wb25lbnQgJiYgY2FuZC5jb21wb25lbnQgIT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHdoZW4gdXNpbmcgYnVuZGxlLCBhdm9pZCBhZGRpbmcgY2FuZGlkYXRlcyB0byB0aGUgd3JvbmdcbiAgICAgICAgICAvLyBpY2UgdHJhbnNwb3J0LiBBbmQgYXZvaWQgYWRkaW5nIGNhbmRpZGF0ZXMgYWRkZWQgaW4gdGhlIFNEUC5cbiAgICAgICAgICBpZiAoc2RwTUxpbmVJbmRleCA9PT0gMCB8fCAoc2RwTUxpbmVJbmRleCA+IDAgJiZcbiAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ICE9PSBwYy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0KSkge1xuICAgICAgICAgICAgaWYgKCFtYXliZUFkZENhbmRpZGF0ZSh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQsIGNhbmQpKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZWplY3QobWFrZUVycm9yKCdPcGVyYXRpb25FcnJvcicsXG4gICAgICAgICAgICAgICAgICAnQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlbW90ZURlc2NyaXB0aW9uLlxuICAgICAgICAgIHZhciBjYW5kaWRhdGVTdHJpbmcgPSBjYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKTtcbiAgICAgICAgICBpZiAoY2FuZGlkYXRlU3RyaW5nLmluZGV4T2YoJ2E9JykgPT09IDApIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZVN0cmluZyA9IGNhbmRpZGF0ZVN0cmluZy5zdWJzdHIoMik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuZ2V0TWVkaWFTZWN0aW9ucyhwYy5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgICAgICBzZWN0aW9uc1tzZHBNTGluZUluZGV4XSArPSAnYT0nICtcbiAgICAgICAgICAgICAgKGNhbmQudHlwZSA/IGNhbmRpZGF0ZVN0cmluZyA6ICdlbmQtb2YtY2FuZGlkYXRlcycpXG4gICAgICAgICAgICAgICsgJ1xcclxcbic7XG4gICAgICAgICAgcGMuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCA9XG4gICAgICAgICAgICAgIFNEUFV0aWxzLmdldERlc2NyaXB0aW9uKHBjLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApICtcbiAgICAgICAgICAgICAgc2VjdGlvbnMuam9pbignJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdChtYWtlRXJyb3IoJ09wZXJhdGlvbkVycm9yJyxcbiAgICAgICAgICAgICAgJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgIGlmIChzZWxlY3RvciAmJiBzZWxlY3RvciBpbnN0YW5jZW9mIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrKSB7XG4gICAgICB2YXIgc2VuZGVyT3JSZWNlaXZlciA9IG51bGw7XG4gICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjayA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICBzZW5kZXJPclJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICAgICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci50cmFjayA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICBzZW5kZXJPclJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFzZW5kZXJPclJlY2VpdmVyKSB7XG4gICAgICAgIHRocm93IG1ha2VFcnJvcignSW52YWxpZEFjY2Vzc0Vycm9yJywgJ0ludmFsaWQgc2VsZWN0b3IuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VuZGVyT3JSZWNlaXZlci5nZXRTdGF0cygpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIFsncnRwU2VuZGVyJywgJ3J0cFJlY2VpdmVyJywgJ2ljZUdhdGhlcmVyJywgJ2ljZVRyYW5zcG9ydCcsXG4gICAgICAgICAgJ2R0bHNUcmFuc3BvcnQnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHtcbiAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0cmFuc2NlaXZlclttZXRob2RdLmdldFN0YXRzKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhbGxTdGF0cykge1xuICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgTWFwKCk7XG4gICAgICBhbGxTdGF0cy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXRzKSB7XG4gICAgICAgIHN0YXRzLmZvckVhY2goZnVuY3Rpb24oc3RhdCkge1xuICAgICAgICAgIHJlc3VsdHMuc2V0KHN0YXQuaWQsIHN0YXQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gZml4IGxvdy1sZXZlbCBzdGF0IG5hbWVzIGFuZCByZXR1cm4gTWFwIGluc3RlYWQgb2Ygb2JqZWN0LlxuICB2YXIgb3J0Y09iamVjdHMgPSBbJ1JUQ1J0cFNlbmRlcicsICdSVENSdHBSZWNlaXZlcicsICdSVENJY2VHYXRoZXJlcicsXG4gICAgJ1JUQ0ljZVRyYW5zcG9ydCcsICdSVENEdGxzVHJhbnNwb3J0J107XG4gIG9ydGNPYmplY3RzLmZvckVhY2goZnVuY3Rpb24ob3J0Y09iamVjdE5hbWUpIHtcbiAgICB2YXIgb2JqID0gd2luZG93W29ydGNPYmplY3ROYW1lXTtcbiAgICBpZiAob2JqICYmIG9iai5wcm90b3R5cGUgJiYgb2JqLnByb3RvdHlwZS5nZXRTdGF0cykge1xuICAgICAgdmFyIG5hdGl2ZUdldHN0YXRzID0gb2JqLnByb3RvdHlwZS5nZXRTdGF0cztcbiAgICAgIG9iai5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZUdldHN0YXRzLmFwcGx5KHRoaXMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKG5hdGl2ZVN0YXRzKSB7XG4gICAgICAgICAgdmFyIG1hcFN0YXRzID0gbmV3IE1hcCgpO1xuICAgICAgICAgIE9iamVjdC5rZXlzKG5hdGl2ZVN0YXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICBuYXRpdmVTdGF0c1tpZF0udHlwZSA9IGZpeFN0YXRzVHlwZShuYXRpdmVTdGF0c1tpZF0pO1xuICAgICAgICAgICAgbWFwU3RhdHMuc2V0KGlkLCBuYXRpdmVTdGF0c1tpZF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBtYXBTdGF0cztcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gbGVnYWN5IGNhbGxiYWNrIHNoaW1zLiBTaG91bGQgYmUgbW92ZWQgdG8gYWRhcHRlci5qcyBzb21lIGRheXMuXG4gIHZhciBtZXRob2RzID0gWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXTtcbiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgICB0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBsZWdhY3lcbiAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBbYXJndW1lbnRzWzJdXSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NyaXB0aW9uXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsLCBbZXJyb3JdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xuXG4gIG1ldGhvZHMgPSBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ107XG4gIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICB2YXIgbmF0aXZlTWV0aG9kID0gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICAgdHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHsgLy8gbGVnYWN5XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1syXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXJnc1syXS5hcHBseShudWxsLCBbZXJyb3JdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIGdldFN0YXRzIGlzIHNwZWNpYWwuIEl0IGRvZXNuJ3QgaGF2ZSBhIHNwZWMgbGVnYWN5IG1ldGhvZCB5ZXQgd2Ugc3VwcG9ydFxuICAvLyBnZXRTdGF0cyhzb21ldGhpbmcsIGNiKSB3aXRob3V0IGVycm9yIGNhbGxiYWNrcy5cbiAgWydnZXRTdGF0cyddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmICh0eXBlb2YgYXJnc1sxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIFJUQ1BlZXJDb25uZWN0aW9uO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js\n");

/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* eslint-env node */\n\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (true) {\n  module.exports = SDPUtils;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy9zZHAvc2RwLmpzP2NiNTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQjtBQUNwQiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pELGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTCxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQixPQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQkFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLElBQTBCO0FBQzlCO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc2RwL3NkcC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBTRFAgaGVscGVycy5cbnZhciBTRFBVdGlscyA9IHt9O1xuXG4vLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy5cbi8vIFRPRE86IHVzZSBVVUlEcyBpbnN0ZWFkPyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZWQvOTgyODgzXG5TRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7XG59O1xuXG4vLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy5cblNEUFV0aWxzLmxvY2FsQ05hbWUgPSBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTtcblxuLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi5cblNEUFV0aWxzLnNwbGl0TGluZXMgPSBmdW5jdGlvbihibG9iKSB7XG4gIHJldHVybiBibG9iLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICByZXR1cm4gbGluZS50cmltKCk7XG4gIH0pO1xufTtcbi8vIFNwbGl0cyBTRFAgaW50byBzZXNzaW9ucGFydCBhbmQgbWVkaWFzZWN0aW9ucy4gRW5zdXJlcyBDUkxGLlxuU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgdmFyIHBhcnRzID0gYmxvYi5zcGxpdCgnXFxubT0nKTtcbiAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xuICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXFxyXFxuJztcbiAgfSk7XG59O1xuXG4vLyByZXR1cm5zIHRoZSBzZXNzaW9uIGRlc2NyaXB0aW9uLlxuU0RQVXRpbHMuZ2V0RGVzY3JpcHRpb24gPSBmdW5jdGlvbihibG9iKSB7XG4gIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7XG4gIHJldHVybiBzZWN0aW9ucyAmJiBzZWN0aW9uc1swXTtcbn07XG5cbi8vIHJldHVybnMgdGhlIGluZGl2aWR1YWwgbWVkaWEgc2VjdGlvbnMuXG5TRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikge1xuICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGJsb2IpO1xuICBzZWN0aW9ucy5zaGlmdCgpO1xuICByZXR1cm4gc2VjdGlvbnM7XG59O1xuXG4vLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LlxuU0RQVXRpbHMubWF0Y2hQcmVmaXggPSBmdW5jdGlvbihibG9iLCBwcmVmaXgpIHtcbiAgcmV0dXJuIFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYikuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7XG4gIH0pO1xufTtcblxuLy8gUGFyc2VzIGFuIElDRSBjYW5kaWRhdGUgbGluZS4gU2FtcGxlIGlucHV0OlxuLy8gY2FuZGlkYXRlOjcwMjc4NjM1MCAyIHVkcCA0MTgxOTkwMiA4LjguOC44IDYwNzY5IHR5cCByZWxheSByYWRkciA4LjguOC44XG4vLyBycG9ydCA1NTk5NlwiXG5TRFBVdGlscy5wYXJzZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzO1xuICAvLyBQYXJzZSBib3RoIHZhcmlhbnRzLlxuICBpZiAobGluZS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7XG4gIH0gZWxzZSB7XG4gICAgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMCkuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIHZhciBjYW5kaWRhdGUgPSB7XG4gICAgZm91bmRhdGlvbjogcGFydHNbMF0sXG4gICAgY29tcG9uZW50OiBwYXJzZUludChwYXJ0c1sxXSwgMTApLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXS50b0xvd2VyQ2FzZSgpLFxuICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLFxuICAgIGlwOiBwYXJ0c1s0XSxcbiAgICBhZGRyZXNzOiBwYXJ0c1s0XSwgLy8gYWRkcmVzcyBpcyBhbiBhbGlhcyBmb3IgaXAuXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSxcbiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnXG4gICAgdHlwZTogcGFydHNbN11cbiAgfTtcblxuICBmb3IgKHZhciBpID0gODsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgc3dpdGNoIChwYXJ0c1tpXSkge1xuICAgICAgY2FzZSAncmFkZHInOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncnBvcnQnOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQgPSBwYXJzZUludChwYXJ0c1tpICsgMV0sIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Y3B0eXBlJzpcbiAgICAgICAgY2FuZGlkYXRlLnRjcFR5cGUgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndWZyYWcnOlxuICAgICAgICBjYW5kaWRhdGUudWZyYWcgPSBwYXJ0c1tpICsgMV07IC8vIGZvciBiYWNrd2FyZCBjb21wYWJpbGl0eS5cbiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gZXh0ZW5zaW9uIGhhbmRsaW5nLCBpbiBwYXJ0aWN1bGFyIHVmcmFnXG4gICAgICAgIGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufTtcblxuLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS5cblNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gIHZhciBzZHAgPSBbXTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pO1xuICBzZHAucHVzaChjYW5kaWRhdGUuY29tcG9uZW50KTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUuYWRkcmVzcyB8fCBjYW5kaWRhdGUuaXApO1xuICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7XG5cbiAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTtcbiAgc2RwLnB1c2goJ3R5cCcpO1xuICBzZHAucHVzaCh0eXBlKTtcbiAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiZcbiAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkge1xuICAgIHNkcC5wdXNoKCdyYWRkcicpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7XG4gICAgc2RwLnB1c2goJ3Jwb3J0Jyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRQb3J0KTtcbiAgfVxuICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7XG4gICAgc2RwLnB1c2goJ3RjcHR5cGUnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUudGNwVHlwZSk7XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZykge1xuICAgIHNkcC5wdXNoKCd1ZnJhZycpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50IHx8IGNhbmRpZGF0ZS51ZnJhZyk7XG4gIH1cbiAgcmV0dXJuICdjYW5kaWRhdGU6JyArIHNkcC5qb2luKCcgJyk7XG59O1xuXG4vLyBQYXJzZXMgYW4gaWNlLW9wdGlvbnMgbGluZSwgcmV0dXJucyBhbiBhcnJheSBvZiBvcHRpb24gdGFncy5cbi8vIGE9aWNlLW9wdGlvbnM6Zm9vIGJhclxuU0RQVXRpbHMucGFyc2VJY2VPcHRpb25zID0gZnVuY3Rpb24obGluZSkge1xuICByZXR1cm4gbGluZS5zdWJzdHIoMTQpLnNwbGl0KCcgJyk7XG59O1xuXG4vLyBQYXJzZXMgYW4gcnRwbWFwIGxpbmUsIHJldHVybnMgUlRDUnRwQ29kZGVjUGFyYW1ldGVycy4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydHBtYXA6MTExIG9wdXMvNDgwMDAvMlxuU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDkpLnNwbGl0KCcgJyk7XG4gIHZhciBwYXJzZWQgPSB7XG4gICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkXG4gIH07XG5cbiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpO1xuXG4gIHBhcnNlZC5uYW1lID0gcGFydHNbMF07XG4gIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZVxuICBwYXJzZWQuY2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTtcbiAgLy8gbGVnYWN5IGFsaWFzLCBnb3QgcmVuYW1lZCBiYWNrIHRvIGNoYW5uZWxzIGluIE9SVEMuXG4gIHBhcnNlZC5udW1DaGFubmVscyA9IHBhcnNlZC5jaGFubmVscztcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3Jcbi8vIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIHB0ID0gY29kZWMucGF5bG9hZFR5cGU7XG4gIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgfVxuICB2YXIgY2hhbm5lbHMgPSBjb2RlYy5jaGFubmVscyB8fCBjb2RlYy5udW1DaGFubmVscyB8fCAxO1xuICByZXR1cm4gJ2E9cnRwbWFwOicgKyBwdCArICcgJyArIGNvZGVjLm5hbWUgKyAnLycgKyBjb2RlYy5jbG9ja1JhdGUgK1xuICAgICAgKGNoYW5uZWxzICE9PSAxID8gJy8nICsgY2hhbm5lbHMgOiAnJykgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyBhbiBhPWV4dG1hcCBsaW5lIChoZWFkZXJleHRlbnNpb24gZnJvbSBSRkMgNTI4NSkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuLy8gYT1leHRtYXA6Mi9zZW5kb25seSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG5TRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBkaXJlY3Rpb246IHBhcnRzWzBdLmluZGV4T2YoJy8nKSA+IDAgPyBwYXJ0c1swXS5zcGxpdCgnLycpWzFdIDogJ3NlbmRyZWN2JyxcbiAgICB1cmk6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBHZW5lcmF0ZXMgYT1leHRtYXAgbGluZSBmcm9tIFJUQ1J0cEhlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgb3Jcbi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi5cblNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24oaGVhZGVyRXh0ZW5zaW9uKSB7XG4gIHJldHVybiAnYT1leHRtYXA6JyArIChoZWFkZXJFeHRlbnNpb24uaWQgfHwgaGVhZGVyRXh0ZW5zaW9uLnByZWZlcnJlZElkKSArXG4gICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnXG4gICAgICAgID8gJy8nICsgaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvblxuICAgICAgICA6ICcnKSArXG4gICAgICAnICcgKyBoZWFkZXJFeHRlbnNpb24udXJpICsgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYW4gZnRtcCBsaW5lLCByZXR1cm5zIGRpY3Rpb25hcnkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9Zm10cDo5NiB2YnI9b247Y25nPW9uXG4vLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b25cblNEUFV0aWxzLnBhcnNlRm10cCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga3Y7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJzsnKTtcbiAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgcGFyc2VkW2t2WzBdLnRyaW0oKV0gPSBrdlsxXTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlRm10cCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIHZhciBsaW5lID0gJyc7XG4gIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykubGVuZ3RoKSB7XG4gICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgIGlmIChjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSkge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGFuIHJ0Y3AtZmIgbGluZSwgcmV0dXJucyBSVENQUnRjcEZlZWRiYWNrIG9iamVjdC4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaVxuU0RQVXRpbHMucGFyc2VSdGNwRmIgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBwYXJ0cy5zaGlmdCgpLFxuICAgIHBhcmFtZXRlcjogcGFydHMuam9pbignICcpXG4gIH07XG59O1xuLy8gR2VuZXJhdGUgYT1ydGNwLWZiIGxpbmVzIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIGxpbmVzID0gJyc7XG4gIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7XG4gICAgLy8gRklYTUU6IHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyci1pbnQ/XG4gICAgY29kZWMucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24oZmIpIHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OlxuLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nXG5TRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7XG4gIHZhciBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMClcbiAgfTtcbiAgdmFyIGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApO1xuICBpZiAoY29sb24gPiAtMSkge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSwgY29sb24gLSBzcCAtIDEpO1xuICAgIHBhcnRzLnZhbHVlID0gbGluZS5zdWJzdHIoY29sb24gKyAxKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn07XG5cblNEUFV0aWxzLnBhcnNlU3NyY0dyb3VwID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cigxMykuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBzZW1hbnRpY3M6IHBhcnRzLnNoaWZ0KCksXG4gICAgc3NyY3M6IHBhcnRzLm1hcChmdW5jdGlvbihzc3JjKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoc3NyYywgMTApO1xuICAgIH0pXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyB0aGUgTUlEIChSRkMgNTg4OCkgZnJvbSBhIG1lZGlhIHNlY3Rpb24uXG4vLyByZXR1cm5zIHRoZSBNSUQgb3IgdW5kZWZpbmVkIGlmIG5vIG1pZCBsaW5lIHdhcyBmb3VuZC5cblNEUFV0aWxzLmdldE1pZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgbWlkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1taWQ6JylbMF07XG4gIGlmIChtaWQpIHtcbiAgICByZXR1cm4gbWlkLnN1YnN0cig2KTtcbiAgfVxufTtcblxuU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoMTQpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgYWxnb3JpdGhtOiBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpLCAvLyBhbGdvcml0aG0gaXMgY2FzZS1zZW5zaXRpdmUgaW4gRWRnZS5cbiAgICB2YWx1ZTogcGFydHNbMV1cbiAgfTtcbn07XG5cbi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgZmluZ2VycHJpbnQgbGluZSBhcyBpbnB1dC4gU2VlIGFsc28gZ2V0SWNlUGFyYW1ldGVycy5cblNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICB2YXIgbGluZXMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24gKyBzZXNzaW9ucGFydCxcbiAgICAnYT1maW5nZXJwcmludDonKTtcbiAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZS5cbiAgLy8gTm90ZTI6ICdhbGdvcml0aG0nIGlzIG5vdCBjYXNlIHNlbnNpdGl2ZSBleGNlcHQgaW4gRWRnZS5cbiAgcmV0dXJuIHtcbiAgICByb2xlOiAnYXV0bycsXG4gICAgZmluZ2VycHJpbnRzOiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludClcbiAgfTtcbn07XG5cbi8vIFNlcmlhbGl6ZXMgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkge1xuICB2YXIgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcXHJcXG4nO1xuICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24oZnApIHtcbiAgICBzZHAgKz0gJ2E9ZmluZ2VycHJpbnQ6JyArIGZwLmFsZ29yaXRobSArICcgJyArIGZwLnZhbHVlICsgJ1xcclxcbic7XG4gIH0pO1xuICByZXR1cm4gc2RwO1xufTtcblxuLy8gUGFyc2VzIGE9Y3J5cHRvIGxpbmVzIGludG9cbi8vICAgaHR0cHM6Ly9yYXdnaXQuY29tL2Fib2JhL2VkZ2VydGMvbWFzdGVyL21zb3J0Yy1yczQuaHRtbCNkaWN0aW9uYXJ5LXJ0Y3NydHBzZGVzcGFyYW1ldGVycy1tZW1iZXJzXG5TRFBVdGlscy5wYXJzZUNyeXB0b0xpbmUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDkpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdGFnOiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgIGNyeXB0b1N1aXRlOiBwYXJ0c1sxXSxcbiAgICBrZXlQYXJhbXM6IHBhcnRzWzJdLFxuICAgIHNlc3Npb25QYXJhbXM6IHBhcnRzLnNsaWNlKDMpLFxuICB9O1xufTtcblxuU0RQVXRpbHMud3JpdGVDcnlwdG9MaW5lID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICByZXR1cm4gJ2E9Y3J5cHRvOicgKyBwYXJhbWV0ZXJzLnRhZyArICcgJyArXG4gICAgcGFyYW1ldGVycy5jcnlwdG9TdWl0ZSArICcgJyArXG4gICAgKHR5cGVvZiBwYXJhbWV0ZXJzLmtleVBhcmFtcyA9PT0gJ29iamVjdCdcbiAgICAgID8gU0RQVXRpbHMud3JpdGVDcnlwdG9LZXlQYXJhbXMocGFyYW1ldGVycy5rZXlQYXJhbXMpXG4gICAgICA6IHBhcmFtZXRlcnMua2V5UGFyYW1zKSArXG4gICAgKHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcyA/ICcgJyArIHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcy5qb2luKCcgJykgOiAnJykgK1xuICAgICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBjcnlwdG8ga2V5IHBhcmFtZXRlcnMgaW50b1xuLy8gICBodHRwczovL3Jhd2dpdC5jb20vYWJvYmEvZWRnZXJ0Yy9tYXN0ZXIvbXNvcnRjLXJzNC5odG1sI3J0Y3NydHBrZXlwYXJhbSpcblNEUFV0aWxzLnBhcnNlQ3J5cHRvS2V5UGFyYW1zID0gZnVuY3Rpb24oa2V5UGFyYW1zKSB7XG4gIGlmIChrZXlQYXJhbXMuaW5kZXhPZignaW5saW5lOicpICE9PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHBhcnRzID0ga2V5UGFyYW1zLnN1YnN0cig3KS5zcGxpdCgnfCcpO1xuICByZXR1cm4ge1xuICAgIGtleU1ldGhvZDogJ2lubGluZScsXG4gICAga2V5U2FsdDogcGFydHNbMF0sXG4gICAgbGlmZVRpbWU6IHBhcnRzWzFdLFxuICAgIG1raVZhbHVlOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMF0gOiB1bmRlZmluZWQsXG4gICAgbWtpTGVuZ3RoOiBwYXJ0c1syXSA/IHBhcnRzWzJdLnNwbGl0KCc6JylbMV0gOiB1bmRlZmluZWQsXG4gIH07XG59O1xuXG5TRFBVdGlscy53cml0ZUNyeXB0b0tleVBhcmFtcyA9IGZ1bmN0aW9uKGtleVBhcmFtcykge1xuICByZXR1cm4ga2V5UGFyYW1zLmtleU1ldGhvZCArICc6J1xuICAgICsga2V5UGFyYW1zLmtleVNhbHQgK1xuICAgIChrZXlQYXJhbXMubGlmZVRpbWUgPyAnfCcgKyBrZXlQYXJhbXMubGlmZVRpbWUgOiAnJykgK1xuICAgIChrZXlQYXJhbXMubWtpVmFsdWUgJiYga2V5UGFyYW1zLm1raUxlbmd0aFxuICAgICAgPyAnfCcgKyBrZXlQYXJhbXMubWtpVmFsdWUgKyAnOicgKyBrZXlQYXJhbXMubWtpTGVuZ3RoXG4gICAgICA6ICcnKTtcbn07XG5cbi8vIEV4dHJhY3RzIGFsbCBTREVTIHBhcmFtdGVycy5cblNEUFV0aWxzLmdldENyeXB0b1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWNyeXB0bzonKTtcbiAgcmV0dXJuIGxpbmVzLm1hcChTRFBVdGlscy5wYXJzZUNyeXB0b0xpbmUpO1xufTtcblxuLy8gUGFyc2VzIElDRSBpbmZvcm1hdGlvbiBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LlxuU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgdmFyIHVmcmFnID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9aWNlLXVmcmFnOicpWzBdO1xuICB2YXIgcHdkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9aWNlLXB3ZDonKVswXTtcbiAgaWYgKCEodWZyYWcgJiYgcHdkKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWVGcmFnbWVudDogdWZyYWcuc3Vic3RyKDEyKSxcbiAgICBwYXNzd29yZDogcHdkLnN1YnN0cigxMCksXG4gIH07XG59O1xuXG4vLyBTZXJpYWxpemVzIElDRSBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICByZXR1cm4gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcXHJcXG4nICtcbiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBkZXNjcmlwdGlvbiA9IHtcbiAgICBjb2RlY3M6IFtdLFxuICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLFxuICAgIGZlY01lY2hhbmlzbXM6IFtdLFxuICAgIHJ0Y3A6IFtdXG4gIH07XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dXG4gICAgdmFyIHB0ID0gbWxpbmVbaV07XG4gICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRwbWFwOicgKyBwdCArICcgJylbMF07XG4gICAgaWYgKHJ0cG1hcGxpbmUpIHtcbiAgICAgIHZhciBjb2RlYyA9IFNEUFV0aWxzLnBhcnNlUnRwTWFwKHJ0cG1hcGxpbmUpO1xuICAgICAgdmFyIGZtdHBzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9Zm10cDonICsgcHQgKyAnICcpO1xuICAgICAgLy8gT25seSB0aGUgZmlyc3QgYT1mbXRwOjxwdD4gaXMgY29uc2lkZXJlZC5cbiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307XG4gICAgICBjb2RlYy5ydGNwRmVlZGJhY2sgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJylcbiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7XG4gICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy5cbiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ1JFRCc6XG4gICAgICAgIGNhc2UgJ1VMUEZFQyc6XG4gICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7XG4gIH0pO1xuICAvLyBGSVhNRTogcGFyc2UgcnRjcC5cbiAgcmV0dXJuIGRlc2NyaXB0aW9uO1xufTtcblxuLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgL1xuLy8gcGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7XG4gIHZhciBzZHAgPSAnJztcblxuICAvLyBCdWlsZCB0aGUgbWxpbmUuXG4gIHNkcCArPSAnbT0nICsga2luZCArICcgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuXG4gIHNkcCArPSAnIFVEUC9UTFMvUlRQL1NBVlBGICc7XG4gIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7XG4gIH0pLmpvaW4oJyAnKSArICdcXHJcXG4nO1xuXG4gIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbic7XG4gIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuXG4gIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLlxuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpO1xuICB9KTtcbiAgdmFyIG1heHB0aW1lID0gMDtcbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykge1xuICAgIGlmIChjb2RlYy5tYXhwdGltZSA+IG1heHB0aW1lKSB7XG4gICAgICBtYXhwdGltZSA9IGNvZGVjLm1heHB0aW1lO1xuICAgIH1cbiAgfSk7XG4gIGlmIChtYXhwdGltZSA+IDApIHtcbiAgICBzZHAgKz0gJ2E9bWF4cHRpbWU6JyArIG1heHB0aW1lICsgJ1xcclxcbic7XG4gIH1cbiAgc2RwICs9ICdhPXJ0Y3AtbXV4XFxyXFxuJztcblxuICBpZiAoY2Fwcy5oZWFkZXJFeHRlbnNpb25zKSB7XG4gICAgY2Fwcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTtcbiAgICB9KTtcbiAgfVxuICAvLyBGSVhNRTogd3JpdGUgZmVjTWVjaGFuaXNtcy5cbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2Zcbi8vIFJUQ1J0cEVuY29kaW5nUGFyYW1ldGVycy5cblNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTtcbiAgdmFyIGRlc2NyaXB0aW9uID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG4gIHZhciBoYXNSZWQgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1JFRCcpICE9PSAtMTtcbiAgdmFyIGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xO1xuXG4gIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWRcbiAgdmFyIHNzcmNzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpXG4gICAgLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7XG4gICAgfSlcbiAgICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnY25hbWUnO1xuICAgIH0pO1xuICB2YXIgcHJpbWFyeVNzcmMgPSBzc3Jjcy5sZW5ndGggPiAwICYmIHNzcmNzWzBdLnNzcmM7XG4gIHZhciBzZWNvbmRhcnlTc3JjO1xuXG4gIHZhciBmbG93cyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYy1ncm91cDpGSUQnKVxuICAgIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoMTcpLnNwbGl0KCcgJyk7XG4gICAgICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uKHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICBpZiAoZmxvd3MubGVuZ3RoID4gMCAmJiBmbG93c1swXS5sZW5ndGggPiAxICYmIGZsb3dzWzBdWzBdID09PSBwcmltYXJ5U3NyYykge1xuICAgIHNlY29uZGFyeVNzcmMgPSBmbG93c1swXVsxXTtcbiAgfVxuXG4gIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgaWYgKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1JUWCcgJiYgY29kZWMucGFyYW1ldGVycy5hcHQpIHtcbiAgICAgIHZhciBlbmNQYXJhbSA9IHtcbiAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgICAgIGNvZGVjUGF5bG9hZFR5cGU6IHBhcnNlSW50KGNvZGVjLnBhcmFtZXRlcnMuYXB0LCAxMClcbiAgICAgIH07XG4gICAgICBpZiAocHJpbWFyeVNzcmMgJiYgc2Vjb25kYXJ5U3NyYykge1xuICAgICAgICBlbmNQYXJhbS5ydHggPSB7c3NyYzogc2Vjb25kYXJ5U3NyY307XG4gICAgICB9XG4gICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICBpZiAoaGFzUmVkKSB7XG4gICAgICAgIGVuY1BhcmFtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbmNQYXJhbSkpO1xuICAgICAgICBlbmNQYXJhbS5mZWMgPSB7XG4gICAgICAgICAgc3NyYzogcHJpbWFyeVNzcmMsXG4gICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJ1xuICAgICAgICB9O1xuICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHtcbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7XG4gICAgICBzc3JjOiBwcmltYXJ5U3NyY1xuICAgIH0pO1xuICB9XG5cbiAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuXG4gIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpO1xuICBpZiAoYmFuZHdpZHRoLmxlbmd0aCkge1xuICAgIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1USUFTOicpID09PSAwKSB7XG4gICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7XG4gICAgfSBlbHNlIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1BUzonKSA9PT0gMCkge1xuICAgICAgLy8gdXNlIGZvcm11bGEgZnJvbSBKU0VQIHRvIGNvbnZlcnQgYj1BUyB0byBUSUFTIHZhbHVlLlxuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApICogMTAwMCAqIDAuOTVcbiAgICAgICAgICAtICg1MCAqIDQwICogOCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhbmR3aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqXG5TRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBydGNwUGFyYW1ldGVycyA9IHt9O1xuXG4gIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhIHdpdGggUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlXG4gIC8vIFNTUkNzLlxuICB2YXIgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpO1xuICAgIH0pXG4gICAgLmZpbHRlcihmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnO1xuICAgIH0pWzBdO1xuICBpZiAocmVtb3RlU3NyYykge1xuICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTtcbiAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjO1xuICB9XG5cbiAgLy8gRWRnZSB1c2VzIHRoZSBjb21wb3VuZCBhdHRyaWJ1dGUgaW5zdGVhZCBvZiByZWR1Y2VkU2l6ZVxuICAvLyBjb21wb3VuZCBpcyAhcmVkdWNlZFNpemVcbiAgdmFyIHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplID0gcnNpemUubGVuZ3RoID4gMDtcbiAgcnRjcFBhcmFtZXRlcnMuY29tcG91bmQgPSByc2l6ZS5sZW5ndGggPT09IDA7XG5cbiAgLy8gcGFyc2VzIHRoZSBydGNwLW11eCBhdHRy0ZZidXRlLlxuICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC5cbiAgdmFyIG11eCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1tdXgnKTtcbiAgcnRjcFBhcmFtZXRlcnMubXV4ID0gbXV4Lmxlbmd0aCA+IDA7XG5cbiAgcmV0dXJuIHJ0Y3BQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJuc1xuLy8gdGhlIGlkIG9mIHRoZSBNZWRpYVN0cmVhbSBhbmQgTWVkaWFTdHJlYW1UcmFjay5cblNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgcGFydHM7XG4gIHZhciBzcGVjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1tc2lkOicpO1xuICBpZiAoc3BlYy5sZW5ndGggPT09IDEpIHtcbiAgICBwYXJ0cyA9IHNwZWNbMF0uc3Vic3RyKDcpLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtzdHJlYW06IHBhcnRzWzBdLCB0cmFjazogcGFydHNbMV19O1xuICB9XG4gIHZhciBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpO1xuICAgIH0pXG4gICAgLmZpbHRlcihmdW5jdGlvbihtc2lkUGFydHMpIHtcbiAgICAgIHJldHVybiBtc2lkUGFydHMuYXR0cmlidXRlID09PSAnbXNpZCc7XG4gICAgfSk7XG4gIGlmIChwbGFuQi5sZW5ndGggPiAwKSB7XG4gICAgcGFydHMgPSBwbGFuQlswXS52YWx1ZS5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7c3RyZWFtOiBwYXJ0c1swXSwgdHJhY2s6IHBhcnRzWzFdfTtcbiAgfVxufTtcblxuLy8gU0NUUFxuLy8gcGFyc2VzIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTI2IGZpcnN0IGFuZCBmYWxscyBiYWNrXG4vLyB0byBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0wNVxuU0RQVXRpbHMucGFyc2VTY3RwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIG1saW5lID0gU0RQVXRpbHMucGFyc2VNTGluZShtZWRpYVNlY3Rpb24pO1xuICB2YXIgbWF4U2l6ZUxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7XG4gIHZhciBtYXhNZXNzYWdlU2l6ZTtcbiAgaWYgKG1heFNpemVMaW5lLmxlbmd0aCA+IDApIHtcbiAgICBtYXhNZXNzYWdlU2l6ZSA9IHBhcnNlSW50KG1heFNpemVMaW5lWzBdLnN1YnN0cigxOSksIDEwKTtcbiAgfVxuICBpZiAoaXNOYU4obWF4TWVzc2FnZVNpemUpKSB7XG4gICAgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcbiAgfVxuICB2YXIgc2N0cFBvcnQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNjdHAtcG9ydDonKTtcbiAgaWYgKHNjdHBQb3J0Lmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9ydDogcGFyc2VJbnQoc2N0cFBvcnRbMF0uc3Vic3RyKDEyKSwgMTApLFxuICAgICAgcHJvdG9jb2w6IG1saW5lLmZtdCxcbiAgICAgIG1heE1lc3NhZ2VTaXplOiBtYXhNZXNzYWdlU2l6ZVxuICAgIH07XG4gIH1cbiAgdmFyIHNjdHBNYXBMaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cG1hcDonKTtcbiAgaWYgKHNjdHBNYXBMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHBhcnRzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zY3RwbWFwOicpWzBdXG4gICAgICAuc3Vic3RyKDEwKVxuICAgICAgLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzBdLCAxMCksXG4gICAgICBwcm90b2NvbDogcGFydHNbMV0sXG4gICAgICBtYXhNZXNzYWdlU2l6ZTogbWF4TWVzc2FnZVNpemVcbiAgICB9O1xuICB9XG59O1xuXG4vLyBTQ1RQXG4vLyBvdXRwdXRzIHRoZSBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiB2ZXJzaW9uIHRoYXQgYWxsIGJyb3dzZXJzXG4vLyBzdXBwb3J0IGJ5IG5vdyByZWNlaXZpbmcgaW4gdGhpcyBmb3JtYXQsIHVubGVzcyB3ZSBvcmlnaW5hbGx5IHBhcnNlZFxuLy8gYXMgdGhlIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTA1IGZvcm1hdCAoaW5kaWNhdGVkIGJ5IHRoZSBtLWxpbmVcbi8vIHByb3RvY29sIG9mIERUTFMvU0NUUCAtLSB3aXRob3V0IFVEUC8gb3IgVENQLylcblNEUFV0aWxzLndyaXRlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWEsIHNjdHApIHtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBpZiAobWVkaWEucHJvdG9jb2wgIT09ICdEVExTL1NDVFAnKSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wcm90b2NvbCArICdcXHJcXG4nLFxuICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcXHJcXG4nLFxuICAgICAgJ2E9c2N0cC1wb3J0OicgKyBzY3RwLnBvcnQgKyAnXFxyXFxuJ1xuICAgIF07XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wb3J0ICsgJ1xcclxcbicsXG4gICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicsXG4gICAgICAnYT1zY3RwbWFwOicgKyBzY3RwLnBvcnQgKyAnICcgKyBzY3RwLnByb3RvY29sICsgJyA2NTUzNVxcclxcbidcbiAgICBdO1xuICB9XG4gIGlmIChzY3RwLm1heE1lc3NhZ2VTaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICBvdXRwdXQucHVzaCgnYT1tYXgtbWVzc2FnZS1zaXplOicgKyBzY3RwLm1heE1lc3NhZ2VTaXplICsgJ1xcclxcbicpO1xuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJyk7XG59O1xuXG4vLyBHZW5lcmF0ZSBhIHNlc3Npb24gSUQgZm9yIFNEUC5cbi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLXJ0Y3dlYi1qc2VwLTIwI3NlY3Rpb24tNS4yLjFcbi8vIHJlY29tbWVuZHMgdXNpbmcgYSBjcnlwdG9ncmFwaGljYWxseSByYW5kb20gK3ZlIDY0LWJpdCB2YWx1ZVxuLy8gYnV0IHJpZ2h0IG5vdyB0aGlzIHNob3VsZCBiZSBhY2NlcHRhYmxlIGFuZCB3aXRoaW4gdGhlIHJpZ2h0IHJhbmdlXG5TRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnN1YnN0cigyLCAyMSk7XG59O1xuXG4vLyBXcml0ZSBib2lsZGVyIHBsYXRlIGZvciBzdGFydCBvZiBTRFBcbi8vIHNlc3NJZCBhcmd1bWVudCBpcyBvcHRpb25hbCAtIGlmIG5vdCBzdXBwbGllZCBpdCB3aWxsXG4vLyBiZSBnZW5lcmF0ZWQgcmFuZG9tbHlcbi8vIHNlc3NWZXJzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAyXG4vLyBzZXNzVXNlciBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gJ3RoaXNpc2FkYXB0ZXJvcnRjJ1xuU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbihzZXNzSWQsIHNlc3NWZXIsIHNlc3NVc2VyKSB7XG4gIHZhciBzZXNzaW9uSWQ7XG4gIHZhciB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7XG4gIGlmIChzZXNzSWQpIHtcbiAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgfVxuICB2YXIgdXNlciA9IHNlc3NVc2VyIHx8ICd0aGlzaXNhZGFwdGVyb3J0Yyc7XG4gIC8vIEZJWE1FOiBzZXNzLWlkIHNob3VsZCBiZSBhbiBOVFAgdGltZXN0YW1wLlxuICByZXR1cm4gJ3Y9MFxcclxcbicgK1xuICAgICAgJ289JyArIHVzZXIgKyAnICcgKyBzZXNzaW9uSWQgKyAnICcgKyB2ZXJzaW9uICtcbiAgICAgICAgJyBJTiBJUDQgMTI3LjAuMC4xXFxyXFxuJyArXG4gICAgICAncz0tXFxyXFxuJyArXG4gICAgICAndD0wIDBcXHJcXG4nO1xufTtcblxuU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7XG4gIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uKHRyYW5zY2VpdmVyLmtpbmQsIGNhcHMpO1xuXG4gIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzKFxuICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTtcblxuICAvLyBNYXAgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cbiAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMoXG4gICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcbiAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogJ2FjdGl2ZScpO1xuXG4gIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcXHJcXG4nO1xuXG4gIGlmICh0cmFuc2NlaXZlci5kaXJlY3Rpb24pIHtcbiAgICBzZHAgKz0gJ2E9JyArIHRyYW5zY2VpdmVyLmRpcmVjdGlvbiArICdcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1zZW5kcmVjdlxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRvbmx5XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1yZWN2b25seVxcclxcbic7XG4gIH0gZWxzZSB7XG4gICAgc2RwICs9ICdhPWluYWN0aXZlXFxyXFxuJztcbiAgfVxuXG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAvLyBzcGVjLlxuICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIHN0cmVhbS5pZCArICcgJyArXG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcXHJcXG4nO1xuICAgIHNkcCArPSAnYT0nICsgbXNpZDtcblxuICAgIC8vIGZvciBDaHJvbWUuXG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAgICcgJyArIG1zaWQ7XG4gICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJyAnICsgbXNpZDtcbiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAnICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH1cbiAgfVxuICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLlxuICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBHZXRzIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgbWVkaWFTZWN0aW9uIG9yIHRoZSBzZXNzaW9ucGFydC5cblNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuXG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaCAobGluZXNbaV0pIHtcbiAgICAgIGNhc2UgJ2E9c2VuZHJlY3YnOlxuICAgICAgY2FzZSAnYT1zZW5kb25seSc6XG4gICAgICBjYXNlICdhPXJlY3Zvbmx5JzpcbiAgICAgIGNhc2UgJ2E9aW5hY3RpdmUnOlxuICAgICAgICByZXR1cm4gbGluZXNbaV0uc3Vic3RyKDIpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gRklYTUU6IFdoYXQgc2hvdWxkIGhhcHBlbiBoZXJlP1xuICAgIH1cbiAgfVxuICBpZiAoc2Vzc2lvbnBhcnQpIHtcbiAgICByZXR1cm4gU0RQVXRpbHMuZ2V0RGlyZWN0aW9uKHNlc3Npb25wYXJ0KTtcbiAgfVxuICByZXR1cm4gJ3NlbmRyZWN2Jztcbn07XG5cblNEUFV0aWxzLmdldEtpbmQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4gbWxpbmVbMF0uc3Vic3RyKDIpO1xufTtcblxuU0RQVXRpbHMuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJztcbn07XG5cblNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgcGFydHMgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiBwYXJ0c1swXSxcbiAgICBwb3J0OiBwYXJzZUludChwYXJ0c1sxXSwgMTApLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXSxcbiAgICBmbXQ6IHBhcnRzLnNsaWNlKDMpLmpvaW4oJyAnKVxuICB9O1xufTtcblxuU0RQVXRpbHMucGFyc2VPTGluZSA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ289JylbMF07XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDIpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWU6IHBhcnRzWzBdLFxuICAgIHNlc3Npb25JZDogcGFydHNbMV0sXG4gICAgc2Vzc2lvblZlcnNpb246IHBhcnNlSW50KHBhcnRzWzJdLCAxMCksXG4gICAgbmV0VHlwZTogcGFydHNbM10sXG4gICAgYWRkcmVzc1R5cGU6IHBhcnRzWzRdLFxuICAgIGFkZHJlc3M6IHBhcnRzWzVdXG4gIH07XG59O1xuXG4vLyBhIHZlcnkgbmFpdmUgaW50ZXJwcmV0YXRpb24gb2YgYSB2YWxpZCBTRFAuXG5TRFBVdGlscy5pc1ZhbGlkU0RQID0gZnVuY3Rpb24oYmxvYikge1xuICBpZiAodHlwZW9mIGJsb2IgIT09ICdzdHJpbmcnIHx8IGJsb2IubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobGluZXNbaV0ubGVuZ3RoIDwgMiB8fCBsaW5lc1tpXS5jaGFyQXQoMSkgIT09ICc9Jykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBUT0RPOiBjaGVjayB0aGUgbW9kaWZpZXIgYSBiaXQgbW9yZS5cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xuICBtb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/sdp/sdp.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ \"./node_modules/webrtc-adapter/src/js/adapter_factory.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nconst adapter =\n  Object(_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__[\"adapterFactory\"])({window: typeof window === 'undefined' ? undefined : window});\n/* harmony default export */ __webpack_exports__[\"default\"] = (adapter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9jb3JlLmpzPzI3NmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRXVDOztBQUVwRDtBQUNBLEVBQUUsMEVBQWMsRUFBRSwyREFBMkQ7QUFDOUQsc0VBQU8sRUFBQyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9jb3JlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge2FkYXB0ZXJGYWN0b3J5fSBmcm9tICcuL2FkYXB0ZXJfZmFjdG9yeS5qcyc7XG5cbmNvbnN0IGFkYXB0ZXIgPVxuICBhZGFwdGVyRmFjdG9yeSh7d2luZG93OiB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IHdpbmRvd30pO1xuZXhwb3J0IGRlZmF1bHQgYWRhcHRlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/adapter_core.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/*! exports provided: adapterFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"adapterFactory\", function() { return adapterFactory; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ \"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\");\n/* harmony import */ var _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./edge/edge_shim */ \"./node_modules/webrtc-adapter/src/js/edge/edge_shim.js\");\n/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./firefox/firefox_shim */ \"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\");\n/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./safari/safari_shim */ \"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\");\n/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common_shim */ \"./node_modules/webrtc-adapter/src/js/common_shim.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n  // Browser shims.\n\n\n\n\n\n\n// Shimming starts here.\nfunction adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__[\"log\"];\n  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__[\"detectBrowser\"](window);\n\n  const adapter = {\n    browserDetails,\n    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_5__,\n    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__[\"extractVersion\"],\n    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__[\"disableLog\"],\n    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__[\"disableWarnings\"]\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimPeerConnection\"] ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimAddIceCandidateNullOrEmpty\"](window, browserDetails);\n\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimGetUserMedia\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimMediaStream\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimPeerConnection\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimOnTrack\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimAddTrackRemoveTrack\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimGetSendersWithDtmf\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimGetStats\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"shimSenderReceiverGetStats\"](window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__[\"fixNegotiationNeeded\"](window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimRTCIceCandidate\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimConnectionState\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimMaxMessageSize\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimSendThrowTypeError\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"removeExtmapAllowMixed\"](window, browserDetails);\n      break;\n    case 'firefox':\n      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimPeerConnection\"] ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimAddIceCandidateNullOrEmpty\"](window, browserDetails);\n\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimGetUserMedia\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimPeerConnection\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimOnTrack\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimRemoveStream\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimSenderGetStats\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimReceiverGetStats\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimRTCDataChannel\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimAddTransceiver\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimGetParameters\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimCreateOffer\"](window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_3__[\"shimCreateAnswer\"](window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimRTCIceCandidate\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimConnectionState\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimMaxMessageSize\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimSendThrowTypeError\"](window, browserDetails);\n      break;\n    case 'edge':\n      if (!_edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__ || !_edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__[\"shimPeerConnection\"] || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__;\n\n      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__[\"shimGetUserMedia\"](window, browserDetails);\n      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__[\"shimGetDisplayMedia\"](window, browserDetails);\n      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__[\"shimPeerConnection\"](window, browserDetails);\n      _edge_edge_shim__WEBPACK_IMPORTED_MODULE_2__[\"shimReplaceTrack\"](window, browserDetails);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimMaxMessageSize\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimSendThrowTypeError\"](window, browserDetails);\n      break;\n    case 'safari':\n      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__ || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__;\n\n      // Must be called before shimCallbackAPI.\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimAddIceCandidateNullOrEmpty\"](window, browserDetails);\n\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimRTCIceServerUrls\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimCreateOfferLegacy\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimCallbacksAPI\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimLocalStreamsAPI\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimRemoteStreamsAPI\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimTrackEventTransceiver\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimGetUserMedia\"](window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_4__[\"shimAudioContext\"](window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimRTCIceCandidate\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimMaxMessageSize\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"shimSendThrowTypeError\"](window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_5__[\"removeExtmapAllowMixed\"](window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9mYWN0b3J5LmpzPzJmMzQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lDOztBQUVqQztBQUNtRDtBQUNOO0FBQ1M7QUFDSDtBQUNQOztBQUU1QztBQUNPLHlCQUF5QixPQUFPLEtBQUs7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrQkFBa0IsMENBQVM7QUFDM0IseUJBQXlCLG9EQUFtQjs7QUFFNUM7QUFDQTtBQUNBLElBQUkscURBQVU7QUFDZCxvQkFBb0IscURBQW9CO0FBQ3hDLGdCQUFnQixpREFBZ0I7QUFDaEMscUJBQXFCLHNEQUFxQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFVLEtBQUssc0VBQTZCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGdEQUFVOztBQUV0QztBQUNBLE1BQU0sMkVBQXlDOztBQUUvQyxNQUFNLG9FQUEyQjtBQUNqQyxNQUFNLG1FQUEwQjtBQUNoQyxNQUFNLHNFQUE2QjtBQUNuQyxNQUFNLCtEQUFzQjtBQUM1QixNQUFNLDJFQUFrQztBQUN4QyxNQUFNLDBFQUFpQztBQUN2QyxNQUFNLGdFQUF1QjtBQUM3QixNQUFNLDhFQUFxQztBQUMzQyxNQUFNLHdFQUErQjs7QUFFckMsTUFBTSxnRUFBOEI7QUFDcEMsTUFBTSxnRUFBOEI7QUFDcEMsTUFBTSwrREFBNkI7QUFDbkMsTUFBTSxtRUFBaUM7QUFDdkMsTUFBTSxtRUFBaUM7QUFDdkM7QUFDQTtBQUNBLFdBQVcsa0RBQVcsS0FBSyx3RUFBOEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFXOztBQUV2QztBQUNBLE1BQU0sMkVBQXlDOztBQUUvQyxNQUFNLHNFQUE0QjtBQUNsQyxNQUFNLHdFQUE4QjtBQUNwQyxNQUFNLGlFQUF1QjtBQUM3QixNQUFNLHNFQUE0QjtBQUNsQyxNQUFNLHdFQUE4QjtBQUNwQyxNQUFNLDBFQUFnQztBQUN0QyxNQUFNLHdFQUE4QjtBQUNwQyxNQUFNLHdFQUE4QjtBQUNwQyxNQUFNLHVFQUE2QjtBQUNuQyxNQUFNLHFFQUEyQjtBQUNqQyxNQUFNLHNFQUE0Qjs7QUFFbEMsTUFBTSxnRUFBOEI7QUFDcEMsTUFBTSxnRUFBOEI7QUFDcEMsTUFBTSwrREFBNkI7QUFDbkMsTUFBTSxtRUFBaUM7QUFDdkM7QUFDQTtBQUNBLFdBQVcsNENBQVEsS0FBSyxrRUFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0Q0FBUTs7QUFFcEMsTUFBTSxnRUFBeUI7QUFDL0IsTUFBTSxtRUFBNEI7QUFDbEMsTUFBTSxrRUFBMkI7QUFDakMsTUFBTSxnRUFBeUI7O0FBRS9COztBQUVBLE1BQU0sK0RBQTZCO0FBQ25DLE1BQU0sbUVBQWlDO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXLGdEQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0RBQVU7O0FBRXRDO0FBQ0EsTUFBTSwyRUFBeUM7O0FBRS9DLE1BQU0sd0VBQStCO0FBQ3JDLE1BQU0seUVBQWdDO0FBQ3RDLE1BQU0sb0VBQTJCO0FBQ2pDLE1BQU0sdUVBQThCO0FBQ3BDLE1BQU0sd0VBQStCO0FBQ3JDLE1BQU0sNkVBQW9DO0FBQzFDLE1BQU0sb0VBQTJCO0FBQ2pDLE1BQU0sb0VBQTJCOztBQUVqQyxNQUFNLGdFQUE4QjtBQUNwQyxNQUFNLCtEQUE2QjtBQUNuQyxNQUFNLG1FQUFpQztBQUN2QyxNQUFNLG1FQUFpQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2FkYXB0ZXJfZmFjdG9yeS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbiAgLy8gQnJvd3NlciBzaGltcy5cbmltcG9ydCAqIGFzIGNocm9tZVNoaW0gZnJvbSAnLi9jaHJvbWUvY2hyb21lX3NoaW0nO1xuaW1wb3J0ICogYXMgZWRnZVNoaW0gZnJvbSAnLi9lZGdlL2VkZ2Vfc2hpbSc7XG5pbXBvcnQgKiBhcyBmaXJlZm94U2hpbSBmcm9tICcuL2ZpcmVmb3gvZmlyZWZveF9zaGltJztcbmltcG9ydCAqIGFzIHNhZmFyaVNoaW0gZnJvbSAnLi9zYWZhcmkvc2FmYXJpX3NoaW0nO1xuaW1wb3J0ICogYXMgY29tbW9uU2hpbSBmcm9tICcuL2NvbW1vbl9zaGltJztcblxuLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuXG5leHBvcnQgZnVuY3Rpb24gYWRhcHRlckZhY3Rvcnkoe3dpbmRvd30gPSB7fSwgb3B0aW9ucyA9IHtcbiAgc2hpbUNocm9tZTogdHJ1ZSxcbiAgc2hpbUZpcmVmb3g6IHRydWUsXG4gIHNoaW1FZGdlOiB0cnVlLFxuICBzaGltU2FmYXJpOiB0cnVlLFxufSkge1xuICAvLyBVdGlscy5cbiAgY29uc3QgbG9nZ2luZyA9IHV0aWxzLmxvZztcbiAgY29uc3QgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7XG5cbiAgY29uc3QgYWRhcHRlciA9IHtcbiAgICBicm93c2VyRGV0YWlscyxcbiAgICBjb21tb25TaGltLFxuICAgIGV4dHJhY3RWZXJzaW9uOiB1dGlscy5leHRyYWN0VmVyc2lvbixcbiAgICBkaXNhYmxlTG9nOiB1dGlscy5kaXNhYmxlTG9nLFxuICAgIGRpc2FibGVXYXJuaW5nczogdXRpbHMuZGlzYWJsZVdhcm5pbmdzXG4gIH07XG5cbiAgLy8gU2hpbSBicm93c2VyIGlmIGZvdW5kLlxuICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHtcbiAgICBjYXNlICdjaHJvbWUnOlxuICAgICAgaWYgKCFjaHJvbWVTaGltIHx8ICFjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgICAgICFvcHRpb25zLnNoaW1DaHJvbWUpIHtcbiAgICAgICAgbG9nZ2luZygnQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSBudWxsKSB7XG4gICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGNhbiBub3QgZGV0ZXJtaW5lIHZlcnNpb24sIG5vdCBzaGltbWluZy4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gY2hyb21lU2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1QZWVyQ29ubmVjdGlvbi5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2sod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1HZXRTZW5kZXJzV2l0aER0bWYod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1HZXRTdGF0cyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLmZpeE5lZ290aWF0aW9uTmVlZGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1Db25uZWN0aW9uU3RhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0ucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ZpcmVmb3gnOlxuICAgICAgaWYgKCFmaXJlZm94U2hpbSB8fCAhZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8XG4gICAgICAgICAgIW9wdGlvbnMuc2hpbUZpcmVmb3gpIHtcbiAgICAgICAgbG9nZ2luZygnRmlyZWZveCBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGZpcmVmb3hTaGltO1xuXG4gICAgICAvLyBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgc2hpbVBlZXJDb25uZWN0aW9uLlxuICAgICAgY29tbW9uU2hpbS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGZpcmVmb3hTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltT25UcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1SZW1vdmVTdHJlYW0od2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltU2VuZGVyR2V0U3RhdHMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1SVENEYXRhQ2hhbm5lbCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1BZGRUcmFuc2NlaXZlcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1HZXRQYXJhbWV0ZXJzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbUNyZWF0ZU9mZmVyKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbUNyZWF0ZUFuc3dlcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgY29tbW9uU2hpbS5zaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltQ29ubmVjdGlvblN0YXRlKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdlZGdlJzpcbiAgICAgIGlmICghZWRnZVNoaW0gfHwgIWVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fCAhb3B0aW9ucy5zaGltRWRnZSkge1xuICAgICAgICBsb2dnaW5nKCdNUyBlZGdlIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gZWRnZVNoaW07XG5cbiAgICAgIGVkZ2VTaGltLnNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBlZGdlU2hpbS5zaGltR2V0RGlzcGxheU1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZWRnZVNoaW0uc2hpbVJlcGxhY2VUcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgLy8gdGhlIGVkZ2Ugc2hpbSBpbXBsZW1lbnRzIHRoZSBmdWxsIFJUQ0ljZUNhbmRpZGF0ZSBvYmplY3QuXG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnc2FmYXJpJzpcbiAgICAgIGlmICghc2FmYXJpU2hpbSB8fCAhb3B0aW9ucy5zaGltU2FmYXJpKSB7XG4gICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1DYWxsYmFja0FQSS5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBzYWZhcmlTaGltLnNoaW1SVENJY2VTZXJ2ZXJVcmxzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltQ3JlYXRlT2ZmZXJMZWdhY3kod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1DYWxsYmFja3NBUEkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1Mb2NhbFN0cmVhbXNBUEkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltQXVkaW9Db250ZXh0KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0ucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnaW5nKCdVbnN1cHBvcnRlZCBicm93c2VyIScpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gYWRhcHRlcjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/adapter_factory.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimMediaStream, shimOnTrack, shimGetSendersWithDtmf, shimGetStats, shimSenderReceiverGetStats, shimAddTrackRemoveTrackWithNative, shimAddTrackRemoveTrack, shimPeerConnection, fixNegotiationNeeded */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimMediaStream\", function() { return shimMediaStream; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimOnTrack\", function() { return shimOnTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetSendersWithDtmf\", function() { return shimGetSendersWithDtmf; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetStats\", function() { return shimGetStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimSenderReceiverGetStats\", function() { return shimSenderReceiverGetStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimAddTrackRemoveTrackWithNative\", function() { return shimAddTrackRemoveTrackWithNative; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimAddTrackRemoveTrack\", function() { return shimAddTrackRemoveTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimPeerConnection\", function() { return shimPeerConnection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fixNegotiationNeeded\", function() { return fixNegotiationNeeded; });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_1__[\"shimGetUserMedia\"]; });\n\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__[\"shimGetDisplayMedia\"]; });\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\n\n\n\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"wrapPeerConnectionEvent\"](window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"filterStats\"](result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"wrapPeerConnectionEvent\"](window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"filterStats\"](result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nfunction shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nfunction fixNegotiationNeeded(window, browserDetails) {\n  _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"wrapPeerConnectionEvent\"](window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2Nocm9tZV9zaGltLmpzPzkzMmMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTtBQUN3Qjs7QUFFVztBQUNNOztBQUUvQztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZiw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUksaUVBQTZCO0FBQ2pDO0FBQ0E7QUFDQSxXQUFXLFFBQVEsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWlCO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksaUVBQTZCO0FBQ2pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBaUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ087QUFDUCxFQUFFLGlFQUE2QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jaHJvbWUvY2hyb21lX3NoaW0uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcblxuZXhwb3J0IHtzaGltR2V0VXNlck1lZGlhfSBmcm9tICcuL2dldHVzZXJtZWRpYSc7XG5leHBvcnQge3NoaW1HZXREaXNwbGF5TWVkaWF9IGZyb20gJy4vZ2V0ZGlzcGxheW1lZGlhJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1NZWRpYVN0cmVhbSh3aW5kb3cpIHtcbiAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1PblRyYWNrKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluXG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29udHJhY2s7XG4gICAgICB9LFxuICAgICAgc2V0KGYpIHtcbiAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuX29udHJhY2twb2x5KSB7XG4gICAgICAgICAgdGhpcy5fb250cmFja3BvbHkgPSAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gb25hZGRzdHJlYW0gZG9lcyBub3QgZmlyZSB3aGVuIGEgdHJhY2sgaXMgYWRkZWQgdG8gYW4gZXhpc3RpbmdcbiAgICAgICAgICAgIC8vIHN0cmVhbS4gQnV0IHN0cmVhbS5vbmFkZHRyYWNrIGlzIGltcGxlbWVudGVkIHNvIHdlIHVzZSB0aGF0LlxuICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCB0ZSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0aGlzLmdldFJlY2VpdmVycygpXG4gICAgICAgICAgICAgICAgICAuZmluZChyID0+IHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdGUudHJhY2suaWQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgICAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB0aGlzLmdldFJlY2VpdmVycygpXG4gICAgICAgICAgICAgICAgICAuZmluZChyID0+IHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdHJhY2suaWQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBldmVuIGlmIFJUQ1J0cFRyYW5zY2VpdmVyIGlzIGluIHdpbmRvdywgaXQgaXMgb25seSB1c2VkIGFuZFxuICAgIC8vIGVtaXR0ZWQgaW4gdW5pZmllZC1wbGFuLiBVbmZvcnR1bmF0ZWx5IHRoaXMgbWVhbnMgd2UgbmVlZFxuICAgIC8vIHRvIHVuY29uZGl0aW9uYWxseSB3cmFwIHRoZSBldmVudC5cbiAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGUgPT4ge1xuICAgICAgaWYgKCFlLnRyYW5zY2VpdmVyKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAndHJhbnNjZWl2ZXInLFxuICAgICAgICAgIHt2YWx1ZToge3JlY2VpdmVyOiBlLnJlY2VpdmVyfX0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRTZW5kZXJzV2l0aER0bWYod2luZG93KSB7XG4gIC8vIE92ZXJyaWRlcyBhZGRUcmFjay9yZW1vdmVUcmFjaywgZGVwZW5kcyBvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjay5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgISgnZ2V0U2VuZGVycycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkgJiZcbiAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgY29uc3Qgc2hpbVNlbmRlcldpdGhEdG1mID0gZnVuY3Rpb24ocGMsIHRyYWNrKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0cmFjayxcbiAgICAgICAgZ2V0IGR0bWYoKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IHBjLmNyZWF0ZURUTUZTZW5kZXIodHJhY2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aGlzLl9kdG1mO1xuICAgICAgICB9LFxuICAgICAgICBfcGM6IHBjXG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBhdWdtZW50IGFkZFRyYWNrIHdoZW4gZ2V0U2VuZGVycyBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlcnMuc2xpY2UoKTsgLy8gcmV0dXJuIGEgY29weSBvZiB0aGUgaW50ZXJuYWwgc3RhdGUuXG4gICAgICB9O1xuICAgICAgY29uc3Qgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgICAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICAgICAgbGV0IHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIGlmICghc2VuZGVyKSB7XG4gICAgICAgICAgICBzZW5kZXIgPSBzaGltU2VuZGVyV2l0aER0bWYodGhpcywgdHJhY2spO1xuICAgICAgICAgICAgdGhpcy5fc2VuZGVycy5wdXNoKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgICAgIH07XG5cbiAgICAgIGNvbnN0IG9yaWdSZW1vdmVUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrID1cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICAgICAgb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc2VuZGVycy5pbmRleE9mKHNlbmRlcik7XG4gICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbmRlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiBhZGRTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTtcbiAgICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgW3N0cmVhbV0pO1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICB0aGlzLl9zZW5kZXJzLnB1c2goc2hpbVNlbmRlcldpdGhEdG1mKHRoaXMsIHRyYWNrKSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZ1JlbW92ZVN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICAgIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgW3N0cmVhbV0pO1xuXG4gICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICBjb25zdCBzZW5kZXIgPSB0aGlzLl9zZW5kZXJzLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICAgICAgaWYgKHNlbmRlcikgeyAvLyByZW1vdmUgc2VuZGVyXG4gICAgICAgICAgICB0aGlzLl9zZW5kZXJzLnNwbGljZSh0aGlzLl9zZW5kZXJzLmluZGV4T2Yoc2VuZGVyKSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAgICAgICAgJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICAnY3JlYXRlRFRNRlNlbmRlcicgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSAmJlxuICAgICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIgJiZcbiAgICAgICAgICAgICAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICBjb25zdCBvcmlnR2V0U2VuZGVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHNlbmRlcnMuZm9yRWFjaChzZW5kZXIgPT4gc2VuZGVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSwgJ2R0bWYnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy50cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICB0aGlzLl9kdG1mID0gdGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kdG1mO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0U3RhdHMod2luZG93KSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgb3JpZ0dldFN0YXRzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IFtzZWxlY3Rvciwgb25TdWNjLCBvbkVycl0gPSBhcmd1bWVudHM7XG5cbiAgICAvLyBJZiBzZWxlY3RvciBpcyBhIGZ1bmN0aW9uIHRoZW4gd2UgYXJlIGluIHRoZSBvbGQgc3R5bGUgc3RhdHMgc28ganVzdFxuICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGhcbiAgICAvLyBlaXRoZXIgbm8gYXJndW1lbnRzIG9yIHRoZSBzZWxlY3RvciBhcmd1bWVudCBpcyBudWxsLlxuICAgIGlmIChvcmlnR2V0U3RhdHMubGVuZ3RoID09PSAwICYmIChhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgIHR5cGVvZiBzZWxlY3RvciAhPT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW10pO1xuICAgIH1cblxuICAgIGNvbnN0IGZpeENocm9tZVN0YXRzXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBjb25zdCBzdGFuZGFyZFJlcG9ydCA9IHt9O1xuICAgICAgY29uc3QgcmVwb3J0cyA9IHJlc3BvbnNlLnJlc3VsdCgpO1xuICAgICAgcmVwb3J0cy5mb3JFYWNoKHJlcG9ydCA9PiB7XG4gICAgICAgIGNvbnN0IHN0YW5kYXJkU3RhdHMgPSB7XG4gICAgICAgICAgaWQ6IHJlcG9ydC5pZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IHJlcG9ydC50aW1lc3RhbXAsXG4gICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZSdcbiAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZVxuICAgICAgICB9O1xuICAgICAgICByZXBvcnQubmFtZXMoKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgIHN0YW5kYXJkU3RhdHNbbmFtZV0gPSByZXBvcnQuc3RhdChuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0cztcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc3RhbmRhcmRSZXBvcnQ7XG4gICAgfTtcblxuICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICBjb25zdCBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykge1xuICAgICAgcmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoc3RhdHMpLm1hcChrZXkgPT4gW2tleSwgc3RhdHNba2V5XV0pKTtcbiAgICB9O1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3Qgc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBvblN1Y2MobWFrZU1hcFN0YXRzKGZpeENocm9tZVN0YXRzXyhyZXNwb25zZSkpKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW3N1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfLFxuICAgICAgICBzZWxlY3Rvcl0pO1xuICAgIH1cblxuICAgIC8vIHByb21pc2Utc3VwcG9ydFxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW1xuICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIHJlc29sdmUobWFrZU1hcFN0YXRzKGZpeENocm9tZVN0YXRzXyhyZXNwb25zZSkpKTtcbiAgICAgICAgfSwgcmVqZWN0XSk7XG4gICAgfSkudGhlbihvblN1Y2MsIG9uRXJyKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgd2luZG93LlJUQ1J0cFJlY2VpdmVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNoaW0gc2VuZGVyIHN0YXRzLlxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSkge1xuICAgIGNvbnN0IG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO1xuICAgIGlmIChvcmlnR2V0U2VuZGVycykge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24gZ2V0U2VuZGVycygpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgICAgc2VuZGVycy5mb3JFYWNoKHNlbmRlciA9PiBzZW5kZXIuX3BjID0gdGhpcyk7XG4gICAgICAgIHJldHVybiBzZW5kZXJzO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgIGlmIChvcmlnQWRkVHJhY2spIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiBhZGRUcmFjaygpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHNlbmRlci5fcGMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gc2VuZGVyO1xuICAgICAgfTtcbiAgICB9XG4gICAgd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICAgIGNvbnN0IHNlbmRlciA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKHJlc3VsdCA9PlxuICAgICAgICAvKiBOb3RlOiB0aGlzIHdpbGwgaW5jbHVkZSBzdGF0cyBvZiBhbGwgc2VuZGVycyB0aGF0XG4gICAgICAgICAqICAgc2VuZCBhIHRyYWNrIHdpdGggdGhlIHNhbWUgaWQgYXMgc2VuZGVyLnRyYWNrIGFzXG4gICAgICAgICAqICAgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGlkZW50aWZ5IHRoZSBSVENSdHBTZW5kZXIuXG4gICAgICAgICAqL1xuICAgICAgICB1dGlscy5maWx0ZXJTdGF0cyhyZXN1bHQsIHNlbmRlci50cmFjaywgdHJ1ZSkpO1xuICAgIH07XG4gIH1cblxuICAvLyBzaGltIHJlY2VpdmVyIHN0YXRzLlxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKSB7XG4gICAgY29uc3Qgb3JpZ0dldFJlY2VpdmVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO1xuICAgIGlmIChvcmlnR2V0UmVjZWl2ZXJzKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycyA9XG4gICAgICAgIGZ1bmN0aW9uIGdldFJlY2VpdmVycygpIHtcbiAgICAgICAgICBjb25zdCByZWNlaXZlcnMgPSBvcmlnR2V0UmVjZWl2ZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgICAgICByZWNlaXZlcnMuZm9yRWFjaChyZWNlaXZlciA9PiByZWNlaXZlci5fcGMgPSB0aGlzKTtcbiAgICAgICAgICByZXR1cm4gcmVjZWl2ZXJzO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGUgPT4ge1xuICAgICAgZS5yZWNlaXZlci5fcGMgPSBlLnNyY0VsZW1lbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgICB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgICBjb25zdCByZWNlaXZlciA9IHRoaXM7XG4gICAgICByZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKHJlc3VsdCA9PlxuICAgICAgICB1dGlscy5maWx0ZXJTdGF0cyhyZXN1bHQsIHJlY2VpdmVyLnRyYWNrLCBmYWxzZSkpO1xuICAgIH07XG4gIH1cblxuICBpZiAoISgnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlICYmXG4gICAgICAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2hpbSBSVENQZWVyQ29ubmVjdGlvbi5nZXRTdGF0cyh0cmFjaykuXG4gIGNvbnN0IG9yaWdHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgYXJndW1lbnRzWzBdIGluc3RhbmNlb2Ygd2luZG93Lk1lZGlhU3RyZWFtVHJhY2spIHtcbiAgICAgIGNvbnN0IHRyYWNrID0gYXJndW1lbnRzWzBdO1xuICAgICAgbGV0IHNlbmRlcjtcbiAgICAgIGxldCByZWNlaXZlcjtcbiAgICAgIGxldCBlcnI7XG4gICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICBpZiAocy50cmFjayA9PT0gdHJhY2spIHtcbiAgICAgICAgICBpZiAoc2VuZGVyKSB7XG4gICAgICAgICAgICBlcnIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZW5kZXIgPSBzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmdldFJlY2VpdmVycygpLmZvckVhY2gociA9PiB7XG4gICAgICAgIGlmIChyLnRyYWNrID09PSB0cmFjaykge1xuICAgICAgICAgIGlmIChyZWNlaXZlcikge1xuICAgICAgICAgICAgZXJyID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVjZWl2ZXIgPSByO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gci50cmFjayA9PT0gdHJhY2s7XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnIgfHwgKHNlbmRlciAmJiByZWNlaXZlcikpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLicsXG4gICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VuZGVyKSB7XG4gICAgICAgIHJldHVybiBzZW5kZXIuZ2V0U3RhdHMoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlY2VpdmVyLmdldFN0YXRzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgJ1RoZXJlIGlzIG5vIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLicsXG4gICAgICAgICdJbnZhbGlkQWNjZXNzRXJyb3InKSk7XG4gICAgfVxuICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpIHtcbiAgLy8gc2hpbSBhZGRUcmFjay9yZW1vdmVUcmFjayB3aXRoIG5hdGl2ZSB2YXJpYW50cyBpbiBvcmRlciB0byBtYWtlXG4gIC8vIHRoZSBpbnRlcmFjdGlvbnMgd2l0aCBsZWdhY3kgZ2V0TG9jYWxTdHJlYW1zIGJlaGF2ZSBhcyBpbiBvdGhlciBicm93c2Vycy5cbiAgLy8gS2VlcHMgYSBtYXBwaW5nIHN0cmVhbS5pZCA9PiBbc3RyZWFtLCBydHBzZW5kZXJzLi4uXVxuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9XG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zKCkge1xuICAgICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcylcbiAgICAgICAgLm1hcChzdHJlYW1JZCA9PiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXVswXSk7XG4gICAgfTtcblxuICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICBmdW5jdGlvbiBhZGRUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgICByZXR1cm4gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcblxuICAgICAgY29uc3Qgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoIXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSkge1xuICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0gPSBbc3RyZWFtLCBzZW5kZXJdO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0uaW5kZXhPZihzZW5kZXIpID09PSAtMSkge1xuICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF0ucHVzaChzZW5kZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICB9O1xuXG4gIGNvbnN0IG9yaWdBZGRTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbiBhZGRTdHJlYW0oc3RyZWFtKSB7XG4gICAgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyA9IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgfHwge307XG5cbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZXhpc3RpbmdTZW5kZXJzID0gdGhpcy5nZXRTZW5kZXJzKCk7XG4gICAgb3JpZ0FkZFN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGNvbnN0IG5ld1NlbmRlcnMgPSB0aGlzLmdldFNlbmRlcnMoKVxuICAgICAgLmZpbHRlcihuZXdTZW5kZXIgPT4gZXhpc3RpbmdTZW5kZXJzLmluZGV4T2YobmV3U2VuZGVyKSA9PT0gLTEpO1xuICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSA9IFtzdHJlYW1dLmNvbmNhdChuZXdTZW5kZXJzKTtcbiAgfTtcblxuICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChzdHJlYW1JZCA9PiB7XG4gICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2hpbSBhZGRUcmFjayBhbmQgcmVtb3ZlVHJhY2suXG4gIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrICYmXG4gICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDY1KSB7XG4gICAgcmV0dXJuIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpO1xuICB9XG5cbiAgLy8gYWxzbyBzaGltIHBjLmdldExvY2FsU3RyZWFtcyB3aGVuIGFkZFRyYWNrIGlzIHNoaW1tZWRcbiAgLy8gdG8gcmV0dXJuIHRoZSBvcmlnaW5hbCBzdHJlYW1zLlxuICBjb25zdCBvcmlnR2V0TG9jYWxTdHJlYW1zID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVxuICAgICAgLmdldExvY2FsU3RyZWFtcztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgIGZ1bmN0aW9uIGdldExvY2FsU3RyZWFtcygpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZVN0cmVhbXMgPSBvcmlnR2V0TG9jYWxTdHJlYW1zLmFwcGx5KHRoaXMpO1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXMgPSB0aGlzLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcbiAgICAgIHJldHVybiBuYXRpdmVTdHJlYW1zLm1hcChzdHJlYW0gPT4gdGhpcy5fcmV2ZXJzZVN0cmVhbXNbc3RyZWFtLmlkXSk7XG4gICAgfTtcblxuICBjb25zdCBvcmlnQWRkU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24gYWRkU3RyZWFtKHN0cmVhbSkge1xuICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gQWRkIGlkZW50aXR5IG1hcHBpbmcgZm9yIGNvbnNpc3RlbmN5IHdpdGggYWRkVHJhY2suXG4gICAgLy8gVW5sZXNzIHRoaXMgaXMgYmVpbmcgdXNlZCB3aXRoIGEgc3RyZWFtIGZyb20gYWRkVHJhY2suXG4gICAgaWYgKCF0aGlzLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKSB7XG4gICAgICBjb25zdCBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKHN0cmVhbS5nZXRUcmFja3MoKSk7XG4gICAgICB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICB0aGlzLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgc3RyZWFtID0gbmV3U3RyZWFtO1xuICAgIH1cbiAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHRoaXMsIFtzdHJlYW1dKTtcbiAgfTtcblxuICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICAgIG9yaWdSZW1vdmVTdHJlYW0uYXBwbHkodGhpcywgWyh0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gfHwgc3RyZWFtKV0pO1xuICAgICAgZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zWyh0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gP1xuICAgICAgICAgIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZCldO1xuICAgICAgZGVsZXRlIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICB9O1xuXG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pIHtcbiAgICAgIGlmICh0aGlzLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgUlRDUGVlckNvbm5lY3Rpb25cXCdzIHNpZ25hbGluZ1N0YXRlIGlzIFxcJ2Nsb3NlZFxcJy4nLFxuICAgICAgICAgICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RyZWFtcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmIChzdHJlYW1zLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICAgICFzdHJlYW1zWzBdLmdldFRyYWNrcygpLmZpbmQodCA9PiB0ID09PSB0cmFjaykpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCBidXQgYWxsIHdlIGNhbiBtYW5hZ2Ugd2l0aG91dFxuICAgICAgICAvLyBbW2Fzc29jaWF0ZWQgTWVkaWFTdHJlYW1zXV0gaW50ZXJuYWwgc2xvdC5cbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAnICtcbiAgICAgICAgICAnIHN0cmVhbSB3aGljaCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCB0cmFjay4nLFxuICAgICAgICAgICdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXMgPSB0aGlzLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcbiAgICAgIGNvbnN0IG9sZFN0cmVhbSA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICAgIGlmIChvbGRTdHJlYW0pIHtcbiAgICAgICAgLy8gdGhpcyBpcyB1c2luZyBvZGQgQ2hyb21lIGJlaGF2aW91ciwgdXNlIHdpdGggY2F1dGlvbjpcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTc4MTVcbiAgICAgICAgLy8gTm90ZTogd2UgcmVseSBvbiB0aGUgaGlnaC1sZXZlbCBhZGRUcmFjay9kdG1mIHNoaW0gdG9cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBzZW5kZXIgd2l0aCBhIGR0bWYgc2VuZGVyLlxuICAgICAgICBvbGRTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgT05OIGFzeW5jLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKFt0cmFja10pO1xuICAgICAgICB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zW25ld1N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMuYWRkU3RyZWFtKG5ld1N0cmVhbSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICB9O1xuXG4gIC8vIHJlcGxhY2UgdGhlIGludGVybmFsIHN0cmVhbSBpZCB3aXRoIHRoZSBleHRlcm5hbCBvbmUgYW5kXG4gIC8vIHZpY2UgdmVyc2EuXG4gIGZ1bmN0aW9uIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikge1xuICAgIGxldCBzZHAgPSBkZXNjcmlwdGlvbi5zZHA7XG4gICAgT2JqZWN0LmtleXMocGMuX3JldmVyc2VTdHJlYW1zIHx8IFtdKS5mb3JFYWNoKGludGVybmFsSWQgPT4ge1xuICAgICAgY29uc3QgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07XG4gICAgICBjb25zdCBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTtcbiAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKG5ldyBSZWdFeHAoaW50ZXJuYWxTdHJlYW0uaWQsICdnJyksXG4gICAgICAgICAgZXh0ZXJuYWxTdHJlYW0uaWQpO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICBzZHBcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiByZXBsYWNlRXh0ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwO1xuICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChpbnRlcm5hbElkID0+IHtcbiAgICAgIGNvbnN0IGV4dGVybmFsU3RyZWFtID0gcGMuX3JldmVyc2VTdHJlYW1zW2ludGVybmFsSWRdO1xuICAgICAgY29uc3QgaW50ZXJuYWxTdHJlYW0gPSBwYy5fc3RyZWFtc1tleHRlcm5hbFN0cmVhbS5pZF07XG4gICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGV4dGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICAgIGludGVybmFsU3RyZWFtLmlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgc2RwXG4gICAgfSk7XG4gIH1cbiAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgY29uc3QgaXNMZWdhY3lDYWxsID0gYXJndW1lbnRzLmxlbmd0aCAmJlxuICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbic7XG4gICAgICBpZiAoaXNMZWdhY3lDYWxsKSB7XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgW1xuICAgICAgICAgIChkZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzYyA9IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChhcmdzWzFdKSB7XG4gICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBhcmd1bWVudHNbMl1cbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgIC50aGVuKGRlc2NyaXB0aW9uID0+IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKSk7XG4gICAgfX07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gbWV0aG9kT2JqW21ldGhvZF07XG4gIH0pO1xuXG4gIGNvbnN0IG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICBmdW5jdGlvbiBzZXRMb2NhbERlc2NyaXB0aW9uKCkge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoIHx8ICFhcmd1bWVudHNbMF0udHlwZSkge1xuICAgICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGFyZ3VtZW50c1swXSA9IHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gIC8vIFRPRE86IG1hbmdsZSBnZXRTdGF0czogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1zdGF0cy8jZG9tLXJ0Y21lZGlhc3RyZWFtc3RhdHMtc3RyZWFtaWRlbnRpZmllclxuXG4gIGNvbnN0IG9yaWdMb2NhbERlc2NyaXB0aW9uID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdsb2NhbERlc2NyaXB0aW9uJyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFxuICAgICAgJ2xvY2FsRGVzY3JpcHRpb24nLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IG9yaWdMb2NhbERlc2NyaXB0aW9uLmdldC5hcHBseSh0aGlzKTtcbiAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICBpZiAodGhpcy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIFJUQ1BlZXJDb25uZWN0aW9uXFwncyBzaWduYWxpbmdTdGF0ZSBpcyBcXCdjbG9zZWRcXCcuJyxcbiAgICAgICAgICAnSW52YWxpZFN0YXRlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGNhbiBub3QgeWV0IGNoZWNrIGZvciBzZW5kZXIgaW5zdGFuY2VvZiBSVENSdHBTZW5kZXJcbiAgICAgIC8vIHNpbmNlIHdlIHNoaW0gUlRQU2VuZGVyLiBTbyB3ZSBjaGVjayBpZiBzZW5kZXIuX3BjIGlzIHNldC5cbiAgICAgIGlmICghc2VuZGVyLl9wYykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrICcgK1xuICAgICAgICAgICAgJ2RvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLicsICdUeXBlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzTG9jYWwgPSBzZW5kZXIuX3BjID09PSB0aGlzO1xuICAgICAgaWYgKCFpc0xvY2FsKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIG5hdGl2ZSBzdHJlYW0gdGhlIHNlbmRlcnMgdHJhY2sgYmVsb25ncyB0by5cbiAgICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgbGV0IHN0cmVhbTtcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuX3N0cmVhbXMpLmZvckVhY2goc3RyZWFtaWQgPT4ge1xuICAgICAgICBjb25zdCBoYXNUcmFjayA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtaWRdLmdldFRyYWNrcygpXG4gICAgICAgICAgLmZpbmQodHJhY2sgPT4gc2VuZGVyLnRyYWNrID09PSB0cmFjayk7XG4gICAgICAgIGlmIChoYXNUcmFjaykge1xuICAgICAgICAgIHN0cmVhbSA9IHRoaXMuX3N0cmVhbXNbc3RyZWFtaWRdO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHN0cmVhbSkge1xuICAgICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdGhlIGxhc3QgdHJhY2sgb2YgdGhlIHN0cmVhbSwgcmVtb3ZlIHRoZSBzdHJlYW0uIFRoaXNcbiAgICAgICAgICAvLyB0YWtlcyBjYXJlIG9mIGFueSBzaGltbWVkIF9zZW5kZXJzLlxuICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtKHRoaXMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlbHlpbmcgb24gdGhlIHNhbWUgb2RkIGNocm9tZSBiZWhhdmlvdXIgYXMgYWJvdmUuXG4gICAgICAgICAgc3RyZWFtLnJlbW92ZVRyYWNrKHNlbmRlci50cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7XG4gICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikge1xuICAgIC8vIHZlcnkgYmFzaWMgc3VwcG9ydCBmb3Igb2xkIHZlcnNpb25zLlxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbjtcbiAgfVxuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNoaW0gaW1wbGljaXQgY3JlYXRpb24gb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uL1JUQ0ljZUNhbmRpZGF0ZVxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzKSB7XG4gICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgKChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnKSA/XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA6XG4gICAgICAgICAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9fTtcbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBtZXRob2RPYmpbbWV0aG9kXTtcbiAgICAgICAgfSk7XG4gIH1cbn1cblxuLy8gQXR0ZW1wdCB0byBmaXggT05OIGluIHBsYW4tYiBtb2RlLlxuZXhwb3J0IGZ1bmN0aW9uIGZpeE5lZ290aWF0aW9uTmVlZGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgdXRpbHMud3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnbmVnb3RpYXRpb25uZWVkZWQnLCBlID0+IHtcbiAgICBjb25zdCBwYyA9IGUudGFyZ2V0O1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNzIgfHwgKHBjLmdldENvbmZpZ3VyYXRpb24gJiZcbiAgICAgICAgcGMuZ2V0Q29uZmlndXJhdGlvbigpLnNkcFNlbWFudGljcyA9PT0gJ3BsYW4tYicpKSB7XG4gICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgIT09ICdzdGFibGUnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return shimGetDisplayMedia; });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldGRpc3BsYXltZWRpYS5qcz9lOTI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7QUFDTjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9nZXRkaXNwbGF5bWVkaWEuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxOCBUaGUgYWRhcHRlci5qcyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0RGlzcGxheU1lZGlhKHdpbmRvdywgZ2V0U291cmNlSWQpIHtcbiAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgJ2dldERpc3BsYXlNZWRpYScgaW4gd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCEod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGdldFNvdXJjZUlkIGlzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcHJvbWlzZSByZXNvbHZpbmcgd2l0aFxuICAvLyB0aGUgc291cmNlSWQgb2YgdGhlIHNjcmVlbi93aW5kb3cvdGFiIHRvIGJlIHNoYXJlZC5cbiAgaWYgKHR5cGVvZiBnZXRTb3VyY2VJZCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3NoaW1HZXREaXNwbGF5TWVkaWE6IGdldFNvdXJjZUlkIGFyZ3VtZW50IGlzIG5vdCAnICtcbiAgICAgICAgJ2EgZnVuY3Rpb24nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhID1cbiAgICBmdW5jdGlvbiBnZXREaXNwbGF5TWVkaWEoY29uc3RyYWludHMpIHtcbiAgICAgIHJldHVybiBnZXRTb3VyY2VJZChjb25zdHJhaW50cylcbiAgICAgICAgLnRoZW4oc291cmNlSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IHdpZHRoU3BlY2lmaWVkID0gY29uc3RyYWludHMudmlkZW8gJiYgY29uc3RyYWludHMudmlkZW8ud2lkdGg7XG4gICAgICAgICAgY29uc3QgaGVpZ2h0U3BlY2lmaWVkID0gY29uc3RyYWludHMudmlkZW8gJiZcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmhlaWdodDtcbiAgICAgICAgICBjb25zdCBmcmFtZVJhdGVTcGVjaWZpZWQgPSBjb25zdHJhaW50cy52aWRlbyAmJlxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZnJhbWVSYXRlO1xuICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0ge1xuICAgICAgICAgICAgbWFuZGF0b3J5OiB7XG4gICAgICAgICAgICAgIGNocm9tZU1lZGlhU291cmNlOiAnZGVza3RvcCcsXG4gICAgICAgICAgICAgIGNocm9tZU1lZGlhU291cmNlSWQ6IHNvdXJjZUlkLFxuICAgICAgICAgICAgICBtYXhGcmFtZVJhdGU6IGZyYW1lUmF0ZVNwZWNpZmllZCB8fCAzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAod2lkdGhTcGVjaWZpZWQpIHtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1hbmRhdG9yeS5tYXhXaWR0aCA9IHdpZHRoU3BlY2lmaWVkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaGVpZ2h0U3BlY2lmaWVkKSB7XG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5tYW5kYXRvcnkubWF4SGVpZ2h0ID0gaGVpZ2h0U3BlY2lmaWVkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return shimGetUserMedia; });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nconst logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__[\"log\"];\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qcz8xZTlhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTtBQUN3QjtBQUNyQyxnQkFBZ0IsNkNBQVM7O0FBRWxCO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsWUFBWTtBQUN2RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBLHlEQUF5RCxvQkFBb0I7QUFDN0UseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jaHJvbWUvZ2V0dXNlcm1lZGlhLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzLmpzJztcbmNvbnN0IGxvZ2dpbmcgPSB1dGlscy5sb2c7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY29uc3RyYWludHNUb0Nocm9tZV8gPSBmdW5jdGlvbihjKSB7XG4gICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7XG4gICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgY29uc3QgY2MgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCByID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/IGNba2V5XSA6IHtpZGVhbDogY1trZXldfTtcbiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHIubWluID0gci5tYXggPSByLmV4YWN0O1xuICAgICAgfVxuICAgICAgY29uc3Qgb2xkbmFtZV8gPSBmdW5jdGlvbihwcmVmaXgsIG5hbWUpIHtcbiAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgIHJldHVybiBwcmVmaXggKyBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7XG4gICAgICB9O1xuICAgICAgaWYgKHIuaWRlYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdO1xuICAgICAgICBsZXQgb2MgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgICAgb2MgPSB7fTtcbiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsO1xuICAgICAgICAgIGNjLm9wdGlvbmFsLnB1c2gob2MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgIT09ICdudW1iZXInKSB7XG4gICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTtcbiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBbJ21pbicsICdtYXgnXS5mb3JFYWNoKG1peCA9PiB7XG4gICAgICAgICAgaWYgKHJbbWl4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8obWl4LCBrZXkpXSA9IHJbbWl4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjLmFkdmFuY2VkKSB7XG4gICAgICBjYy5vcHRpb25hbCA9IChjYy5vcHRpb25hbCB8fCBbXSkuY29uY2F0KGMuYWR2YW5jZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2M7XG4gIH07XG5cbiAgY29uc3Qgc2hpbUNvbnN0cmFpbnRzXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBmdW5jKSB7XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjEpIHtcbiAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTtcbiAgICB9XG4gICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgaWYgKGNvbnN0cmFpbnRzICYmIHR5cGVvZiBjb25zdHJhaW50cy5hdWRpbyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNvbnN0IHJlbWFwID0gZnVuY3Rpb24ob2JqLCBhLCBiKSB7XG4gICAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICAgIG9ialtiXSA9IG9ialthXTtcbiAgICAgICAgICBkZWxldGUgb2JqW2FdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgICByZW1hcChjb25zdHJhaW50cy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdnb29nQXV0b0dhaW5Db250cm9sJyk7XG4gICAgICByZW1hcChjb25zdHJhaW50cy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnZ29vZ05vaXNlU3VwcHJlc3Npb24nKTtcbiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMuYXVkaW8pO1xuICAgIH1cbiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8gU2hpbSBmYWNpbmdNb2RlIGZvciBtb2JpbGUgJiBzdXJmYWNlIHByby5cbiAgICAgIGxldCBmYWNlID0gY29uc3RyYWludHMudmlkZW8uZmFjaW5nTW9kZTtcbiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTtcbiAgICAgIGNvbnN0IGdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzID0gYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY2O1xuXG4gICAgICBpZiAoKGZhY2UgJiYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8XG4gICAgICAgICAgICAgICAgICAgIGZhY2UuaWRlYWwgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSkgJiZcbiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiZcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlICYmXG4gICAgICAgICAgICAhZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMpKSB7XG4gICAgICAgIGRlbGV0ZSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgICBsZXQgbWF0Y2hlcztcbiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50Jykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2JhY2snLCAncmVhciddO1xuICAgICAgICB9IGVsc2UgaWYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAndXNlcicpIHtcbiAgICAgICAgICBtYXRjaGVzID0gWydmcm9udCddO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgLy8gTG9vayBmb3IgbWF0Y2hlcyBpbiBsYWJlbCwgb3IgdXNlIGxhc3QgY2FtIGZvciBiYWNrICh0eXBpY2FsKS5cbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAgICAgICAudGhlbihkZXZpY2VzID0+IHtcbiAgICAgICAgICAgIGRldmljZXMgPSBkZXZpY2VzLmZpbHRlcihkID0+IGQua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKTtcbiAgICAgICAgICAgIGxldCBkZXYgPSBkZXZpY2VzLmZpbmQoZCA9PiBtYXRjaGVzLnNvbWUobWF0Y2ggPT5cbiAgICAgICAgICAgICAgZC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1hdGNoKSkpO1xuICAgICAgICAgICAgaWYgKCFkZXYgJiYgZGV2aWNlcy5sZW5ndGggJiYgbWF0Y2hlcy5pbmNsdWRlcygnYmFjaycpKSB7XG4gICAgICAgICAgICAgIGRldiA9IGRldmljZXNbZGV2aWNlcy5sZW5ndGggLSAxXTsgLy8gbW9yZSBsaWtlbHkgdGhlIGJhY2sgY2FtXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGV2KSB7XG4gICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLmRldmljZUlkID0gZmFjZS5leGFjdCA/IHtleGFjdDogZGV2LmRldmljZUlkfSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpZGVhbDogZGV2LmRldmljZUlkfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pO1xuICAgICAgICAgICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgfVxuICAgIGxvZ2dpbmcoJ2Nocm9tZTogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICB9O1xuXG4gIGNvbnN0IHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjQpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1xuICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBQZXJtaXNzaW9uRGlzbWlzc2VkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBJbnZhbGlkU3RhdGVFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIERldmljZXNOb3RGb3VuZEVycm9yOiAnTm90Rm91bmRFcnJvcicsXG4gICAgICAgIENvbnN0cmFpbnROb3RTYXRpc2ZpZWRFcnJvcjogJ092ZXJjb25zdHJhaW5lZEVycm9yJyxcbiAgICAgICAgVHJhY2tTdGFydEVycm9yOiAnTm90UmVhZGFibGVFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlRmFpbGVkRHVlVG9TaHV0ZG93bjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlS2lsbFN3aXRjaE9uOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgVGFiQ2FwdHVyZUVycm9yOiAnQWJvcnRFcnJvcicsXG4gICAgICAgIFNjcmVlbkNhcHR1cmVFcnJvcjogJ0Fib3J0RXJyb3InLFxuICAgICAgICBEZXZpY2VDYXB0dXJlRXJyb3I6ICdBYm9ydEVycm9yJ1xuICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSxcbiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcbiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCB8fCBlLmNvbnN0cmFpbnROYW1lLFxuICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgZ2V0VXNlck1lZGlhXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICBzaGltQ29uc3RyYWludHNfKGNvbnN0cmFpbnRzLCBjID0+IHtcbiAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEoYywgb25TdWNjZXNzLCBlID0+IHtcbiAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICBvbkVycm9yKHNoaW1FcnJvcl8oZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV8uYmluZChuYXZpZ2F0b3IpO1xuXG4gIC8vIEV2ZW4gdGhvdWdoIENocm9tZSA0NSBoYXMgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhbmQgYSBnZXRVc2VyTWVkaWFcbiAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlXG4gIC8vIGNvbnN0cmFpbnRzLlxuICBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBjb25zdCBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuXG4gICAgICAgIGJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjcykge1xuICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGMgPT4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKHN0cmVhbSA9PiB7XG4gICAgICAgIGlmIChjLmF1ZGlvICYmICFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggfHxcbiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCcnLCAnTm90Rm91bmRFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICB9LCBlID0+IFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpKSk7XG4gICAgfTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/*! exports provided: shimRTCIceCandidate, shimMaxMessageSize, shimSendThrowTypeError, shimConnectionState, removeExtmapAllowMixed, shimAddIceCandidateNullOrEmpty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimRTCIceCandidate\", function() { return shimRTCIceCandidate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimMaxMessageSize\", function() { return shimMaxMessageSize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimSendThrowTypeError\", function() { return shimSendThrowTypeError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimConnectionState\", function() { return shimConnectionState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeExtmapAllowMixed\", function() { return removeExtmapAllowMixed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimAddIceCandidateNullOrEmpty\", function() { return shimAddIceCandidateNullOrEmpty; });\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ \"./node_modules/sdp/sdp.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  _utils__WEBPACK_IMPORTED_MODULE_1__[\"wrapPeerConnectionEvent\"](window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default.a.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  _utils__WEBPACK_IMPORTED_MODULE_1__[\"wrapPeerConnectionEvent\"](window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nfunction shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY29tbW9uX3NoaW0uanM/ZjFlMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7QUFFYztBQUNNOztBQUUxQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwwQ0FBUTtBQUN0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUUsOERBQTZCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwQ0FBUTtBQUM3QjtBQUNBO0FBQ0Esb0JBQW9CLDBDQUFRO0FBQzVCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLDBDQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsOERBQTZCO0FBQy9CO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG1CQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jb21tb25fc2hpbS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBTRFBVdGlscyBmcm9tICdzZHAnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUlRDSWNlQ2FuZGlkYXRlKHdpbmRvdykge1xuICAvLyBmb3VuZGF0aW9uIGlzIGFyYml0cmFyaWx5IGNob3NlbiBhcyBhbiBpbmRpY2F0b3IgZm9yIGZ1bGwgc3VwcG9ydCBmb3JcbiAgLy8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1wYy8jcnRjaWNlY2FuZGlkYXRlLWludGVyZmFjZVxuICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUgfHwgKHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgJiYgJ2ZvdW5kYXRpb24nIGluXG4gICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBOYXRpdmVSVENJY2VDYW5kaWRhdGUgPSB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlO1xuICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24gUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpIHtcbiAgICAvLyBSZW1vdmUgdGhlIGE9IHdoaWNoIHNob3VsZG4ndCBiZSBwYXJ0IG9mIHRoZSBjYW5kaWRhdGUgc3RyaW5nLlxuICAgIGlmICh0eXBlb2YgYXJncyA9PT0gJ29iamVjdCcgJiYgYXJncy5jYW5kaWRhdGUgJiZcbiAgICAgICAgYXJncy5jYW5kaWRhdGUuaW5kZXhPZignYT0nKSA9PT0gMCkge1xuICAgICAgYXJncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJncykpO1xuICAgICAgYXJncy5jYW5kaWRhdGUgPSBhcmdzLmNhbmRpZGF0ZS5zdWJzdHIoMik7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3MuY2FuZGlkYXRlICYmIGFyZ3MuY2FuZGlkYXRlLmxlbmd0aCkge1xuICAgICAgLy8gQXVnbWVudCB0aGUgbmF0aXZlIGNhbmRpZGF0ZSB3aXRoIHRoZSBwYXJzZWQgZmllbGRzLlxuICAgICAgY29uc3QgbmF0aXZlQ2FuZGlkYXRlID0gbmV3IE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZShhcmdzKTtcbiAgICAgIGNvbnN0IHBhcnNlZENhbmRpZGF0ZSA9IFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGFyZ3MuY2FuZGlkYXRlKTtcbiAgICAgIGNvbnN0IGF1Z21lbnRlZENhbmRpZGF0ZSA9IE9iamVjdC5hc3NpZ24obmF0aXZlQ2FuZGlkYXRlLFxuICAgICAgICAgIHBhcnNlZENhbmRpZGF0ZSk7XG5cbiAgICAgIC8vIEFkZCBhIHNlcmlhbGl6ZXIgdGhhdCBkb2VzIG5vdCBzZXJpYWxpemUgdGhlIGV4dHJhIGF0dHJpYnV0ZXMuXG4gICAgICBhdWdtZW50ZWRDYW5kaWRhdGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNhbmRpZGF0ZTogYXVnbWVudGVkQ2FuZGlkYXRlLmNhbmRpZGF0ZSxcbiAgICAgICAgICBzZHBNaWQ6IGF1Z21lbnRlZENhbmRpZGF0ZS5zZHBNaWQsXG4gICAgICAgICAgc2RwTUxpbmVJbmRleDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsXG4gICAgICAgICAgdXNlcm5hbWVGcmFnbWVudDogYXVnbWVudGVkQ2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF1Z21lbnRlZENhbmRpZGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBOYXRpdmVSVENJY2VDYW5kaWRhdGUoYXJncyk7XG4gIH07XG4gIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlID0gTmF0aXZlUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZTtcblxuICAvLyBIb29rIHVwIHRoZSBhdWdtZW50ZWQgY2FuZGlkYXRlIGluIG9uaWNlY2FuZGlkYXRlIGFuZFxuICAvLyBhZGRFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGUnLCAuLi4pXG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ2ljZWNhbmRpZGF0ZScsIGUgPT4ge1xuICAgIGlmIChlLmNhbmRpZGF0ZSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICdjYW5kaWRhdGUnLCB7XG4gICAgICAgIHZhbHVlOiBuZXcgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksXG4gICAgICAgIHdyaXRhYmxlOiAnZmFsc2UnXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoISgnc2N0cCcgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ3NjdHAnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHNjdHBJbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICBpZiAoIWRlc2NyaXB0aW9uIHx8ICFkZXNjcmlwdGlvbi5zZHApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgc2VjdGlvbnMuc2hpZnQoKTtcbiAgICByZXR1cm4gc2VjdGlvbnMuc29tZShtZWRpYVNlY3Rpb24gPT4ge1xuICAgICAgY29uc3QgbUxpbmUgPSBTRFBVdGlscy5wYXJzZU1MaW5lKG1lZGlhU2VjdGlvbik7XG4gICAgICByZXR1cm4gbUxpbmUgJiYgbUxpbmUua2luZCA9PT0gJ2FwcGxpY2F0aW9uJ1xuICAgICAgICAgICYmIG1MaW5lLnByb3RvY29sLmluZGV4T2YoJ1NDVFAnKSAhPT0gLTE7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UmVtb3RlRmlyZWZveFZlcnNpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIC8vIFRPRE86IElzIHRoZXJlIGEgYmV0dGVyIHNvbHV0aW9uIGZvciBkZXRlY3RpbmcgRmlyZWZveD9cbiAgICBjb25zdCBtYXRjaCA9IGRlc2NyaXB0aW9uLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtcbiAgICBpZiAobWF0Y2ggPT09IG51bGwgfHwgbWF0Y2gubGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBjb25zdCB2ZXJzaW9uID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAvLyBUZXN0IGZvciBOYU4gKHllcywgdGhpcyBpcyB1Z2x5KVxuICAgIHJldHVybiB2ZXJzaW9uICE9PSB2ZXJzaW9uID8gLTEgOiB2ZXJzaW9uO1xuICB9O1xuXG4gIGNvbnN0IGdldENhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IGZ1bmN0aW9uKHJlbW90ZUlzRmlyZWZveCkge1xuICAgIC8vIEV2ZXJ5IGltcGxlbWVudGF0aW9uIHdlIGtub3cgY2FuIHNlbmQgYXQgbGVhc3QgNjQgS2lCLlxuICAgIC8vIE5vdGU6IEFsdGhvdWdoIENocm9tZSBpcyB0ZWNobmljYWxseSBhYmxlIHRvIHNlbmQgdXAgdG8gMjU2IEtpQiwgdGhlXG4gICAgLy8gICAgICAgZGF0YSBkb2VzIG5vdCByZWFjaCB0aGUgb3RoZXIgcGVlciByZWxpYWJseS5cbiAgICAvLyAgICAgICBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD04NDE5XG4gICAgbGV0IGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuICAgIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcpIHtcbiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTcpIHtcbiAgICAgICAgaWYgKHJlbW90ZUlzRmlyZWZveCA9PT0gLTEpIHtcbiAgICAgICAgICAvLyBGRiA8IDU3IHdpbGwgc2VuZCBpbiAxNiBLaUIgY2h1bmtzIHVzaW5nIHRoZSBkZXByZWNhdGVkIFBQSURcbiAgICAgICAgICAvLyBmcmFnbWVudGF0aW9uLlxuICAgICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDE2Mzg0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEhvd2V2ZXIsIG90aGVyIEZGIChhbmQgUkFXUlRDKSBjYW4gcmVhc3NlbWJsZSBQUElELWZyYWdtZW50ZWRcbiAgICAgICAgICAvLyBtZXNzYWdlcy4gVGh1cywgc3VwcG9ydGluZyB+MiBHaUIgd2hlbiBzZW5kaW5nLlxuICAgICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDIxNDc0ODM2Mzc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDYwKSB7XG4gICAgICAgIC8vIEN1cnJlbnRseSwgYWxsIEZGID49IDU3IHdpbGwgcmVzZXQgdGhlIHJlbW90ZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZVxuICAgICAgICAvLyB0byB0aGUgZGVmYXVsdCB2YWx1ZSB3aGVuIGEgZGF0YSBjaGFubmVsIGlzIGNyZWF0ZWQgYXQgYSBsYXRlclxuICAgICAgICAvLyBzdGFnZS4gOihcbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI2ODMxXG4gICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9XG4gICAgICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbiA9PT0gNTcgPyA2NTUzNSA6IDY1NTM2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRkYgPj0gNjAgc3VwcG9ydHMgc2VuZGluZyB+MiBHaUJcbiAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhblNlbmRNYXhNZXNzYWdlU2l6ZTtcbiAgfTtcblxuICBjb25zdCBnZXRNYXhNZXNzYWdlU2l6ZSA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uLCByZW1vdGVJc0ZpcmVmb3gpIHtcbiAgICAvLyBOb3RlOiA2NTUzNiBieXRlcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZSBmcm9tIHRoZSBTRFAgc3BlYy4gQWxzbyxcbiAgICAvLyAgICAgICBldmVyeSBpbXBsZW1lbnRhdGlvbiB3ZSBrbm93IHN1cHBvcnRzIHJlY2VpdmluZyA2NTUzNiBieXRlcy5cbiAgICBsZXQgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcblxuICAgIC8vIEZGIDU3IGhhcyBhIHNsaWdodGx5IGluY29ycmVjdCBkZWZhdWx0IHJlbW90ZSBtYXggbWVzc2FnZSBzaXplLCBzb1xuICAgIC8vIHdlIG5lZWQgdG8gYWRqdXN0IGl0IGhlcmUgdG8gYXZvaWQgYSBmYWlsdXJlIHdoZW4gc2VuZGluZy5cbiAgICAvLyBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjU2OTdcbiAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnXG4gICAgICAgICAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSA1Nykge1xuICAgICAgbWF4TWVzc2FnZVNpemUgPSA2NTUzNTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KGRlc2NyaXB0aW9uLnNkcCxcbiAgICAgICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7XG4gICAgaWYgKG1hdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgIG1heE1lc3NhZ2VTaXplID0gcGFyc2VJbnQobWF0Y2hbMF0uc3Vic3RyKDE5KSwgMTApO1xuICAgIH0gZWxzZSBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnICYmXG4gICAgICAgICAgICAgICAgcmVtb3RlSXNGaXJlZm94ICE9PSAtMSkge1xuICAgICAgLy8gSWYgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIGlzIG5vdCBwcmVzZW50IGluIHRoZSByZW1vdGUgU0RQIGFuZFxuICAgICAgLy8gYm90aCBsb2NhbCBhbmQgcmVtb3RlIGFyZSBGaXJlZm94LCB0aGUgcmVtb3RlIHBlZXIgY2FuIHJlY2VpdmVcbiAgICAgIC8vIH4yIEdpQi5cbiAgICAgIG1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICB9XG4gICAgcmV0dXJuIG1heE1lc3NhZ2VTaXplO1xuICB9O1xuXG4gIGNvbnN0IG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHtcbiAgICAgIHRoaXMuX3NjdHAgPSBudWxsO1xuICAgICAgLy8gQ2hyb21lIGRlY2lkZWQgdG8gbm90IGV4cG9zZSAuc2N0cCBpbiBwbGFuLWIgbW9kZS5cbiAgICAgIC8vIEFzIHVzdWFsLCBhZGFwdGVyLmpzIGhhcyB0byBkbyBhbiAndWdseSB3b3Jha2Fyb3VuZCdcbiAgICAgIC8vIHRvIGNvdmVyIHVwIHRoZSBtZXNzLlxuICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNzYpIHtcbiAgICAgICAgY29uc3Qge3NkcFNlbWFudGljc30gPSB0aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgaWYgKHNkcFNlbWFudGljcyA9PT0gJ3BsYW4tYicpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3NjdHAnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3RwSW5EZXNjcmlwdGlvbihhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZW1vdGUgaXMgRkYuXG4gICAgICAgIGNvbnN0IGlzRmlyZWZveCA9IGdldFJlbW90ZUZpcmVmb3hWZXJzaW9uKGFyZ3VtZW50c1swXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZSB0aGUgbG9jYWwgcGVlciBpcyBjYXBhYmxlIG9mIHNlbmRpbmdcbiAgICAgICAgY29uc3QgY2FuU2VuZE1NUyA9IGdldENhblNlbmRNYXhNZXNzYWdlU2l6ZShpc0ZpcmVmb3gpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgbWF4aW11bSBtZXNzYWdlIHNpemUgb2YgdGhlIHJlbW90ZSBwZWVyLlxuICAgICAgICBjb25zdCByZW1vdGVNTVMgPSBnZXRNYXhNZXNzYWdlU2l6ZShhcmd1bWVudHNbMF0sIGlzRmlyZWZveCk7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZpbmFsIG1heGltdW0gbWVzc2FnZSBzaXplXG4gICAgICAgIGxldCBtYXhNZXNzYWdlU2l6ZTtcbiAgICAgICAgaWYgKGNhblNlbmRNTVMgPT09IDAgJiYgcmVtb3RlTU1TID09PSAwKSB7XG4gICAgICAgICAgbWF4TWVzc2FnZVNpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FuU2VuZE1NUyA9PT0gMCB8fCByZW1vdGVNTVMgPT09IDApIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE1hdGgubWF4KGNhblNlbmRNTVMsIHJlbW90ZU1NUyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF4TWVzc2FnZVNpemUgPSBNYXRoLm1pbihjYW5TZW5kTU1TLCByZW1vdGVNTVMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgUlRDU2N0cFRyYW5zcG9ydCBvYmplY3QgYW5kIHRoZSAnbWF4TWVzc2FnZVNpemUnXG4gICAgICAgIC8vIGF0dHJpYnV0ZS5cbiAgICAgICAgY29uc3Qgc2N0cCA9IHt9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2N0cCwgJ21heE1lc3NhZ2VTaXplJywge1xuICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhNZXNzYWdlU2l6ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zY3RwID0gc2N0cDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdykge1xuICBpZiAoISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICdjcmVhdGVEYXRhQ2hhbm5lbCcgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBOb3RlOiBBbHRob3VnaCBGaXJlZm94ID49IDU3IGhhcyBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgdGhlIG1heGltdW1cbiAgLy8gICAgICAgbWVzc2FnZSBzaXplIGNhbiBiZSByZXNldCBmb3IgYWxsIGRhdGEgY2hhbm5lbHMgYXQgYSBsYXRlciBzdGFnZS5cbiAgLy8gICAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI2ODMxXG5cbiAgZnVuY3Rpb24gd3JhcERjU2VuZChkYywgcGMpIHtcbiAgICBjb25zdCBvcmlnRGF0YUNoYW5uZWxTZW5kID0gZGMuc2VuZDtcbiAgICBkYy5zZW5kID0gZnVuY3Rpb24gc2VuZCgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhcmd1bWVudHNbMF07XG4gICAgICBjb25zdCBsZW5ndGggPSBkYXRhLmxlbmd0aCB8fCBkYXRhLnNpemUgfHwgZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgaWYgKGRjLnJlYWR5U3RhdGUgPT09ICdvcGVuJyAmJlxuICAgICAgICAgIHBjLnNjdHAgJiYgbGVuZ3RoID4gcGMuc2N0cC5tYXhNZXNzYWdlU2l6ZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mICcgK1xuICAgICAgICAgIHBjLnNjdHAubWF4TWVzc2FnZVNpemUgKyAnIGJ5dGVzKScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdEYXRhQ2hhbm5lbFNlbmQuYXBwbHkoZGMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuICBjb25zdCBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwgPVxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWw7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWwgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURhdGFDaGFubmVsKCkge1xuICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdyYXBEY1NlbmQoZGF0YUNoYW5uZWwsIHRoaXMpO1xuICAgICAgcmV0dXJuIGRhdGFDaGFubmVsO1xuICAgIH07XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ2RhdGFjaGFubmVsJywgZSA9PiB7XG4gICAgd3JhcERjU2VuZChlLmNoYW5uZWwsIGUudGFyZ2V0KTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5cblxuLyogc2hpbXMgUlRDQ29ubmVjdGlvblN0YXRlIGJ5IHByZXRlbmRpbmcgaXQgaXMgdGhlIHNhbWUgYXMgaWNlQ29ubmVjdGlvblN0YXRlLlxuICogU2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02MTQ1I2MxMlxuICogZm9yIHdoeSB0aGlzIGlzIGEgdmFsaWQgaGFjayBpbiBDaHJvbWUuIEluIEZpcmVmb3ggaXQgaXMgc2xpZ2h0bHkgaW5jb3JyZWN0XG4gKiBzaW5jZSBEVExTIGZhaWx1cmVzIHdvdWxkIGJlIGhpZGRlbi4gU2VlXG4gKiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjY1ODI3XG4gKiBmb3IgdGhlIEZpcmVmb3ggdHJhY2tpbmcgYnVnLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNvbm5lY3Rpb25TdGF0ZSh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICdjb25uZWN0aW9uU3RhdGUnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJvdG8gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdjb25uZWN0aW9uU3RhdGUnLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29tcGxldGVkOiAnY29ubmVjdGVkJyxcbiAgICAgICAgY2hlY2tpbmc6ICdjb25uZWN0aW5nJ1xuICAgICAgfVt0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZV0gfHwgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCAnb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlIHx8IG51bGw7XG4gICAgfSxcbiAgICBzZXQoY2IpIHtcbiAgICAgIGlmICh0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICAgICAgICB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZTtcbiAgICAgIH1cbiAgICAgIGlmIChjYikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICAgICAgICB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IGNiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xuXG4gIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbiddLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICAgIGNvbnN0IG9yaWdNZXRob2QgPSBwcm90b1ttZXRob2RdO1xuICAgIHByb3RvW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seSkge1xuICAgICAgICB0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5ID0gZSA9PiB7XG4gICAgICAgICAgY29uc3QgcGMgPSBlLnRhcmdldDtcbiAgICAgICAgICBpZiAocGMuX2xhc3RDb25uZWN0aW9uU3RhdGUgIT09IHBjLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgICAgICAgcGMuX2xhc3RDb25uZWN0aW9uU3RhdGUgPSBwYy5jb25uZWN0aW9uU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBuZXdFdmVudCA9IG5ldyBFdmVudCgnY29ubmVjdGlvbnN0YXRlY2hhbmdlJywgZSk7XG4gICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcmlnTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFeHRtYXBBbGxvd01peGVkKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgLyogcmVtb3ZlIGE9ZXh0bWFwLWFsbG93LW1peGVkIGZvciB3ZWJydGMub3JnIDwgTTcxICovXG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnY2hyb21lJyAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDcxKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnc2FmYXJpJyAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDYwNSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuYXRpdmVTUkQgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgZnVuY3Rpb24gc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzYykge1xuICAgIGlmIChkZXNjICYmIGRlc2Muc2RwICYmIGRlc2Muc2RwLmluZGV4T2YoJ1xcbmE9ZXh0bWFwLWFsbG93LW1peGVkJykgIT09IC0xKSB7XG4gICAgICBjb25zdCBzZHAgPSBkZXNjLnNkcC5zcGxpdCgnXFxuJykuZmlsdGVyKChsaW5lKSA9PiB7XG4gICAgICAgIHJldHVybiBsaW5lLnRyaW0oKSAhPT0gJ2E9ZXh0bWFwLWFsbG93LW1peGVkJztcbiAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgLy8gU2FmYXJpIGVuZm9yY2VzIHJlYWQtb25seS1uZXNzIG9mIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbiBmaWVsZHMuXG4gICAgICBpZiAod2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiAmJlxuICAgICAgICAgIGRlc2MgaW5zdGFuY2VvZiB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgICAgICB0eXBlOiBkZXNjLnR5cGUsXG4gICAgICAgICAgc2RwLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlc2Muc2RwID0gc2RwO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmF0aXZlU1JELmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICAvLyBTdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpXG4gIC8vIGFzIHdlbGwgYXMgYWRkSWNlQ2FuZGlkYXRlKHtjYW5kaWRhdGU6IFwiXCIsIC4uLn0pXG4gIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTk3ODU4MlxuICAvLyBOb3RlOiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3RoZXIgcG9seWZpbGxzIHdoaWNoIGNoYW5nZSB0aGUgc2lnbmF0dXJlLlxuICBpZiAoISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuICBpZiAoIW5hdGl2ZUFkZEljZUNhbmRpZGF0ZSB8fCBuYXRpdmVBZGRJY2VDYW5kaWRhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID1cbiAgICBmdW5jdGlvbiBhZGRJY2VDYW5kaWRhdGUoKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIC8vIEZpcmVmb3ggNjgrIGVtaXRzIGFuZCBwcm9jZXNzZXMge2NhbmRpZGF0ZTogXCJcIiwgLi4ufSwgaWdub3JlXG4gICAgICAvLyBpbiBvbGRlciB2ZXJzaW9ucy5cbiAgICAgIC8vIE5hdGl2ZSBzdXBwb3J0IGZvciBpZ25vcmluZyBleGlzdHMgZm9yIENocm9tZSBNNzcrLlxuICAgICAgLy8gU2FmYXJpIGlnbm9yZXMgYXMgd2VsbCwgZXhhY3QgdmVyc2lvbiB1bmtub3duIGJ1dCB3b3JrcyBpbiB0aGUgc2FtZVxuICAgICAgLy8gdmVyc2lvbiB0aGF0IGFsc28gaWdub3JlcyBhZGRJY2VDYW5kaWRhdGUobnVsbCkuXG4gICAgICBpZiAoKChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnY2hyb21lJyAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNzgpXG4gICAgICAgICAgIHx8IChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCdcbiAgICAgICAgICAgICAgICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA2OClcbiAgICAgICAgICAgfHwgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdzYWZhcmknKSlcbiAgICAgICAgICAmJiBhcmd1bWVudHNbMF0gJiYgYXJndW1lbnRzWzBdLmNhbmRpZGF0ZSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/common_shim.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/edge_shim.js":
/*!**************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/edge_shim.js ***!
  \**************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimPeerConnection, shimReplaceTrack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimPeerConnection\", function() { return shimPeerConnection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimReplaceTrack\", function() { return shimReplaceTrack; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _filtericeservers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./filtericeservers */ \"./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js\");\n/* harmony import */ var rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rtcpeerconnection-shim */ \"./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js\");\n/* harmony import */ var rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getusermedia */ \"./node_modules/webrtc-adapter/src/js/edge/getusermedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_3__[\"shimGetUserMedia\"]; });\n\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getdisplaymedia */ \"./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_4__[\"shimGetDisplayMedia\"]; });\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\n\n\n\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = rtcpeerconnection_shim__WEBPACK_IMPORTED_MODULE_2___default()(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = Object(_filtericeservers__WEBPACK_IMPORTED_MODULE_1__[\"filterIceServers\"])(config.iceServers,\n        browserDetails.version);\n      _utils__WEBPACK_IMPORTED_MODULE_0__[\"log\"]('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9lZGdlX3NoaW0uanM/ZjY5NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7QUFFcUI7QUFDa0I7QUFDTzs7QUFFWDtBQUNNOztBQUUvQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDLDZEQUFxQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEVBQWdCO0FBQzFDO0FBQ0EsTUFBTSwwQ0FBUztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9lZGdlX3NoaW0uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge2ZpbHRlckljZVNlcnZlcnN9IGZyb20gJy4vZmlsdGVyaWNlc2VydmVycyc7XG5pbXBvcnQgc2hpbVJUQ1BlZXJDb25uZWN0aW9uIGZyb20gJ3J0Y3BlZXJjb25uZWN0aW9uLXNoaW0nO1xuXG5leHBvcnQge3NoaW1HZXRVc2VyTWVkaWF9IGZyb20gJy4vZ2V0dXNlcm1lZGlhJztcbmV4cG9ydCB7c2hpbUdldERpc3BsYXlNZWRpYX0gZnJvbSAnLi9nZXRkaXNwbGF5bWVkaWEnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikge1xuICAgIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSkge1xuICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIFJUQ0ljZUNhbmRpZGF0ZShhcmdzKSB7XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7XG4gICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24gUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgICB9O1xuICAgIH1cbiAgICAvLyB0aGlzIGFkZHMgYW4gYWRkaXRpb25hbCBldmVudCBsaXN0ZW5lciB0byBNZWRpYVN0cmFja1RyYWNrIHRoYXQgc2lnbmFsc1xuICAgIC8vIHdoZW4gYSB0cmFja3MgZW5hYmxlZCBwcm9wZXJ0eSB3YXMgY2hhbmdlZC4gV29ya2Fyb3VuZCBmb3IgYSBidWcgaW5cbiAgICAvLyBhZGRTdHJlYW0sIHNlZSBiZWxvdy4gTm8gbG9uZ2VyIHJlcXVpcmVkIGluIDE1MDI1K1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMTUwMjUpIHtcbiAgICAgIGNvbnN0IG9yaWdNU1RFbmFibGVkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgICAgICB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93Lk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLCAnZW5hYmxlZCcsIHtcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgb3JpZ01TVEVuYWJsZWQuc2V0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgIGNvbnN0IGV2ID0gbmV3IEV2ZW50KCdlbmFibGVkJyk7XG4gICAgICAgICAgZXYuZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIE9SVEMgZGVmaW5lcyB0aGUgRFRNRiBzZW5kZXIgYSBiaXQgZGlmZmVyZW50LlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdzNjL29ydGMvaXNzdWVzLzcxNFxuICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAhKCdkdG1mJyBpbiB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsICdkdG1mJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICBpZiAodGhpcy5fZHRtZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG5ldyB3aW5kb3cuUlRDRHRtZlNlbmRlcih0aGlzKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHJhY2sua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kdG1mO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIC8vIEVkZ2UgY3VycmVudGx5IG9ubHkgaW1wbGVtZW50cyB0aGUgUlRDRHRtZlNlbmRlciwgbm90IHRoZVxuICAvLyBSVENEVE1GU2VuZGVyIGFsaWFzLiBTZWUgaHR0cDovL2RyYWZ0Lm9ydGMub3JnLyNydGNkdG1mc2VuZGVyMipcbiAgaWYgKHdpbmRvdy5SVENEdG1mU2VuZGVyICYmICF3aW5kb3cuUlRDRFRNRlNlbmRlcikge1xuICAgIHdpbmRvdy5SVENEVE1GU2VuZGVyID0gd2luZG93LlJUQ0R0bWZTZW5kZXI7XG4gIH1cblxuICBjb25zdCBSVENQZWVyQ29ubmVjdGlvblNoaW0gPSBzaGltUlRDUGVlckNvbm5lY3Rpb24od2luZG93LFxuICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbik7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIFJUQ1BlZXJDb25uZWN0aW9uKGNvbmZpZykge1xuICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVNlcnZlcnMpIHtcbiAgICAgIGNvbmZpZy5pY2VTZXJ2ZXJzID0gZmlsdGVySWNlU2VydmVycyhjb25maWcuaWNlU2VydmVycyxcbiAgICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbik7XG4gICAgICB1dGlscy5sb2coJ0lDRSBzZXJ2ZXJzIGFmdGVyIGZpbHRlcmluZzonLCBjb25maWcuaWNlU2VydmVycyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUlRDUGVlckNvbm5lY3Rpb25TaGltKGNvbmZpZyk7XG4gIH07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSBSVENQZWVyQ29ubmVjdGlvblNoaW0ucHJvdG90eXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJlcGxhY2VUcmFjayh3aW5kb3cpIHtcbiAgLy8gT1JUQyBoYXMgcmVwbGFjZVRyYWNrIC0tIGh0dHBzOi8vZ2l0aHViLmNvbS93M2Mvb3J0Yy9pc3N1ZXMvNjE0XG4gIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmXG4gICAgICAhKCdyZXBsYWNlVHJhY2snIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSkge1xuICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnJlcGxhY2VUcmFjayA9XG4gICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/edge/edge_shim.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js ***!
  \*********************************************************************/
/*! exports provided: filterIceServers */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"filterIceServers\", function() { return filterIceServers; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      let urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"deprecated\"]('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9maWx0ZXJpY2VzZXJ2ZXJzLmpzP2IyZGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVxQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlEQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9maWx0ZXJpY2VzZXJ2ZXJzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuLy8gRWRnZSBkb2VzIG5vdCBsaWtlXG4vLyAxKSBzdHVuOiBmaWx0ZXJlZCBhZnRlciAxNDM5MyB1bmxlc3MgP3RyYW5zcG9ydD11ZHAgaXMgcHJlc2VudFxuLy8gMikgdHVybjogdGhhdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0dXJuOmhvc3Q6cG9ydD90cmFuc3BvcnQ9dWRwXG4vLyAzKSB0dXJuOiB3aXRoIGlwdjYgYWRkcmVzc2VzXG4vLyA0KSB0dXJuOiBvY2N1cnJpbmcgbXVsaXBsZSB0aW1lc1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckljZVNlcnZlcnMoaWNlU2VydmVycywgZWRnZVZlcnNpb24pIHtcbiAgbGV0IGhhc1R1cm4gPSBmYWxzZTtcbiAgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaWNlU2VydmVycykpO1xuICByZXR1cm4gaWNlU2VydmVycy5maWx0ZXIoc2VydmVyID0+IHtcbiAgICBpZiAoc2VydmVyICYmIChzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsKSkge1xuICAgICAgbGV0IHVybHMgPSBzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsO1xuICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7XG4gICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1JUQ0ljZVNlcnZlci51cmwnLCAnUlRDSWNlU2VydmVyLnVybHMnKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzU3RyaW5nID0gdHlwZW9mIHVybHMgPT09ICdzdHJpbmcnO1xuICAgICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAgIHVybHMgPSBbdXJsc107XG4gICAgICB9XG4gICAgICB1cmxzID0gdXJscy5maWx0ZXIodXJsID0+IHtcbiAgICAgICAgLy8gZmlsdGVyIFNUVU4gdW5jb25kaXRpb25hbGx5LlxuICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZFR1cm4gPSB1cmwuc3RhcnRzV2l0aCgndHVybicpICYmXG4gICAgICAgICAgICAhdXJsLnN0YXJ0c1dpdGgoJ3R1cm46WycpICYmXG4gICAgICAgICAgICB1cmwuaW5jbHVkZXMoJ3RyYW5zcG9ydD11ZHAnKTtcbiAgICAgICAgaWYgKHZhbGlkVHVybiAmJiAhaGFzVHVybikge1xuICAgICAgICAgIGhhc1R1cm4gPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZFR1cm4gJiYgIWhhc1R1cm47XG4gICAgICB9KTtcblxuICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICBzZXJ2ZXIudXJscyA9IGlzU3RyaW5nID8gdXJsc1swXSA6IHVybHM7XG4gICAgICByZXR1cm4gISF1cmxzLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js ***!
  \********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return shimGetDisplayMedia; });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nfunction shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9nZXRkaXNwbGF5bWVkaWEuanM/NmZjNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVOO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZ2V0ZGlzcGxheW1lZGlhLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIGFkYXB0ZXIuanMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3cpIHtcbiAgaWYgKCEoJ2dldERpc3BsYXlNZWRpYScgaW4gd2luZG93Lm5hdmlnYXRvcikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCEod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICdnZXREaXNwbGF5TWVkaWEnIGluIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSA9XG4gICAgd2luZG93Lm5hdmlnYXRvci5nZXREaXNwbGF5TWVkaWEuYmluZCh3aW5kb3cubmF2aWdhdG9yKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/edge/getusermedia.js":
/*!*****************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/edge/getusermedia.js ***!
  \*****************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return shimGetUserMedia; });\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nfunction shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9nZXR1c2VybWVkaWEuanM/ZWJhYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVOO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLGFBQWEseUNBQXlDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9lZGdlL2dldHVzZXJtZWRpYS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgY29uc3Qgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LFxuICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBnZXRVc2VyTWVkaWEgZXJyb3Igc2hpbS5cbiAgY29uc3Qgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7XG4gICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykuY2F0Y2goZSA9PiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKSk7XG4gIH07XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/edge/getusermedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/*! exports provided: shimGetUserMedia, shimGetDisplayMedia, shimOnTrack, shimPeerConnection, shimSenderGetStats, shimReceiverGetStats, shimRemoveStream, shimRTCDataChannel, shimAddTransceiver, shimGetParameters, shimCreateOffer, shimCreateAnswer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimOnTrack\", function() { return shimOnTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimPeerConnection\", function() { return shimPeerConnection; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimSenderGetStats\", function() { return shimSenderGetStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimReceiverGetStats\", function() { return shimReceiverGetStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimRemoveStream\", function() { return shimRemoveStream; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimRTCDataChannel\", function() { return shimRTCDataChannel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimAddTransceiver\", function() { return shimAddTransceiver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetParameters\", function() { return shimGetParameters; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimCreateOffer\", function() { return shimCreateOffer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimCreateAnswer\", function() { return shimCreateAnswer; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return _getusermedia__WEBPACK_IMPORTED_MODULE_1__[\"shimGetUserMedia\"]; });\n\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__[\"shimGetDisplayMedia\"]; });\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  _utils__WEBPACK_IMPORTED_MODULE_0__[\"wrapPeerConnectionEvent\"](window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      _utils__WEBPACK_IMPORTED_MODULE_0__[\"deprecated\"]('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nfunction shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9maXJlZm94X3NoaW0uanM/ZDY5NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRXFCO0FBQ2M7QUFDTTs7QUFFL0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsZUFBZTtBQUNmLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw4REFBNkI7QUFDL0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0saURBQWdCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZmlyZWZveF9zaGltLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4vKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuZXhwb3J0IHtzaGltR2V0VXNlck1lZGlhfSBmcm9tICcuL2dldHVzZXJtZWRpYSc7XG5leHBvcnQge3NoaW1HZXREaXNwbGF5TWVkaWF9IGZyb20gJy4vZ2V0ZGlzcGxheW1lZGlhJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1PblRyYWNrKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1RyYWNrRXZlbnQgJiZcbiAgICAgICgncmVjZWl2ZXInIGluIHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkgJiZcbiAgICAgICEoJ3RyYW5zY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSwgJ3RyYW5zY2VpdmVyJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4ge3JlY2VpdmVyOiB0aGlzLnJlY2VpdmVyfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8XG4gICAgICAhKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fCB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24pKSB7XG4gICAgcmV0dXJuOyAvLyBwcm9iYWJseSBtZWRpYS5wZWVyY29ubmVjdGlvbi5lbmFibGVkPWZhbHNlIGluIGFib3V0OmNvbmZpZ1xuICB9XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmIHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikge1xuICAgIC8vIHZlcnkgYmFzaWMgc3VwcG9ydCBmb3Igb2xkIHZlcnNpb25zLlxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbjtcbiAgfVxuXG4gIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTMpIHtcbiAgICAvLyBzaGltIGF3YXkgbmVlZCBmb3Igb2Jzb2xldGUgUlRDSWNlQ2FuZGlkYXRlL1JUQ1Nlc3Npb25EZXNjcmlwdGlvbi5cbiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ11cbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgY29uc3QgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICAgIGNvbnN0IG1ldGhvZE9iaiA9IHtbbWV0aG9kXSgpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID9cbiAgICAgICAgICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlIDpcbiAgICAgICAgICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH19O1xuICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IG1ldGhvZE9ialttZXRob2RdO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IG1vZGVyblN0YXRzVHlwZXMgPSB7XG4gICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJyxcbiAgICBvdXRib3VuZHJ0cDogJ291dGJvdW5kLXJ0cCcsXG4gICAgY2FuZGlkYXRlcGFpcjogJ2NhbmRpZGF0ZS1wYWlyJyxcbiAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsXG4gICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZSdcbiAgfTtcblxuICBjb25zdCBuYXRpdmVHZXRTdGF0cyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICBjb25zdCBbc2VsZWN0b3IsIG9uU3VjYywgb25FcnJdID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuYXRpdmVHZXRTdGF0cy5hcHBseSh0aGlzLCBbc2VsZWN0b3IgfHwgbnVsbF0pXG4gICAgICAudGhlbihzdGF0cyA9PiB7XG4gICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTMgJiYgIW9uU3VjYykge1xuICAgICAgICAgIC8vIFNoaW0gb25seSBwcm9taXNlIGdldFN0YXRzIHdpdGggc3BlYy1oeXBoZW5zIGluIHR5cGUgbmFtZXNcbiAgICAgICAgICAvLyBMZWF2ZSBjYWxsYmFjayB2ZXJzaW9uIGFsb25lOyBtaXNjIG9sZCB1c2VzIG9mIGZvckVhY2ggYmVmb3JlIE1hcFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgICAgICAgICBzdGF0LnR5cGUgPSBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUubmFtZSAhPT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEF2b2lkIFR5cGVFcnJvcjogXCJ0eXBlXCIgaXMgcmVhZC1vbmx5LCBpbiBvbGQgdmVyc2lvbnMuIDM0LTQzaXNoXG4gICAgICAgICAgICBzdGF0cy5mb3JFYWNoKChzdGF0LCBpKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRzLnNldChpLCBPYmplY3QuYXNzaWduKHt9LCBzdGF0LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogbW9kZXJuU3RhdHNUeXBlc1tzdGF0LnR5cGVdIHx8IHN0YXQudHlwZVxuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRzO1xuICAgICAgfSlcbiAgICAgIC50aGVuKG9uU3VjYywgb25FcnIpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVNlbmRlckdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmICdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0dldFNlbmRlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7XG4gIGlmIChvcmlnR2V0U2VuZGVycykge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uIGdldFNlbmRlcnMoKSB7XG4gICAgICBjb25zdCBzZW5kZXJzID0gb3JpZ0dldFNlbmRlcnMuYXBwbHkodGhpcywgW10pO1xuICAgICAgc2VuZGVycy5mb3JFYWNoKHNlbmRlciA9PiBzZW5kZXIuX3BjID0gdGhpcyk7XG4gICAgICByZXR1cm4gc2VuZGVycztcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgb3JpZ0FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgaWYgKG9yaWdBZGRUcmFjaykge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiBhZGRUcmFjaygpIHtcbiAgICAgIGNvbnN0IHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgc2VuZGVyLl9wYyA9IHRoaXM7XG4gICAgICByZXR1cm4gc2VuZGVyO1xuICAgIH07XG4gIH1cbiAgd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICByZXR1cm4gdGhpcy50cmFjayA/IHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spIDpcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG5ldyBNYXAoKSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3cpIHtcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0dldFJlY2VpdmVycyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO1xuICBpZiAob3JpZ0dldFJlY2VpdmVycykge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24gZ2V0UmVjZWl2ZXJzKCkge1xuICAgICAgY29uc3QgcmVjZWl2ZXJzID0gb3JpZ0dldFJlY2VpdmVycy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICByZWNlaXZlcnMuZm9yRWFjaChyZWNlaXZlciA9PiByZWNlaXZlci5fcGMgPSB0aGlzKTtcbiAgICAgIHJldHVybiByZWNlaXZlcnM7XG4gICAgfTtcbiAgfVxuICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICd0cmFjaycsIGUgPT4ge1xuICAgIGUucmVjZWl2ZXIuX3BjID0gZS5zcmNFbGVtZW50O1xuICAgIHJldHVybiBlO1xuICB9KTtcbiAgd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIHJldHVybiB0aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZW1vdmVTdHJlYW0od2luZG93KSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8XG4gICAgICAncmVtb3ZlU3RyZWFtJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB1dGlscy5kZXByZWNhdGVkKCdyZW1vdmVTdHJlYW0nLCAncmVtb3ZlVHJhY2snKTtcbiAgICAgIHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goc2VuZGVyID0+IHtcbiAgICAgICAgaWYgKHNlbmRlci50cmFjayAmJiBzdHJlYW0uZ2V0VHJhY2tzKCkuaW5jbHVkZXMoc2VuZGVyLnRyYWNrKSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlVHJhY2soc2VuZGVyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SVENEYXRhQ2hhbm5lbCh3aW5kb3cpIHtcbiAgLy8gcmVuYW1lIERhdGFDaGFubmVsIHRvIFJUQ0RhdGFDaGFubmVsIChuYXRpdmUgZml4IGluIEZGNjApOlxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMTczODUxXG4gIGlmICh3aW5kb3cuRGF0YUNoYW5uZWwgJiYgIXdpbmRvdy5SVENEYXRhQ2hhbm5lbCkge1xuICAgIHdpbmRvdy5SVENEYXRhQ2hhbm5lbCA9IHdpbmRvdy5EYXRhQ2hhbm5lbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUFkZFRyYW5zY2VpdmVyKHdpbmRvdykge1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2VicnRjSGFja3MvYWRhcHRlci9pc3N1ZXMvOTk4I2lzc3VlY29tbWVudC01MTY5MjE2NDdcbiAgLy8gRmlyZWZveCBpZ25vcmVzIHRoZSBpbml0IHNlbmRFbmNvZGluZ3Mgb3B0aW9ucyBwYXNzZWQgdG8gYWRkVHJhbnNjZWl2ZXJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM5NjkxOFxuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdBZGRUcmFuc2NlaXZlciA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXI7XG4gIGlmIChvcmlnQWRkVHJhbnNjZWl2ZXIpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyID1cbiAgICAgIGZ1bmN0aW9uIGFkZFRyYW5zY2VpdmVyKCkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyA9IFtdO1xuICAgICAgICBjb25zdCBpbml0UGFyYW1ldGVycyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgY29uc3Qgc2hvdWxkUGVyZm9ybUNoZWNrID0gaW5pdFBhcmFtZXRlcnMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2VuZEVuY29kaW5ncycgaW4gaW5pdFBhcmFtZXRlcnM7XG4gICAgICAgIGlmIChzaG91bGRQZXJmb3JtQ2hlY2spIHtcbiAgICAgICAgICAvLyBJZiBzZW5kRW5jb2RpbmdzIHBhcmFtcyBhcmUgcHJvdmlkZWQsIHZhbGlkYXRlIGdyYW1tYXJcbiAgICAgICAgICBpbml0UGFyYW1ldGVycy5zZW5kRW5jb2RpbmdzLmZvckVhY2goKGVuY29kaW5nUGFyYW0pID0+IHtcbiAgICAgICAgICAgIGlmICgncmlkJyBpbiBlbmNvZGluZ1BhcmFtKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJpZFJlZ2V4ID0gL15bYS16MC05XXswLDE2fSQvaTtcbiAgICAgICAgICAgICAgaWYgKCFyaWRSZWdleC50ZXN0KGVuY29kaW5nUGFyYW0ucmlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgUklEIHZhbHVlIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ3NjYWxlUmVzb2x1dGlvbkRvd25CeScgaW4gZW5jb2RpbmdQYXJhbSkge1xuICAgICAgICAgICAgICBpZiAoIShwYXJzZUZsb2F0KGVuY29kaW5nUGFyYW0uc2NhbGVSZXNvbHV0aW9uRG93bkJ5KSA+PSAxLjApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NjYWxlX3Jlc29sdXRpb25fZG93bl9ieSBtdXN0IGJlID49IDEuMCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ21heEZyYW1lcmF0ZScgaW4gZW5jb2RpbmdQYXJhbSkge1xuICAgICAgICAgICAgICBpZiAoIShwYXJzZUZsb2F0KGVuY29kaW5nUGFyYW0ubWF4RnJhbWVyYXRlKSA+PSAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdtYXhfZnJhbWVyYXRlIG11c3QgYmUgPj0gMC4wJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NlaXZlciA9IG9yaWdBZGRUcmFuc2NlaXZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAoc2hvdWxkUGVyZm9ybUNoZWNrKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGluaXQgb3B0aW9ucyB3ZXJlIGFwcGxpZWQuIElmIG5vdCB3ZSBkbyB0aGlzIGluIGFuXG4gICAgICAgICAgLy8gYXN5bmNocm9ub3VzIHdheSBhbmQgc2F2ZSB0aGUgcHJvbWlzZSByZWZlcmVuY2UgaW4gYSBnbG9iYWwgb2JqZWN0LlxuICAgICAgICAgIC8vIFRoaXMgaXMgYW4gdWdseSBoYWNrLCBidXQgYXQgdGhlIHNhbWUgdGltZSBpcyB3YXkgbW9yZSByb2J1c3QgdGhhblxuICAgICAgICAgIC8vIGNoZWNraW5nIHRoZSBzZW5kZXIgcGFyYW1ldGVycyBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjcmVhdGVPZmZlclxuICAgICAgICAgIC8vIEFsc28gbm90ZSB0aGF0IGFmdGVyIHRoZSBjcmVhdGVvZmZlciB3ZSBhcmUgbm90IDEwMCUgc3VyZSB0aGF0XG4gICAgICAgICAgLy8gdGhlIHBhcmFtcyB3ZXJlIGFzeW5jaHJvbm91c2x5IGFwcGxpZWQgc28gd2UgbWlnaHQgbWlzcyB0aGVcbiAgICAgICAgICAvLyBvcHBvcnR1bml0eSB0byByZWNyZWF0ZSBvZmZlci5cbiAgICAgICAgICBjb25zdCB7c2VuZGVyfSA9IHRyYW5zY2VpdmVyO1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlbmRlci5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgaWYgKCEoJ2VuY29kaW5ncycgaW4gcGFyYW1zKSB8fFxuICAgICAgICAgICAgICAvLyBBdm9pZCBiZWluZyBmb29sZWQgYnkgcGF0Y2hlZCBnZXRQYXJhbWV0ZXJzKCkgYmVsb3cuXG4gICAgICAgICAgICAgIChwYXJhbXMuZW5jb2RpbmdzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zLmVuY29kaW5nc1swXSkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IGluaXRQYXJhbWV0ZXJzLnNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICBzZW5kZXIuc2VuZEVuY29kaW5ncyA9IGluaXRQYXJhbWV0ZXJzLnNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5wdXNoKHNlbmRlci5zZXRQYXJhbWV0ZXJzKHBhcmFtcylcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZW5kZXIuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZW5kZXIuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2NlaXZlcjtcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRQYXJhbWV0ZXJzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnR2V0UGFyYW1ldGVycyA9IHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM7XG4gIGlmIChvcmlnR2V0UGFyYW1ldGVycykge1xuICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnMgPVxuICAgICAgZnVuY3Rpb24gZ2V0UGFyYW1ldGVycygpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gb3JpZ0dldFBhcmFtZXRlcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKCEoJ2VuY29kaW5ncycgaW4gcGFyYW1zKSkge1xuICAgICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSBbXS5jb25jYXQodGhpcy5zZW5kRW5jb2RpbmdzIHx8IFt7fV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ3JlYXRlT2ZmZXIod2luZG93KSB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJydGNIYWNrcy9hZGFwdGVyL2lzc3Vlcy85OTgjaXNzdWVjb21tZW50LTUxNjkyMTY0N1xuICAvLyBGaXJlZm94IGlnbm9yZXMgdGhlIGluaXQgc2VuZEVuY29kaW5ncyBvcHRpb25zIHBhc3NlZCB0byBhZGRUcmFuc2NlaXZlclxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzk2OTE4XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKCkge1xuICAgIGlmICh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyAmJiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcylcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIG9yaWdDcmVhdGVPZmZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ3JlYXRlQW5zd2VyKHdpbmRvdykge1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2VicnRjSGFja3MvYWRhcHRlci9pc3N1ZXMvOTk4I2lzc3VlY29tbWVudC01MTY5MjE2NDdcbiAgLy8gRmlyZWZveCBpZ25vcmVzIHRoZSBpbml0IHNlbmRFbmNvZGluZ3Mgb3B0aW9ucyBwYXNzZWQgdG8gYWRkVHJhbnNjZWl2ZXJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM5NjkxOFxuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdDcmVhdGVBbnN3ZXIgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbiBjcmVhdGVBbnN3ZXIoKSB7XG4gICAgaWYgKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzICYmIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gb3JpZ0NyZWF0ZUFuc3dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3JpZ0NyZWF0ZUFuc3dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/*! exports provided: shimGetDisplayMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetDisplayMedia\", function() { return shimGetDisplayMedia; });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXRkaXNwbGF5bWVkaWEuanM/ZTE4MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVOO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldGRpc3BsYXltZWRpYS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBhZGFwdGVyLmpzIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldERpc3BsYXlNZWRpYSh3aW5kb3csIHByZWZlcnJlZE1lZGlhU291cmNlKSB7XG4gIGlmICh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICdnZXREaXNwbGF5TWVkaWEnIGluIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEgPVxuICAgIGZ1bmN0aW9uIGdldERpc3BsYXlNZWRpYShjb25zdHJhaW50cykge1xuICAgICAgaWYgKCEoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMudmlkZW8pKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBET01FeGNlcHRpb24oJ2dldERpc3BsYXlNZWRpYSB3aXRob3V0IHZpZGVvICcgK1xuICAgICAgICAgICAgJ2NvbnN0cmFpbnRzIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICBlcnIubmFtZSA9ICdOb3RGb3VuZEVycm9yJztcbiAgICAgICAgLy8gZnJvbSBodHRwczovL2hleWNhbS5naXRodWIuaW8vd2ViaWRsLyNpZGwtRE9NRXhjZXB0aW9uLWVycm9yLW5hbWVzXG4gICAgICAgIGVyci5jb2RlID0gODtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICBpZiAoY29uc3RyYWludHMudmlkZW8gPT09IHRydWUpIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB7bWVkaWFTb3VyY2U6IHByZWZlcnJlZE1lZGlhU291cmNlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1lZGlhU291cmNlID0gcHJlZmVycmVkTWVkaWFTb3VyY2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/*! exports provided: shimGetUserMedia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return shimGetUserMedia; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    _utils__WEBPACK_IMPORTED_MODULE_0__[\"deprecated\"]('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXR1c2VybWVkaWEuanM/ZjFhNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRXFCOztBQUUzQjtBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUksaURBQWdCO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldHVzZXJtZWRpYS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBjb25zdCBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcbiAgY29uc3QgTWVkaWFTdHJlYW1UcmFjayA9IHdpbmRvdyAmJiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjaztcblxuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIC8vIFJlcGxhY2UgRmlyZWZveCA0NCsncyBkZXByZWNhdGlvbiB3YXJuaW5nIHdpdGggdW5wcmVmaXhlZCB2ZXJzaW9uLlxuICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEnLFxuICAgICAgICAnbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEnKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICB9O1xuXG4gIGlmICghKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPiA1NSAmJlxuICAgICAgJ2F1dG9HYWluQ29udHJvbCcgaW4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpKSkge1xuICAgIGNvbnN0IHJlbWFwID0gZnVuY3Rpb24ob2JqLCBhLCBiKSB7XG4gICAgICBpZiAoYSBpbiBvYmogJiYgIShiIGluIG9iaikpIHtcbiAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICBkZWxldGUgb2JqW2FdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBuYXRpdmVHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUdldFVzZXJNZWRpYShjKTtcbiAgICB9O1xuXG4gICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUdldFNldHRpbmdzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7XG4gICAgICBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5nZXRTZXR0aW5ncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBvYmogPSBuYXRpdmVHZXRTZXR0aW5ncy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICByZW1hcChvYmosICdtb3pBdXRvR2FpbkNvbnRyb2wnLCAnYXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vek5vaXNlU3VwcHJlc3Npb24nLCAnbm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoTWVkaWFTdHJlYW1UcmFjayAmJiBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKSB7XG4gICAgICBjb25zdCBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID1cbiAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMgPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdhdWRpbycgJiYgdHlwZW9mIGMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICAgIHJlbWFwKGMsICdhdXRvR2FpbkNvbnRyb2wnLCAnbW96QXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgICAgcmVtYXAoYywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/*! exports provided: shimLocalStreamsAPI, shimRemoteStreamsAPI, shimCallbacksAPI, shimGetUserMedia, shimConstraints, shimRTCIceServerUrls, shimTrackEventTransceiver, shimCreateOfferLegacy, shimAudioContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimLocalStreamsAPI\", function() { return shimLocalStreamsAPI; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimRemoteStreamsAPI\", function() { return shimRemoteStreamsAPI; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimCallbacksAPI\", function() { return shimCallbacksAPI; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimGetUserMedia\", function() { return shimGetUserMedia; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimConstraints\", function() { return shimConstraints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimRTCIceServerUrls\", function() { return shimRTCIceServerUrls; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimTrackEventTransceiver\", function() { return shimTrackEventTransceiver; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimCreateOfferLegacy\", function() { return shimCreateOfferLegacy; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"shimAudioContext\", function() { return shimAudioContext; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n\nfunction shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: _utils__WEBPACK_IMPORTED_MODULE_0__[\"compactObject\"](constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"deprecated\"]('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nfunction shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvc2FmYXJpL3NhZmFyaV9zaGltLmpzP2ViZmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7QUFDcUI7O0FBRTNCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLE9BQU8sT0FBTyxvREFBbUI7QUFDakM7QUFDQTs7QUFFQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9zYWZhcmkvc2FmYXJpX3NoaW0uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1Mb2NhbFN0cmVhbXNBUEkod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKCdnZXRMb2NhbFN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbFN0cmVhbXM7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdhZGRTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgY29uc3QgX2FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoc3RyZWFtKSkge1xuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgfVxuICAgICAgLy8gVHJ5IHRvIGVtdWxhdGUgQ2hyb21lJ3MgYmVoYXZpb3VyIG9mIGFkZGluZyBpbiBhdWRpby12aWRlbyBvcmRlci5cbiAgICAgIC8vIFNhZmFyaSBvcmRlcnMgYnkgdHJhY2sgaWQuXG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IF9hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrLFxuICAgICAgICBzdHJlYW0pKTtcbiAgICAgIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2godHJhY2sgPT4gX2FkZFRyYWNrLmNhbGwodGhpcywgdHJhY2ssXG4gICAgICAgIHN0cmVhbSkpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCAuLi5zdHJlYW1zKSB7XG4gICAgICAgIGlmIChzdHJlYW1zKSB7XG4gICAgICAgICAgc3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtzdHJlYW1dO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgY29uc3QgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHNlbmRlciA9PiB7XG4gICAgICAgICAgaWYgKHRyYWNrcy5pbmNsdWRlcyhzZW5kZXIudHJhY2spKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISgnZ2V0UmVtb3RlU3RyZWFtcycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0UmVtb3RlU3RyZWFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXMgPyB0aGlzLl9yZW1vdGVTdHJlYW1zIDogW107XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdvbmFkZHN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29uYWRkc3RyZWFtJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07XG4gICAgICB9LFxuICAgICAgc2V0KGYpIHtcbiAgICAgICAgaWYgKHRoaXMuX29uYWRkc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSA9IGYpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb25hZGRzdHJlYW1wb2x5ID0gKGUpID0+IHtcbiAgICAgICAgICBlLnN0cmVhbXMuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7XG4gICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBjb25zdCBwYyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5fb25hZGRzdHJlYW1wb2x5KSB7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RyZWFtcy5mb3JFYWNoKHN0cmVhbSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcGMuX3JlbW90ZVN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcyA9IFtdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChwYy5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ2FsbGJhY2tzQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwcm90b3R5cGUgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBjb25zdCBvcmlnQ3JlYXRlT2ZmZXIgPSBwcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gIGNvbnN0IG9yaWdDcmVhdGVBbnN3ZXIgPSBwcm90b3R5cGUuY3JlYXRlQW5zd2VyO1xuICBjb25zdCBzZXRMb2NhbERlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247XG4gIGNvbnN0IHNldFJlbW90ZURlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICBjb25zdCBhZGRJY2VDYW5kaWRhdGUgPSBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuXG4gIHByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIHByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IChhcmd1bWVudHMubGVuZ3RoID49IDIpID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzBdO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIGxldCB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBbZGVzY3JpcHRpb25dKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IHdpdGhDYWxsYmFjaztcblxuICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NyaXB0aW9uXSk7XG4gICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcbiAgcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0gd2l0aENhbGxiYWNrO1xuXG4gIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gYWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIFtjYW5kaWRhdGVdKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gd2l0aENhbGxiYWNrO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICAvLyBzaGltIG5vdCBuZWVkZWQgaW4gU2FmYXJpIDEyLjFcbiAgICBjb25zdCBtZWRpYURldmljZXMgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzO1xuICAgIGNvbnN0IF9nZXRVc2VyTWVkaWEgPSBtZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IChjb25zdHJhaW50cykgPT4ge1xuICAgICAgcmV0dXJuIF9nZXRVc2VyTWVkaWEoc2hpbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzKSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBjYiwgZXJyY2IpIHtcbiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgLnRoZW4oY2IsIGVycmNiKTtcbiAgICB9LmJpbmQobmF2aWdhdG9yKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzKSB7XG4gIGlmIChjb25zdHJhaW50cyAmJiBjb25zdHJhaW50cy52aWRlbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sXG4gICAgICBjb25zdHJhaW50cyxcbiAgICAgIHt2aWRlbzogdXRpbHMuY29tcGFjdE9iamVjdChjb25zdHJhaW50cy52aWRlbyl9XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjb25zdHJhaW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SVENJY2VTZXJ2ZXJVcmxzKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBtaWdyYXRlIGZyb20gbm9uLXNwZWMgUlRDSWNlU2VydmVyLnVybCB0byBSVENJY2VTZXJ2ZXIudXJsc1xuICBjb25zdCBPcmlnUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9XG4gICAgZnVuY3Rpb24gUlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgIGlmIChwY0NvbmZpZyAmJiBwY0NvbmZpZy5pY2VTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IG5ld0ljZVNlcnZlcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG4gICAgICAgICAgaWYgKCFzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSAmJlxuICAgICAgICAgICAgICBzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybCcpKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNlcnZlcikpO1xuICAgICAgICAgICAgc2VydmVyLnVybHMgPSBzZXJ2ZXIudXJsO1xuICAgICAgICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2goc2VydmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVycztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICB9O1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gT3JpZ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgaWYgKCdnZW5lcmF0ZUNlcnRpZmljYXRlJyBpbiBPcmlnUGVlckNvbm5lY3Rpb24pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE9yaWdQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdykge1xuICAvLyBBZGQgZXZlbnQudHJhbnNjZWl2ZXIgbWVtYmVyIG92ZXIgZGVwcmVjYXRlZCBldmVudC5yZWNlaXZlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1RyYWNrRXZlbnQgJiZcbiAgICAgICdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlICYmXG4gICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1DcmVhdGVPZmZlckxlZ2FjeSh3aW5kb3cpIHtcbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIob2ZmZXJPcHRpb25zKSB7XG4gICAgICBpZiAob2ZmZXJPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzXG4gICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPVxuICAgICAgICAgICAgISFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb1RyYW5zY2VpdmVyID0gdGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKHRyYW5zY2VpdmVyID0+XG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gJ2F1ZGlvJyk7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UgJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2Jykge1xuICAgICAgICAgICAgaWYgKGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdyZWN2b25seScpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICFhdWRpb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgdGhpcy5hZGRUcmFuc2NlaXZlcignYXVkaW8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzXG4gICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPVxuICAgICAgICAgICAgISFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2aWRlb1RyYW5zY2VpdmVyID0gdGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKHRyYW5zY2VpdmVyID0+XG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gJ3ZpZGVvJyk7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyA9PT0gZmFsc2UgJiYgdmlkZW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2Jykge1xuICAgICAgICAgICAgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdyZWN2b25seScpIHtcbiAgICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICF2aWRlb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgdGhpcy5hZGRUcmFuc2NlaXZlcigndmlkZW8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdDcmVhdGVPZmZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQXVkaW9Db250ZXh0KHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgd2luZG93LkF1ZGlvQ29udGV4dCkge1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cuQXVkaW9Db250ZXh0ID0gd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\n");

/***/ }),

/***/ "./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/*! exports provided: extractVersion, wrapPeerConnectionEvent, disableLog, disableWarnings, log, deprecated, detectBrowser, compactObject, walkStats, filterStats */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"extractVersion\", function() { return extractVersion; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"wrapPeerConnectionEvent\", function() { return wrapPeerConnectionEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"disableLog\", function() { return disableLog; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"disableWarnings\", function() { return disableWarnings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"log\", function() { return log; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"deprecated\", function() { return deprecated; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"detectBrowser\", function() { return detectBrowser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"compactObject\", function() { return compactObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"walkStats\", function() { return walkStats; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"filterStats\", function() { return filterStats; });\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanM/YWRjMSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWSxRQUFRO0FBQ3BCO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQkFBa0I7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxVQUFVOztBQUVuQixrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxPQUFPO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsYUFBYTtBQUNwRCxHQUFHLElBQUk7QUFDUDs7QUFFQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy91dGlscy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5sZXQgbG9nRGlzYWJsZWRfID0gdHJ1ZTtcbmxldCBkZXByZWNhdGlvbldhcm5pbmdzXyA9IHRydWU7XG5cbi8qKlxuICogRXh0cmFjdCBicm93c2VyIHZlcnNpb24gb3V0IG9mIHRoZSBwcm92aWRlZCB1c2VyIGFnZW50IHN0cmluZy5cbiAqXG4gKiBAcGFyYW0geyFzdHJpbmd9IHVhc3RyaW5nIHVzZXJBZ2VudCBzdHJpbmcuXG4gKiBAcGFyYW0geyFzdHJpbmd9IGV4cHIgUmVndWxhciBleHByZXNzaW9uIHVzZWQgYXMgbWF0Y2ggY3JpdGVyaWEuXG4gKiBAcGFyYW0geyFudW1iZXJ9IHBvcyBwb3NpdGlvbiBpbiB0aGUgdmVyc2lvbiBzdHJpbmcgdG8gYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBicm93c2VyIHZlcnNpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VmVyc2lvbih1YXN0cmluZywgZXhwciwgcG9zKSB7XG4gIGNvbnN0IG1hdGNoID0gdWFzdHJpbmcubWF0Y2goZXhwcik7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gcG9zICYmIHBhcnNlSW50KG1hdGNoW3Bvc10sIDEwKTtcbn1cblxuLy8gV3JhcHMgdGhlIHBlZXJjb25uZWN0aW9uIGV2ZW50IGV2ZW50TmFtZVRvV3JhcCBpbiBhIGZ1bmN0aW9uXG4vLyB3aGljaCByZXR1cm5zIHRoZSBtb2RpZmllZCBldmVudCBvYmplY3QgKG9yIGZhbHNlIHRvIHByZXZlbnRcbi8vIHRoZSBldmVudCkuXG5leHBvcnQgZnVuY3Rpb24gd3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCBldmVudE5hbWVUb1dyYXAsIHdyYXBwZXIpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJvdG8gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBjb25zdCBuYXRpdmVBZGRFdmVudExpc3RlbmVyID0gcHJvdG8uYWRkRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8uYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXApIHtcbiAgICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGNvbnN0IHdyYXBwZWRDYWxsYmFjayA9IChlKSA9PiB7XG4gICAgICBjb25zdCBtb2RpZmllZEV2ZW50ID0gd3JhcHBlcihlKTtcbiAgICAgIGlmIChtb2RpZmllZEV2ZW50KSB7XG4gICAgICAgIGlmIChjYi5oYW5kbGVFdmVudCkge1xuICAgICAgICAgIGNiLmhhbmRsZUV2ZW50KG1vZGlmaWVkRXZlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNiKG1vZGlmaWVkRXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLl9ldmVudE1hcCA9IHRoaXMuX2V2ZW50TWFwIHx8IHt9O1xuICAgIGlmICghdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXSkge1xuICAgICAgdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXSA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXS5zZXQoY2IsIHdyYXBwZWRDYWxsYmFjayk7XG4gICAgcmV0dXJuIG5hdGl2ZUFkZEV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgW25hdGl2ZUV2ZW50TmFtZSxcbiAgICAgIHdyYXBwZWRDYWxsYmFja10pO1xuICB9O1xuXG4gIGNvbnN0IG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIgPSBwcm90by5yZW1vdmVFdmVudExpc3RlbmVyO1xuICBwcm90by5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24obmF0aXZlRXZlbnROYW1lLCBjYikge1xuICAgIGlmIChuYXRpdmVFdmVudE5hbWUgIT09IGV2ZW50TmFtZVRvV3JhcCB8fCAhdGhpcy5fZXZlbnRNYXBcbiAgICAgICAgfHwgIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0pIHtcbiAgICAgIHJldHVybiBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXS5oYXMoY2IpKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBjb25zdCB1bndyYXBwZWRDYiA9IHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uZ2V0KGNiKTtcbiAgICB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLmRlbGV0ZShjYik7XG4gICAgaWYgKHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uc2l6ZSA9PT0gMCkge1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF07XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLl9ldmVudE1hcCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRNYXA7XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB1bndyYXBwZWRDYl0pO1xuICB9O1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ29uJyArIGV2ZW50TmFtZVRvV3JhcCwge1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXTtcbiAgICB9LFxuICAgIHNldChjYikge1xuICAgICAgaWYgKHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWVUb1dyYXAsXG4gICAgICAgICAgICB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXTtcbiAgICAgIH1cbiAgICAgIGlmIChjYikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLFxuICAgICAgICAgICAgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0gPSBjYik7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMb2coYm9vbCkge1xuICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyB0eXBlb2YgYm9vbCArXG4gICAgICAgICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpO1xuICB9XG4gIGxvZ0Rpc2FibGVkXyA9IGJvb2w7XG4gIHJldHVybiAoYm9vbCkgPyAnYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkJyA6XG4gICAgICAnYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWQnO1xufVxuXG4vKipcbiAqIERpc2FibGUgb3IgZW5hYmxlIGRlcHJlY2F0aW9uIHdhcm5pbmdzXG4gKiBAcGFyYW0geyFib29sZWFufSBib29sIHNldCB0byB0cnVlIHRvIGRpc2FibGUgd2FybmluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlV2FybmluZ3MoYm9vbCkge1xuICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyB0eXBlb2YgYm9vbCArXG4gICAgICAgICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpO1xuICB9XG4gIGRlcHJlY2F0aW9uV2FybmluZ3NfID0gIWJvb2w7XG4gIHJldHVybiAnYWRhcHRlci5qcyBkZXByZWNhdGlvbiB3YXJuaW5ncyAnICsgKGJvb2wgPyAnZGlzYWJsZWQnIDogJ2VuYWJsZWQnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZygpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGxvZ0Rpc2FibGVkXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTaG93cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgc3VnZ2VzdGluZyB0aGUgbW9kZXJuIGFuZCBzcGVjLWNvbXBhdGlibGUgQVBJLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVwcmVjYXRlZChvbGRNZXRob2QsIG5ld01ldGhvZCkge1xuICBpZiAoIWRlcHJlY2F0aW9uV2FybmluZ3NfKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUud2FybihvbGRNZXRob2QgKyAnIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgJyArIG5ld01ldGhvZCArXG4gICAgICAnIGluc3RlYWQuJyk7XG59XG5cbi8qKlxuICogQnJvd3NlciBkZXRlY3Rvci5cbiAqXG4gKiBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdCBjb250YWluaW5nIGJyb3dzZXIgYW5kIHZlcnNpb25cbiAqICAgICBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0QnJvd3Nlcih3aW5kb3cpIHtcbiAgLy8gUmV0dXJuZWQgcmVzdWx0IG9iamVjdC5cbiAgY29uc3QgcmVzdWx0ID0ge2Jyb3dzZXI6IG51bGwsIHZlcnNpb246IG51bGx9O1xuXG4gIC8vIEZhaWwgZWFybHkgaWYgaXQncyBub3QgYSBicm93c2VyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhd2luZG93Lm5hdmlnYXRvcikge1xuICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgY29uc3Qge25hdmlnYXRvcn0gPSB3aW5kb3c7XG5cbiAgaWYgKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsgLy8gRmlyZWZveC5cbiAgICByZXN1bHQuYnJvd3NlciA9ICdmaXJlZm94JztcbiAgICByZXN1bHQudmVyc2lvbiA9IGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgIC9GaXJlZm94XFwvKFxcZCspXFwuLywgMSk7XG4gIH0gZWxzZSBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fFxuICAgICAgKHdpbmRvdy5pc1NlY3VyZUNvbnRleHQgPT09IGZhbHNlICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgICF3aW5kb3cuUlRDSWNlR2F0aGVyZXIpKSB7XG4gICAgLy8gQ2hyb21lLCBDaHJvbWl1bSwgV2VidmlldywgT3BlcmEuXG4gICAgLy8gVmVyc2lvbiBtYXRjaGVzIENocm9tZS9XZWJSVEMgdmVyc2lvbi5cbiAgICAvLyBDaHJvbWUgNzQgcmVtb3ZlZCB3ZWJraXRHZXRVc2VyTWVkaWEgb24gaHR0cCBhcyB3ZWxsIHNvIHdlIG5lZWQgdGhlXG4gICAgLy8gbW9yZSBjb21wbGljYXRlZCBmYWxsYmFjayB0byB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5cbiAgICByZXN1bHQuYnJvd3NlciA9ICdjaHJvbWUnO1xuICAgIHJlc3VsdC52ZXJzaW9uID0gZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgL0Nocm9tKGV8aXVtKVxcLyhcXGQrKVxcLi8sIDIpO1xuICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8pKSB7IC8vIEVkZ2UuXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnZWRnZSc7XG4gICAgcmVzdWx0LnZlcnNpb24gPSBleHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAvRWRnZVxcLyhcXGQrKS4oXFxkKykkLywgMik7XG4gIH0gZWxzZSBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pKSB7IC8vIFNhZmFyaS5cbiAgICByZXN1bHQuYnJvd3NlciA9ICdzYWZhcmknO1xuICAgIHJlc3VsdC52ZXJzaW9uID0gZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLywgMSk7XG4gICAgcmVzdWx0LnN1cHBvcnRzVW5pZmllZFBsYW4gPSB3aW5kb3cuUlRDUnRwVHJhbnNjZWl2ZXIgJiZcbiAgICAgICAgJ2N1cnJlbnREaXJlY3Rpb24nIGluIHdpbmRvdy5SVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGU7XG4gIH0gZWxzZSB7IC8vIERlZmF1bHQgZmFsbHRocm91Z2g6IG5vdCBzdXBwb3J0ZWQuXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuJztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgc29tZXRoaW5nIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbCBUaGUgc29tZXRoaW5nIHlvdSB3YW50IHRvIGNoZWNrLlxuICogQHJldHVybiB0cnVlIGlmIHZhbCBpcyBhbiBvYmplY3QsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBlbXB0eSBvYmplY3RzIGFuZCB1bmRlZmluZWQgdmFsdWVzXG4gKiBmcm9tIGEgbmVzdGVkIG9iamVjdCAtLSBhbiBlbmhhbmNlZCBhbmQgdmFuaWxsYSB2ZXJzaW9uXG4gKiBvZiBMb2Rhc2gncyBgY29tcGFjdGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYWN0T2JqZWN0KGRhdGEpIHtcbiAgaWYgKCFpc09iamVjdChkYXRhKSkge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKGRhdGEpLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvciwga2V5KSB7XG4gICAgY29uc3QgaXNPYmogPSBpc09iamVjdChkYXRhW2tleV0pO1xuICAgIGNvbnN0IHZhbHVlID0gaXNPYmogPyBjb21wYWN0T2JqZWN0KGRhdGFba2V5XSkgOiBkYXRhW2tleV07XG4gICAgY29uc3QgaXNFbXB0eU9iamVjdCA9IGlzT2JqICYmICFPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGlzRW1wdHlPYmplY3QpIHtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYWNjdW11bGF0b3IsIHtba2V5XTogdmFsdWV9KTtcbiAgfSwge30pO1xufVxuXG4vKiBpdGVyYXRlcyB0aGUgc3RhdHMgZ3JhcGggcmVjdXJzaXZlbHkuICovXG5leHBvcnQgZnVuY3Rpb24gd2Fsa1N0YXRzKHN0YXRzLCBiYXNlLCByZXN1bHRTZXQpIHtcbiAgaWYgKCFiYXNlIHx8IHJlc3VsdFNldC5oYXMoYmFzZS5pZCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVzdWx0U2V0LnNldChiYXNlLmlkLCBiYXNlKTtcbiAgT2JqZWN0LmtleXMoYmFzZSkuZm9yRWFjaChuYW1lID0+IHtcbiAgICBpZiAobmFtZS5lbmRzV2l0aCgnSWQnKSkge1xuICAgICAgd2Fsa1N0YXRzKHN0YXRzLCBzdGF0cy5nZXQoYmFzZVtuYW1lXSksIHJlc3VsdFNldCk7XG4gICAgfSBlbHNlIGlmIChuYW1lLmVuZHNXaXRoKCdJZHMnKSkge1xuICAgICAgYmFzZVtuYW1lXS5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgd2Fsa1N0YXRzKHN0YXRzLCBzdGF0cy5nZXQoaWQpLCByZXN1bHRTZXQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuLyogZmlsdGVyIGdldFN0YXRzIGZvciBhIHNlbmRlci9yZWNlaXZlciB0cmFjay4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJTdGF0cyhyZXN1bHQsIHRyYWNrLCBvdXRib3VuZCkge1xuICBjb25zdCBzdHJlYW1TdGF0c1R5cGUgPSBvdXRib3VuZCA/ICdvdXRib3VuZC1ydHAnIDogJ2luYm91bmQtcnRwJztcbiAgY29uc3QgZmlsdGVyZWRSZXN1bHQgPSBuZXcgTWFwKCk7XG4gIGlmICh0cmFjayA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmaWx0ZXJlZFJlc3VsdDtcbiAgfVxuICBjb25zdCB0cmFja1N0YXRzID0gW107XG4gIHJlc3VsdC5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3RyYWNrJyAmJlxuICAgICAgICB2YWx1ZS50cmFja0lkZW50aWZpZXIgPT09IHRyYWNrLmlkKSB7XG4gICAgICB0cmFja1N0YXRzLnB1c2godmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIHRyYWNrU3RhdHMuZm9yRWFjaCh0cmFja1N0YXQgPT4ge1xuICAgIHJlc3VsdC5mb3JFYWNoKHN0YXRzID0+IHtcbiAgICAgIGlmIChzdGF0cy50eXBlID09PSBzdHJlYW1TdGF0c1R5cGUgJiYgc3RhdHMudHJhY2tJZCA9PT0gdHJhY2tTdGF0LmlkKSB7XG4gICAgICAgIHdhbGtTdGF0cyhyZXN1bHQsIHN0YXRzLCBmaWx0ZXJlZFJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gZmlsdGVyZWRSZXN1bHQ7XG59XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/webrtc-adapter/src/js/utils.js\n");

/***/ }),

/***/ "./src/awrtc/index.ts":
/*!****************************!*\
  !*** ./src/awrtc/index.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./network/index */ \"./src/awrtc/network/index.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetEventType\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetEventDataType\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventDataType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetworkEvent\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ConnectionId\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Queue\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Queue\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"List\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"List\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Output\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Output\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Debug\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Debug\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Encoder\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Encoder\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"UTF16Encoding\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"UTF16Encoding\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Encoding\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Encoding\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Random\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Random\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Helper\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Helper\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SLogLevel\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLogLevel\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SLog\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SignalingConfig\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingConfig\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SignalingInfo\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingInfo\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcPeerState\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcPeerState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcInternalState\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcInternalState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AWebRtcPeer\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"AWebRtcPeer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcDataPeer\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcDataPeer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetworkServerState\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcNetworkServerState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetwork\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcNetwork\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketConnectionStatus\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketConnectionStatus\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketServerStatus\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketServerStatus\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketNetwork\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketNetwork\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"LocalNetwork\", function() { return _network_index__WEBPACK_IMPORTED_MODULE_0__[\"LocalNetwork\"]; });\n\n/* harmony import */ var _media_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./media/index */ \"./src/awrtc/media/index.ts\");\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _media_index__WEBPACK_IMPORTED_MODULE_1__) if([\"default\",\"NetEventType\",\"NetEventDataType\",\"NetworkEvent\",\"ConnectionId\",\"Queue\",\"List\",\"Output\",\"Debug\",\"Encoder\",\"UTF16Encoding\",\"Encoding\",\"Random\",\"Helper\",\"SLogLevel\",\"SLog\",\"SignalingConfig\",\"SignalingInfo\",\"WebRtcPeerState\",\"WebRtcInternalState\",\"AWebRtcPeer\",\"WebRtcDataPeer\",\"WebRtcNetworkServerState\",\"WebRtcNetwork\",\"WebsocketConnectionStatus\",\"WebsocketServerStatus\",\"WebsocketNetwork\",\"LocalNetwork\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _media_index__WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _media_browser_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./media_browser/index */ \"./src/awrtc/media_browser/index.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaNetwork\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaNetwork\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserWebRtcCall\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserWebRtcCall\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaStream\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaStream\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaPeer\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"MediaPeer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DeviceInfo\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceInfo\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DeviceApi\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VideoInput\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"VideoInput\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VideoInputType\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"VideoInputType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Media\", function() { return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"]; });\n\n/* harmony import */ var _unity_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./unity/index */ \"./src/awrtc/unity/index.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_InitAsync\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_InitAsync\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_PollInitState\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_PollInitState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_SLog_SetLogLevel\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_SLog_SetLogLevel\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsAvailable\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_IsAvailable\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsBrowserSupported\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_IsBrowserSupported\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Create\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Create\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Release\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Release\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Connect\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Connect\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StartServer\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_StartServer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StopServer\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_StopServer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Disconnect\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Disconnect\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Shutdown\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Shutdown\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Update\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Update\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Flush\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Flush\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendData\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_SendData\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendDataEm\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_SendDataEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_GetBufferedAmount\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_GetBufferedAmount\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Dequeue\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Dequeue\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Peek\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_Peek\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEventDataLength\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_PeekEventDataLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_CheckEventLength\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_CheckEventLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_EventDataToUint8Array\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_EventDataToUint8Array\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_DequeueEm\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_DequeueEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEm\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_WebRtcNetwork_PeekEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsAvailable\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_IsAvailable\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasUserMedia\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_HasUserMedia\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Create\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_Create\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Configure\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_Configure\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationState\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_GetConfigurationState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationError\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_GetConfigurationError\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_ResetConfiguration\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_ResetConfiguration\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_TryGetFrame\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_ToTexture\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_TryGetFrame_ToTexture\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_Resolution\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_TryGetFrame_Resolution\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrameDataLength\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_TryGetFrameDataLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetVolume\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_SetVolume\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasAudioTrack\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_HasAudioTrack\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasVideoTrack\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_HasVideoTrack\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetMute\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_SetMute\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsMute\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_MediaNetwork_IsMute\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_Update\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_DeviceApi_Update\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_RequestUpdate\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_DeviceApi_RequestUpdate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_LastUpdate\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_DeviceApi_LastUpdate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices_Length\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_Media_GetVideoDevices_Length\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_Media_GetVideoDevices\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddCanvasDevice\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_VideoInput_AddCanvasDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddDevice\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_VideoInput_AddDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_RemoveDevice\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_VideoInput_RemoveDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_UpdateFrame\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"CAPI_VideoInput_UpdateFrame\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GetUnityCanvas\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"GetUnityCanvas\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GetUnityContext\", function() { return _unity_index__WEBPACK_IMPORTED_MODULE_3__[\"GetUnityContext\"]; });\n\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\nconsole.debug(\"loading awrtc modules ...\");\nvar adapter = __webpack_require__(/*! webrtc-adapter */ \"./node_modules/webrtc-adapter/src/js/adapter_core.js\");\n\n\n//for simplicity browser and unity are merged here\n//it could as well be built and deployed separately\n\n\nconsole.debug(\"loading awrtc modules completed!\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9pbmRleC50cz9hNjc4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBNEJFO0FBRUYsT0FBTyxDQUFDLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBTTNDLElBQUksT0FBTyxHQUFJLG1CQUFPLENBQUMsNEVBQWdCLENBQUMsQ0FBQztBQUVWO0FBQ0Y7QUFDN0Isa0RBQWtEO0FBQ2xELG1EQUFtRDtBQUNkO0FBQ1I7QUFDN0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL2luZGV4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgMjAxOSwgYmVjYXVzZS13aHktbm90LmNvbSBMaW1pdGVkXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cblxuKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cbiogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFXG5GT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTFxuREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1JcblNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSXG5DQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLFxuT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbk9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4qL1xuXG5jb25zb2xlLmRlYnVnKFwibG9hZGluZyBhd3J0YyBtb2R1bGVzIC4uLlwiKTtcbi8vdGhpcyBzaG91bGQgdHJpZ2dlciB3ZWJwYWNrIHRvIGluY2x1ZGVcbi8vdGhlIHdlYnJ0YyBhZGFwdGVyLmpzLiBJdCBjaGFuZ2VzIHRoZSBcbi8vZ2xvYmFsIFdlYlJUQyBjYWxscyBhbmQgYWRkcyBiYWNrd2FyZHNcbi8vYW5kIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbmRlY2xhcmUgZnVuY3Rpb24gcmVxdWlyZShtb2R1bGVOYW1lOiBzdHJpbmcpXG5sZXQgYWRhcHRlciAgPSByZXF1aXJlKFwid2VicnRjLWFkYXB0ZXJcIik7XG5cbmV4cG9ydCAqIGZyb20gXCIuL25ldHdvcmsvaW5kZXhcIlxuZXhwb3J0ICogZnJvbSBcIi4vbWVkaWEvaW5kZXhcIlxuLy9mb3Igc2ltcGxpY2l0eSBicm93c2VyIGFuZCB1bml0eSBhcmUgbWVyZ2VkIGhlcmVcbi8vaXQgY291bGQgYXMgd2VsbCBiZSBidWlsdCBhbmQgZGVwbG95ZWQgc2VwYXJhdGVseVxuZXhwb3J0ICogZnJvbSBcIi4vbWVkaWFfYnJvd3Nlci9pbmRleFwiXG5leHBvcnQgKiBmcm9tIFwiLi91bml0eS9pbmRleFwiXG5jb25zb2xlLmRlYnVnKFwibG9hZGluZyBhd3J0YyBtb2R1bGVzIGNvbXBsZXRlZCFcIik7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/index.ts\n");

/***/ }),

/***/ "./src/awrtc/media/AWebRtcCall.ts":
/*!****************************************!*\
  !*** ./src/awrtc/media/AWebRtcCall.ts ***!
  \****************************************/
/*! exports provided: AWebRtcCall */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AWebRtcCall\", function() { return AWebRtcCall; });\n/* harmony import */ var _IMediaNetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./IMediaNetwork */ \"./src/awrtc/media/IMediaNetwork.ts\");\n/* harmony import */ var _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CallEventArgs */ \"./src/awrtc/media/CallEventArgs.ts\");\n/* harmony import */ var _network_Helper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../network/Helper */ \"./src/awrtc/network/Helper.ts\");\n/* harmony import */ var _NetworkConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./NetworkConfig */ \"./src/awrtc/media/NetworkConfig.ts\");\n/* harmony import */ var _MediaConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MediaConfig */ \"./src/awrtc/media/MediaConfig.ts\");\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar CallException = /** @class */ (function () {\n    function CallException(errorMsg) {\n        this.mErrorMsg = errorMsg;\n    }\n    CallException.prototype.ErrorMsg = function () {\n    };\n    return CallException;\n}());\nvar InvalidOperationException = /** @class */ (function (_super) {\n    __extends(InvalidOperationException, _super);\n    function InvalidOperationException() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return InvalidOperationException;\n}(CallException));\n/// <summary>\n/// State of the call. Mainly used to check for bugs / invalid states.\n/// </summary>\nvar CallState;\n(function (CallState) {\n    /// <summary>\n    /// Not yet initialized / bug\n    /// </summary>\n    CallState[CallState[\"Invalid\"] = 0] = \"Invalid\";\n    /// <summary>\n    /// Object is initialized but local media not yet configured\n    /// </summary>\n    CallState[CallState[\"Initialized\"] = 1] = \"Initialized\";\n    /// <summary>\n    /// In process of accessing the local media devices.\n    /// </summary>\n    CallState[CallState[\"Configuring\"] = 2] = \"Configuring\";\n    /// <summary>\n    /// Configured. Video/Audio can be accessed and call is ready to start\n    /// </summary>\n    CallState[CallState[\"Configured\"] = 3] = \"Configured\";\n    /// <summary>\n    /// In process of requesting an address from the server to then listen and wait for\n    /// an incoming call.\n    /// </summary>\n    CallState[CallState[\"RequestingAddress\"] = 4] = \"RequestingAddress\";\n    /// <summary>\n    /// Call is listening on an address and waiting for an incoming call\n    /// </summary>\n    CallState[CallState[\"WaitingForIncomingCall\"] = 5] = \"WaitingForIncomingCall\";\n    /// <summary>\n    /// Call is in the process of connecting to another call object.\n    /// </summary>\n    CallState[CallState[\"WaitingForOutgoingCall\"] = 6] = \"WaitingForOutgoingCall\";\n    /// <summary>\n    /// Indicating that the call object is at least connected to another object\n    /// </summary>\n    CallState[CallState[\"InCall\"] = 7] = \"InCall\";\n    //CallAcceptedIncoming,\n    //CallAcceptedOutgoing,\n    /// <summary>\n    /// Call ended / conference room closed\n    /// </summary>\n    CallState[CallState[\"Closed\"] = 8] = \"Closed\";\n})(CallState || (CallState = {}));\n/*\nclass ConnectionMetaData\n{\n}\n*/\nvar ConnectionInfo = /** @class */ (function () {\n    function ConnectionInfo() {\n        this.mConnectionIds = new Array();\n        //public GetMeta(id:ConnectionId) : ConnectionMetaData\n        //{\n        //    return this.mConnectionMeta[id.id];\n        //}\n    }\n    //private mConnectionMeta: { [id: number]: ConnectionMetaData } = {};\n    ConnectionInfo.prototype.AddConnection = function (id, incoming) {\n        this.mConnectionIds.push(id.id);\n        //this.mConnectionMeta[id.id] = new ConnectionMetaData();\n    };\n    ConnectionInfo.prototype.RemConnection = function (id) {\n        var index = this.mConnectionIds.indexOf(id.id);\n        if (index >= 0) {\n            this.mConnectionIds.splice(index, 1);\n        }\n        else {\n            _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].LE(\"tried to remove an unknown connection with id \" + id.id);\n        }\n        //delete this.mConnectionMeta[id.id];\n    };\n    ConnectionInfo.prototype.HasConnection = function (id) {\n        return this.mConnectionIds.indexOf(id.id) != -1;\n    };\n    ConnectionInfo.prototype.GetIds = function () {\n        return this.mConnectionIds;\n    };\n    return ConnectionInfo;\n}());\n/**This class wraps an implementation of\n * IMediaStream and converts its polling system\n * to an easier to use event based system.\n *\n * Ideally use only features defined by\n * ICall to avoid having to deal with internal changes\n * in future updates.\n */\nvar AWebRtcCall = /** @class */ (function () {\n    function AWebRtcCall(config) {\n        if (config === void 0) { config = null; }\n        this.MESSAGE_TYPE_INVALID = 0;\n        this.MESSAGE_TYPE_DATA = 1;\n        this.MESSAGE_TYPE_STRING = 2;\n        this.MESSAGE_TYPE_CONTROL = 3;\n        this.mNetworkConfig = new _NetworkConfig__WEBPACK_IMPORTED_MODULE_3__[\"NetworkConfig\"]();\n        this.mMediaConfig = null;\n        this.mCallEventHandlers = [];\n        this.mNetwork = null;\n        this.mConnectionInfo = new ConnectionInfo();\n        this.mConferenceMode = false;\n        this.mState = CallState.Invalid;\n        this.mIsDisposed = false;\n        this.mServerInactive = true;\n        this.mPendingListenCall = false;\n        this.mPendingCallCall = false;\n        this.mPendingAddress = null;\n        if (config != null) {\n            this.mNetworkConfig = config;\n            this.mConferenceMode = config.IsConference;\n        }\n    }\n    AWebRtcCall.prototype.addEventListener = function (listener) {\n        this.mCallEventHandlers.push(listener);\n    };\n    AWebRtcCall.prototype.removeEventListener = function (listener) {\n        this.mCallEventHandlers = this.mCallEventHandlers.filter(function (h) { return h !== listener; });\n    };\n    Object.defineProperty(AWebRtcCall.prototype, \"State\", {\n        get: function () {\n            return this.mState;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AWebRtcCall.prototype.Initialize = function (network) {\n        this.mNetwork = network;\n        this.mState = CallState.Initialized;\n    };\n    AWebRtcCall.prototype.Configure = function (config) {\n        this.CheckDisposed();\n        if (this.mState != CallState.Initialized) {\n            throw new InvalidOperationException(\"Method can't be used in state \" + this.mState);\n        }\n        this.mState = CallState.Configuring;\n        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].Log(\"Enter state CallState.Configuring\");\n        this.mMediaConfig = config;\n        this.mNetwork.Configure(this.mMediaConfig);\n    };\n    AWebRtcCall.prototype.Call = function (address) {\n        this.CheckDisposed();\n        if (this.mState != CallState.Initialized\n            && this.mState != CallState.Configuring\n            && this.mState != CallState.Configured) {\n            throw new InvalidOperationException(\"Method can't be used in state \" + this.mState);\n        }\n        if (this.mConferenceMode) {\n            throw new InvalidOperationException(\"Method can't be used in conference calls.\");\n        }\n        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].Log(\"Call to \" + address);\n        this.EnsureConfiguration();\n        if (this.mState == CallState.Configured) {\n            this.ProcessCall(address);\n        }\n        else {\n            this.PendingCall(address);\n        }\n    };\n    AWebRtcCall.prototype.Listen = function (address) {\n        this.CheckDisposed();\n        if (this.mState != CallState.Initialized\n            && this.mState != CallState.Configuring\n            && this.mState != CallState.Configured) {\n            throw new InvalidOperationException(\"Method can't be used in state \" + this.mState);\n        }\n        this.EnsureConfiguration();\n        if (this.mState == CallState.Configured) {\n            this.ProcessListen(address);\n        }\n        else {\n            this.PendingListen(address);\n        }\n    };\n    AWebRtcCall.prototype.Send = function (message, reliable, id) {\n        this.CheckDisposed();\n        if (reliable == null)\n            reliable = true;\n        if (id) {\n            this.InternalSendTo(message, reliable, id);\n        }\n        else {\n            this.InternalSendToAll(message, reliable);\n        }\n    };\n    AWebRtcCall.prototype.InternalSendToAll = function (message, reliable) {\n        var data = this.PackStringMsg(message);\n        ;\n        for (var _i = 0, _a = this.mConnectionInfo.GetIds(); _i < _a.length; _i++) {\n            var id = _a[_i];\n            _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].L(\"Send message to \" + id + \"! \" + message);\n            this.InternalSendRawTo(data, new _network_index__WEBPACK_IMPORTED_MODULE_5__[\"ConnectionId\"](id), reliable);\n        }\n    };\n    AWebRtcCall.prototype.InternalSendTo = function (message, reliable, id) {\n        var data = this.PackStringMsg(message);\n        this.InternalSendRawTo(data, id, reliable);\n    };\n    AWebRtcCall.prototype.SendData = function (message, reliable, id) {\n        this.CheckDisposed();\n        var data = this.PackDataMsg(message);\n        this.InternalSendRawTo(data, id, reliable);\n    };\n    AWebRtcCall.prototype.PackStringMsg = function (message) {\n        var data = _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"Encoding\"].UTF16.GetBytes(message);\n        var buff = new Uint8Array(data.length + 1);\n        buff[0] = this.MESSAGE_TYPE_STRING;\n        for (var i = 0; i < data.length; i++) {\n            buff[i + 1] = data[i];\n        }\n        return buff;\n    };\n    AWebRtcCall.prototype.UnpackStringMsg = function (message) {\n        var buff = new Uint8Array(message.length - 1);\n        for (var i = 0; i < buff.length; i++) {\n            buff[i] = message[i + 1];\n        }\n        var res = _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"Encoding\"].UTF16.GetString(buff);\n        return res;\n    };\n    AWebRtcCall.prototype.PackDataMsg = function (data) {\n        var buff = new Uint8Array(data.length + 1);\n        buff[0] = this.MESSAGE_TYPE_DATA;\n        for (var i = 0; i < data.length; i++) {\n            buff[i + 1] = data[i];\n        }\n        return buff;\n    };\n    AWebRtcCall.prototype.UnpackDataMsg = function (message) {\n        var buff = new Uint8Array(message.length - 1);\n        for (var i = 0; i < buff.length; i++) {\n            buff[i] = message[i + 1];\n        }\n        return buff;\n    };\n    AWebRtcCall.prototype.InternalSendRawTo = function (rawdata, id, reliable) {\n        this.mNetwork.SendData(id, rawdata, reliable);\n    };\n    AWebRtcCall.prototype.Update = function () {\n        if (this.mIsDisposed)\n            return;\n        if (this.mNetwork == null)\n            return;\n        this.mNetwork.Update();\n        //waiting for the media configuration?\n        if (this.mState == CallState.Configuring) {\n            var configState = this.mNetwork.GetConfigurationState();\n            if (configState == _IMediaNetwork__WEBPACK_IMPORTED_MODULE_0__[\"MediaConfigurationState\"].Failed) {\n                this.OnConfigurationFailed(this.mNetwork.GetConfigurationError());\n                //bugfix: user might dispose the call during the event above\n                if (this.mIsDisposed)\n                    return;\n                if (this.mNetwork != null)\n                    this.mNetwork.ResetConfiguration();\n            }\n            else if (configState == _IMediaNetwork__WEBPACK_IMPORTED_MODULE_0__[\"MediaConfigurationState\"].Successful) {\n                this.OnConfigurationComplete();\n                if (this.mIsDisposed)\n                    return;\n            }\n        }\n        var evt;\n        while ((evt = this.mNetwork.Dequeue()) != null) {\n            switch (evt.Type) {\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].NewConnection:\n                    if (this.mState == CallState.WaitingForIncomingCall\n                        || (this.mConferenceMode && this.mState == CallState.InCall)) //keep accepting connections after \n                     {\n                        //remove ability to accept incoming connections\n                        if (this.mConferenceMode == false)\n                            this.mNetwork.StopServer();\n                        this.mState = CallState.InCall;\n                        this.mConnectionInfo.AddConnection(evt.ConnectionId, true);\n                        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallAcceptedEventArgs\"](evt.ConnectionId));\n                        if (this.mIsDisposed)\n                            return;\n                    }\n                    else if (this.mState == CallState.WaitingForOutgoingCall) {\n                        this.mConnectionInfo.AddConnection(evt.ConnectionId, false);\n                        //only possible in 1 on 1 calls\n                        this.mState = CallState.InCall;\n                        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallAcceptedEventArgs\"](evt.ConnectionId));\n                        if (this.mIsDisposed)\n                            return;\n                    }\n                    else {\n                        //Debug.Assert(mState == CallState.WaitingForIncomingCall || mState == CallState.WaitingForOutgoingCall);\n                        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].LogWarning(\"Received incoming connection during invalid state \" + this.mState);\n                    }\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ConnectionFailed:\n                    //call failed\n                    if (this.mState == CallState.WaitingForOutgoingCall) {\n                        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"ErrorEventArgs\"](_CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"].ConnectionFailed));\n                        if (this.mIsDisposed)\n                            return;\n                        this.mState = CallState.Configured;\n                    }\n                    else {\n                        //Debug.Assert(mState == CallState.WaitingForOutgoingCall);\n                        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].LogError(\"Received ConnectionFailed during \" + this.mState);\n                    }\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].Disconnected:\n                    if (this.mConnectionInfo.HasConnection(evt.ConnectionId)) {\n                        this.mConnectionInfo.RemConnection(evt.ConnectionId);\n                        //call ended\n                        if (this.mConferenceMode == false && this.mConnectionInfo.GetIds().length == 0) {\n                            this.mState = CallState.Closed;\n                        }\n                        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEndedEventArgs\"](evt.ConnectionId));\n                        if (this.mIsDisposed)\n                            return;\n                    }\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ServerInitialized:\n                    //incoming calls possible\n                    this.mServerInactive = false;\n                    this.mState = CallState.WaitingForIncomingCall;\n                    this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"WaitForIncomingCallEventArgs\"](evt.Info));\n                    if (this.mIsDisposed)\n                        return;\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ServerInitFailed:\n                    this.mServerInactive = true;\n                    //reset state to the earlier state which is Configured (as without configuration no\n                    //listening possible). Local camera/audio will keep running\n                    this.mState = CallState.Configured;\n                    this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"ErrorEventArgs\"](_CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"].ListeningFailed));\n                    if (this.mIsDisposed)\n                        return;\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ServerClosed:\n                    this.mServerInactive = true;\n                    //no incoming calls possible anymore\n                    if (this.mState == CallState.WaitingForIncomingCall || this.mState == CallState.RequestingAddress) {\n                        this.mState = CallState.Configured;\n                        //might need to be handled as a special timeout event?\n                        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"ErrorEventArgs\"](_CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"].ListeningFailed, _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallErrorType\"].Unknown, \"Server closed the connection while waiting for incoming calls.\"));\n                        if (this.mIsDisposed)\n                            return;\n                    }\n                    else {\n                        //event is normal during other states as the server connection will be closed after receiving a call\n                    }\n                    break;\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ReliableMessageReceived:\n                case _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].UnreliableMessageReceived:\n                    var reliable = evt.Type === _network_index__WEBPACK_IMPORTED_MODULE_5__[\"NetEventType\"].ReliableMessageReceived;\n                    //chat message received\n                    if (evt.MessageData.length >= 2) {\n                        if (evt.MessageData[0] == this.MESSAGE_TYPE_STRING) {\n                            var message = this.UnpackStringMsg(evt.MessageData);\n                            this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"MessageEventArgs\"](evt.ConnectionId, message, reliable));\n                        }\n                        else if (evt.MessageData[0] == this.MESSAGE_TYPE_DATA) {\n                            var message = this.UnpackDataMsg(evt.MessageData);\n                            this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"DataMessageEventArgs\"](evt.ConnectionId, message, reliable));\n                        }\n                        else {\n                            //invalid message?\n                        }\n                    }\n                    else {\n                        //invalid message?\n                    }\n                    if (this.mIsDisposed)\n                        return;\n                    break;\n            }\n        }\n        var handleLocalFrames = true;\n        var handleRemoteFrames = true;\n        if (this.mMediaConfig.FrameUpdates && handleLocalFrames) {\n            var localFrame = this.mNetwork.TryGetFrame(_network_index__WEBPACK_IMPORTED_MODULE_5__[\"ConnectionId\"].INVALID);\n            if (localFrame != null) {\n                this.FrameToCallEvent(_network_index__WEBPACK_IMPORTED_MODULE_5__[\"ConnectionId\"].INVALID, localFrame);\n                if (this.mIsDisposed)\n                    return;\n            }\n        }\n        if (this.mMediaConfig.FrameUpdates && handleRemoteFrames) {\n            for (var _i = 0, _a = this.mConnectionInfo.GetIds(); _i < _a.length; _i++) {\n                var id = _a[_i];\n                var conId = new _network_index__WEBPACK_IMPORTED_MODULE_5__[\"ConnectionId\"](id);\n                var remoteFrame = this.mNetwork.TryGetFrame(conId);\n                if (remoteFrame != null) {\n                    this.FrameToCallEvent(conId, remoteFrame);\n                    if (this.mIsDisposed)\n                        return;\n                }\n            }\n        }\n        var mediaEvent = null;\n        while ((mediaEvent = this.mNetwork.DequeueMediaEvent()) != null) {\n            this.MediaEventToCallEvent(mediaEvent);\n        }\n        this.mNetwork.Flush();\n    };\n    AWebRtcCall.prototype.FrameToCallEvent = function (id, frame) {\n        var args = new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"FrameUpdateEventArgs\"](id, frame);\n        this.TriggerCallEvent(args);\n    };\n    AWebRtcCall.prototype.MediaEventToCallEvent = function (evt) {\n        var videoElement = null;\n        if (evt.EventType == evt.EventType) {\n            var args = new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"MediaUpdatedEventArgs\"](evt.ConnectionId, evt.Args);\n            this.TriggerCallEvent(args);\n        }\n    };\n    AWebRtcCall.prototype.PendingCall = function (address) {\n        this.mPendingAddress = address;\n        this.mPendingCallCall = true;\n        this.mPendingListenCall = false;\n    };\n    AWebRtcCall.prototype.ProcessCall = function (address) {\n        this.mState = CallState.WaitingForOutgoingCall;\n        this.mNetwork.Connect(address);\n        this.ClearPending();\n    };\n    AWebRtcCall.prototype.PendingListen = function (address) {\n        this.mPendingAddress = address;\n        this.mPendingCallCall = false;\n        this.mPendingListenCall = true;\n    };\n    AWebRtcCall.prototype.ProcessListen = function (address) {\n        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].Log(\"Listen at \" + address);\n        this.mServerInactive = false;\n        this.mState = CallState.RequestingAddress;\n        this.mNetwork.StartServer(address);\n        this.ClearPending();\n    };\n    AWebRtcCall.prototype.DoPending = function () {\n        if (this.mPendingCallCall) {\n            this.ProcessCall(this.mPendingAddress);\n        }\n        else if (this.mPendingListenCall) {\n            this.ProcessListen(this.mPendingAddress);\n        }\n        this.ClearPending();\n    };\n    AWebRtcCall.prototype.ClearPending = function () {\n        this.mPendingAddress = null;\n        this.mPendingCallCall = null;\n        this.mPendingListenCall = null;\n    };\n    AWebRtcCall.prototype.CheckDisposed = function () {\n        if (this.mIsDisposed)\n            throw new InvalidOperationException(\"Object is disposed. No method calls possible.\");\n    };\n    AWebRtcCall.prototype.EnsureConfiguration = function () {\n        if (this.mState == CallState.Initialized) {\n            _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].Log(\"Use default configuration\");\n            this.Configure(new _MediaConfig__WEBPACK_IMPORTED_MODULE_4__[\"MediaConfig\"]());\n        }\n        else {\n        }\n    };\n    AWebRtcCall.prototype.TriggerCallEvent = function (args) {\n        var arr = this.mCallEventHandlers.slice();\n        for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n            var callback = arr_1[_i];\n            callback(this, args);\n        }\n    };\n    AWebRtcCall.prototype.OnConfigurationComplete = function () {\n        if (this.mIsDisposed)\n            return;\n        this.mState = CallState.Configured;\n        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].Log(\"Enter state CallState.Configured\");\n        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventArgs\"](_CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"].ConfigurationComplete));\n        if (this.mIsDisposed == false)\n            this.DoPending();\n    };\n    AWebRtcCall.prototype.OnConfigurationFailed = function (error) {\n        _network_Helper__WEBPACK_IMPORTED_MODULE_2__[\"SLog\"].LogWarning(\"Configuration failed: \" + error);\n        if (this.mIsDisposed)\n            return;\n        this.mState = CallState.Initialized;\n        this.TriggerCallEvent(new _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"ErrorEventArgs\"](_CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"].ConfigurationFailed, _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallErrorType\"].Unknown, error));\n        //bugfix: user might dispose the call during the event above\n        if (this.mIsDisposed == false)\n            this.ClearPending();\n    };\n    AWebRtcCall.prototype.DisposeInternal = function (disposing) {\n        //nothing to dispose but subclasses overwrite this\n        if (!this.mIsDisposed) {\n            if (disposing) {\n            }\n            this.mIsDisposed = true;\n        }\n    };\n    AWebRtcCall.prototype.Dispose = function () {\n        this.DisposeInternal(true);\n    };\n    return AWebRtcCall;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9BV2ViUnRjQ2FsbC50cz9lZTNkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQThCcUY7QUFDeUw7QUFDM047QUFDSDtBQUNKO0FBQ2dDO0FBSTVFO0lBSUksdUJBQW1CLFFBQWdCO1FBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFKTSxnQ0FBUSxHQUFmO0lBQ0EsQ0FBQztJQUlMLG9CQUFDO0FBQUQsQ0FBQztBQUNEO0lBQXdDLDZDQUFhO0lBQXJEOztJQUVBLENBQUM7SUFBRCxnQ0FBQztBQUFELENBQUMsQ0FGdUMsYUFBYSxHQUVwRDtBQUNELGFBQWE7QUFDYixzRUFBc0U7QUFDdEUsY0FBYztBQUNkLElBQUssU0E0Q0o7QUE1Q0QsV0FBSyxTQUFTO0lBQ1YsYUFBYTtJQUNiLDZCQUE2QjtJQUM3QixjQUFjO0lBQ2QsK0NBQVc7SUFDWCxhQUFhO0lBQ2IsNERBQTREO0lBQzVELGNBQWM7SUFDZCx1REFBZTtJQUVmLGFBQWE7SUFDYixvREFBb0Q7SUFDcEQsY0FBYztJQUNkLHVEQUFlO0lBQ2YsYUFBYTtJQUNiLHNFQUFzRTtJQUN0RSxjQUFjO0lBQ2QscURBQWM7SUFDZCxhQUFhO0lBQ2IsbUZBQW1GO0lBQ25GLHFCQUFxQjtJQUNyQixjQUFjO0lBQ2QsbUVBQXFCO0lBRXJCLGFBQWE7SUFDYixvRUFBb0U7SUFDcEUsY0FBYztJQUNkLDZFQUEwQjtJQUUxQixhQUFhO0lBQ2IsZ0VBQWdFO0lBQ2hFLGNBQWM7SUFDZCw2RUFBMEI7SUFFMUIsYUFBYTtJQUNiLDJFQUEyRTtJQUMzRSxjQUFjO0lBQ2QsNkNBQVU7SUFDVix1QkFBdUI7SUFDdkIsdUJBQXVCO0lBQ3ZCLGFBQWE7SUFDYix1Q0FBdUM7SUFDdkMsY0FBYztJQUNkLDZDQUFVO0FBQ2QsQ0FBQyxFQTVDSSxTQUFTLEtBQVQsU0FBUyxRQTRDYjtBQUVEOzs7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QUFDLElBQUksNkRBQWMsQ0FBQyw0REFBYSxDQUFDLG1CQUFtQixFQUFFLDREQUFhLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDM0csNERBQTREO1FBQzVELElBQUksSUFBSSxDQUFDLFdBQVcsSUFBSSxLQUFLO1lBQ3pCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUM1QixDQUFDO0lBRVMscUNBQWUsR0FBekIsVUFBMEIsU0FBa0I7UUFFeEMsa0RBQWtEO1FBQ2xELElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ25CLElBQUksU0FBUyxFQUFFO2FBQ2Q7WUFDRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUMzQjtJQUNMLENBQUM7SUFFTSw2QkFBTyxHQUFkO1FBRUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBQ0wsa0JBQUM7QUFBRCxDQUFDIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL21lZGlhL0FXZWJSdGNDYWxsLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgMjAxOSwgYmVjYXVzZS13aHktbm90LmNvbSBMaW1pdGVkXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cblxuKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cbiogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFXG5GT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTFxuREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1JcblNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSXG5DQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLFxuT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbk9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4qL1xuaW1wb3J0IHsgSUNhbGwgfSBmcm9tIFwiLi9JQ2FsbFwiO1xuaW1wb3J0IHsgSU1lZGlhTmV0d29yaywgTWVkaWFDb25maWd1cmF0aW9uU3RhdGUsIE1lZGlhRXZlbnQgfSBmcm9tIFwiLi9JTWVkaWFOZXR3b3JrXCI7XG5pbXBvcnQgeyBDYWxsRXZlbnRIYW5kbGVyLCBDYWxsQWNjZXB0ZWRFdmVudEFyZ3MsIENhbGxFbmRlZEV2ZW50QXJncywgRXJyb3JFdmVudEFyZ3MsIENhbGxFdmVudFR5cGUsIFdhaXRGb3JJbmNvbWluZ0NhbGxFdmVudEFyZ3MsIENhbGxFcnJvclR5cGUsIERhdGFNZXNzYWdlRXZlbnRBcmdzLCBGcmFtZVVwZGF0ZUV2ZW50QXJncywgQ2FsbEV2ZW50QXJncywgTWVzc2FnZUV2ZW50QXJncywgTWVkaWFVcGRhdGVkRXZlbnRBcmdzIH0gZnJvbSBcIi4vQ2FsbEV2ZW50QXJnc1wiO1xuaW1wb3J0IHsgU0xvZywgRW5jb2RpbmcgfSBmcm9tIFwiLi4vbmV0d29yay9IZWxwZXJcIjtcbmltcG9ydCB7IE5ldHdvcmtDb25maWcgfSBmcm9tIFwiLi9OZXR3b3JrQ29uZmlnXCI7XG5pbXBvcnQgeyBNZWRpYUNvbmZpZyB9IGZyb20gXCIuL01lZGlhQ29uZmlnXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uSWQsIE5ldHdvcmtFdmVudCwgTmV0RXZlbnRUeXBlIH0gZnJvbSBcIi4uL25ldHdvcmsvaW5kZXhcIjtcbmltcG9ydCB7IEJyb3dzZXJNZWRpYU5ldHdvcmsgfSBmcm9tIFwiLi4vbWVkaWFfYnJvd3Nlci9Ccm93c2VyTWVkaWFOZXR3b3JrXCI7XG5pbXBvcnQgeyBJRnJhbWVEYXRhIH0gZnJvbSBcIi4vUmF3RnJhbWVcIjtcblxuY2xhc3MgQ2FsbEV4Y2VwdGlvbiB7XG4gICAgcHJpdmF0ZSBtRXJyb3JNc2c6IHN0cmluZztcbiAgICBwdWJsaWMgRXJyb3JNc2coKSB7XG4gICAgfVxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihlcnJvck1zZzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubUVycm9yTXNnID0gZXJyb3JNc2c7XG4gICAgfVxufVxuY2xhc3MgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbiBleHRlbmRzIENhbGxFeGNlcHRpb25cbntcbn1cbi8vLyA8c3VtbWFyeT5cbi8vLyBTdGF0ZSBvZiB0aGUgY2FsbC4gTWFpbmx5IHVzZWQgdG8gY2hlY2sgZm9yIGJ1Z3MgLyBpbnZhbGlkIHN0YXRlcy5cbi8vLyA8L3N1bW1hcnk+XG5lbnVtIENhbGxTdGF0ZSB7XG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBOb3QgeWV0IGluaXRpYWxpemVkIC8gYnVnXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBJbnZhbGlkID0gMCxcbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIE9iamVjdCBpcyBpbml0aWFsaXplZCBidXQgbG9jYWwgbWVkaWEgbm90IHlldCBjb25maWd1cmVkXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBJbml0aWFsaXplZCA9IDEsXG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEluIHByb2Nlc3Mgb2YgYWNjZXNzaW5nIHRoZSBsb2NhbCBtZWRpYSBkZXZpY2VzLlxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgQ29uZmlndXJpbmcgPSAyLFxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gQ29uZmlndXJlZC4gVmlkZW8vQXVkaW8gY2FuIGJlIGFjY2Vzc2VkIGFuZCBjYWxsIGlzIHJlYWR5IHRvIHN0YXJ0XG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBDb25maWd1cmVkID0gMyxcbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEluIHByb2Nlc3Mgb2YgcmVxdWVzdGluZyBhbiBhZGRyZXNzIGZyb20gdGhlIHNlcnZlciB0byB0aGVuIGxpc3RlbiBhbmQgd2FpdCBmb3JcbiAgICAvLy8gYW4gaW5jb21pbmcgY2FsbC5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIFJlcXVlc3RpbmdBZGRyZXNzID0gNCxcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gQ2FsbCBpcyBsaXN0ZW5pbmcgb24gYW4gYWRkcmVzcyBhbmQgd2FpdGluZyBmb3IgYW4gaW5jb21pbmcgY2FsbFxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgV2FpdGluZ0ZvckluY29taW5nQ2FsbCA9IDUsXG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIENhbGwgaXMgaW4gdGhlIHByb2Nlc3Mgb2YgY29ubmVjdGluZyB0byBhbm90aGVyIGNhbGwgb2JqZWN0LlxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgV2FpdGluZ0Zvck91dGdvaW5nQ2FsbCA9IDYsXG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEluZGljYXRpbmcgdGhhdCB0aGUgY2FsbCBvYmplY3QgaXMgYXQgbGVhc3QgY29ubmVjdGVkIHRvIGFub3RoZXIgb2JqZWN0XG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBJbkNhbGwgPSA3LFxuICAgIC8vQ2FsbEFjY2VwdGVkSW5jb21pbmcsXG4gICAgLy9DYWxsQWNjZXB0ZWRPdXRnb2luZyxcbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIENhbGwgZW5kZWQgLyBjb25mZXJlbmNlIHJvb20gY2xvc2VkXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBDbG9zZWQgPSA4XG59XG5cbi8qXG5jbGFzcyBDb25uZWN0aW9uTWV0YURhdGFcbntcbn1cbiovXG5jbGFzcyBDb25uZWN0aW9uSW5mb3tcblxuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25JZHMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuICAgIC8vcHJpdmF0ZSBtQ29ubmVjdGlvbk1ldGE6IHsgW2lkOiBudW1iZXJdOiBDb25uZWN0aW9uTWV0YURhdGEgfSA9IHt9O1xuXG5cbiAgICBwdWJsaWMgQWRkQ29ubmVjdGlvbihpZDogQ29ubmVjdGlvbklkLCBpbmNvbWluZzpib29sZWFuKVxuICAgIHtcbiAgICAgICAgdGhpcy5tQ29ubmVjdGlvbklkcy5wdXNoKGlkLmlkKTtcbiAgICAgICAgLy90aGlzLm1Db25uZWN0aW9uTWV0YVtpZC5pZF0gPSBuZXcgQ29ubmVjdGlvbk1ldGFEYXRhKCk7XG4gICAgfVxuXG4gICAgcHVibGljIFJlbUNvbm5lY3Rpb24oaWQ6Q29ubmVjdGlvbklkKVxuICAgIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tQ29ubmVjdGlvbklkcy5pbmRleE9mKGlkLmlkKTtcbiAgICAgICAgaWYoaW5kZXggPj0gMCl7XG4gICAgICAgICAgICB0aGlzLm1Db25uZWN0aW9uSWRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIFNMb2cuTEUoXCJ0cmllZCB0byByZW1vdmUgYW4gdW5rbm93biBjb25uZWN0aW9uIHdpdGggaWQgXCIgKyBpZC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9kZWxldGUgdGhpcy5tQ29ubmVjdGlvbk1ldGFbaWQuaWRdO1xuICAgIH1cblxuICAgIHB1YmxpYyBIYXNDb25uZWN0aW9uKGlkOkNvbm5lY3Rpb25JZClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25uZWN0aW9uSWRzLmluZGV4T2YoaWQuaWQpICE9IC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyBHZXRJZHMoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUNvbm5lY3Rpb25JZHM7XG4gICAgfVxuXG5cbiAgICAvL3B1YmxpYyBHZXRNZXRhKGlkOkNvbm5lY3Rpb25JZCkgOiBDb25uZWN0aW9uTWV0YURhdGFcbiAgICAvL3tcbiAgICAvLyAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbk1ldGFbaWQuaWRdO1xuICAgIC8vfVxufVxuXG4vKipUaGlzIGNsYXNzIHdyYXBzIGFuIGltcGxlbWVudGF0aW9uIG9mXG4gKiBJTWVkaWFTdHJlYW0gYW5kIGNvbnZlcnRzIGl0cyBwb2xsaW5nIHN5c3RlbVxuICogdG8gYW4gZWFzaWVyIHRvIHVzZSBldmVudCBiYXNlZCBzeXN0ZW0uIFxuICogXG4gKiBJZGVhbGx5IHVzZSBvbmx5IGZlYXR1cmVzIGRlZmluZWQgYnkgXG4gKiBJQ2FsbCB0byBhdm9pZCBoYXZpbmcgdG8gZGVhbCB3aXRoIGludGVybmFsIGNoYW5nZXNcbiAqIGluIGZ1dHVyZSB1cGRhdGVzLlxuICovXG5leHBvcnQgY2xhc3MgQVdlYlJ0Y0NhbGwgaW1wbGVtZW50cyBJQ2FsbCB7XG5cbiAgICBwcml2YXRlIE1FU1NBR0VfVFlQRV9JTlZBTElEIDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIE1FU1NBR0VfVFlQRV9EQVRBIDogbnVtYmVyID0gMTtcbiAgICBwcml2YXRlIE1FU1NBR0VfVFlQRV9TVFJJTkcgOiBudW1iZXIgPSAyO1xuICAgIHByaXZhdGUgTUVTU0FHRV9UWVBFX0NPTlRST0wgOiBudW1iZXIgPSAzO1xuXG4gICAgcHJvdGVjdGVkIG1OZXR3b3JrQ29uZmlnID0gbmV3IE5ldHdvcmtDb25maWcoKTtcbiAgICBwcml2YXRlIG1NZWRpYUNvbmZpZzogTWVkaWFDb25maWcgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBtQ2FsbEV2ZW50SGFuZGxlcnM6IEFycmF5PENhbGxFdmVudEhhbmRsZXI+ID0gW107XG4gICAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXI6IENhbGxFdmVudEhhbmRsZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tQ2FsbEV2ZW50SGFuZGxlcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuICAgIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyKGxpc3RlbmVyOiBDYWxsRXZlbnRIYW5kbGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubUNhbGxFdmVudEhhbmRsZXJzID0gdGhpcy5tQ2FsbEV2ZW50SGFuZGxlcnMuZmlsdGVyKGggPT4gaCAhPT0gbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBtTmV0d29yazogSU1lZGlhTmV0d29yayA9IG51bGxcbiAgICBwcml2YXRlIG1Db25uZWN0aW9uSW5mbyA9IG5ldyBDb25uZWN0aW9uSW5mbygpO1xuXG4gICAgcHJpdmF0ZSBtQ29uZmVyZW5jZU1vZGUgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgbVN0YXRlID0gQ2FsbFN0YXRlLkludmFsaWQ7XG4gICAgcHVibGljIGdldCBTdGF0ZSgpOiBDYWxsU3RhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5tU3RhdGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtSXNEaXNwb3NlZCA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBtU2VydmVySW5hY3RpdmUgPSB0cnVlO1xuXG5cblxuXG4gICAgcHJpdmF0ZSBtUGVuZGluZ0xpc3RlbkNhbGwgPSBmYWxzZTtcbiAgICBwcml2YXRlIG1QZW5kaW5nQ2FsbENhbGwgPSBmYWxzZTtcbiAgICBwcml2YXRlIG1QZW5kaW5nQWRkcmVzcyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IE5ldHdvcmtDb25maWcgPSBudWxsKSB7XG4gICAgICAgIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5tTmV0d29ya0NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgICAgIHRoaXMubUNvbmZlcmVuY2VNb2RlID0gY29uZmlnLklzQ29uZmVyZW5jZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBJbml0aWFsaXplKG5ldHdvcms6IElNZWRpYU5ldHdvcmspOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tTmV0d29yayA9IG5ldHdvcms7XG4gICAgICAgIHRoaXMubVN0YXRlID0gQ2FsbFN0YXRlLkluaXRpYWxpemVkO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgQ29uZmlndXJlKGNvbmZpZzogTWVkaWFDb25maWcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5DaGVja0Rpc3Bvc2VkKCk7XG4gICAgICAgIGlmICh0aGlzLm1TdGF0ZSAhPSBDYWxsU3RhdGUuSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiTWV0aG9kIGNhbid0IGJlIHVzZWQgaW4gc3RhdGUgXCIgKyB0aGlzLm1TdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuQ29uZmlndXJpbmc7XG4gICAgICAgIFNMb2cuTG9nKFwiRW50ZXIgc3RhdGUgQ2FsbFN0YXRlLkNvbmZpZ3VyaW5nXCIpO1xuICAgICAgICB0aGlzLm1NZWRpYUNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5tTmV0d29yay5Db25maWd1cmUodGhpcy5tTWVkaWFDb25maWcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBDYWxsKGFkZHJlc3M6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLkNoZWNrRGlzcG9zZWQoKTtcbiAgICAgICAgaWYgKHRoaXMubVN0YXRlICE9IENhbGxTdGF0ZS5Jbml0aWFsaXplZFxuICAgICAgICAgICAgJiYgdGhpcy5tU3RhdGUgIT0gQ2FsbFN0YXRlLkNvbmZpZ3VyaW5nXG4gICAgICAgICAgICAmJiB0aGlzLm1TdGF0ZSAhPSBDYWxsU3RhdGUuQ29uZmlndXJlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJNZXRob2QgY2FuJ3QgYmUgdXNlZCBpbiBzdGF0ZSBcIiArIHRoaXMubVN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1Db25mZXJlbmNlTW9kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRPcGVyYXRpb25FeGNlcHRpb24oXCJNZXRob2QgY2FuJ3QgYmUgdXNlZCBpbiBjb25mZXJlbmNlIGNhbGxzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBTTG9nLkxvZyhcIkNhbGwgdG8gXCIgKyBhZGRyZXNzKTtcblxuICAgICAgICB0aGlzLkVuc3VyZUNvbmZpZ3VyYXRpb24oKTtcblxuICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLkNvbmZpZ3VyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuUHJvY2Vzc0NhbGwoYWRkcmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLlBlbmRpbmdDYWxsKGFkZHJlc3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBMaXN0ZW4oYWRkcmVzczogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuQ2hlY2tEaXNwb3NlZCgpO1xuICAgICAgICBpZiAodGhpcy5tU3RhdGUgIT0gQ2FsbFN0YXRlLkluaXRpYWxpemVkXG4gICAgICAgICAgICAmJiB0aGlzLm1TdGF0ZSAhPSBDYWxsU3RhdGUuQ29uZmlndXJpbmdcbiAgICAgICAgICAgICYmIHRoaXMubVN0YXRlICE9IENhbGxTdGF0ZS5Db25maWd1cmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbihcIk1ldGhvZCBjYW4ndCBiZSB1c2VkIGluIHN0YXRlIFwiICsgdGhpcy5tU3RhdGUpO1xuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLkVuc3VyZUNvbmZpZ3VyYXRpb24oKTtcblxuICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLkNvbmZpZ3VyZWQpIHtcbiAgICAgICAgICAgIHRoaXMuUHJvY2Vzc0xpc3RlbihhZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuUGVuZGluZ0xpc3RlbihhZGRyZXNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBTZW5kKG1lc3NhZ2U6IHN0cmluZywgcmVsaWFibGU/OmJvb2xlYW4sIGlkPyA6Q29ubmVjdGlvbklkKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5DaGVja0Rpc3Bvc2VkKCk7XG4gICAgICAgIGlmKHJlbGlhYmxlID09IG51bGwpXG4gICAgICAgICAgICByZWxpYWJsZSA9IHRydWU7XG4gICAgICAgIGlmKGlkKSB7XG4gICAgICAgICAgICB0aGlzLkludGVybmFsU2VuZFRvKG1lc3NhZ2UsIHJlbGlhYmxlLCBpZCk7XG4gICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHRoaXMuSW50ZXJuYWxTZW5kVG9BbGwobWVzc2FnZSwgcmVsaWFibGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBJbnRlcm5hbFNlbmRUb0FsbChtZXNzYWdlOiBzdHJpbmcsIHJlbGlhYmxlOmJvb2xlYW4pOiB2b2lkIHtcblxuXG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5QYWNrU3RyaW5nTXNnKG1lc3NhZ2UpOztcblxuICAgICAgICBmb3IgKGxldCBpZCBvZiB0aGlzLm1Db25uZWN0aW9uSW5mby5HZXRJZHMoKSkge1xuICAgICAgICAgICAgU0xvZy5MKFwiU2VuZCBtZXNzYWdlIHRvIFwiICsgaWQgKyBcIiEgXCIgKyBtZXNzYWdlKTtcbiAgICAgICAgICAgIHRoaXMuSW50ZXJuYWxTZW5kUmF3VG8oZGF0YSwgbmV3IENvbm5lY3Rpb25JZChpZCksIHJlbGlhYmxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIEludGVybmFsU2VuZFRvKG1lc3NhZ2U6IHN0cmluZywgcmVsaWFibGU6Ym9vbGVhbiwgaWQgOkNvbm5lY3Rpb25JZCk6IHZvaWQge1xuXG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5QYWNrU3RyaW5nTXNnKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLkludGVybmFsU2VuZFJhd1RvKGRhdGEsIGlkLCByZWxpYWJsZSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgU2VuZERhdGEobWVzc2FnZTogVWludDhBcnJheSwgcmVsaWFibGU6Ym9vbGVhbiwgaWQgOkNvbm5lY3Rpb25JZCk6IHZvaWQge1xuXG4gICAgICAgIHRoaXMuQ2hlY2tEaXNwb3NlZCgpO1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuUGFja0RhdGFNc2cobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuSW50ZXJuYWxTZW5kUmF3VG8oZGF0YSwgaWQsIHJlbGlhYmxlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIFBhY2tTdHJpbmdNc2cobWVzc2FnZTogc3RyaW5nKTogVWludDhBcnJheSB7XG5cbiAgICAgICAgbGV0IGRhdGEgPSBFbmNvZGluZy5VVEYxNi5HZXRCeXRlcyhtZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBidWZmID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGggKyAxKTtcbiAgICAgICAgYnVmZlswXSA9IHRoaXMuTUVTU0FHRV9UWVBFX1NUUklORztcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgYnVmZltpICsgMV0gPSBkYXRhW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmO1xuICAgIH1cblxuICAgIHByaXZhdGUgVW5wYWNrU3RyaW5nTXNnKG1lc3NhZ2U6IFVpbnQ4QXJyYXkpOiBzdHJpbmdcbiAgICB7XG4gICAgICAgIGxldCBidWZmID0gbmV3IFVpbnQ4QXJyYXkobWVzc2FnZS5sZW5ndGggLSAxKTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBidWZmLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGJ1ZmZbaV0gPSBtZXNzYWdlW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzID0gRW5jb2RpbmcuVVRGMTYuR2V0U3RyaW5nKGJ1ZmYpO1xuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBQYWNrRGF0YU1zZyhkYXRhOiBVaW50OEFycmF5KTogVWludDhBcnJheSB7XG5cbiAgICAgICAgbGV0IGJ1ZmYgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCArIDEpO1xuICAgICAgICBidWZmWzBdID0gdGhpcy5NRVNTQUdFX1RZUEVfREFUQTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgYnVmZltpICsgMV0gPSBkYXRhW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmO1xuICAgIH1cblxuICAgIHByaXZhdGUgVW5wYWNrRGF0YU1zZyhtZXNzYWdlOiBVaW50OEFycmF5KTogVWludDhBcnJheVxuICAgIHtcbiAgICAgICAgbGV0IGJ1ZmYgPSBuZXcgVWludDhBcnJheShtZXNzYWdlLmxlbmd0aCAtIDEpO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGJ1ZmYubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgYnVmZltpXSA9IG1lc3NhZ2VbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWZmO1xuICAgIH1cblxuICAgIHByaXZhdGUgSW50ZXJuYWxTZW5kUmF3VG8ocmF3ZGF0YTogVWludDhBcnJheSwgaWQgOkNvbm5lY3Rpb25JZCwgcmVsaWFibGU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5tTmV0d29yay5TZW5kRGF0YShpZCwgcmF3ZGF0YSwgcmVsaWFibGUpO1xuICAgIH1cblxuXG5cbiAgICBcblxuICAgIHB1YmxpYyBVcGRhdGUoKTogdm9pZCB7XG5cbiAgICAgICAgaWYgKHRoaXMubUlzRGlzcG9zZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLm1OZXR3b3JrID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5tTmV0d29yay5VcGRhdGUoKTtcblxuICAgICAgICAvL3dhaXRpbmcgZm9yIHRoZSBtZWRpYSBjb25maWd1cmF0aW9uP1xuICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLkNvbmZpZ3VyaW5nKSB7XG4gICAgICAgICAgICB2YXIgY29uZmlnU3RhdGUgPSB0aGlzLm1OZXR3b3JrLkdldENvbmZpZ3VyYXRpb25TdGF0ZSgpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ1N0YXRlID09IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlLkZhaWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuT25Db25maWd1cmF0aW9uRmFpbGVkKHRoaXMubU5ldHdvcmsuR2V0Q29uZmlndXJhdGlvbkVycm9yKCkpO1xuICAgICAgICAgICAgICAgIC8vYnVnZml4OiB1c2VyIG1pZ2h0IGRpc3Bvc2UgdGhlIGNhbGwgZHVyaW5nIHRoZSBldmVudCBhYm92ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubU5ldHdvcmsgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tTmV0d29yay5SZXNldENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZ1N0YXRlID09IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlLlN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLk9uQ29uZmlndXJhdGlvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubUlzRGlzcG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgbGV0IGV2dDogTmV0d29ya0V2ZW50O1xuICAgICAgICB3aGlsZSAoKGV2dCA9IHRoaXMubU5ldHdvcmsuRGVxdWV1ZSgpKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2dC5UeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBOZXRFdmVudFR5cGUuTmV3Q29ubmVjdGlvbjpcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLldhaXRpbmdGb3JJbmNvbWluZ0NhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0aGlzLm1Db25mZXJlbmNlTW9kZSAmJiB0aGlzLm1TdGF0ZSA9PSBDYWxsU3RhdGUuSW5DYWxsKSkgLy9rZWVwIGFjY2VwdGluZyBjb25uZWN0aW9ucyBhZnRlciBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgYWJpbGl0eSB0byBhY2NlcHQgaW5jb21pbmcgY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Db25mZXJlbmNlTW9kZSA9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1OZXR3b3JrLlN0b3BTZXJ2ZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuSW5DYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQ29ubmVjdGlvbkluZm8uQWRkQ29ubmVjdGlvbihldnQuQ29ubmVjdGlvbklkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgQ2FsbEFjY2VwdGVkRXZlbnRBcmdzKGV2dC5Db25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLm1TdGF0ZSA9PSBDYWxsU3RhdGUuV2FpdGluZ0Zvck91dGdvaW5nQ2FsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tQ29ubmVjdGlvbkluZm8uQWRkQ29ubmVjdGlvbihldnQuQ29ubmVjdGlvbklkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL29ubHkgcG9zc2libGUgaW4gMSBvbiAxIGNhbGxzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1TdGF0ZSA9IENhbGxTdGF0ZS5JbkNhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlRyaWdnZXJDYWxsRXZlbnQobmV3IENhbGxBY2NlcHRlZEV2ZW50QXJncyhldnQuQ29ubmVjdGlvbklkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RlYnVnLkFzc2VydChtU3RhdGUgPT0gQ2FsbFN0YXRlLldhaXRpbmdGb3JJbmNvbWluZ0NhbGwgfHwgbVN0YXRlID09IENhbGxTdGF0ZS5XYWl0aW5nRm9yT3V0Z29pbmdDYWxsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgU0xvZy5Mb2dXYXJuaW5nKFwiUmVjZWl2ZWQgaW5jb21pbmcgY29ubmVjdGlvbiBkdXJpbmcgaW52YWxpZCBzdGF0ZSBcIiArIHRoaXMubVN0YXRlKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBOZXRFdmVudFR5cGUuQ29ubmVjdGlvbkZhaWxlZDpcbiAgICAgICAgICAgICAgICAgICAgLy9jYWxsIGZhaWxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLldhaXRpbmdGb3JPdXRnb2luZ0NhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgRXJyb3JFdmVudEFyZ3MoQ2FsbEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1TdGF0ZSA9IENhbGxTdGF0ZS5Db25maWd1cmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9EZWJ1Zy5Bc3NlcnQobVN0YXRlID09IENhbGxTdGF0ZS5XYWl0aW5nRm9yT3V0Z29pbmdDYWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNMb2cuTG9nRXJyb3IoXCJSZWNlaXZlZCBDb25uZWN0aW9uRmFpbGVkIGR1cmluZyBcIiArIHRoaXMubVN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE5ldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQ6XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubUNvbm5lY3Rpb25JbmZvLkhhc0Nvbm5lY3Rpb24oZXZ0LkNvbm5lY3Rpb25JZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubUNvbm5lY3Rpb25JbmZvLlJlbUNvbm5lY3Rpb24oZXZ0LkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGwgZW5kZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Db25mZXJlbmNlTW9kZSA9PSBmYWxzZSAmJiB0aGlzLm1Db25uZWN0aW9uSW5mby5HZXRJZHMoKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubVN0YXRlID0gQ2FsbFN0YXRlLkNsb3NlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgQ2FsbEVuZGVkRXZlbnRBcmdzKGV2dC5Db25uZWN0aW9uSWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTmV0RXZlbnRUeXBlLlNlcnZlckluaXRpYWxpemVkOlxuICAgICAgICAgICAgICAgICAgICAvL2luY29taW5nIGNhbGxzIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubVNlcnZlckluYWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuV2FpdGluZ0ZvckluY29taW5nQ2FsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VyQ2FsbEV2ZW50KG5ldyBXYWl0Rm9ySW5jb21pbmdDYWxsRXZlbnRBcmdzKGV2dC5JbmZvKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE5ldEV2ZW50VHlwZS5TZXJ2ZXJJbml0RmFpbGVkOlxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubVNlcnZlckluYWN0aXZlID0gdHJ1ZTtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vcmVzZXQgc3RhdGUgdG8gdGhlIGVhcmxpZXIgc3RhdGUgd2hpY2ggaXMgQ29uZmlndXJlZCAoYXMgd2l0aG91dCBjb25maWd1cmF0aW9uIG5vXG4gICAgICAgICAgICAgICAgICAgIC8vbGlzdGVuaW5nIHBvc3NpYmxlKS4gTG9jYWwgY2FtZXJhL2F1ZGlvIHdpbGwga2VlcCBydW5uaW5nXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubVN0YXRlID0gQ2FsbFN0YXRlLkNvbmZpZ3VyZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgRXJyb3JFdmVudEFyZ3MoQ2FsbEV2ZW50VHlwZS5MaXN0ZW5pbmdGYWlsZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubUlzRGlzcG9zZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTmV0RXZlbnRUeXBlLlNlcnZlckNsb3NlZDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tU2VydmVySW5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvL25vIGluY29taW5nIGNhbGxzIHBvc3NpYmxlIGFueW1vcmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubVN0YXRlID09IENhbGxTdGF0ZS5XYWl0aW5nRm9ySW5jb21pbmdDYWxsIHx8IHRoaXMubVN0YXRlID09IENhbGxTdGF0ZS5SZXF1ZXN0aW5nQWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuQ29uZmlndXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbWlnaHQgbmVlZCB0byBiZSBoYW5kbGVkIGFzIGEgc3BlY2lhbCB0aW1lb3V0IGV2ZW50P1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VyQ2FsbEV2ZW50KG5ldyBFcnJvckV2ZW50QXJncyhDYWxsRXZlbnRUeXBlLkxpc3RlbmluZ0ZhaWxlZCwgQ2FsbEVycm9yVHlwZS5Vbmtub3duLCBcIlNlcnZlciBjbG9zZWQgdGhlIGNvbm5lY3Rpb24gd2hpbGUgd2FpdGluZyBmb3IgaW5jb21pbmcgY2FsbHMuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZXZlbnQgaXMgbm9ybWFsIGR1cmluZyBvdGhlciBzdGF0ZXMgYXMgdGhlIHNlcnZlciBjb25uZWN0aW9uIHdpbGwgYmUgY2xvc2VkIGFmdGVyIHJlY2VpdmluZyBhIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBOZXRFdmVudFR5cGUuUmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTmV0RXZlbnRUeXBlLlVucmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVsaWFibGUgPSBldnQuVHlwZSA9PT0gTmV0RXZlbnRUeXBlLlJlbGlhYmxlTWVzc2FnZVJlY2VpdmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGF0IG1lc3NhZ2UgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2dC5NZXNzYWdlRGF0YS5sZW5ndGggPj0gMilcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihldnQuTWVzc2FnZURhdGFbMF0gPT0gdGhpcy5NRVNTQUdFX1RZUEVfU1RSSU5HKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLlVucGFja1N0cmluZ01zZyhldnQuTWVzc2FnZURhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlRyaWdnZXJDYWxsRXZlbnQobmV3IE1lc3NhZ2VFdmVudEFyZ3MoZXZ0LkNvbm5lY3Rpb25JZCwgbWVzc2FnZSwgcmVsaWFibGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihldnQuTWVzc2FnZURhdGFbMF0gPT0gdGhpcy5NRVNTQUdFX1RZUEVfREFUQSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gdGhpcy5VbnBhY2tEYXRhTXNnKGV2dC5NZXNzYWdlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgRGF0YU1lc3NhZ2VFdmVudEFyZ3MoZXZ0LkNvbm5lY3Rpb25JZCwgbWVzc2FnZSwgcmVsaWFibGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnZhbGlkIG1lc3NhZ2U/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnZhbGlkIG1lc3NhZ2U/XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgaGFuZGxlTG9jYWxGcmFtZXMgPSB0cnVlO1xuICAgICAgICBsZXQgaGFuZGxlUmVtb3RlRnJhbWVzID0gdHJ1ZTtcblxuICAgICAgICBpZiAodGhpcy5tTWVkaWFDb25maWcuRnJhbWVVcGRhdGVzICYmIGhhbmRsZUxvY2FsRnJhbWVzKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgbG9jYWxGcmFtZSA9IHRoaXMubU5ldHdvcmsuVHJ5R2V0RnJhbWUoQ29ubmVjdGlvbklkLklOVkFMSUQpO1xuICAgICAgICAgICAgaWYgKGxvY2FsRnJhbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuRnJhbWVUb0NhbGxFdmVudChDb25uZWN0aW9uSWQuSU5WQUxJRCwgbG9jYWxGcmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubUlzRGlzcG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tTWVkaWFDb25maWcuRnJhbWVVcGRhdGVzICYmIGhhbmRsZVJlbW90ZUZyYW1lcylcbiAgICAgICAge1xuICAgICAgICAgICAgZm9yICh2YXIgaWQgb2YgdGhpcy5tQ29ubmVjdGlvbkluZm8uR2V0SWRzKCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbklkID0gbmV3IENvbm5lY3Rpb25JZChpZCk7XG4gICAgICAgICAgICAgICAgbGV0IHJlbW90ZUZyYW1lID0gdGhpcy5tTmV0d29yay5UcnlHZXRGcmFtZShjb25JZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbW90ZUZyYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5GcmFtZVRvQ2FsbEV2ZW50KGNvbklkLCByZW1vdGVGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZWRpYUV2ZW50IDogTWVkaWFFdmVudD0gbnVsbDtcbiAgICAgICAgd2hpbGUoKG1lZGlhRXZlbnQgPSB0aGlzLm1OZXR3b3JrLkRlcXVldWVNZWRpYUV2ZW50KCkpICE9IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuTWVkaWFFdmVudFRvQ2FsbEV2ZW50KG1lZGlhRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tTmV0d29yay5GbHVzaCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgRnJhbWVUb0NhbGxFdmVudChpZDpDb25uZWN0aW9uSWQsIGZyYW1lOklGcmFtZURhdGEpXG4gICAge1xuICAgICAgICBsZXQgYXJncyA9IG5ldyBGcmFtZVVwZGF0ZUV2ZW50QXJncyhpZCwgZnJhbWUpO1xuICAgICAgICB0aGlzLlRyaWdnZXJDYWxsRXZlbnQoYXJncyk7XG4gICAgfVxuICAgIHByaXZhdGUgTWVkaWFFdmVudFRvQ2FsbEV2ZW50KGV2dDogTWVkaWFFdmVudClcbiAgICB7XG4gICAgICAgIGxldCB2aWRlb0VsZW1lbnQgOiBIVE1MVmlkZW9FbGVtZW50ID0gbnVsbDtcbiAgICAgICAgaWYoZXZ0LkV2ZW50VHlwZSA9PSBldnQuRXZlbnRUeXBlKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgYXJncyA9IG5ldyBNZWRpYVVwZGF0ZWRFdmVudEFyZ3MoZXZ0LkNvbm5lY3Rpb25JZCwgZXZ0LkFyZ3MgYXMgSFRNTFZpZGVvRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLlRyaWdnZXJDYWxsRXZlbnQoYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIFBlbmRpbmdDYWxsKGFkZHJlc3M6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLm1QZW5kaW5nQWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMubVBlbmRpbmdDYWxsQ2FsbCA9IHRydWU7XG4gICAgICAgIHRoaXMubVBlbmRpbmdMaXN0ZW5DYWxsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBQcm9jZXNzQ2FsbChhZGRyZXNzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuV2FpdGluZ0Zvck91dGdvaW5nQ2FsbDtcbiAgICAgICAgdGhpcy5tTmV0d29yay5Db25uZWN0KGFkZHJlc3MpO1xuICAgICAgICB0aGlzLkNsZWFyUGVuZGluZygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgUGVuZGluZ0xpc3RlbihhZGRyZXNzOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tUGVuZGluZ0FkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLm1QZW5kaW5nQ2FsbENhbGwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tUGVuZGluZ0xpc3RlbkNhbGwgPSB0cnVlO1xuICAgIH1cbiAgICBwcml2YXRlIFByb2Nlc3NMaXN0ZW4oYWRkcmVzczogc3RyaW5nKTogdm9pZHtcbiAgICAgICAgU0xvZy5Mb2coXCJMaXN0ZW4gYXQgXCIgKyBhZGRyZXNzKTtcbiAgICAgICAgdGhpcy5tU2VydmVySW5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuUmVxdWVzdGluZ0FkZHJlc3M7XG4gICAgICAgIHRoaXMubU5ldHdvcmsuU3RhcnRTZXJ2ZXIoYWRkcmVzcyk7XG4gICAgICAgIHRoaXMuQ2xlYXJQZW5kaW5nKCk7XG4gICAgfVxuICAgIHByaXZhdGUgRG9QZW5kaW5nKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLm1QZW5kaW5nQ2FsbENhbGwpIHtcbiAgICAgICAgICAgIHRoaXMuUHJvY2Vzc0NhbGwodGhpcy5tUGVuZGluZ0FkZHJlc3MpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubVBlbmRpbmdMaXN0ZW5DYWxsKSB7XG4gICAgICAgICAgICB0aGlzLlByb2Nlc3NMaXN0ZW4odGhpcy5tUGVuZGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuQ2xlYXJQZW5kaW5nKCk7XG4gICAgfVxuICAgIHByaXZhdGUgQ2xlYXJQZW5kaW5nKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1QZW5kaW5nQWRkcmVzcyA9IG51bGw7XG4gICAgICAgIHRoaXMubVBlbmRpbmdDYWxsQ2FsbCA9IG51bGw7XG4gICAgICAgIHRoaXMubVBlbmRpbmdMaXN0ZW5DYWxsID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIENoZWNrRGlzcG9zZWQoKTp2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZClcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uKFwiT2JqZWN0IGlzIGRpc3Bvc2VkLiBObyBtZXRob2QgY2FsbHMgcG9zc2libGUuXCIpO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBFbnN1cmVDb25maWd1cmF0aW9uKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tU3RhdGUgPT0gQ2FsbFN0YXRlLkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICBTTG9nLkxvZyhcIlVzZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cIik7XG4gICAgICAgICAgICB0aGlzLkNvbmZpZ3VyZShuZXcgTWVkaWFDb25maWcoKSk7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBUcmlnZ2VyQ2FsbEV2ZW50KGFyZ3M6IENhbGxFdmVudEFyZ3MpOiB2b2lkIHtcblxuICAgICAgICBsZXQgYXJyID0gdGhpcy5tQ2FsbEV2ZW50SGFuZGxlcnMuc2xpY2UoKTtcblxuICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBhcnIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBPbkNvbmZpZ3VyYXRpb25Db21wbGV0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubUlzRGlzcG9zZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubVN0YXRlID0gQ2FsbFN0YXRlLkNvbmZpZ3VyZWQ7XG5cbiAgICAgICAgU0xvZy5Mb2coXCJFbnRlciBzdGF0ZSBDYWxsU3RhdGUuQ29uZmlndXJlZFwiKTtcbiAgICAgICAgdGhpcy5UcmlnZ2VyQ2FsbEV2ZW50KG5ldyBDYWxsRXZlbnRBcmdzKENhbGxFdmVudFR5cGUuQ29uZmlndXJhdGlvbkNvbXBsZXRlKSk7XG4gICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkID09IGZhbHNlKVxuICAgICAgICAgICAgdGhpcy5Eb1BlbmRpbmcoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIE9uQ29uZmlndXJhdGlvbkZhaWxlZChlcnJvcjogc3RyaW5nKTogdm9pZCB7XG5cbiAgICAgICAgU0xvZy5Mb2dXYXJuaW5nKFwiQ29uZmlndXJhdGlvbiBmYWlsZWQ6IFwiICsgZXJyb3IpO1xuICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5tU3RhdGUgPSBDYWxsU3RhdGUuSW5pdGlhbGl6ZWQ7XG4gICAgICAgIHRoaXMuVHJpZ2dlckNhbGxFdmVudChuZXcgRXJyb3JFdmVudEFyZ3MoQ2FsbEV2ZW50VHlwZS5Db25maWd1cmF0aW9uRmFpbGVkLCBDYWxsRXJyb3JUeXBlLlVua25vd24sIGVycm9yKSk7XG4gICAgICAgIC8vYnVnZml4OiB1c2VyIG1pZ2h0IGRpc3Bvc2UgdGhlIGNhbGwgZHVyaW5nIHRoZSBldmVudCBhYm92ZVxuICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZCA9PSBmYWxzZSlcbiAgICAgICAgICAgIHRoaXMuQ2xlYXJQZW5kaW5nKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIERpc3Bvc2VJbnRlcm5hbChkaXNwb3Npbmc6IGJvb2xlYW4pOiB2b2lkIHtcblxuICAgICAgICAvL25vdGhpbmcgdG8gZGlzcG9zZSBidXQgc3ViY2xhc3NlcyBvdmVyd3JpdGUgdGhpc1xuICAgICAgICBpZiAoIXRoaXMubUlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubUlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIERpc3Bvc2UoKSA6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuRGlzcG9zZUludGVybmFsKHRydWUpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media/AWebRtcCall.ts\n");

/***/ }),

/***/ "./src/awrtc/media/CallEventArgs.ts":
/*!******************************************!*\
  !*** ./src/awrtc/media/CallEventArgs.ts ***!
  \******************************************/
/*! exports provided: CallEventType, CallEventArgs, CallAcceptedEventArgs, CallEndedEventArgs, CallErrorType, ErrorEventArgs, WaitForIncomingCallEventArgs, MessageEventArgs, DataMessageEventArgs, MediaUpdatedEventArgs, FrameUpdateEventArgs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallEventType\", function() { return CallEventType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallEventArgs\", function() { return CallEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallAcceptedEventArgs\", function() { return CallAcceptedEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallEndedEventArgs\", function() { return CallEndedEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CallErrorType\", function() { return CallErrorType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ErrorEventArgs\", function() { return ErrorEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WaitForIncomingCallEventArgs\", function() { return WaitForIncomingCallEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageEventArgs\", function() { return MessageEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DataMessageEventArgs\", function() { return DataMessageEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaUpdatedEventArgs\", function() { return MediaUpdatedEventArgs; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FrameUpdateEventArgs\", function() { return FrameUpdateEventArgs; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n/// <summary>\n/// Type of the event.\n/// </summary>\nvar CallEventType;\n(function (CallEventType) {\n    /// <summary>\n    /// Used if the event value wasn't initialized\n    /// </summary>\n    CallEventType[CallEventType[\"Invalid\"] = 0] = \"Invalid\";\n    /// <summary>\n    /// The call object is successfully connected to the server waiting for another user \n    /// to connect.\n    /// </summary>\n    CallEventType[CallEventType[\"WaitForIncomingCall\"] = 1] = \"WaitForIncomingCall\";\n    /// <summary>\n    /// A call was accepted\n    /// </summary>\n    CallEventType[CallEventType[\"CallAccepted\"] = 2] = \"CallAccepted\";\n    /// <summary>\n    /// The call ended\n    /// </summary>\n    CallEventType[CallEventType[\"CallEnded\"] = 3] = \"CallEnded\";\n    /**\n     * Backwards compatibility. Use MediaUpdate\n     */\n    CallEventType[CallEventType[\"FrameUpdate\"] = 4] = \"FrameUpdate\";\n    /// <summary>\n    /// Text message arrived\n    /// </summary>\n    CallEventType[CallEventType[\"Message\"] = 5] = \"Message\";\n    /// <summary>\n    /// Connection failed. Might be due to an server, network error or the address didn't exist\n    /// Using ErrorEventArgs\n    /// </summary>\n    CallEventType[CallEventType[\"ConnectionFailed\"] = 6] = \"ConnectionFailed\";\n    /// <summary>\n    /// Listening failed. Address might be in use or due to server/network error\n    /// Using ErrorEventArgs\n    /// </summary>\n    CallEventType[CallEventType[\"ListeningFailed\"] = 7] = \"ListeningFailed\";\n    /// <summary>\n    /// Event triggered after the local media was successfully configured. \n    /// If requested the call object will have access to the users camera and/or audio now and\n    /// the local camera frames can be received in events. \n    /// </summary>\n    CallEventType[CallEventType[\"ConfigurationComplete\"] = 8] = \"ConfigurationComplete\";\n    /// <summary>\n    /// Configuration failed. This happens if the configuration requested features\n    /// the system doesn't support e.g. no camera, camera doesn't support the requested resolution\n    /// or the user didn't allow the website to access the camera/microphone in WebGL mode.\n    /// </summary>\n    CallEventType[CallEventType[\"ConfigurationFailed\"] = 9] = \"ConfigurationFailed\";\n    /// <summary>\n    /// Reliable or unreliable data msg arrived\n    /// </summary>\n    CallEventType[CallEventType[\"DataMessage\"] = 10] = \"DataMessage\";\n    /**\n     *\n     */\n    CallEventType[CallEventType[\"MediaUpdate\"] = 20] = \"MediaUpdate\";\n})(CallEventType || (CallEventType = {}));\nvar CallEventArgs = /** @class */ (function () {\n    function CallEventArgs(type) {\n        this.mType = CallEventType.Invalid;\n        this.mType = type;\n    }\n    Object.defineProperty(CallEventArgs.prototype, \"Type\", {\n        get: function () {\n            return this.mType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CallEventArgs;\n}());\n\nvar CallAcceptedEventArgs = /** @class */ (function (_super) {\n    __extends(CallAcceptedEventArgs, _super);\n    function CallAcceptedEventArgs(connectionId) {\n        var _this = _super.call(this, CallEventType.CallAccepted) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = connectionId;\n        return _this;\n    }\n    Object.defineProperty(CallAcceptedEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CallAcceptedEventArgs;\n}(CallEventArgs));\n\nvar CallEndedEventArgs = /** @class */ (function (_super) {\n    __extends(CallEndedEventArgs, _super);\n    function CallEndedEventArgs(connectionId) {\n        var _this = _super.call(this, CallEventType.CallEnded) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = connectionId;\n        return _this;\n    }\n    Object.defineProperty(CallEndedEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CallEndedEventArgs;\n}(CallEventArgs));\n\nvar CallErrorType;\n(function (CallErrorType) {\n    CallErrorType[CallErrorType[\"Unknown\"] = 0] = \"Unknown\";\n})(CallErrorType || (CallErrorType = {}));\nvar ErrorEventArgs = /** @class */ (function (_super) {\n    __extends(ErrorEventArgs, _super);\n    function ErrorEventArgs(eventType, type, errorMessage) {\n        var _this = _super.call(this, eventType) || this;\n        _this.mErrorType = CallErrorType.Unknown;\n        _this.mErrorType = type;\n        _this.mErrorMessage = errorMessage;\n        if (_this.mErrorMessage == null) {\n            switch (eventType) {\n                //use some generic error messages as the underlaying system doesn't report the errors yet.\n                case CallEventType.ConnectionFailed:\n                    _this.mErrorMessage = \"Connection failed.\";\n                    break;\n                case CallEventType.ListeningFailed:\n                    _this.mErrorMessage = \"Failed to allow incoming connections. Address already in use or server connection failed.\";\n                    break;\n                default:\n                    _this.mErrorMessage = \"Unknown error.\";\n                    break;\n            }\n        }\n        return _this;\n    }\n    Object.defineProperty(ErrorEventArgs.prototype, \"ErrorMessage\", {\n        get: function () {\n            return this.mErrorMessage;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ErrorEventArgs.prototype, \"ErrorType\", {\n        get: function () {\n            return this.mErrorType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ErrorEventArgs;\n}(CallEventArgs));\n\nvar WaitForIncomingCallEventArgs = /** @class */ (function (_super) {\n    __extends(WaitForIncomingCallEventArgs, _super);\n    function WaitForIncomingCallEventArgs(address) {\n        var _this = _super.call(this, CallEventType.WaitForIncomingCall) || this;\n        _this.mAddress = address;\n        return _this;\n    }\n    Object.defineProperty(WaitForIncomingCallEventArgs.prototype, \"Address\", {\n        get: function () {\n            return this.mAddress;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return WaitForIncomingCallEventArgs;\n}(CallEventArgs));\n\nvar MessageEventArgs = /** @class */ (function (_super) {\n    __extends(MessageEventArgs, _super);\n    function MessageEventArgs(id, message, reliable) {\n        var _this = _super.call(this, CallEventType.Message) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = id;\n        _this.mContent = message;\n        _this.mReliable = reliable;\n        return _this;\n    }\n    Object.defineProperty(MessageEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MessageEventArgs.prototype, \"Content\", {\n        get: function () {\n            return this.mContent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MessageEventArgs.prototype, \"Reliable\", {\n        get: function () {\n            return this.mReliable;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MessageEventArgs;\n}(CallEventArgs));\n\nvar DataMessageEventArgs = /** @class */ (function (_super) {\n    __extends(DataMessageEventArgs, _super);\n    function DataMessageEventArgs(id, message, reliable) {\n        var _this = _super.call(this, CallEventType.DataMessage) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = id;\n        _this.mContent = message;\n        _this.mReliable = reliable;\n        return _this;\n    }\n    Object.defineProperty(DataMessageEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DataMessageEventArgs.prototype, \"Content\", {\n        get: function () {\n            return this.mContent;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DataMessageEventArgs.prototype, \"Reliable\", {\n        get: function () {\n            return this.mReliable;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return DataMessageEventArgs;\n}(CallEventArgs));\n\n/**\n * Replaces the FrameUpdateEventArgs. Instead of\n * giving access to video frames only this gives access to\n * video html tag once it is created.\n * TODO: Add audio + video tracks + flag that indicates added, updated or removed\n * after renegotiation is added.\n */\nvar MediaUpdatedEventArgs = /** @class */ (function (_super) {\n    __extends(MediaUpdatedEventArgs, _super);\n    function MediaUpdatedEventArgs(conId, videoElement) {\n        var _this = _super.call(this, CallEventType.MediaUpdate) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = conId;\n        _this.mVideoElement = videoElement;\n        return _this;\n    }\n    Object.defineProperty(MediaUpdatedEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaUpdatedEventArgs.prototype, \"IsRemote\", {\n        /// <summary>\n        /// False if the frame is from a local camera. True if it is received from\n        /// via network.\n        /// </summary>\n        get: function () {\n            return this.mConnectionId.id != _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaUpdatedEventArgs.prototype, \"VideoElement\", {\n        get: function () {\n            return this.mVideoElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MediaUpdatedEventArgs;\n}(CallEventArgs));\n\n/// <summary>\n/// Will be replaced with MediaUpdatedEventArgs.\n/// It doesn't make a lot of sense in HTML only\n/// </summary>\nvar FrameUpdateEventArgs = /** @class */ (function (_super) {\n    __extends(FrameUpdateEventArgs, _super);\n    /// <summary>\n    /// Constructor\n    /// </summary>\n    /// <param name=\"conId\"></param>\n    /// <param name=\"frame\"></param>\n    function FrameUpdateEventArgs(conId, frame) {\n        var _this = _super.call(this, CallEventType.FrameUpdate) || this;\n        _this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        _this.mConnectionId = conId;\n        _this.mFrame = frame;\n        return _this;\n    }\n    Object.defineProperty(FrameUpdateEventArgs.prototype, \"Frame\", {\n        /// <summary>\n        /// Raw image data. Note that the byte array contained in RawFrame will be reused\n        /// for the next frames received. Only valid until the next call of ICall.Update\n        /// </summary>\n        get: function () {\n            return this.mFrame;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FrameUpdateEventArgs.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FrameUpdateEventArgs.prototype, \"IsRemote\", {\n        /// <summary>\n        /// False if the frame is from a local camera. True if it is received from\n        /// via network.\n        /// </summary>\n        get: function () {\n            return this.mConnectionId.id != _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID.id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return FrameUpdateEventArgs;\n}(CallEventArgs));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9DYWxsRXZlbnRBcmdzLnRzP2ZiNjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUM4QztBQVFoRCxhQUFhO0FBQ2Isc0JBQXNCO0FBQ3RCLGNBQWM7QUFDZCxJQUFZLGFBdUVYO0FBdkVELFdBQVksYUFBYTtJQUNyQixhQUFhO0lBQ2IsOENBQThDO0lBQzlDLGNBQWM7SUFDZCx1REFBVztJQUVYLGFBQWE7SUFDYixxRkFBcUY7SUFDckYsZUFBZTtJQUNmLGNBQWM7SUFDZCwrRUFBdUI7SUFFdkIsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixjQUFjO0lBQ2QsaUVBQWdCO0lBRWhCLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsY0FBYztJQUNkLDJEQUFhO0lBRWI7O09BRUc7SUFDSCwrREFBZTtJQUVmLGFBQWE7SUFDYix3QkFBd0I7SUFDeEIsY0FBYztJQUNkLHVEQUFXO0lBRVgsYUFBYTtJQUNiLDJGQUEyRjtJQUMzRix3QkFBd0I7SUFDeEIsY0FBYztJQUNkLHlFQUFvQjtJQUVwQixhQUFhO0lBQ2IsNEVBQTRFO0lBQzVFLHdCQUF3QjtJQUN4QixjQUFjO0lBQ2QsdUVBQW1CO0lBR25CLGFBQWE7SUFDYix1RUFBdUU7SUFDdkUsMEZBQTBGO0lBQzFGLHVEQUF1RDtJQUN2RCxjQUFjO0lBQ2QsbUZBQXlCO0lBRXpCLGFBQWE7SUFDYiw4RUFBOEU7SUFDOUUsOEZBQThGO0lBQzlGLHVGQUF1RjtJQUN2RixjQUFjO0lBQ2QsK0VBQXVCO0lBSXZCLGFBQWE7SUFDYiwyQ0FBMkM7SUFDM0MsY0FBYztJQUNkLGdFQUFnQjtJQUdoQjs7T0FFRztJQUNILGdFQUFnQjtBQUNwQixDQUFDLEVBdkVXLGFBQWEsS0FBYixhQUFhLFFBdUV4QjtBQUNEO0lBT0ksdUJBQW1CLElBQW1CO1FBTDlCLFVB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QzNCLEtBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDOztJQUN4QixDQUFDO0lBMUJELHNCQUFXLHVDQUFLO1FBSmhCLGFBQWE7UUFDYixpRkFBaUY7UUFDakYsZ0ZBQWdGO1FBQ2hGLGNBQWM7YUFDZDtZQUNJLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN2QixDQUFDOzs7T0FBQTtJQUdELHNCQUFXLDhDQUFZO2FBQXZCO1lBQ0ksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQzlCLENBQUM7OztPQUFBO0lBS0Qsc0JBQVcsMENBQVE7UUFKbkIsYUFBYTtRQUNiLDBFQUEwRTtRQUMxRSxnQkFBZ0I7UUFDaEIsY0FBYzthQUNkO1lBQ0ksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsSUFBSSwyREFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFDNUQsQ0FBQzs7O09BQUE7SUFlTCwyQkFBQztBQUFELENBQUMsQ0FyQ3lDLGFBQWEsR0FxQ3REIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL21lZGlhL0NhbGxFdmVudEFyZ3MudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQgeyBDb25uZWN0aW9uSWQgfSBmcm9tIFwiLi4vbmV0d29yay9pbmRleFwiO1xuaW1wb3J0IHsgSUZyYW1lRGF0YSB9IGZyb20gXCIuL1Jhd0ZyYW1lXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBDYWxsRXZlbnRIYW5kbGVyIHtcbiAgICAoc2VuZGVyOiBhbnksIGFyZ3M6IENhbGxFdmVudEFyZ3MpOiB2b2lkO1xufVxuXG4vLy8gPHN1bW1hcnk+XG4vLy8gVHlwZSBvZiB0aGUgZXZlbnQuXG4vLy8gPC9zdW1tYXJ5PlxuZXhwb3J0IGVudW0gQ2FsbEV2ZW50VHlwZSB7XG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBVc2VkIGlmIHRoZSBldmVudCB2YWx1ZSB3YXNuJ3QgaW5pdGlhbGl6ZWRcbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIEludmFsaWQgPSAwLFxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBUaGUgY2FsbCBvYmplY3QgaXMgc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byB0aGUgc2VydmVyIHdhaXRpbmcgZm9yIGFub3RoZXIgdXNlciBcbiAgICAvLy8gdG8gY29ubmVjdC5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIFdhaXRGb3JJbmNvbWluZ0NhbGwgPSAxLFxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBBIGNhbGwgd2FzIGFjY2VwdGVkXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBDYWxsQWNjZXB0ZWQgPSAyLFxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBUaGUgY2FsbCBlbmRlZFxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgQ2FsbEVuZGVkID0gMyxcblxuICAgIC8qKlxuICAgICAqIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBVc2UgTWVkaWFVcGRhdGVcbiAgICAgKi9cbiAgICBGcmFtZVVwZGF0ZSA9IDQsXG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIFRleHQgbWVzc2FnZSBhcnJpdmVkXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBNZXNzYWdlID0gNSxcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gQ29ubmVjdGlvbiBmYWlsZWQuIE1pZ2h0IGJlIGR1ZSB0byBhbiBzZXJ2ZXIsIG5ldHdvcmsgZXJyb3Igb3IgdGhlIGFkZHJlc3MgZGlkbid0IGV4aXN0XG4gICAgLy8vIFVzaW5nIEVycm9yRXZlbnRBcmdzXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBDb25uZWN0aW9uRmFpbGVkID0gNixcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gTGlzdGVuaW5nIGZhaWxlZC4gQWRkcmVzcyBtaWdodCBiZSBpbiB1c2Ugb3IgZHVlIHRvIHNlcnZlci9uZXR3b3JrIGVycm9yXG4gICAgLy8vIFVzaW5nIEVycm9yRXZlbnRBcmdzXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBMaXN0ZW5pbmdGYWlsZWQgPSA3LFxuXG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEV2ZW50IHRyaWdnZXJlZCBhZnRlciB0aGUgbG9jYWwgbWVkaWEgd2FzIHN1Y2Nlc3NmdWxseSBjb25maWd1cmVkLiBcbiAgICAvLy8gSWYgcmVxdWVzdGVkIHRoZSBjYWxsIG9iamVjdCB3aWxsIGhhdmUgYWNjZXNzIHRvIHRoZSB1c2VycyBjYW1lcmEgYW5kL29yIGF1ZGlvIG5vdyBhbmRcbiAgICAvLy8gdGhlIGxvY2FsIGNhbWVyYSBmcmFtZXMgY2FuIGJlIHJlY2VpdmVkIGluIGV2ZW50cy4gXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBDb25maWd1cmF0aW9uQ29tcGxldGUgPSA4LFxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBDb25maWd1cmF0aW9uIGZhaWxlZC4gVGhpcyBoYXBwZW5zIGlmIHRoZSBjb25maWd1cmF0aW9uIHJlcXVlc3RlZCBmZWF0dXJlc1xuICAgIC8vLyB0aGUgc3lzdGVtIGRvZXNuJ3Qgc3VwcG9ydCBlLmcuIG5vIGNhbWVyYSwgY2FtZXJhIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgcmVxdWVzdGVkIHJlc29sdXRpb25cbiAgICAvLy8gb3IgdGhlIHVzZXIgZGlkbid0IGFsbG93IHRoZSB3ZWJzaXRlIHRvIGFjY2VzcyB0aGUgY2FtZXJhL21pY3JvcGhvbmUgaW4gV2ViR0wgbW9kZS5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIENvbmZpZ3VyYXRpb25GYWlsZWQgPSA5LFxuXG5cbiAgICBcbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIFJlbGlhYmxlIG9yIHVucmVsaWFibGUgZGF0YSBtc2cgYXJyaXZlZFxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgRGF0YU1lc3NhZ2UgPSAxMCxcblxuXG4gICAgLyoqIFxuICAgICAqIFxuICAgICAqL1xuICAgIE1lZGlhVXBkYXRlID0gMjAsXG59XG5leHBvcnQgY2xhc3MgQ2FsbEV2ZW50QXJncyB7XG5cbiAgICBwcml2YXRlIG1UeXBlID0gQ2FsbEV2ZW50VHlwZS5JbnZhbGlkO1xuICAgIHB1YmxpYyBnZXQgVHlwZSgpOiBDYWxsRXZlbnRUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHR5cGU6IENhbGxFdmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5tVHlwZSA9IHR5cGU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2FsbEFjY2VwdGVkRXZlbnRBcmdzIGV4dGVuZHMgQ2FsbEV2ZW50QXJnc1xue1xuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25JZDogQ29ubmVjdGlvbklkID0gQ29ubmVjdGlvbklkLklOVkFMSUQ7XG4gICAgcHVibGljIGdldCBDb25uZWN0aW9uSWQoKTogQ29ubmVjdGlvbklkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUNvbm5lY3Rpb25JZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29ubmVjdGlvbklkOiBDb25uZWN0aW9uSWQpIHtcbiAgICAgICAgc3VwZXIoQ2FsbEV2ZW50VHlwZS5DYWxsQWNjZXB0ZWQpO1xuICAgICAgICB0aGlzLm1Db25uZWN0aW9uSWQgPSBjb25uZWN0aW9uSWQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxFbmRlZEV2ZW50QXJncyBleHRlbmRzIENhbGxFdmVudEFyZ3Mge1xuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25JZDogQ29ubmVjdGlvbklkID0gQ29ubmVjdGlvbklkLklOVkFMSUQ7XG4gICAgcHVibGljIGdldCBDb25uZWN0aW9uSWQoKTogQ29ubmVjdGlvbklke1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbklkO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uSWQ6IENvbm5lY3Rpb25JZCkge1xuICAgICAgICBzdXBlcihDYWxsRXZlbnRUeXBlLkNhbGxFbmRlZCk7XG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZCA9IGNvbm5lY3Rpb25JZDtcbiAgICB9XG59XG5cbmV4cG9ydCBlbnVtIENhbGxFcnJvclR5cGUge1xuICAgIFVua25vd25cbn1cblxuZXhwb3J0IGNsYXNzIEVycm9yRXZlbnRBcmdzIGV4dGVuZHMgQ2FsbEV2ZW50QXJncyB7XG4gICAgcHJpdmF0ZSBtRXJyb3JNZXNzYWdlOiBzdHJpbmc7XG4gICAgcHVibGljIGdldCBFcnJvck1lc3NhZ2UoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUVycm9yTWVzc2FnZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1FcnJvclR5cGU6IENhbGxFcnJvclR5cGUgPSBDYWxsRXJyb3JUeXBlLlVua25vd247XG4gICAgcHVibGljIGdldCBFcnJvclR5cGUoKTogQ2FsbEVycm9yVHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1FcnJvclR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGV2ZW50VHlwZTogQ2FsbEV2ZW50VHlwZSwgdHlwZT86IENhbGxFcnJvclR5cGUsIGVycm9yTWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihldmVudFR5cGUpO1xuICAgICAgICB0aGlzLm1FcnJvclR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLm1FcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XG5cbiAgICAgICAgaWYgKHRoaXMubUVycm9yTWVzc2FnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIC8vdXNlIHNvbWUgZ2VuZXJpYyBlcnJvciBtZXNzYWdlcyBhcyB0aGUgdW5kZXJsYXlpbmcgc3lzdGVtIGRvZXNuJ3QgcmVwb3J0IHRoZSBlcnJvcnMgeWV0LlxuICAgICAgICAgICAgICAgIGNhc2UgQ2FsbEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1FcnJvck1lc3NhZ2UgPSBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENhbGxFdmVudFR5cGUuTGlzdGVuaW5nRmFpbGVkOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1FcnJvck1lc3NhZ2UgPSBcIkZhaWxlZCB0byBhbGxvdyBpbmNvbWluZyBjb25uZWN0aW9ucy4gQWRkcmVzcyBhbHJlYWR5IGluIHVzZSBvciBzZXJ2ZXIgY29ubmVjdGlvbiBmYWlsZWQuXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubUVycm9yTWVzc2FnZSA9IFwiVW5rbm93biBlcnJvci5cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdhaXRGb3JJbmNvbWluZ0NhbGxFdmVudEFyZ3MgZXh0ZW5kcyBDYWxsRXZlbnRBcmdzXG57XG4gICAgcHJpdmF0ZSBtQWRkcmVzczogc3RyaW5nO1xuICAgIHB1YmxpYyBnZXQgQWRkcmVzcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5tQWRkcmVzcztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGFkZHJlc3M6IHN0cmluZykge1xuICAgICAgICBzdXBlcihDYWxsRXZlbnRUeXBlLldhaXRGb3JJbmNvbWluZ0NhbGwpO1xuICAgICAgICB0aGlzLm1BZGRyZXNzID0gYWRkcmVzcztcbiAgICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VFdmVudEFyZ3MgZXh0ZW5kcyBDYWxsRXZlbnRBcmdzIHtcblxuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25JZDogQ29ubmVjdGlvbklkID0gQ29ubmVjdGlvbklkLklOVkFMSUQ7XG4gICAgcHVibGljIGdldCBDb25uZWN0aW9uSWQoKTogQ29ubmVjdGlvbklkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgcHJpdmF0ZSBtQ29udGVudDogc3RyaW5nO1xuICAgIHB1YmxpYyBnZXQgQ29udGVudCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29udGVudDtcbiAgICB9XG4gICAgcHJpdmF0ZSBtUmVsaWFibGU6IGJvb2xlYW47XG4gICAgcHVibGljIGdldCBSZWxpYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVJlbGlhYmxlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihpZDogQ29ubmVjdGlvbklkLCBtZXNzYWdlOiBzdHJpbmcsIHJlbGlhYmxlOiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKENhbGxFdmVudFR5cGUuTWVzc2FnZSk7XG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZCA9IGlkO1xuICAgICAgICB0aGlzLm1Db250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5tUmVsaWFibGUgPSByZWxpYWJsZTtcbiAgICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIERhdGFNZXNzYWdlRXZlbnRBcmdzIGV4dGVuZHMgQ2FsbEV2ZW50QXJncyB7XG5cbiAgICBwcml2YXRlIG1Db25uZWN0aW9uSWQ6IENvbm5lY3Rpb25JZCA9IENvbm5lY3Rpb25JZC5JTlZBTElEO1xuICAgIHB1YmxpYyBnZXQgQ29ubmVjdGlvbklkKCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25uZWN0aW9uSWQ7XG4gICAgfVxuICAgIHByaXZhdGUgbUNvbnRlbnQ6IFVpbnQ4QXJyYXk7XG4gICAgcHVibGljIGdldCBDb250ZW50KCk6IFVpbnQ4QXJyYXkge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29udGVudDtcbiAgICB9XG4gICAgcHJpdmF0ZSBtUmVsaWFibGU6IGJvb2xlYW47XG4gICAgcHVibGljIGdldCBSZWxpYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVJlbGlhYmxlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihpZDogQ29ubmVjdGlvbklkLCBtZXNzYWdlOiBVaW50OEFycmF5LCByZWxpYWJsZTogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihDYWxsRXZlbnRUeXBlLkRhdGFNZXNzYWdlKTtcbiAgICAgICAgdGhpcy5tQ29ubmVjdGlvbklkID0gaWQ7XG4gICAgICAgIHRoaXMubUNvbnRlbnQgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLm1SZWxpYWJsZSA9IHJlbGlhYmxlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlcyB0aGUgRnJhbWVVcGRhdGVFdmVudEFyZ3MuIEluc3RlYWQgb2ZcbiAqIGdpdmluZyBhY2Nlc3MgdG8gdmlkZW8gZnJhbWVzIG9ubHkgdGhpcyBnaXZlcyBhY2Nlc3MgdG9cbiAqIHZpZGVvIGh0bWwgdGFnIG9uY2UgaXQgaXMgY3JlYXRlZC5cbiAqIFRPRE86IEFkZCBhdWRpbyArIHZpZGVvIHRyYWNrcyArIGZsYWcgdGhhdCBpbmRpY2F0ZXMgYWRkZWQsIHVwZGF0ZWQgb3IgcmVtb3ZlZFxuICogYWZ0ZXIgcmVuZWdvdGlhdGlvbiBpcyBhZGRlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhVXBkYXRlZEV2ZW50QXJncyBleHRlbmRzIENhbGxFdmVudEFyZ3NcbntcbiAgICBwcml2YXRlIG1Db25uZWN0aW9uSWQ6IENvbm5lY3Rpb25JZCA9IENvbm5lY3Rpb25JZC5JTlZBTElEO1xuICAgIHB1YmxpYyBnZXQgQ29ubmVjdGlvbklkKCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25uZWN0aW9uSWQ7XG4gICAgfVxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gRmFsc2UgaWYgdGhlIGZyYW1lIGlzIGZyb20gYSBsb2NhbCBjYW1lcmEuIFRydWUgaWYgaXQgaXMgcmVjZWl2ZWQgZnJvbVxuICAgIC8vLyB2aWEgbmV0d29yay5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIHB1YmxpYyBnZXQgSXNSZW1vdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25uZWN0aW9uSWQuaWQgIT0gQ29ubmVjdGlvbklkLklOVkFMSUQuaWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtVmlkZW9FbGVtZW50OkhUTUxWaWRlb0VsZW1lbnQ7XG4gICAgcHVibGljIGdldCBWaWRlb0VsZW1lbnQoKTpIVE1MVmlkZW9FbGVtZW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5tVmlkZW9FbGVtZW50O1xuICAgIH1cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29uSWQ6IENvbm5lY3Rpb25JZCwgdmlkZW9FbGVtZW50OkhUTUxWaWRlb0VsZW1lbnQpXG4gICAge1xuICAgICAgICBzdXBlcihDYWxsRXZlbnRUeXBlLk1lZGlhVXBkYXRlKTtcbiAgICAgICAgdGhpcy5tQ29ubmVjdGlvbklkID0gY29uSWQ7XG4gICAgICAgIHRoaXMubVZpZGVvRWxlbWVudCA9IHZpZGVvRWxlbWVudDtcbiAgICB9XG59XG5cbi8vLyA8c3VtbWFyeT5cbi8vLyBXaWxsIGJlIHJlcGxhY2VkIHdpdGggTWVkaWFVcGRhdGVkRXZlbnRBcmdzLlxuLy8vIEl0IGRvZXNuJ3QgbWFrZSBhIGxvdCBvZiBzZW5zZSBpbiBIVE1MIG9ubHlcbi8vLyA8L3N1bW1hcnk+XG5leHBvcnQgY2xhc3MgRnJhbWVVcGRhdGVFdmVudEFyZ3MgZXh0ZW5kcyBDYWxsRXZlbnRBcmdzIHtcblxuICAgIHByaXZhdGUgbUZyYW1lOiBJRnJhbWVEYXRhO1xuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBSYXcgaW1hZ2UgZGF0YS4gTm90ZSB0aGF0IHRoZSBieXRlIGFycmF5IGNvbnRhaW5lZCBpbiBSYXdGcmFtZSB3aWxsIGJlIHJldXNlZFxuICAgIC8vLyBmb3IgdGhlIG5leHQgZnJhbWVzIHJlY2VpdmVkLiBPbmx5IHZhbGlkIHVudGlsIHRoZSBuZXh0IGNhbGwgb2YgSUNhbGwuVXBkYXRlXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBwdWJsaWMgZ2V0IEZyYW1lKCk6IElGcmFtZURhdGEge1xuICAgICAgICByZXR1cm4gdGhpcy5tRnJhbWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtQ29ubmVjdGlvbklkOiBDb25uZWN0aW9uSWQgPSBDb25uZWN0aW9uSWQuSU5WQUxJRDtcbiAgICBwdWJsaWMgZ2V0IENvbm5lY3Rpb25JZCgpOiBDb25uZWN0aW9uSWQge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbklkO1xuICAgIH1cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEZhbHNlIGlmIHRoZSBmcmFtZSBpcyBmcm9tIGEgbG9jYWwgY2FtZXJhLiBUcnVlIGlmIGl0IGlzIHJlY2VpdmVkIGZyb21cbiAgICAvLy8gdmlhIG5ldHdvcmsuXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBwdWJsaWMgZ2V0IElzUmVtb3RlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbklkLmlkICE9IENvbm5lY3Rpb25JZC5JTlZBTElELmlkO1xuICAgIH1cblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gQ29uc3RydWN0b3JcbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImNvbklkXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJmcmFtZVwiPjwvcGFyYW0+XG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbklkOiBDb25uZWN0aW9uSWQsIGZyYW1lOiBJRnJhbWVEYXRhKVxuICAgIHtcbiAgICAgICAgc3VwZXIoQ2FsbEV2ZW50VHlwZS5GcmFtZVVwZGF0ZSk7XG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZCA9IGNvbklkO1xuICAgICAgICB0aGlzLm1GcmFtZSA9IGZyYW1lO1xuICAgIH1cblxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/media/CallEventArgs.ts\n");

/***/ }),

/***/ "./src/awrtc/media/ICall.ts":
/*!**********************************!*\
  !*** ./src/awrtc/media/ICall.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL3NyYy9hd3J0Yy9tZWRpYS9JQ2FsbC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media/ICall.ts\n");

/***/ }),

/***/ "./src/awrtc/media/IMediaNetwork.ts":
/*!******************************************!*\
  !*** ./src/awrtc/media/IMediaNetwork.ts ***!
  \******************************************/
/*! exports provided: MediaConfigurationState, MediaEventType, MediaEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaConfigurationState\", function() { return MediaConfigurationState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaEventType\", function() { return MediaEventType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaEvent\", function() { return MediaEvent; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nvar MediaConfigurationState;\n(function (MediaConfigurationState) {\n    MediaConfigurationState[MediaConfigurationState[\"Invalid\"] = 0] = \"Invalid\";\n    MediaConfigurationState[MediaConfigurationState[\"NoConfiguration\"] = 1] = \"NoConfiguration\";\n    MediaConfigurationState[MediaConfigurationState[\"InProgress\"] = 2] = \"InProgress\";\n    MediaConfigurationState[MediaConfigurationState[\"Successful\"] = 3] = \"Successful\";\n    MediaConfigurationState[MediaConfigurationState[\"Failed\"] = 4] = \"Failed\";\n})(MediaConfigurationState || (MediaConfigurationState = {}));\nvar MediaEventType;\n(function (MediaEventType) {\n    MediaEventType[MediaEventType[\"Invalid\"] = 0] = \"Invalid\";\n    MediaEventType[MediaEventType[\"StreamAdded\"] = 20] = \"StreamAdded\";\n})(MediaEventType || (MediaEventType = {}));\n/**\n * Will replace frame event / configuration system in the future.\n *\n * So far it only delivers HTMLVideoElements once connection and\n * all tracks are ready and it plays.\n *\n * This is all temporary and will be updated soon to handle\n * all events from configuration of local streams to frame updates and\n * renegotation.\n *\n */\nvar MediaEvent = /** @class */ (function () {\n    function MediaEvent(type, id, args) {\n        this.mEventType = MediaEventType.Invalid;\n        this.mConnectionId = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n        this.mEventType = type;\n        this.mConnectionId = id;\n        this.mArgs = args;\n    }\n    Object.defineProperty(MediaEvent.prototype, \"EventType\", {\n        get: function () {\n            return this.mEventType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaEvent.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaEvent.prototype, \"Args\", {\n        get: function () {\n            return this.mArgs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MediaEvent;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9JTWVkaWFOZXR3b3JrLnRzP2FkZmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBNEJFO0FBQzhEO0FBSWhFLElBQVksdUJBTVg7QUFORCxXQUFZLHVCQUF1QjtJQUMvQiwyRUFBVztJQUNYLDJGQUFtQjtJQUNuQixpRkFBYztJQUNkLGlGQUFjO0lBQ2QseUVBQVU7QUFDZCxDQUFDLEVBTlcsdUJBQXVCLEtBQXZCLHVCQUF1QixRQU1sQztBQUVELElBQVksY0FLWDtBQUxELFdBQVksY0FBYztJQUV0Qix5REFBVztJQUVYLGtFQUFnQjtBQUNwQixDQUFDLEVBTFcsY0FBYyxLQUFkLGNBQWMsUUFLekI7QUFFRDs7Ozs7Ozs7OztHQVVHO0FBQ0g7SUFxQkksb0JBQW1CLElBQW1CLEVBQUUsRUFBZ0IsRUFBRSxJQUFRO1FBbkIxRCxlQUFVLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQztRQU1wQyxrQkFBYSxHQUFHLDJEQUFZLENBQUMsT0FBTyxDQUFDO1FBZXpDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ3RCLENBQUM7SUF2QkQsc0JBQVcsaUNBQVM7YUFBcEI7WUFFSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQzs7O09BQUE7SUFHRCxzQkFBVyxvQ0FBWTthQUF2QjtZQUVJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM5QixDQUFDOzs7T0FBQTtJQUlELHNCQUFXLDRCQUFJO2FBQWY7WUFFSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUFRTCxpQkFBQztBQUFELENBQUMiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWEvSU1lZGlhTmV0d29yay50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbmltcG9ydCB7IENvbm5lY3Rpb25JZCwgSVdlYlJ0Y05ldHdvcmsgfSBmcm9tIFwiLi4vbmV0d29yay9pbmRleFwiO1xuaW1wb3J0IHsgTWVkaWFDb25maWcgfSBmcm9tIFwiLi9NZWRpYUNvbmZpZ1wiO1xuaW1wb3J0IHsgSUZyYW1lRGF0YSB9IGZyb20gXCIuL1Jhd0ZyYW1lXCI7XG5cbmV4cG9ydCBlbnVtIE1lZGlhQ29uZmlndXJhdGlvblN0YXRlIHtcbiAgICBJbnZhbGlkID0gMCxcbiAgICBOb0NvbmZpZ3VyYXRpb24gPSAxLFxuICAgIEluUHJvZ3Jlc3MgPSAyLFxuICAgIFN1Y2Nlc3NmdWwgPSAzLFxuICAgIEZhaWxlZCA9IDRcbn1cblxuZXhwb3J0IGVudW0gTWVkaWFFdmVudFR5cGVcbntcbiAgICBJbnZhbGlkID0gMCxcblxuICAgIFN0cmVhbUFkZGVkID0gMjBcbn1cblxuLyoqXG4gKiBXaWxsIHJlcGxhY2UgZnJhbWUgZXZlbnQgLyBjb25maWd1cmF0aW9uIHN5c3RlbSBpbiB0aGUgZnV0dXJlLlxuICogXG4gKiBTbyBmYXIgaXQgb25seSBkZWxpdmVycyBIVE1MVmlkZW9FbGVtZW50cyBvbmNlIGNvbm5lY3Rpb24gYW5kXG4gKiBhbGwgdHJhY2tzIGFyZSByZWFkeSBhbmQgaXQgcGxheXMuXG4gKiBcbiAqIFRoaXMgaXMgYWxsIHRlbXBvcmFyeSBhbmQgd2lsbCBiZSB1cGRhdGVkIHNvb24gdG8gaGFuZGxlXG4gKiBhbGwgZXZlbnRzIGZyb20gY29uZmlndXJhdGlvbiBvZiBsb2NhbCBzdHJlYW1zIHRvIGZyYW1lIHVwZGF0ZXMgYW5kXG4gKiByZW5lZ290YXRpb24uXG4gKiBcbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhRXZlbnRcbntcbiAgICBwcml2YXRlIG1FdmVudFR5cGUgPSBNZWRpYUV2ZW50VHlwZS5JbnZhbGlkO1xuICAgIHB1YmxpYyBnZXQgRXZlbnRUeXBlKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1FdmVudFR5cGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtQ29ubmVjdGlvbklkID0gQ29ubmVjdGlvbklkLklOVkFMSUQ7XG4gICAgcHVibGljIGdldCBDb25uZWN0aW9uSWQoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUNvbm5lY3Rpb25JZDtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgbUFyZ3M6YW55OyBcbiAgICBwdWJsaWMgZ2V0IEFyZ3MoKTphbnlcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1BcmdzO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0eXBlOk1lZGlhRXZlbnRUeXBlLCBpZDogQ29ubmVjdGlvbklkLCBhcmdzOmFueSlcbiAgICB7XG4gICAgICAgIHRoaXMubUV2ZW50VHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZCA9IGlkO1xuICAgICAgICB0aGlzLm1BcmdzID0gYXJncztcbiAgICB9XG59XG4vKipJbnRlcmZhY2UgYWRkcyBtZWRpYSBmdW5jdGlvbmFsaXR5IHRvIElXZWJSdGNOZXR3b3JrLlxuICogSXQgaXMgdXNlZCB0byBlbnN1cmUgY29tcGF0aWJpbGl0eSB0byBhbGwgb3RoZXIgcGxhdGZvcm1zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElNZWRpYU5ldHdvcmsgZXh0ZW5kcyBJV2ViUnRjTmV0d29ya1xue1xuICAgIENvbmZpZ3VyZShjb25maWc6IE1lZGlhQ29uZmlnKTogdm9pZDtcbiAgICBHZXRDb25maWd1cmF0aW9uU3RhdGUoKTogTWVkaWFDb25maWd1cmF0aW9uU3RhdGU7XG4gICAgR2V0Q29uZmlndXJhdGlvbkVycm9yKCk6IHN0cmluZztcbiAgICBSZXNldENvbmZpZ3VyYXRpb24oKTogdm9pZDtcblxuICAgIFRyeUdldEZyYW1lKGlkOiBDb25uZWN0aW9uSWQpOiBJRnJhbWVEYXRhO1xuICAgIFBlZWtGcmFtZShpZDogQ29ubmVjdGlvbklkKTogSUZyYW1lRGF0YTtcbiAgICBTZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIGlkOiBDb25uZWN0aW9uSWQpOiB2b2lkO1xuICAgIEhhc0F1ZGlvVHJhY2soaWQ6IENvbm5lY3Rpb25JZCk6IGJvb2xlYW47XG4gICAgSGFzVmlkZW9UcmFjayhpZDogQ29ubmVjdGlvbklkKTogYm9vbGVhbjtcblxuICAgIC8vT25seSB1c2VkIGZvciBicm93c2VyIHNwZWNpZmljIGV2ZW50cyBmb3Igbm93XG4gICAgLy9Ob3QgcGFydCBvZiB0aGUgQyMgYXBpIHlldC5cbiAgICBEZXF1ZXVlTWVkaWFFdmVudCgpOiBNZWRpYUV2ZW50O1xufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media/IMediaNetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/media/MediaConfig.ts":
/*!****************************************!*\
  !*** ./src/awrtc/media/MediaConfig.ts ***!
  \****************************************/
/*! exports provided: MediaConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaConfig\", function() { return MediaConfig; });\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/// <summary>\n/// Configuration for the WebRtcCall class.\n/// \n/// Allows to turn on / off video and audio + configure the used servers to initialize the connection and\n/// avoid firewalls.\n/// </summary>\nvar MediaConfig = /** @class */ (function () {\n    function MediaConfig() {\n        this.mAudio = true;\n        this.mVideo = true;\n        this.mVideoDeviceName = \"\";\n        this.mMinWidth = -1;\n        this.mMinHeight = -1;\n        this.mMaxWidth = -1;\n        this.mMaxHeight = -1;\n        this.mIdealWidth = -1;\n        this.mIdealHeight = -1;\n        this.mMinFps = -1;\n        this.mMaxFps = -1;\n        this.mIdealFps = -1;\n        this.mFrameUpdates = false;\n    }\n    Object.defineProperty(MediaConfig.prototype, \"Audio\", {\n        get: function () {\n            return this.mAudio;\n        },\n        set: function (value) {\n            this.mAudio = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"Video\", {\n        get: function () {\n            return this.mVideo;\n        },\n        set: function (value) {\n            this.mVideo = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"VideoDeviceName\", {\n        get: function () {\n            return this.mVideoDeviceName;\n        },\n        set: function (value) {\n            this.mVideoDeviceName = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MinWidth\", {\n        get: function () {\n            return this.mMinWidth;\n        },\n        set: function (value) {\n            this.mMinWidth = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MinHeight\", {\n        get: function () {\n            return this.mMinHeight;\n        },\n        set: function (value) {\n            this.mMinHeight = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MaxWidth\", {\n        get: function () {\n            return this.mMaxWidth;\n        },\n        set: function (value) {\n            this.mMaxWidth = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MaxHeight\", {\n        get: function () {\n            return this.mMaxHeight;\n        },\n        set: function (value) {\n            this.mMaxHeight = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"IdealWidth\", {\n        get: function () {\n            return this.mIdealWidth;\n        },\n        set: function (value) {\n            this.mIdealWidth = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"IdealHeight\", {\n        get: function () {\n            return this.mIdealHeight;\n        },\n        set: function (value) {\n            this.mIdealHeight = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MinFps\", {\n        get: function () {\n            return this.mMinFps;\n        },\n        set: function (value) {\n            this.mMinFps = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"MaxFps\", {\n        get: function () {\n            return this.mMaxFps;\n        },\n        set: function (value) {\n            this.mMaxFps = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"IdealFps\", {\n        get: function () {\n            return this.mIdealFps;\n        },\n        set: function (value) {\n            this.mIdealFps = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MediaConfig.prototype, \"FrameUpdates\", {\n        /** false - frame updates aren't generated. Useful for browser mode\n         *  true  - library will deliver frames as ByteArray\n        */\n        get: function () {\n            return this.mFrameUpdates;\n        },\n        set: function (value) {\n            this.mFrameUpdates = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return MediaConfig;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9NZWRpYUNvbmZpZy50cz9jZWM3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUVGLGFBQWE7QUFDYiwyQ0FBMkM7QUFDM0MsSUFBSTtBQUNKLHlHQUF5RztBQUN6RyxvQkFBb0I7QUFDcEIsY0FBYztBQUNkO0lBQUE7UUFDWSxXQUFNLEdBQVksSUFBSSxDQUFDO1FBUXZCLFdBQU0sR0FBWSxJQUFJLENBQUM7UUFTdkIscUJBQWdCLEdBQVksRUFBRSxDQUFDO1FBUS9CLGNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFmLGVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFoQixjQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFPZixlQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFRaEIsZ0JBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFqQixpQkFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBU2xCLFlBQU8sR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFiLFlBQU8sR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFiLGNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQVFmLGtCQUFhLEdBQUcsS0FBSyxDQUFDO0lBV2xDLENBQUM7SUEzR0csc0JBQVcsOEJBQUs7YUFBaEI7WUFDSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDdkIsQ0FBQzthQUNELFVBQWlCLEtBQWM7WUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDeEIsQ0FBQzs7O09BSEE7SUFNRCxzQkFBVyw4QkFBSzthQUFoQjtZQUNJLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUN2QixDQUFDO2FBQ0QsVUFBaUIsS0FBYztZQUMzQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN4QixDQUFDOzs7T0FIQTtJQU9ELHNCQUFXLHdDQUFlO2FBQTFCO1lBQ0ksT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDakMsQ0FBQzthQUNELFVBQTJCLEtBQWE7WUFDcEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztRQUNsQyxDQUFDOzs7T0FIQTtJQU1ELHNCQUFXLGlDQUFRO2FBQW5CO1lBQ0ksT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzFCLENBQUM7YUFDRCxVQUFvQixLQUFhO1lBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQzNCLENBQUM7OztPQUhBO0lBTUQsc0JBQVcsa0NBQVM7YUFBcEI7WUFDSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQzthQUNELFVBQXFCLEtBQWE7WUFDOUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDNUIsQ0FBQzs7O09BSEE7SUFNRCxzQkFBVyxpQ0FBUTthQUFuQjtZQUNJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUMxQixDQUFDO2FBQ0QsVUFBb0IsS0FBYTtZQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUMzQixDQUFDOzs7T0FIQTtJQUtELHNCQUFXLGtDQUFTO2FBQXBCO1lBQ0ksT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzNCLENBQUM7YUFDRCxVQUFxQixLQUFhO1lBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBQzVCLENBQUM7OztPQUhBO0lBTUQsc0JBQVcsbUNBQVU7YUFBckI7WUFDSSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDNUIsQ0FBQzthQUNELFVBQXNCLEtBQWE7WUFDL0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDN0IsQ0FBQzs7O09BSEE7SUFNRCxzQkFBVyxvQ0FBVzthQUF0QjtZQUNJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztRQUM3QixDQUFDO2FBQ0QsVUFBdUIsS0FBYTtZQUNoQyxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUM5QixDQUFDOzs7T0FIQTtJQU9ELHNCQUFXLCtCQUFNO2FBQWpCO1lBQ0ksT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3hCLENBQUM7YUFDRCxVQUFrQixLQUFhO1lBQzNCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUM7OztPQUhBO0lBTUQsc0JBQVcsK0JBQU07YUFBakI7WUFDSSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDeEIsQ0FBQzthQUNELFVBQWtCLEtBQWE7WUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDekIsQ0FBQzs7O09BSEE7SUFNRCxzQkFBVyxpQ0FBUTthQUFuQjtZQUNJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUMxQixDQUFDO2FBQ0QsVUFBb0IsS0FBYTtZQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUMzQixDQUFDOzs7T0FIQTtJQVVELHNCQUFXLHFDQUFZO1FBSHZCOztVQUVFO2FBQ0Y7WUFDSSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDOUIsQ0FBQzthQUNELFVBQXdCLEtBQWM7WUFDbEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDL0IsQ0FBQzs7O09BSEE7SUFJTCxrQkFBQztBQUFELENBQUMiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWEvTWVkaWFDb25maWcudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5cbi8vLyA8c3VtbWFyeT5cbi8vLyBDb25maWd1cmF0aW9uIGZvciB0aGUgV2ViUnRjQ2FsbCBjbGFzcy5cbi8vLyBcbi8vLyBBbGxvd3MgdG8gdHVybiBvbiAvIG9mZiB2aWRlbyBhbmQgYXVkaW8gKyBjb25maWd1cmUgdGhlIHVzZWQgc2VydmVycyB0byBpbml0aWFsaXplIHRoZSBjb25uZWN0aW9uIGFuZFxuLy8vIGF2b2lkIGZpcmV3YWxscy5cbi8vLyA8L3N1bW1hcnk+XG5leHBvcnQgY2xhc3MgTWVkaWFDb25maWcge1xuICAgIHByaXZhdGUgbUF1ZGlvOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwdWJsaWMgZ2V0IEF1ZGlvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tQXVkaW87XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgQXVkaW8odmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5tQXVkaW8gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1WaWRlbzogYm9vbGVhbiA9IHRydWU7XG4gICAgcHVibGljIGdldCBWaWRlbygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVZpZGVvO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IFZpZGVvKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMubVZpZGVvID0gdmFsdWU7XG4gICAgfVxuICAgIFxuXG4gICAgcHJpdmF0ZSBtVmlkZW9EZXZpY2VOYW1lIDogc3RyaW5nID0gXCJcIjtcbiAgICBwdWJsaWMgZ2V0IFZpZGVvRGV2aWNlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5tVmlkZW9EZXZpY2VOYW1lO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IFZpZGVvRGV2aWNlTmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubVZpZGVvRGV2aWNlTmFtZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgbU1pbldpZHRoID0gLTE7XG4gICAgcHVibGljIGdldCBNaW5XaWR0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tTWluV2lkdGg7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgTWluV2lkdGgodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLm1NaW5XaWR0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgbU1pbkhlaWdodCA9IC0xO1xuICAgIHB1YmxpYyBnZXQgTWluSGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NaW5IZWlnaHQ7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgTWluSGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tTWluSGVpZ2h0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtTWF4V2lkdGggPSAtMTtcbiAgICBwdWJsaWMgZ2V0IE1heFdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NYXhXaWR0aDtcbiAgICB9XG4gICAgcHVibGljIHNldCBNYXhXaWR0aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubU1heFdpZHRoID0gdmFsdWU7XG4gICAgfVxuICAgIHByaXZhdGUgbU1heEhlaWdodCA9IC0xO1xuICAgIHB1YmxpYyBnZXQgTWF4SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NYXhIZWlnaHQ7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgTWF4SGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tTWF4SGVpZ2h0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtSWRlYWxXaWR0aCA9IC0xO1xuICAgIHB1YmxpYyBnZXQgSWRlYWxXaWR0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tSWRlYWxXaWR0aDtcbiAgICB9XG4gICAgcHVibGljIHNldCBJZGVhbFdpZHRoKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tSWRlYWxXaWR0aCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgbUlkZWFsSGVpZ2h0ID0gLTE7XG4gICAgcHVibGljIGdldCBJZGVhbEhlaWdodCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tSWRlYWxIZWlnaHQ7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgSWRlYWxIZWlnaHQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLm1JZGVhbEhlaWdodCA9IHZhbHVlO1xuICAgIH1cblxuICAgIFxuICAgIHByaXZhdGUgbU1pbkZwcyA9IC0xO1xuICAgIHB1YmxpYyBnZXQgTWluRnBzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NaW5GcHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgTWluRnBzKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tTWluRnBzID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbU1heEZwcyA9IC0xO1xuICAgIHB1YmxpYyBnZXQgTWF4RnBzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm1NYXhGcHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgTWF4RnBzKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tTWF4RnBzID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbUlkZWFsRnBzID0gLTE7XG4gICAgcHVibGljIGdldCBJZGVhbEZwcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tSWRlYWxGcHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgSWRlYWxGcHModmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLm1JZGVhbEZwcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgbUZyYW1lVXBkYXRlcyA9IGZhbHNlO1xuXG4gICAgLyoqIGZhbHNlIC0gZnJhbWUgdXBkYXRlcyBhcmVuJ3QgZ2VuZXJhdGVkLiBVc2VmdWwgZm9yIGJyb3dzZXIgbW9kZVxuICAgICAqICB0cnVlICAtIGxpYnJhcnkgd2lsbCBkZWxpdmVyIGZyYW1lcyBhcyBCeXRlQXJyYXlcbiAgICAqL1xuICAgIHB1YmxpYyBnZXQgRnJhbWVVcGRhdGVzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tRnJhbWVVcGRhdGVzO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IEZyYW1lVXBkYXRlcyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLm1GcmFtZVVwZGF0ZXMgPSB2YWx1ZTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/media/MediaConfig.ts\n");

/***/ }),

/***/ "./src/awrtc/media/NetworkConfig.ts":
/*!******************************************!*\
  !*** ./src/awrtc/media/NetworkConfig.ts ***!
  \******************************************/
/*! exports provided: NetworkConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NetworkConfig\", function() { return NetworkConfig; });\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\nvar NetworkConfig = /** @class */ (function () {\n    function NetworkConfig() {\n        this.mIceServers = new Array();\n        this.mSignalingUrl = \"ws://because-why-not.com:12776\";\n        this.mIsConference = false;\n    }\n    Object.defineProperty(NetworkConfig.prototype, \"IceServers\", {\n        get: function () {\n            return this.mIceServers;\n        },\n        set: function (value) {\n            this.mIceServers = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkConfig.prototype, \"SignalingUrl\", {\n        get: function () {\n            return this.mSignalingUrl;\n        },\n        set: function (value) {\n            this.mSignalingUrl = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkConfig.prototype, \"IsConference\", {\n        get: function () {\n            return this.mIsConference;\n        },\n        set: function (value) {\n            this.mIsConference = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return NetworkConfig;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9OZXR3b3JrQ29uZmlnLnRzP2M4ZDYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBNEJFO0FBRUY7SUFBQTtRQUVZLGdCQUFXLEdBQUcsSUFBSSxLQUFLLEVBQWdCLENBQUM7UUFVeEMsa0JBQWEsR0FBRyxnQ0FBZ0MsQ0FBQztRQVNqRCxrQkFBYSxHQUFHLEtBQUssQ0FBQztJQU9sQyxDQUFDO0lBeEJHLHNCQUFXLHFDQUFVO2FBQXJCO1lBQ0ksT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzVCLENBQUM7YUFFRCxVQUFzQixLQUFxQjtZQUN2QyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUM3QixDQUFDOzs7T0FKQTtJQU9ELHNCQUFXLHVDQUFZO2FBQXZCO1lBQ0ksT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQzlCLENBQUM7YUFFRCxVQUF3QixLQUFhO1lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBQy9CLENBQUM7OztPQUpBO0lBT0Qsc0JBQVcsdUNBQVk7YUFBdkI7WUFDSSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDOUIsQ0FBQzthQUNELFVBQXdCLEtBQWE7WUFDakMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDL0IsQ0FBQzs7O09BSEE7SUFJTCxvQkFBQztBQUFELENBQUMiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWEvTmV0d29ya0NvbmZpZy50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cblxuZXhwb3J0IGNsYXNzIE5ldHdvcmtDb25maWcge1xuXG4gICAgcHJpdmF0ZSBtSWNlU2VydmVycyA9IG5ldyBBcnJheTxSVENJY2VTZXJ2ZXI+KCk7XG5cbiAgICBwdWJsaWMgZ2V0IEljZVNlcnZlcnMoKTogUlRDSWNlU2VydmVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5tSWNlU2VydmVycztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IEljZVNlcnZlcnModmFsdWU6IFJUQ0ljZVNlcnZlcltdKSB7XG4gICAgICAgIHRoaXMubUljZVNlcnZlcnMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1TaWduYWxpbmdVcmwgPSBcIndzOi8vYmVjYXVzZS13aHktbm90LmNvbToxMjc3NlwiO1xuICAgIHB1YmxpYyBnZXQgU2lnbmFsaW5nVXJsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tU2lnbmFsaW5nVXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXQgU2lnbmFsaW5nVXJsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5tU2lnbmFsaW5nVXJsID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtSXNDb25mZXJlbmNlID0gZmFsc2U7XG4gICAgcHVibGljIGdldCBJc0NvbmZlcmVuY2UoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Jc0NvbmZlcmVuY2U7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgSXNDb25mZXJlbmNlKHZhbHVlOmJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5tSXNDb25mZXJlbmNlID0gdmFsdWU7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media/NetworkConfig.ts\n");

/***/ }),

/***/ "./src/awrtc/media/RawFrame.ts":
/*!*************************************!*\
  !*** ./src/awrtc/media/RawFrame.ts ***!
  \*************************************/
/*! exports provided: FramePixelFormat, IFrameData, RawFrame, LazyFrame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FramePixelFormat\", function() { return FramePixelFormat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IFrameData\", function() { return IFrameData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RawFrame\", function() { return RawFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LazyFrame\", function() { return LazyFrame; });\n/* harmony import */ var _network_Helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/Helper */ \"./src/awrtc/network/Helper.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nvar FramePixelFormat;\n(function (FramePixelFormat) {\n    FramePixelFormat[FramePixelFormat[\"Invalid\"] = 0] = \"Invalid\";\n    FramePixelFormat[FramePixelFormat[\"Format32bppargb\"] = 1] = \"Format32bppargb\";\n})(FramePixelFormat || (FramePixelFormat = {}));\n//replace with interface after typescript 2.0 update (properties in interfaces aren't supported yet)\nvar IFrameData = /** @class */ (function () {\n    function IFrameData() {\n    }\n    Object.defineProperty(IFrameData.prototype, \"Format\", {\n        get: function () {\n            return FramePixelFormat.Format32bppargb;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IFrameData.prototype, \"Buffer\", {\n        get: function () {\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IFrameData.prototype, \"Width\", {\n        get: function () {\n            return -1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IFrameData.prototype, \"Height\", {\n        get: function () {\n            return -1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IFrameData.prototype.ToTexture = function (gl, texture) {\n        return false;\n    };\n    return IFrameData;\n}());\n\n//Container for the raw bytes of the current frame + height and width.\n//Format is currently fixed based on the browser getImageData format\nvar RawFrame = /** @class */ (function (_super) {\n    __extends(RawFrame, _super);\n    function RawFrame(buffer, width, height) {\n        var _this = _super.call(this) || this;\n        _this.mBuffer = null;\n        _this.mBuffer = buffer;\n        _this.mWidth = width;\n        _this.mHeight = height;\n        return _this;\n    }\n    Object.defineProperty(RawFrame.prototype, \"Buffer\", {\n        get: function () {\n            return this.mBuffer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RawFrame.prototype, \"Width\", {\n        get: function () {\n            return this.mWidth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RawFrame.prototype, \"Height\", {\n        get: function () {\n            return this.mHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return RawFrame;\n}(IFrameData));\n\n/**\n * This class is suppose to increase the speed of the java script implementation.\n * Instead of creating RawFrames every Update call (because the real fps are unknown currently) it will\n * only create a lazy frame which will delay the creation of the RawFrame until the user actually tries\n * to access any data.\n * Thus if the game slows down or the user doesn't access any data the expensive copy is avoided.\n *\n * This comes with the downside of risking a change in Width / Height at the moment. In theory the video could\n * change the resolution causing the values of Width / Height to change over time before Buffer is accessed to create\n * a copy that will be save to use. This should be ok as long as the frame is used at the time it is received.\n */\nvar LazyFrame = /** @class */ (function (_super) {\n    __extends(LazyFrame, _super);\n    function LazyFrame(frameGenerator) {\n        var _this = _super.call(this) || this;\n        _this.mFrameGenerator = frameGenerator;\n        return _this;\n    }\n    Object.defineProperty(LazyFrame.prototype, \"FrameGenerator\", {\n        get: function () {\n            return this.mFrameGenerator;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyFrame.prototype, \"Buffer\", {\n        get: function () {\n            this.GenerateFrame();\n            if (this.mRawFrame == null)\n                return null;\n            return this.mRawFrame.Buffer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyFrame.prototype, \"Width\", {\n        /**Returns the expected width of the frame.\n         * Watch out this might change inbetween frames!\n         *\n         */\n        get: function () {\n            if (this.mRawFrame == null) {\n                return this.mFrameGenerator.VideoElement.videoWidth;\n            }\n            else {\n                return this.mRawFrame.Width;\n            }\n            /*\n            this.GenerateFrame();\n            if (this.mRawFrame == null)\n                return -1;\n            return this.mRawFrame.Width;\n            */\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LazyFrame.prototype, \"Height\", {\n        /**Returns the expected height of the frame.\n         * Watch out this might change inbetween frames!\n         *\n         */\n        get: function () {\n            if (this.mRawFrame == null) {\n                return this.mFrameGenerator.VideoElement.videoHeight;\n            }\n            else {\n                return this.mRawFrame.Height;\n            }\n            /*\n            this.GenerateFrame();\n            if (this.mRawFrame == null)\n                return -1;\n            return this.mRawFrame.Height;\n            */\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**Intendet for use via the Unity plugin.\n     * Will copy the image directly into a texture to avoid overhead of a CPU side copy.\n     *\n     * The given texture should have the correct size before calling this method.\n     *\n     * @param gl\n     * @param texture\n     */\n    LazyFrame.prototype.ToTexture = function (gl, texture) {\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        /*\n        const level = 0;\n        const internalFormat = gl.RGBA;\n        const srcFormat = gl.RGBA;\n        const srcType = gl.UNSIGNED_BYTE;\n        gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, this.mFrameGenerator.VideoElement);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        */\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGB, gl.UNSIGNED_BYTE, this.mFrameGenerator.VideoElement);\n        return true;\n    };\n    /*\n    public ToTexture2(gl: WebGL2RenderingContext) : WebGLTexture{\n        let tex = gl.createTexture()\n        this.ToTexture(gl, tex)\n        return;\n    }\n    */\n    //Called before access of any frame data triggering the creation of the raw frame data\n    LazyFrame.prototype.GenerateFrame = function () {\n        if (this.mRawFrame == null) {\n            try {\n                this.mRawFrame = this.mFrameGenerator.CreateFrame();\n            }\n            catch (exception) {\n                this.mRawFrame = null;\n                _network_Helper__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogWarning(\"frame skipped in GenerateFrame due to exception: \" + JSON.stringify(exception));\n            }\n        }\n    };\n    return LazyFrame;\n}(IFrameData));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9SYXdGcmFtZS50cz85OTU2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUN1QztBQUd6QyxJQUFZLGdCQUdYO0FBSEQsV0FBWSxnQkFBZ0I7SUFDeEIsNkRBQVc7SUFDWCw2RUFBZTtBQUNuQixDQUFDLEVBSFcsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQUczQjtBQUtELG9HQUFvRztBQUNwRztJQW1CSTtJQUF1QixDQUFDO0lBakJ4QixzQkFBVyw4QkFBTTthQUFqQjtZQUNJLE9BQU8sZ0JBQWdCLENBQUMsZUFBZSxDQUFDO1FBQzVDLENBQUM7OztPQUFBO0lBRUQsc0JBQVcsOEJBQU07YUFBakI7WUFDSSxPQUFPLElBQUksQ0FBQztRQUNoQixDQUFDOzs7T0FBQTtJQUVELHNCQUFXLDZCQUFLO2FBQWhCO1lBQ0ksT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNkLENBQUM7OztPQUFBO0lBR0Qsc0JBQVcsOEJBQU07YUFBakI7WUFDSSxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2QsQ0FBQzs7O09BQUE7SUFJTSw4QkFBUyxHQUFoQixVQUFpQixFQUEwQixFQUFFLE9BQXFCO1FBQzlELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFNTCxpQkFBQztBQUFELENBQUM7O0FBRUQsc0VBQXNFO0FBQ3RFLG9FQUFvRTtBQUNwRTtJQUE4Qiw0QkFBVTtJQWtCcEMsa0JBQVksTUFBa0IsRUFBRSxLQUFhLEVBQUUsTUFBYztRQUE3RCxZQUNJLGlCQUFPLFNBSVY7UUFyQk8sYUFBTyxHQUFlLElBQUksQ0FBQztRQWtCL0IsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDdEIsS0FBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7O0lB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IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbmltcG9ydCB7IFNMb2cgfSBmcm9tIFwiLi4vbmV0d29yay9IZWxwZXJcIjtcbmltcG9ydCB7IEJyb3dzZXJNZWRpYVN0cmVhbSB9IGZyb20gXCIuLi9tZWRpYV9icm93c2VyL2luZGV4XCI7XG5cbmV4cG9ydCBlbnVtIEZyYW1lUGl4ZWxGb3JtYXQge1xuICAgIEludmFsaWQgPSAwLFxuICAgIEZvcm1hdDMyYnBwYXJnYlxufVxuXG5cblxuXG4vL3JlcGxhY2Ugd2l0aCBpbnRlcmZhY2UgYWZ0ZXIgdHlwZXNjcmlwdCAyLjAgdXBkYXRlIChwcm9wZXJ0aWVzIGluIGludGVyZmFjZXMgYXJlbid0IHN1cHBvcnRlZCB5ZXQpXG5leHBvcnQgY2xhc3MgSUZyYW1lRGF0YSB7XG5cbiAgICBwdWJsaWMgZ2V0IEZvcm1hdCgpOiBGcmFtZVBpeGVsRm9ybWF0e1xuICAgICAgICByZXR1cm4gRnJhbWVQaXhlbEZvcm1hdC5Gb3JtYXQzMmJwcGFyZ2I7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBCdWZmZXIoKTogVWludDhBcnJheSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgV2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuXG4gICAgcHVibGljIGdldCBIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gICAgcHVibGljIFRvVGV4dHVyZShnbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCwgdGV4dHVyZTogV2ViR0xUZXh0dXJlKSA6IGJvb2xlYW57XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLypcbiAgICBwdWJsaWMgVG9UZXh0dXJlMihnbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCkgOiBXZWJHTFRleHR1cmV7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAqL1xufVxuXG4vL0NvbnRhaW5lciBmb3IgdGhlIHJhdyBieXRlcyBvZiB0aGUgY3VycmVudCBmcmFtZSArIGhlaWdodCBhbmQgd2lkdGguXG4vL0Zvcm1hdCBpcyBjdXJyZW50bHkgZml4ZWQgYmFzZWQgb24gdGhlIGJyb3dzZXIgZ2V0SW1hZ2VEYXRhIGZvcm1hdFxuZXhwb3J0IGNsYXNzIFJhd0ZyYW1lIGV4dGVuZHMgSUZyYW1lRGF0YXtcblxuICAgIHByaXZhdGUgbUJ1ZmZlcjogVWludDhBcnJheSA9IG51bGw7XG4gICAgcHVibGljIGdldCBCdWZmZXIoKTogVWludDhBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1CdWZmZXI7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgbVdpZHRoOiBudW1iZXI7XG4gICAgcHVibGljIGdldCBXaWR0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5tV2lkdGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtSGVpZ2h0OiBudW1iZXI7XG4gICAgcHVibGljIGdldCBIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUhlaWdodDtcbiAgICB9XG5cblxuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlcjogVWludDhBcnJheSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tQnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLm1XaWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLm1IZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuXG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyBzdXBwb3NlIHRvIGluY3JlYXNlIHRoZSBzcGVlZCBvZiB0aGUgamF2YSBzY3JpcHQgaW1wbGVtZW50YXRpb24uXG4gKiBJbnN0ZWFkIG9mIGNyZWF0aW5nIFJhd0ZyYW1lcyBldmVyeSBVcGRhdGUgY2FsbCAoYmVjYXVzZSB0aGUgcmVhbCBmcHMgYXJlIHVua25vd24gY3VycmVudGx5KSBpdCB3aWxsXG4gKiBvbmx5IGNyZWF0ZSBhIGxhenkgZnJhbWUgd2hpY2ggd2lsbCBkZWxheSB0aGUgY3JlYXRpb24gb2YgdGhlIFJhd0ZyYW1lIHVudGlsIHRoZSB1c2VyIGFjdHVhbGx5IHRyaWVzXG4gKiB0byBhY2Nlc3MgYW55IGRhdGEuXG4gKiBUaHVzIGlmIHRoZSBnYW1lIHNsb3dzIGRvd24gb3IgdGhlIHVzZXIgZG9lc24ndCBhY2Nlc3MgYW55IGRhdGEgdGhlIGV4cGVuc2l2ZSBjb3B5IGlzIGF2b2lkZWQuXG4gKiBcbiAqIFRoaXMgY29tZXMgd2l0aCB0aGUgZG93bnNpZGUgb2Ygcmlza2luZyBhIGNoYW5nZSBpbiBXaWR0aCAvIEhlaWdodCBhdCB0aGUgbW9tZW50LiBJbiB0aGVvcnkgdGhlIHZpZGVvIGNvdWxkXG4gKiBjaGFuZ2UgdGhlIHJlc29sdXRpb24gY2F1c2luZyB0aGUgdmFsdWVzIG9mIFdpZHRoIC8gSGVpZ2h0IHRvIGNoYW5nZSBvdmVyIHRpbWUgYmVmb3JlIEJ1ZmZlciBpcyBhY2Nlc3NlZCB0byBjcmVhdGVcbiAqIGEgY29weSB0aGF0IHdpbGwgYmUgc2F2ZSB0byB1c2UuIFRoaXMgc2hvdWxkIGJlIG9rIGFzIGxvbmcgYXMgdGhlIGZyYW1lIGlzIHVzZWQgYXQgdGhlIHRpbWUgaXQgaXMgcmVjZWl2ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMYXp5RnJhbWUgZXh0ZW5kcyBJRnJhbWVEYXRhe1xuXG4gICAgcHJpdmF0ZSBtRnJhbWVHZW5lcmF0b3I6IEJyb3dzZXJNZWRpYVN0cmVhbTtcbiAgICBwdWJsaWMgZ2V0IEZyYW1lR2VuZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tRnJhbWVHZW5lcmF0b3I7XG4gICAgfVxuICAgIHByaXZhdGUgbVJhd0ZyYW1lOiBSYXdGcmFtZTtcblxuXG4gICAgcHVibGljIGdldCBCdWZmZXIoKTogVWludDhBcnJheSB7XG4gICAgICAgIHRoaXMuR2VuZXJhdGVGcmFtZSgpO1xuICAgICAgICBpZiAodGhpcy5tUmF3RnJhbWUgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5tUmF3RnJhbWUuQnVmZmVyO1xuICAgIH1cblxuICAgIC8qKlJldHVybnMgdGhlIGV4cGVjdGVkIHdpZHRoIG9mIHRoZSBmcmFtZS5cbiAgICAgKiBXYXRjaCBvdXQgdGhpcyBtaWdodCBjaGFuZ2UgaW5iZXR3ZWVuIGZyYW1lcyFcbiAgICAgKiBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IFdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIGlmICh0aGlzLm1SYXdGcmFtZSA9PSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tRnJhbWVHZW5lcmF0b3IuVmlkZW9FbGVtZW50LnZpZGVvV2lkdGg7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubVJhd0ZyYW1lLldpZHRoO1xuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgIHRoaXMuR2VuZXJhdGVGcmFtZSgpO1xuICAgICAgICBpZiAodGhpcy5tUmF3RnJhbWUgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgcmV0dXJuIHRoaXMubVJhd0ZyYW1lLldpZHRoO1xuICAgICAgICAqL1xuICAgIH1cblxuICAgIC8qKlJldHVybnMgdGhlIGV4cGVjdGVkIGhlaWdodCBvZiB0aGUgZnJhbWUuXG4gICAgICogV2F0Y2ggb3V0IHRoaXMgbWlnaHQgY2hhbmdlIGluYmV0d2VlbiBmcmFtZXMhXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIGdldCBIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMubVJhd0ZyYW1lID09IG51bGwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1GcmFtZUdlbmVyYXRvci5WaWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubVJhd0ZyYW1lLkhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICB0aGlzLkdlbmVyYXRlRnJhbWUoKTtcbiAgICAgICAgaWYgKHRoaXMubVJhd0ZyYW1lID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIHJldHVybiB0aGlzLm1SYXdGcmFtZS5IZWlnaHQ7XG4gICAgICAgICovXG4gICAgfVxuXG5cbiAgICBjb25zdHJ1Y3RvcihmcmFtZUdlbmVyYXRvcjogQnJvd3Nlck1lZGlhU3RyZWFtKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubUZyYW1lR2VuZXJhdG9yID0gZnJhbWVHZW5lcmF0b3I7XG4gICAgfVxuXG4gICAgLyoqSW50ZW5kZXQgZm9yIHVzZSB2aWEgdGhlIFVuaXR5IHBsdWdpbi5cbiAgICAgKiBXaWxsIGNvcHkgdGhlIGltYWdlIGRpcmVjdGx5IGludG8gYSB0ZXh0dXJlIHRvIGF2b2lkIG92ZXJoZWFkIG9mIGEgQ1BVIHNpZGUgY29weS5cbiAgICAgKiBcbiAgICAgKiBUaGUgZ2l2ZW4gdGV4dHVyZSBzaG91bGQgaGF2ZSB0aGUgY29ycmVjdCBzaXplIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBnbCBcbiAgICAgKiBAcGFyYW0gdGV4dHVyZSBcbiAgICAgKi9cbiAgICBwdWJsaWMgVG9UZXh0dXJlKGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUpIDogYm9vbGVhbntcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG4gICAgICAgIC8qXG4gICAgICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICAgICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBnbC5SR0JBO1xuICAgICAgICBjb25zdCBzcmNGb3JtYXQgPSBnbC5SR0JBO1xuICAgICAgICBjb25zdCBzcmNUeXBlID0gZ2wuVU5TSUdORURfQllURTtcbiAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCBsZXZlbCwgaW50ZXJuYWxGb3JtYXQsIHNyY0Zvcm1hdCwgc3JjVHlwZSwgdGhpcy5tRnJhbWVHZW5lcmF0b3IuVmlkZW9FbGVtZW50KTtcbiAgICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgICAgKi9cbiAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCAwLCAwLCBnbC5SR0IsIGdsLlVOU0lHTkVEX0JZVEUsIHRoaXMubUZyYW1lR2VuZXJhdG9yLlZpZGVvRWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKlxuICAgIHB1YmxpYyBUb1RleHR1cmUyKGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSA6IFdlYkdMVGV4dHVyZXtcbiAgICAgICAgbGV0IHRleCA9IGdsLmNyZWF0ZVRleHR1cmUoKVxuICAgICAgICB0aGlzLlRvVGV4dHVyZShnbCwgdGV4KVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgICovXG5cbiAgICAvL0NhbGxlZCBiZWZvcmUgYWNjZXNzIG9mIGFueSBmcmFtZSBkYXRhIHRyaWdnZXJpbmcgdGhlIGNyZWF0aW9uIG9mIHRoZSByYXcgZnJhbWUgZGF0YVxuICAgIHByaXZhdGUgR2VuZXJhdGVGcmFtZSgpIHtcblxuICAgICAgICBpZiAodGhpcy5tUmF3RnJhbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1SYXdGcmFtZSA9IHRoaXMubUZyYW1lR2VuZXJhdG9yLkNyZWF0ZUZyYW1lKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1SYXdGcmFtZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgU0xvZy5Mb2dXYXJuaW5nKFwiZnJhbWUgc2tpcHBlZCBpbiBHZW5lcmF0ZUZyYW1lIGR1ZSB0byBleGNlcHRpb246IFwiICsgSlNPTi5zdHJpbmdpZnkoZXhjZXB0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media/RawFrame.ts\n");

/***/ }),

/***/ "./src/awrtc/media/index.ts":
/*!**********************************!*\
  !*** ./src/awrtc/media/index.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _AWebRtcCall__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AWebRtcCall */ \"./src/awrtc/media/AWebRtcCall.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AWebRtcCall\", function() { return _AWebRtcCall__WEBPACK_IMPORTED_MODULE_0__[\"AWebRtcCall\"]; });\n\n/* harmony import */ var _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CallEventArgs */ \"./src/awrtc/media/CallEventArgs.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CallEventType\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CallEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CallAcceptedEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallAcceptedEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CallEndedEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallEndedEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CallErrorType\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"CallErrorType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ErrorEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"ErrorEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WaitForIncomingCallEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"WaitForIncomingCallEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MessageEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"MessageEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DataMessageEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"DataMessageEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaUpdatedEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"MediaUpdatedEventArgs\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FrameUpdateEventArgs\", function() { return _CallEventArgs__WEBPACK_IMPORTED_MODULE_1__[\"FrameUpdateEventArgs\"]; });\n\n/* harmony import */ var _ICall__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ICall */ \"./src/awrtc/media/ICall.ts\");\n/* harmony import */ var _ICall__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_ICall__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _ICall__WEBPACK_IMPORTED_MODULE_2__) if([\"default\",\"AWebRtcCall\",\"CallEventType\",\"CallEventArgs\",\"CallAcceptedEventArgs\",\"CallEndedEventArgs\",\"CallErrorType\",\"ErrorEventArgs\",\"WaitForIncomingCallEventArgs\",\"MessageEventArgs\",\"DataMessageEventArgs\",\"MediaUpdatedEventArgs\",\"FrameUpdateEventArgs\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _ICall__WEBPACK_IMPORTED_MODULE_2__[key]; }) }(__WEBPACK_IMPORT_KEY__));\n/* harmony import */ var _IMediaNetwork__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./IMediaNetwork */ \"./src/awrtc/media/IMediaNetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaConfigurationState\", function() { return _IMediaNetwork__WEBPACK_IMPORTED_MODULE_3__[\"MediaConfigurationState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaEventType\", function() { return _IMediaNetwork__WEBPACK_IMPORTED_MODULE_3__[\"MediaEventType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaEvent\", function() { return _IMediaNetwork__WEBPACK_IMPORTED_MODULE_3__[\"MediaEvent\"]; });\n\n/* harmony import */ var _MediaConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MediaConfig */ \"./src/awrtc/media/MediaConfig.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaConfig\", function() { return _MediaConfig__WEBPACK_IMPORTED_MODULE_4__[\"MediaConfig\"]; });\n\n/* harmony import */ var _NetworkConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./NetworkConfig */ \"./src/awrtc/media/NetworkConfig.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetworkConfig\", function() { return _NetworkConfig__WEBPACK_IMPORTED_MODULE_5__[\"NetworkConfig\"]; });\n\n/* harmony import */ var _RawFrame__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RawFrame */ \"./src/awrtc/media/RawFrame.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"FramePixelFormat\", function() { return _RawFrame__WEBPACK_IMPORTED_MODULE_6__[\"FramePixelFormat\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"IFrameData\", function() { return _RawFrame__WEBPACK_IMPORTED_MODULE_6__[\"IFrameData\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"RawFrame\", function() { return _RawFrame__WEBPACK_IMPORTED_MODULE_6__[\"RawFrame\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"LazyFrame\", function() { return _RawFrame__WEBPACK_IMPORTED_MODULE_6__[\"LazyFrame\"]; });\n\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYS9pbmRleC50cz81MGQwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDMkI7QUFDRTtBQUNSO0FBQ1E7QUFDRjtBQUNFO0FBQ0wiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWEvaW5kZXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5leHBvcnQgKiBmcm9tICcuL0FXZWJSdGNDYWxsJ1xuZXhwb3J0ICogZnJvbSAnLi9DYWxsRXZlbnRBcmdzJ1xuZXhwb3J0ICogZnJvbSAnLi9JQ2FsbCdcbmV4cG9ydCAqIGZyb20gJy4vSU1lZGlhTmV0d29yaydcbmV4cG9ydCAqIGZyb20gJy4vTWVkaWFDb25maWcnXG5leHBvcnQgKiBmcm9tICcuL05ldHdvcmtDb25maWcnXG5leHBvcnQgKiBmcm9tICcuL1Jhd0ZyYW1lJyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media/index.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/BrowserMediaNetwork.ts":
/*!********************************************************!*\
  !*** ./src/awrtc/media_browser/BrowserMediaNetwork.ts ***!
  \********************************************************/
/*! exports provided: BrowserMediaNetwork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaNetwork\", function() { return BrowserMediaNetwork; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../media/IMediaNetwork */ \"./src/awrtc/media/IMediaNetwork.ts\");\n/* harmony import */ var _media_MediaConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../media/MediaConfig */ \"./src/awrtc/media/MediaConfig.ts\");\n/* harmony import */ var _MediaPeer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MediaPeer */ \"./src/awrtc/media_browser/MediaPeer.ts\");\n/* harmony import */ var _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BrowserMediaStream */ \"./src/awrtc/media_browser/BrowserMediaStream.ts\");\n/* harmony import */ var _DeviceApi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DeviceApi */ \"./src/awrtc/media_browser/DeviceApi.ts\");\n/* harmony import */ var _Media__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Media */ \"./src/awrtc/media_browser/Media.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n\n\n\n\n\n/**Avoid using this class directly whenever possible. Use BrowserWebRtcCall instead.\n * BrowserMediaNetwork might be subject to frequent changes to keep up with changes\n * in all other platforms.\n *\n * IMediaNetwork implementation for the browser. The class is mostly identical with the\n * C# version. Main goal is to have an interface that can easily be wrapped to other\n * programming languages and gives access to basic WebRTC features such as receiving\n * and sending audio and video + signaling via websockets.\n *\n * BrowserMediaNetwork can be used to stream a local audio and video track to a group of\n * multiple peers and receive remote tracks. The handling of the peers itself\n * remains the same as WebRtcNetwork.\n * Local tracks are created after calling Configure. This will request access from the\n * user. After the user allowed access GetConfigurationState will return Configured.\n * Every incoming and outgoing peer that is established after this will receive\n * the local audio and video track.\n * So far Configure can only be called once before any peers are connected.\n *\n *\n */\nvar BrowserMediaNetwork = /** @class */ (function (_super) {\n    __extends(BrowserMediaNetwork, _super);\n    function BrowserMediaNetwork(config) {\n        var _this = _super.call(this, BrowserMediaNetwork.BuildSignalingConfig(config.SignalingUrl), BrowserMediaNetwork.BuildRtcConfig(config.IceServers)) || this;\n        //media configuration set by the user\n        _this.mMediaConfig = null;\n        //keeps track of audio / video tracks based on local devices\n        //will be shared with all connected peers.\n        _this.mLocalStream = null;\n        _this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].Invalid;\n        _this.mConfigurationError = null;\n        _this.mMediaEvents = new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"Queue\"]();\n        _this.MediaPeer_InternalMediaStreamAdded = function (peer, stream) {\n            _this.EnqueueMediaEvent(_media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaEventType\"].StreamAdded, peer.ConnectionId, stream.VideoElement);\n        };\n        _this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].NoConfiguration;\n        return _this;\n    }\n    /**Triggers the creation of a local audio and video track. After this\n     * call the user might get a request to allow access to the requested\n     * devices.\n     *\n     * @param config Detail configuration for audio/video devices.\n     */\n    BrowserMediaNetwork.prototype.Configure = function (config) {\n        var _this = this;\n        this.mMediaConfig = config;\n        this.mConfigurationError = null;\n        this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].InProgress;\n        if (config.Audio || config.Video) {\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].L(\"calling GetUserMedia. Media config: \" + JSON.stringify(config));\n            if (_DeviceApi__WEBPACK_IMPORTED_MODULE_5__[\"DeviceApi\"].IsUserMediaAvailable()) {\n                var promise = null;\n                promise = _Media__WEBPACK_IMPORTED_MODULE_6__[\"Media\"].SharedInstance.getUserMedia(config);\n                promise.then(function (stream) {\n                    //totally unrelated -> user gave access to devices. use this\n                    //to get the proper names for our DeviceApi\n                    _DeviceApi__WEBPACK_IMPORTED_MODULE_5__[\"DeviceApi\"].Update();\n                    //call worked -> setup a frame buffer that deals with the rest\n                    _this.mLocalStream = new _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_4__[\"BrowserMediaStream\"](stream);\n                    //console.debug(\"Local tracks: \", stream.getTracks());\n                    _this.mLocalStream.InternalStreamAdded = function (stream) {\n                        _this.EnqueueMediaEvent(_media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaEventType\"].StreamAdded, _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, _this.mLocalStream.VideoElement);\n                    };\n                    //unlike native version this one will happily play the local sound causing an echo\n                    //set to mute\n                    _this.mLocalStream.SetMute(true);\n                    _this.OnConfigurationSuccess();\n                });\n                promise.catch(function (err) {\n                    //failed due to an error or user didn't give permissions\n                    _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(err.name + \": \" + err.message);\n                    _this.OnConfigurationFailed(err.message);\n                });\n            }\n            else {\n                //no access to media device -> fail\n                var error = \"Configuration failed. navigator.mediaDevices is unedfined. The browser might not allow media access.\" +\n                    \"Is the page loaded via http or file URL? Some browsers only support https!\";\n                _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(error);\n                this.OnConfigurationFailed(error);\n            }\n        }\n        else {\n            this.OnConfigurationSuccess();\n        }\n    };\n    /**Call this every time a new frame is shown to the user in realtime\n     * applications.\n     *\n     */\n    BrowserMediaNetwork.prototype.Update = function () {\n        _super.prototype.Update.call(this);\n        if (this.mLocalStream != null)\n            this.mLocalStream.Update();\n    };\n    BrowserMediaNetwork.prototype.EnqueueMediaEvent = function (type, id, args) {\n        var evt = new _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaEvent\"](type, id, args);\n        this.mMediaEvents.Enqueue(evt);\n    };\n    BrowserMediaNetwork.prototype.DequeueMediaEvent = function () {\n        return this.mMediaEvents.Dequeue();\n    };\n    /**\n     * Call this every frame after interacting with this instance.\n     *\n     * This call might flush buffered messages in the future and clear\n     * events that the user didn't process to avoid buffer overflows.\n     *\n     */\n    BrowserMediaNetwork.prototype.Flush = function () {\n        _super.prototype.Flush.call(this);\n        this.mMediaEvents.Clear();\n    };\n    /**Poll this after Configure is called to get the result.\n     * Won't change after state is Configured or Failed.\n     *\n     */\n    BrowserMediaNetwork.prototype.GetConfigurationState = function () {\n        return this.mConfigurationState;\n    };\n    /**Returns the error message if the configure process failed.\n     * This usally either happens because the user refused access\n     * or no device fulfills the configuration given\n     * (e.g. device doesn't support the given resolution)\n     *\n     */\n    BrowserMediaNetwork.prototype.GetConfigurationError = function () {\n        return this.mConfigurationError;\n    };\n    /**Resets the configuration state to allow multiple attempts\n     * to call Configure.\n     *\n     */\n    BrowserMediaNetwork.prototype.ResetConfiguration = function () {\n        this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].NoConfiguration;\n        this.mMediaConfig = new _media_MediaConfig__WEBPACK_IMPORTED_MODULE_2__[\"MediaConfig\"]();\n        this.mConfigurationError = null;\n    };\n    BrowserMediaNetwork.prototype.OnConfigurationSuccess = function () {\n        this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].Successful;\n    };\n    BrowserMediaNetwork.prototype.OnConfigurationFailed = function (error) {\n        this.mConfigurationError = error;\n        this.mConfigurationState = _media_IMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfigurationState\"].Failed;\n    };\n    /**Allows to peek at the current frame.\n     * Added to allow the emscripten C / C# side to allocate memory before\n     * actually getting the frame.\n     *\n     * @param id\n     */\n    BrowserMediaNetwork.prototype.PeekFrame = function (id) {\n        if (id == null)\n            return;\n        if (id.id == _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID.id) {\n            if (this.mLocalStream != null) {\n                return this.mLocalStream.PeekFrame();\n            }\n        }\n        else {\n            var peer = this.IdToConnection[id.id];\n            if (peer != null) {\n                return peer.PeekFrame();\n            }\n            //TODO: iterate over media peers and do the same as above\n        }\n        return null;\n    };\n    BrowserMediaNetwork.prototype.TryGetFrame = function (id) {\n        if (id == null)\n            return;\n        if (id.id == _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID.id) {\n            if (this.mLocalStream != null) {\n                return this.mLocalStream.TryGetFrame();\n            }\n        }\n        else {\n            var peer = this.IdToConnection[id.id];\n            if (peer != null) {\n                return peer.TryGetRemoteFrame();\n            }\n            //TODO: iterate over media peers and do the same as above\n        }\n        return null;\n    };\n    /**\n     * Remote audio control for each peer.\n     *\n     * @param volume 0 - mute and 1 - max volume\n     * @param id peer id\n     */\n    BrowserMediaNetwork.prototype.SetVolume = function (volume, id) {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].L(\"SetVolume called. Volume: \" + volume + \" id: \" + id.id);\n        var peer = this.IdToConnection[id.id];\n        if (peer != null) {\n            return peer.SetVolume(volume);\n        }\n    };\n    /** Allows to check if a specific peer has a remote\n     * audio track attached.\n     *\n     * @param id\n     */\n    BrowserMediaNetwork.prototype.HasAudioTrack = function (id) {\n        var peer = this.IdToConnection[id.id];\n        if (peer != null) {\n            return peer.HasAudioTrack();\n        }\n        return false;\n    };\n    /** Allows to check if a specific peer has a remote\n     * video track attached.\n     *\n     * @param id\n     */\n    BrowserMediaNetwork.prototype.HasVideoTrack = function (id) {\n        var peer = this.IdToConnection[id.id];\n        if (peer != null) {\n            return peer.HasVideoTrack();\n        }\n        return false;\n    };\n    /**Returns true if no local audio available or it is muted.\n     * False if audio is available (could still not work due to 0 volume, hardware\n     * volume control or a dummy audio input device is being used)\n     */\n    BrowserMediaNetwork.prototype.IsMute = function () {\n        if (this.mLocalStream != null && this.mLocalStream.Stream != null) {\n            var stream = this.mLocalStream.Stream;\n            var tracks = stream.getAudioTracks();\n            if (tracks.length > 0) {\n                if (tracks[0].enabled)\n                    return false;\n            }\n        }\n        return true;\n    };\n    /**Sets the local audio device to mute / unmute it.\n     *\n     * @param value\n     */\n    BrowserMediaNetwork.prototype.SetMute = function (value) {\n        if (this.mLocalStream != null && this.mLocalStream.Stream != null) {\n            var stream = this.mLocalStream.Stream;\n            var tracks = stream.getAudioTracks();\n            if (tracks.length > 0) {\n                tracks[0].enabled = !value;\n            }\n        }\n    };\n    BrowserMediaNetwork.prototype.CreatePeer = function (peerId, lRtcConfig) {\n        var peer = new _MediaPeer__WEBPACK_IMPORTED_MODULE_3__[\"MediaPeer\"](peerId, lRtcConfig);\n        peer.InternalStreamAdded = this.MediaPeer_InternalMediaStreamAdded;\n        if (this.mLocalStream != null)\n            peer.AddLocalStream(this.mLocalStream.Stream);\n        return peer;\n    };\n    BrowserMediaNetwork.prototype.DisposeInternal = function () {\n        _super.prototype.DisposeInternal.call(this);\n        this.DisposeLocalStream();\n    };\n    BrowserMediaNetwork.prototype.DisposeLocalStream = function () {\n        if (this.mLocalStream != null) {\n            this.mLocalStream.Dispose();\n            this.mLocalStream = null;\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].L(\"local buffer disposed\");\n        }\n    };\n    BrowserMediaNetwork.BuildSignalingConfig = function (signalingUrl) {\n        var signalingNetwork;\n        if (signalingUrl == null || signalingUrl == \"\") {\n            signalingNetwork = new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"LocalNetwork\"]();\n        }\n        else {\n            signalingNetwork = new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketNetwork\"](signalingUrl);\n        }\n        return new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingConfig\"](signalingNetwork);\n    };\n    BrowserMediaNetwork.BuildRtcConfig = function (servers) {\n        var rtcConfig = { iceServers: servers };\n        return rtcConfig;\n    };\n    return BrowserMediaNetwork;\n}(_network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcNetwork\"]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0Jyb3dzZXJNZWRpYU5ldHdvcmsudHM/Nzk5MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFFMEI7QUFDZ0Y7QUFFekQ7QUFFWDtBQUNrQjtBQUNsQjtBQUNSO0FBR2hDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBbUJHO0FBQ0g7SUFBeUMsdUNBQWE7SUFhbEQsNkJBQVksTUFBcUI7UUFBakMsWUFFSSxrQkFBTSxtQkFBbUIsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEVBQy9ELG1CQUFtQixDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsU0FFN0Q7UUFmRCxxQ0FBcUM7UUFDN0Isa0JBQVksR0FBZ0IsSUFBSSxDQUFDO1FBQ3pDLDREQUE0RDtRQUM1RCwwQ0FBMEM7UUFDbEMsa0JBQVksR0FBdUIsSUFBSSxDQUFDO1FBQ3hDLHlCQUFtQixHQUE0Qiw0RUFBdUIsQ0FBQyxPQUFPLENBQUM7UUFDL0UseUJBQW1CLEdBQVcsSUFBSSxDQUFDO1FBQ25DLGtCQUFZLEdBQXNCLElBQUksb0RBQUssRUFBYyxDQUFDO1FBdVExRCx3Q0FBa0MsR0FBRyxVQUFDLElBQWUsRUFBRSxNQUF5QjtZQUVwRixLQUFJLENBQUMsaUJBQWlCLENBQUMsbUVBQWMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDL0YsQ0FBQztRQW5RRyxLQUFJLENBQUMsbUJBQW1CLEdBQUcsNEVBQXVCLENBQUMsZUFBZSxDQUFDOztJQUN2RSxDQUFDO0lBR0Q7Ozs7O09BS0c7SUFDSSx1Q0FBUyxHQUFoQixVQUFpQixNQUFtQjtRQUFwQyxpQkFnREM7UUEvQ0csSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFN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a0NBQWMsR0FBN0IsVUFBOEIsT0FBdUI7UUFFakQsSUFBSSxTQUFTLEdBQXFCLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBQyxDQUFDO1FBQ3pELE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFDTCwwQkFBQztBQUFELENBQUMsQ0FyVHdDLDREQUFhLEdBcVRyRCIsImZpbGUiOiIuL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0Jyb3dzZXJNZWRpYU5ldHdvcmsudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQgeyBXZWJSdGNOZXR3b3JrLCBTTG9nLCBDb25uZWN0aW9uSWQsIFNpZ25hbGluZ0NvbmZpZywgSUJhc2ljTmV0d29yaywgTG9jYWxOZXR3b3JrLCBXZWJzb2NrZXROZXR3b3JrLCBXZWJSdGNEYXRhUGVlciwgUXVldWUgfVxuICAgIGZyb20gXCIuLi9uZXR3b3JrL2luZGV4XCI7XG5pbXBvcnQgeyBJTWVkaWFOZXR3b3JrLCBNZWRpYUNvbmZpZ3VyYXRpb25TdGF0ZSwgTWVkaWFFdmVudCwgTWVkaWFFdmVudFR5cGUgfSBmcm9tIFwiLi4vbWVkaWEvSU1lZGlhTmV0d29ya1wiO1xuaW1wb3J0IHsgTmV0d29ya0NvbmZpZyB9IGZyb20gXCIuLi9tZWRpYS9OZXR3b3JrQ29uZmlnXCI7XG5pbXBvcnQgeyBNZWRpYUNvbmZpZyB9IGZyb20gXCIuLi9tZWRpYS9NZWRpYUNvbmZpZ1wiO1xuaW1wb3J0IHsgSUZyYW1lRGF0YSB9IGZyb20gXCIuLi9tZWRpYS9SYXdGcmFtZVwiO1xuaW1wb3J0IHsgTWVkaWFQZWVyIH0gZnJvbSBcIi4vTWVkaWFQZWVyXCI7XG5pbXBvcnQgeyBCcm93c2VyTWVkaWFTdHJlYW0gfSBmcm9tIFwiLi9Ccm93c2VyTWVkaWFTdHJlYW1cIjtcbmltcG9ydCB7IERldmljZUFwaSB9IGZyb20gXCIuL0RldmljZUFwaVwiO1xuaW1wb3J0IHsgTWVkaWEgfSBmcm9tIFwiLi9NZWRpYVwiO1xuXG5cbi8qKkF2b2lkIHVzaW5nIHRoaXMgY2xhc3MgZGlyZWN0bHkgd2hlbmV2ZXIgcG9zc2libGUuIFVzZSBCcm93c2VyV2ViUnRjQ2FsbCBpbnN0ZWFkLiBcbiAqIEJyb3dzZXJNZWRpYU5ldHdvcmsgbWlnaHQgYmUgc3ViamVjdCB0byBmcmVxdWVudCBjaGFuZ2VzIHRvIGtlZXAgdXAgd2l0aCBjaGFuZ2VzXG4gKiBpbiBhbGwgb3RoZXIgcGxhdGZvcm1zLiAgXG4gKiBcbiAqIElNZWRpYU5ldHdvcmsgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBicm93c2VyLiBUaGUgY2xhc3MgaXMgbW9zdGx5IGlkZW50aWNhbCB3aXRoIHRoZVxuICogQyMgdmVyc2lvbi4gTWFpbiBnb2FsIGlzIHRvIGhhdmUgYW4gaW50ZXJmYWNlIHRoYXQgY2FuIGVhc2lseSBiZSB3cmFwcGVkIHRvIG90aGVyXG4gKiBwcm9ncmFtbWluZyBsYW5ndWFnZXMgYW5kIGdpdmVzIGFjY2VzcyB0byBiYXNpYyBXZWJSVEMgZmVhdHVyZXMgc3VjaCBhcyByZWNlaXZpbmdcbiAqIGFuZCBzZW5kaW5nIGF1ZGlvIGFuZCB2aWRlbyArIHNpZ25hbGluZyB2aWEgd2Vic29ja2V0cy4gXG4gKiBcbiAqIEJyb3dzZXJNZWRpYU5ldHdvcmsgY2FuIGJlIHVzZWQgdG8gc3RyZWFtIGEgbG9jYWwgYXVkaW8gYW5kIHZpZGVvIHRyYWNrIHRvIGEgZ3JvdXAgb2YgXG4gKiBtdWx0aXBsZSBwZWVycyBhbmQgcmVjZWl2ZSByZW1vdGUgdHJhY2tzLiBUaGUgaGFuZGxpbmcgb2YgdGhlIHBlZXJzIGl0c2VsZlxuICogcmVtYWlucyB0aGUgc2FtZSBhcyBXZWJSdGNOZXR3b3JrLlxuICogTG9jYWwgdHJhY2tzIGFyZSBjcmVhdGVkIGFmdGVyIGNhbGxpbmcgQ29uZmlndXJlLiBUaGlzIHdpbGwgcmVxdWVzdCBhY2Nlc3MgZnJvbSB0aGVcbiAqIHVzZXIuIEFmdGVyIHRoZSB1c2VyIGFsbG93ZWQgYWNjZXNzIEdldENvbmZpZ3VyYXRpb25TdGF0ZSB3aWxsIHJldHVybiBDb25maWd1cmVkLlxuICogRXZlcnkgaW5jb21pbmcgYW5kIG91dGdvaW5nIHBlZXIgdGhhdCBpcyBlc3RhYmxpc2hlZCBhZnRlciB0aGlzIHdpbGwgcmVjZWl2ZVxuICogdGhlIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyB0cmFjay4gXG4gKiBTbyBmYXIgQ29uZmlndXJlIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlIGJlZm9yZSBhbnkgcGVlcnMgYXJlIGNvbm5lY3RlZC5cbiAqIFxuICogXG4gKi9cbmV4cG9ydCBjbGFzcyBCcm93c2VyTWVkaWFOZXR3b3JrIGV4dGVuZHMgV2ViUnRjTmV0d29yayBpbXBsZW1lbnRzIElNZWRpYU5ldHdvcmsge1xuXG5cbiAgICAvL21lZGlhIGNvbmZpZ3VyYXRpb24gc2V0IGJ5IHRoZSB1c2VyXG4gICAgcHJpdmF0ZSBtTWVkaWFDb25maWc6IE1lZGlhQ29uZmlnID0gbnVsbDtcbiAgICAvL2tlZXBzIHRyYWNrIG9mIGF1ZGlvIC8gdmlkZW8gdHJhY2tzIGJhc2VkIG9uIGxvY2FsIGRldmljZXNcbiAgICAvL3dpbGwgYmUgc2hhcmVkIHdpdGggYWxsIGNvbm5lY3RlZCBwZWVycy5cbiAgICBwcml2YXRlIG1Mb2NhbFN0cmVhbTogQnJvd3Nlck1lZGlhU3RyZWFtID0gbnVsbDtcbiAgICBwcml2YXRlIG1Db25maWd1cmF0aW9uU3RhdGU6IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlID0gTWVkaWFDb25maWd1cmF0aW9uU3RhdGUuSW52YWxpZDtcbiAgICBwcml2YXRlIG1Db25maWd1cmF0aW9uRXJyb3I6IHN0cmluZyA9IG51bGw7XG4gICAgcHJpdmF0ZSBtTWVkaWFFdmVudHM6IFF1ZXVlPE1lZGlhRXZlbnQ+ID0gbmV3IFF1ZXVlPE1lZGlhRXZlbnQ+KCk7XG5cblxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogTmV0d29ya0NvbmZpZykge1xuXG4gICAgICAgIHN1cGVyKEJyb3dzZXJNZWRpYU5ldHdvcmsuQnVpbGRTaWduYWxpbmdDb25maWcoY29uZmlnLlNpZ25hbGluZ1VybCksXG4gICAgICAgICAgICBCcm93c2VyTWVkaWFOZXR3b3JrLkJ1aWxkUnRjQ29uZmlnKGNvbmZpZy5JY2VTZXJ2ZXJzKSk7XG4gICAgICAgIHRoaXMubUNvbmZpZ3VyYXRpb25TdGF0ZSA9IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlLk5vQ29uZmlndXJhdGlvbjtcbiAgICB9XG5cblxuICAgIC8qKlRyaWdnZXJzIHRoZSBjcmVhdGlvbiBvZiBhIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyB0cmFjay4gQWZ0ZXIgdGhpc1xuICAgICAqIGNhbGwgdGhlIHVzZXIgbWlnaHQgZ2V0IGEgcmVxdWVzdCB0byBhbGxvdyBhY2Nlc3MgdG8gdGhlIHJlcXVlc3RlZCBcbiAgICAgKiBkZXZpY2VzLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBjb25maWcgRGV0YWlsIGNvbmZpZ3VyYXRpb24gZm9yIGF1ZGlvL3ZpZGVvIGRldmljZXMuXG4gICAgICovXG4gICAgcHVibGljIENvbmZpZ3VyZShjb25maWc6IE1lZGlhQ29uZmlnKTogdm9pZCB7XG4gICAgICAgIHRoaXMubU1lZGlhQ29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLm1Db25maWd1cmF0aW9uRXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLm1Db25maWd1cmF0aW9uU3RhdGUgPSBNZWRpYUNvbmZpZ3VyYXRpb25TdGF0ZS5JblByb2dyZXNzO1xuXG5cblxuICAgICAgICBpZiAoY29uZmlnLkF1ZGlvIHx8IGNvbmZpZy5WaWRlbykge1xuICAgICAgICAgICAgU0xvZy5MKFwiY2FsbGluZyBHZXRVc2VyTWVkaWEuIE1lZGlhIGNvbmZpZzogXCIgKyBKU09OLnN0cmluZ2lmeShjb25maWcpKTtcbiAgICAgICAgICAgIGlmKERldmljZUFwaS5Jc1VzZXJNZWRpYUF2YWlsYWJsZSgpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBwcm9taXNlIDogUHJvbWlzZTxNZWRpYVN0cmVhbT4gPSBudWxsO1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBNZWRpYS5TaGFyZWRJbnN0YW5jZS5nZXRVc2VyTWVkaWEoY29uZmlnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oKHN0cmVhbSkgPT4geyAvL3VzZXIgZ2F2ZSBwZXJtaXNzaW9uXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsbHkgdW5yZWxhdGVkIC0+IHVzZXIgZ2F2ZSBhY2Nlc3MgdG8gZGV2aWNlcy4gdXNlIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gZ2V0IHRoZSBwcm9wZXIgbmFtZXMgZm9yIG91ciBEZXZpY2VBcGlcbiAgICAgICAgICAgICAgICAgICAgICAgIERldmljZUFwaS5VcGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGwgd29ya2VkIC0+IHNldHVwIGEgZnJhbWUgYnVmZmVyIHRoYXQgZGVhbHMgd2l0aCB0aGUgcmVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tTG9jYWxTdHJlYW0gPSBuZXcgQnJvd3Nlck1lZGlhU3RyZWFtKHN0cmVhbSBhcyBNZWRpYVN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoXCJMb2NhbCB0cmFja3M6IFwiLCBzdHJlYW0uZ2V0VHJhY2tzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tTG9jYWxTdHJlYW0uSW50ZXJuYWxTdHJlYW1BZGRlZCA9IChzdHJlYW0pPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5FbnF1ZXVlTWVkaWFFdmVudChNZWRpYUV2ZW50VHlwZS5TdHJlYW1BZGRlZCwgQ29ubmVjdGlvbklkLklOVkFMSUQsIHRoaXMubUxvY2FsU3RyZWFtLlZpZGVvRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy91bmxpa2UgbmF0aXZlIHZlcnNpb24gdGhpcyBvbmUgd2lsbCBoYXBwaWx5IHBsYXkgdGhlIGxvY2FsIHNvdW5kIGNhdXNpbmcgYW4gZWNob1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXQgdG8gbXV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tTG9jYWxTdHJlYW0uU2V0TXV0ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuT25Db25maWd1cmF0aW9uU3VjY2VzcygpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLmNhdGNoKChlcnIpPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9mYWlsZWQgZHVlIHRvIGFuIGVycm9yIG9yIHVzZXIgZGlkbid0IGdpdmUgcGVybWlzc2lvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIFNMb2cuTEUoZXJyLm5hbWUgKyBcIjogXCIgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk9uQ29uZmlndXJhdGlvbkZhaWxlZChlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLy9ubyBhY2Nlc3MgdG8gbWVkaWEgZGV2aWNlIC0+IGZhaWxcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBcIkNvbmZpZ3VyYXRpb24gZmFpbGVkLiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGlzIHVuZWRmaW5lZC4gVGhlIGJyb3dzZXIgbWlnaHQgbm90IGFsbG93IG1lZGlhIGFjY2Vzcy5cIiArXG4gICAgICAgICAgICAgICAgXCJJcyB0aGUgcGFnZSBsb2FkZWQgdmlhIGh0dHAgb3IgZmlsZSBVUkw/IFNvbWUgYnJvd3NlcnMgb25seSBzdXBwb3J0IGh0dHBzIVwiO1xuICAgICAgICAgICAgICAgIFNMb2cuTEUoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuT25Db25maWd1cmF0aW9uRmFpbGVkKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuT25Db25maWd1cmF0aW9uU3VjY2VzcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG4gICAgXG4gICAgLyoqQ2FsbCB0aGlzIGV2ZXJ5IHRpbWUgYSBuZXcgZnJhbWUgaXMgc2hvd24gdG8gdGhlIHVzZXIgaW4gcmVhbHRpbWVcbiAgICAgKiBhcHBsaWNhdGlvbnMuXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIFVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuVXBkYXRlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMubUxvY2FsU3RyZWFtICE9IG51bGwpXG4gICAgICAgICAgICB0aGlzLm1Mb2NhbFN0cmVhbS5VcGRhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIEVucXVldWVNZWRpYUV2ZW50KHR5cGU6IE1lZGlhRXZlbnRUeXBlLCBpZDpDb25uZWN0aW9uSWQsIGFyZ3M6IEhUTUxWaWRlb0VsZW1lbnQpXG4gICAge1xuICAgICAgICBsZXQgZXZ0ID0gbmV3IE1lZGlhRXZlbnQodHlwZSwgaWQsIGFyZ3MpO1xuICAgICAgICB0aGlzLm1NZWRpYUV2ZW50cy5FbnF1ZXVlKGV2dCk7XG4gICAgfVxuICAgIHB1YmxpYyBEZXF1ZXVlTWVkaWFFdmVudCgpOiBNZWRpYUV2ZW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5tTWVkaWFFdmVudHMuRGVxdWV1ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoaXMgZXZlcnkgZnJhbWUgYWZ0ZXIgaW50ZXJhY3Rpbmcgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqIFxuICAgICAqIFRoaXMgY2FsbCBtaWdodCBmbHVzaCBidWZmZXJlZCBtZXNzYWdlcyBpbiB0aGUgZnV0dXJlIGFuZCBjbGVhclxuICAgICAqIGV2ZW50cyB0aGF0IHRoZSB1c2VyIGRpZG4ndCBwcm9jZXNzIHRvIGF2b2lkIGJ1ZmZlciBvdmVyZmxvd3MuXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIEZsdXNoKCk6dm9pZHtcbiAgICAgICAgc3VwZXIuRmx1c2goKTtcbiAgICAgICAgdGhpcy5tTWVkaWFFdmVudHMuQ2xlYXIoKTtcbiAgICB9XG5cbiAgICAvKipQb2xsIHRoaXMgYWZ0ZXIgQ29uZmlndXJlIGlzIGNhbGxlZCB0byBnZXQgdGhlIHJlc3VsdC5cbiAgICAgKiBXb24ndCBjaGFuZ2UgYWZ0ZXIgc3RhdGUgaXMgQ29uZmlndXJlZCBvciBGYWlsZWQuXG4gICAgICogXG4gICAgICovXG4gICAgcHVibGljIEdldENvbmZpZ3VyYXRpb25TdGF0ZSgpOiBNZWRpYUNvbmZpZ3VyYXRpb25TdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25maWd1cmF0aW9uU3RhdGU7XG4gICAgfVxuXG4gICAgLyoqUmV0dXJucyB0aGUgZXJyb3IgbWVzc2FnZSBpZiB0aGUgY29uZmlndXJlIHByb2Nlc3MgZmFpbGVkLlxuICAgICAqIFRoaXMgdXNhbGx5IGVpdGhlciBoYXBwZW5zIGJlY2F1c2UgdGhlIHVzZXIgcmVmdXNlZCBhY2Nlc3NcbiAgICAgKiBvciBubyBkZXZpY2UgZnVsZmlsbHMgdGhlIGNvbmZpZ3VyYXRpb24gZ2l2ZW4gXG4gICAgICogKGUuZy4gZGV2aWNlIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgZ2l2ZW4gcmVzb2x1dGlvbilcbiAgICAgKiBcbiAgICAgKi9cbiAgICBwdWJsaWMgR2V0Q29uZmlndXJhdGlvbkVycm9yKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Db25maWd1cmF0aW9uRXJyb3I7XG4gICAgfVxuXG4gICAgLyoqUmVzZXRzIHRoZSBjb25maWd1cmF0aW9uIHN0YXRlIHRvIGFsbG93IG11bHRpcGxlIGF0dGVtcHRzXG4gICAgICogdG8gY2FsbCBDb25maWd1cmUuIFxuICAgICAqIFxuICAgICAqL1xuICAgIHB1YmxpYyBSZXNldENvbmZpZ3VyYXRpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMubUNvbmZpZ3VyYXRpb25TdGF0ZSA9IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlLk5vQ29uZmlndXJhdGlvbjtcbiAgICAgICAgdGhpcy5tTWVkaWFDb25maWcgPSBuZXcgTWVkaWFDb25maWcoKTtcbiAgICAgICAgdGhpcy5tQ29uZmlndXJhdGlvbkVycm9yID0gbnVsbDtcbiAgICB9XG4gICAgcHJpdmF0ZSBPbkNvbmZpZ3VyYXRpb25TdWNjZXNzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1Db25maWd1cmF0aW9uU3RhdGUgPSBNZWRpYUNvbmZpZ3VyYXRpb25TdGF0ZS5TdWNjZXNzZnVsO1xuICAgIH1cblxuICAgIHByaXZhdGUgT25Db25maWd1cmF0aW9uRmFpbGVkKGVycm9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tQ29uZmlndXJhdGlvbkVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMubUNvbmZpZ3VyYXRpb25TdGF0ZSA9IE1lZGlhQ29uZmlndXJhdGlvblN0YXRlLkZhaWxlZDtcbiAgICB9XG5cbiAgICAvKipBbGxvd3MgdG8gcGVlayBhdCB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgKiBBZGRlZCB0byBhbGxvdyB0aGUgZW1zY3JpcHRlbiBDIC8gQyMgc2lkZSB0byBhbGxvY2F0ZSBtZW1vcnkgYmVmb3JlXG4gICAgICogYWN0dWFsbHkgZ2V0dGluZyB0aGUgZnJhbWUuXG4gICAgICogXG4gICAgICogQHBhcmFtIGlkIFxuICAgICAqL1xuICAgIHB1YmxpYyBQZWVrRnJhbWUoaWQ6IENvbm5lY3Rpb25JZCk6IElGcmFtZURhdGEge1xuXG4gICAgICAgIGlmIChpZCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmIChpZC5pZCA9PSBDb25uZWN0aW9uSWQuSU5WQUxJRC5pZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubUxvY2FsU3RyZWFtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tTG9jYWxTdHJlYW0uUGVla0ZyYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGVlciA9IHRoaXMuSWRUb0Nvbm5lY3Rpb25baWQuaWRdIGFzIE1lZGlhUGVlcjtcbiAgICAgICAgICAgIGlmIChwZWVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVlci5QZWVrRnJhbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vVE9ETzogaXRlcmF0ZSBvdmVyIG1lZGlhIHBlZXJzIGFuZCBkbyB0aGUgc2FtZSBhcyBhYm92ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHB1YmxpYyBUcnlHZXRGcmFtZShpZDogQ29ubmVjdGlvbklkKTogSUZyYW1lRGF0YSB7XG5cbiAgICAgICAgaWYgKGlkID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaWYgKGlkLmlkID09IENvbm5lY3Rpb25JZC5JTlZBTElELmlkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tTG9jYWxTdHJlYW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1Mb2NhbFN0cmVhbS5UcnlHZXRGcmFtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHBlZXIgPSB0aGlzLklkVG9Db25uZWN0aW9uW2lkLmlkXSBhcyBNZWRpYVBlZXI7XG4gICAgICAgICAgICBpZiAocGVlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlZXIuVHJ5R2V0UmVtb3RlRnJhbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vVE9ETzogaXRlcmF0ZSBvdmVyIG1lZGlhIHBlZXJzIGFuZCBkbyB0aGUgc2FtZSBhcyBhYm92ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3RlIGF1ZGlvIGNvbnRyb2wgZm9yIGVhY2ggcGVlci4gXG4gICAgICogXG4gICAgICogQHBhcmFtIHZvbHVtZSAwIC0gbXV0ZSBhbmQgMSAtIG1heCB2b2x1bWVcbiAgICAgKiBAcGFyYW0gaWQgcGVlciBpZFxuICAgICAqL1xuICAgIHB1YmxpYyBTZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIGlkOiBDb25uZWN0aW9uSWQpOiB2b2lkIHtcblxuICAgICAgICBTTG9nLkwoXCJTZXRWb2x1bWUgY2FsbGVkLiBWb2x1bWU6IFwiICsgdm9sdW1lICsgXCIgaWQ6IFwiICsgaWQuaWQpO1xuICAgICAgICBsZXQgcGVlciA9IHRoaXMuSWRUb0Nvbm5lY3Rpb25baWQuaWRdIGFzIE1lZGlhUGVlcjtcbiAgICAgICAgaWYgKHBlZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHBlZXIuU2V0Vm9sdW1lKHZvbHVtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFsbG93cyB0byBjaGVjayBpZiBhIHNwZWNpZmljIHBlZXIgaGFzIGEgcmVtb3RlXG4gICAgICogYXVkaW8gdHJhY2sgYXR0YWNoZWQuIFxuICAgICAqIFxuICAgICAqIEBwYXJhbSBpZCBcbiAgICAgKi9cbiAgICBwdWJsaWMgSGFzQXVkaW9UcmFjayhpZDogQ29ubmVjdGlvbklkKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBwZWVyID0gdGhpcy5JZFRvQ29ubmVjdGlvbltpZC5pZF0gYXMgTWVkaWFQZWVyO1xuICAgICAgICBpZiAocGVlciAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVlci5IYXNBdWRpb1RyYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogQWxsb3dzIHRvIGNoZWNrIGlmIGEgc3BlY2lmaWMgcGVlciBoYXMgYSByZW1vdGVcbiAgICAgKiB2aWRlbyB0cmFjayBhdHRhY2hlZC4gXG4gICAgICogXG4gICAgICogQHBhcmFtIGlkIFxuICAgICAqL1xuICAgIHB1YmxpYyBIYXNWaWRlb1RyYWNrKGlkOiBDb25uZWN0aW9uSWQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHBlZXIgPSB0aGlzLklkVG9Db25uZWN0aW9uW2lkLmlkXSBhcyBNZWRpYVBlZXI7XG4gICAgICAgIGlmIChwZWVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBwZWVyLkhhc1ZpZGVvVHJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlJldHVybnMgdHJ1ZSBpZiBubyBsb2NhbCBhdWRpbyBhdmFpbGFibGUgb3IgaXQgaXMgbXV0ZWQuIFxuICAgICAqIEZhbHNlIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZSAoY291bGQgc3RpbGwgbm90IHdvcmsgZHVlIHRvIDAgdm9sdW1lLCBoYXJkd2FyZVxuICAgICAqIHZvbHVtZSBjb250cm9sIG9yIGEgZHVtbXkgYXVkaW8gaW5wdXQgZGV2aWNlIGlzIGJlaW5nIHVzZWQpXG4gICAgICovXG4gICAgcHVibGljIElzTXV0ZSgpOiBib29sZWFuIHtcblxuICAgICAgICBpZih0aGlzLm1Mb2NhbFN0cmVhbSAhPSBudWxsICYmIHRoaXMubUxvY2FsU3RyZWFtLlN0cmVhbSAhPSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtID0gdGhpcy5tTG9jYWxTdHJlYW0uU3RyZWFtO1xuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgICAgICAgICAgaWYodHJhY2tzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYodHJhY2tzWzBdLmVuYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipTZXRzIHRoZSBsb2NhbCBhdWRpbyBkZXZpY2UgdG8gbXV0ZSAvIHVubXV0ZSBpdC5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gdmFsdWUgXG4gICAgICovXG4gICAgcHVibGljIFNldE11dGUodmFsdWU6IGJvb2xlYW4pe1xuICAgICAgICBpZih0aGlzLm1Mb2NhbFN0cmVhbSAhPSBudWxsICYmIHRoaXMubUxvY2FsU3RyZWFtLlN0cmVhbSAhPSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtID0gdGhpcy5tTG9jYWxTdHJlYW0uU3RyZWFtO1xuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgICAgICAgICAgaWYodHJhY2tzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJhY2tzWzBdLmVuYWJsZWQgPSAhdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvdGVjdGVkIENyZWF0ZVBlZXIocGVlcklkOiBDb25uZWN0aW9uSWQsIGxSdGNDb25maWc6IFJUQ0NvbmZpZ3VyYXRpb24pOiBXZWJSdGNEYXRhUGVlciB7XG4gICAgICAgIGxldCBwZWVyID0gbmV3IE1lZGlhUGVlcihwZWVySWQsIGxSdGNDb25maWcpO1xuICAgICAgICBwZWVyLkludGVybmFsU3RyZWFtQWRkZWQgPSB0aGlzLk1lZGlhUGVlcl9JbnRlcm5hbE1lZGlhU3RyZWFtQWRkZWQ7XG4gICAgICAgIGlmICh0aGlzLm1Mb2NhbFN0cmVhbSAhPSBudWxsKVxuICAgICAgICAgICAgcGVlci5BZGRMb2NhbFN0cmVhbSh0aGlzLm1Mb2NhbFN0cmVhbS5TdHJlYW0pO1xuXG4gICAgICAgIHJldHVybiBwZWVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgTWVkaWFQZWVyX0ludGVybmFsTWVkaWFTdHJlYW1BZGRlZCA9IChwZWVyOiBNZWRpYVBlZXIsIHN0cmVhbTpCcm93c2VyTWVkaWFTdHJlYW0pOnZvaWQgPT5cbiAgICB7XG4gICAgICAgIHRoaXMuRW5xdWV1ZU1lZGlhRXZlbnQoTWVkaWFFdmVudFR5cGUuU3RyZWFtQWRkZWQsIHBlZXIuQ29ubmVjdGlvbklkLCBzdHJlYW0uVmlkZW9FbGVtZW50KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgRGlzcG9zZUludGVybmFsKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHN1cGVyLkRpc3Bvc2VJbnRlcm5hbCgpO1xuICAgICAgICB0aGlzLkRpc3Bvc2VMb2NhbFN0cmVhbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgRGlzcG9zZUxvY2FsU3RyZWFtKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLm1Mb2NhbFN0cmVhbSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm1Mb2NhbFN0cmVhbS5EaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1Mb2NhbFN0cmVhbSA9IG51bGw7XG4gICAgICAgICAgICBTTG9nLkwoXCJsb2NhbCBidWZmZXIgZGlzcG9zZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBzdGF0aWMgQnVpbGRTaWduYWxpbmdDb25maWcoc2lnbmFsaW5nVXJsOiBzdHJpbmcpOiBTaWduYWxpbmdDb25maWcge1xuXG4gICAgICAgIGxldCBzaWduYWxpbmdOZXR3b3JrOiBJQmFzaWNOZXR3b3JrO1xuICAgICAgICBpZiAoc2lnbmFsaW5nVXJsID09IG51bGwgfHwgc2lnbmFsaW5nVXJsID09IFwiXCIpIHtcbiAgICAgICAgICAgIHNpZ25hbGluZ05ldHdvcmsgPSBuZXcgTG9jYWxOZXR3b3JrKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaWduYWxpbmdOZXR3b3JrID0gbmV3IFdlYnNvY2tldE5ldHdvcmsoc2lnbmFsaW5nVXJsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpZ25hbGluZ0NvbmZpZyhzaWduYWxpbmdOZXR3b3JrKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBCdWlsZFJ0Y0NvbmZpZyhzZXJ2ZXJzOiBSVENJY2VTZXJ2ZXJbXSk6IFJUQ0NvbmZpZ3VyYXRpb257XG5cbiAgICAgICAgbGV0IHJ0Y0NvbmZpZzogUlRDQ29uZmlndXJhdGlvbiA9IHsgaWNlU2VydmVyczogc2VydmVyc307XG4gICAgICAgIHJldHVybiBydGNDb25maWc7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/BrowserMediaNetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/BrowserMediaStream.ts":
/*!*******************************************************!*\
  !*** ./src/awrtc/media_browser/BrowserMediaStream.ts ***!
  \*******************************************************/
/*! exports provided: BrowserMediaStream */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaStream\", function() { return BrowserMediaStream; });\n/* harmony import */ var _media_RawFrame__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../media/RawFrame */ \"./src/awrtc/media/RawFrame.ts\");\n/* harmony import */ var _network_Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../network/Helper */ \"./src/awrtc/network/Helper.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n/**\n * Mostly used for debugging at the moment. Browser API doesn't seem to have a standard way to\n * determine if a frame was updated. This class currently uses several different methods based\n * on availability\n *\n */\nvar FrameEventMethod;\n(function (FrameEventMethod) {\n    /**We use a set default framerate. FPS is unknown and we can't recognize if a frame was updated.\n     * Used for remote video tracks on firefox as the \"framerate\" property will not be set.\n     */\n    FrameEventMethod[\"DEFAULT_FALLBACK\"] = \"DEFAULT_FALLBACK\";\n    /**\n     * Using the tracks meta data to decide the framerate. We might drop frames or deliver them twice\n     * because we can't tell when exactly they are updated.\n     * Some video devices also claim 30 FPS but generate less causing us to waste performance copying the same image\n     * multipel times\n     *\n     * This system works with local video in firefox\n     */\n    FrameEventMethod[\"TRACK\"] = \"TRACK\";\n    /**\n     *  uses frame numbers returned by the browser. This works for webkit based browsers only so far.\n     *  Firefox is either missing the needed properties or they return always 0\n     */\n    FrameEventMethod[\"EXACT\"] = \"EXACT\";\n})(FrameEventMethod || (FrameEventMethod = {}));\n/**Internal use only.\n * Bundles all functionality related to MediaStream, Tracks and video processing.\n * It creates two HTML elements: Video and Canvas to interact with the video stream\n * and convert the visible frame data to Uint8Array for compatibility with the\n * unity plugin and all other platforms.\n *\n */\nvar BrowserMediaStream = /** @class */ (function () {\n    function BrowserMediaStream(stream) {\n        this.mBufferedFrame = null;\n        this.mInstanceId = 0;\n        this.mCanvasElement = null;\n        this.mIsActive = false;\n        this.mMsPerFrame = 1.0 / BrowserMediaStream.DEFAULT_FRAMERATE * 1000;\n        this.mFrameEventMethod = FrameEventMethod.DEFAULT_FALLBACK;\n        //used to buffer last volume level as part of the\n        //autoplat workaround that will mute the audio until it gets the ok from the user\n        this.mDefaultVolume = 0.5;\n        //Time the last frame was generated\n        this.mLastFrameTime = 0;\n        this.mNextFrameTime = 0;\n        /** Number of the last frame (not yet supported in all browsers)\n         * if it remains at <= 0 then we just generate frames based on\n         * the timer above\n         */\n        this.mLastFrameNumber = 0;\n        this.mHasVideo = false;\n        this.InternalStreamAdded = null;\n        this.mStream = stream;\n        this.mInstanceId = BrowserMediaStream.sNextInstanceId;\n        BrowserMediaStream.sNextInstanceId++;\n        this.mMsPerFrame = 1.0 / BrowserMediaStream.DEFAULT_FRAMERATE * 1000;\n        this.mFrameEventMethod = FrameEventMethod.DEFAULT_FALLBACK;\n        this.SetupElements();\n    }\n    Object.defineProperty(BrowserMediaStream.prototype, \"Stream\", {\n        get: function () {\n            return this.mStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BrowserMediaStream.prototype, \"VideoElement\", {\n        get: function () {\n            return this.mVideoElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    //must be called from onclick, touchstart, ... event handlers\n    BrowserMediaStream.ResolveAutoplay = function () {\n        _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"ResolveAutoplay. Trying to restart video / turn on audio after user interaction \");\n        var streams = BrowserMediaStream.sBlockedStreams;\n        BrowserMediaStream.sBlockedStreams = new Set();\n        for (var _i = 0, _a = Array.from(streams); _i < _a.length; _i++) {\n            var v = _a[_i];\n            v.ResolveAutoplay();\n        }\n    };\n    BrowserMediaStream.prototype.ResolveAutoplay = function () {\n        if (BrowserMediaStream.MUTE_IF_AUTOPLAT_BLOCKED) {\n            _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"Try to replay video with audio. \");\n            //if muted due to autoplay -> unmute\n            this.SetVolume(this.mDefaultVolume);\n            if (this.mVideoElement.muted) {\n                this.mVideoElement.muted = false;\n            }\n        }\n        //call play again if needed\n        if (this.mVideoElement.paused)\n            this.mVideoElement.play();\n    };\n    BrowserMediaStream.prototype.CheckFrameRate = function () {\n        if (this.mVideoElement) {\n            if (this.mStream.getVideoTracks().length > 0) {\n                this.mHasVideo = true;\n                var vtrack = this.mStream.getVideoTracks()[0];\n                var settings = vtrack.getSettings();\n                var fps = settings.frameRate;\n                if (fps) {\n                    if (BrowserMediaStream.VERBOSE) {\n                        console.log(\"Track FPS: \" + fps);\n                    }\n                    this.mMsPerFrame = 1.0 / fps * 1000;\n                    this.mFrameEventMethod = FrameEventMethod.TRACK;\n                }\n            }\n            //try to get the video fps via the track\n            //fails on firefox if the track comes from a remote source\n            if (this.GetFrameNumber() != -1) {\n                if (BrowserMediaStream.VERBOSE) {\n                    console.log(\"Get frame available.\");\n                }\n                //browser returns exact frame information\n                this.mFrameEventMethod = FrameEventMethod.EXACT;\n            }\n            //failed to determine any frame rate. This happens on firefox with\n            //remote tracks\n            if (this.mFrameEventMethod === FrameEventMethod.DEFAULT_FALLBACK) {\n                //firefox and co won't tell us the FPS for remote stream\n                _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LW(\"Framerate unknown for stream \" + this.mInstanceId + \". Using default framerate of \" + BrowserMediaStream.DEFAULT_FRAMERATE);\n            }\n        }\n    };\n    BrowserMediaStream.prototype.TriggerAutoplayBlockled = function () {\n        BrowserMediaStream.sBlockedStreams.add(this);\n        if (BrowserMediaStream.onautoplayblocked !== null) {\n            BrowserMediaStream.onautoplayblocked();\n        }\n    };\n    BrowserMediaStream.prototype.TryPlay = function () {\n        var _this = this;\n        var playPromise = this.mVideoElement.play();\n        this.mDefaultVolume = this.mVideoElement.volume;\n        if (typeof playPromise !== \"undefined\") {\n            playPromise.then(function () {\n                //all good\n            }).catch(function (error) {\n                if (BrowserMediaStream.MUTE_IF_AUTOPLAT_BLOCKED === false) {\n                    //browser blocked replay. print error & setup auto play workaround\n                    console.error(error);\n                    _this.TriggerAutoplayBlockled();\n                }\n                else {\n                    //Below: Safari on Mac is able to just deactivate audio and show the video\n                    //once user interacts with the content audio will be activated again via SetVolue\n                    //WARNING: This fails on iOS! SetVolume fails and audio won't ever come back\n                    //keep MUTE_IF_AUTOPLAT_BLOCKED === false for iOS support\n                    console.warn(error);\n                    _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LW(\"Replay of video failed. The browser might have blocked the video due to autoplay restrictions. Retrying without audio ...\");\n                    //try to play without audio enabled\n                    _this.SetVolume(0);\n                    var promise2 = _this.mVideoElement.play();\n                    if (typeof promise2 !== \"undefined\") {\n                        promise2.then(function () {\n                            _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"Playing video successful but muted.\");\n                            //still trigger for unmute on next click\n                            _this.TriggerAutoplayBlockled();\n                        }).catch(function (error) {\n                            _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LE(\"Replay of video failed. This error is likely caused due to autoplay restrictions of the browser. Try allowing autoplay.\");\n                            console.error(error);\n                            _this.TriggerAutoplayBlockled();\n                        });\n                    }\n                }\n            });\n        }\n    };\n    BrowserMediaStream.prototype.SetupElements = function () {\n        var _this = this;\n        this.mVideoElement = this.SetupVideoElement();\n        //TOOD: investigate bug here\n        //In some cases onloadedmetadata is never called. This might happen due to a \n        //bug in firefox or might be related to a device / driver error\n        //So far it only happens randomly (maybe 1 in 10 tries) on a single test device and only\n        //with 720p. (video device \"BisonCam, NB Pro\" on MSI laptop)\n        _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"video element created. video tracks: \" + this.mStream.getVideoTracks().length);\n        this.mVideoElement.onloadedmetadata = function (e) {\n            //console.log(\"onloadedmetadata\");\n            //we might have shutdown everything by now already\n            if (_this.mVideoElement == null)\n                return;\n            _this.TryPlay();\n            if (_this.InternalStreamAdded != null)\n                _this.InternalStreamAdded(_this);\n            _this.CheckFrameRate();\n            var video_log = \"Resolution: \" + _this.mVideoElement.videoWidth + \"x\" + _this.mVideoElement.videoHeight\n                + \" fps method: \" + _this.mFrameEventMethod + \" \" + Math.round(1000 / (_this.mMsPerFrame));\n            _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(video_log);\n            if (BrowserMediaStream.VERBOSE) {\n                console.log(video_log);\n            }\n            //now create canvas after the meta data of the video are known\n            if (_this.mHasVideo) {\n                _this.mCanvasElement = _this.SetupCanvas();\n                //canvas couldn't be created. set video to false\n                if (_this.mCanvasElement == null)\n                    _this.mHasVideo = false;\n            }\n            else {\n                _this.mCanvasElement = null;\n            }\n            _this.mIsActive = true;\n        };\n        //set the src value and trigger onloadedmetadata above\n        try {\n            //newer method. not yet supported everywhere\n            var element = this.mVideoElement;\n            element.srcObject = this.mStream;\n        }\n        catch (error) {\n            //old way of doing it. won't work anymore in firefox and possibly other browsers\n            this.mVideoElement.src = window.URL.createObjectURL(this.mStream);\n        }\n    };\n    /** Returns the current frame number.\n     *  Treat a return value of 0 or smaller as unknown.\n     * (Browsers might have the property but\n     * always return 0)\n     */\n    BrowserMediaStream.prototype.GetFrameNumber = function () {\n        var frameNumber;\n        if (this.mVideoElement) {\n            if (this.mVideoElement.webkitDecodedFrameCount) {\n                frameNumber = this.mVideoElement.webkitDecodedFrameCount;\n            }\n            /*\n            None of these work and future versions might return numbers that are only\n            updated once a second or so. For now it is best to ignore these.\n\n            TODO: Check if any of these will work in the future. this.mVideoElement.getVideoPlaybackQuality().totalVideoFrames;\n            might also help in the future (so far always 0)\n            this.mVideoElement.currentTime also won't work because this is updated faster than the framerate (would result in >100+ framerate)\n            else if((this.mVideoElement as any).mozParsedFrames)\n            {\n                frameNumber = (this.mVideoElement as any).mozParsedFrames;\n            }else if((this.mVideoElement as any).mozDecodedFrames)\n            {\n                frameNumber = (this.mVideoElement as any).mozDecodedFrames;\n            }else if((this.mVideoElement as any).decodedFrameCount)\n            {\n                frameNumber = (this.mVideoElement as any).decodedFrameCount;\n            }\n            */\n            else {\n                frameNumber = -1;\n            }\n        }\n        else {\n            frameNumber = -1;\n        }\n        return frameNumber;\n    };\n    BrowserMediaStream.prototype.TryGetFrame = function () {\n        //make sure we get the newest frame\n        //this.EnsureLatestFrame();\n        //remove the buffered frame if any\n        var result = this.mBufferedFrame;\n        this.mBufferedFrame = null;\n        return result;\n    };\n    BrowserMediaStream.prototype.SetMute = function (mute) {\n        this.mVideoElement.muted = mute;\n    };\n    BrowserMediaStream.prototype.PeekFrame = function () {\n        //this.EnsureLatestFrame();\n        return this.mBufferedFrame;\n    };\n    /** Ensures we have the latest frame ready\n     * for the next PeekFrame / TryGetFrame calls\n     */\n    BrowserMediaStream.prototype.EnsureLatestFrame = function () {\n        if (this.HasNewerFrame()) {\n            this.GenerateFrame();\n            return true;\n        }\n        return false;\n    };\n    /** checks if the html tag has a newer frame available\n     * (or if 1/30th of a second passed since last frame if\n     * this info isn't available)\n     */\n    BrowserMediaStream.prototype.HasNewerFrame = function () {\n        if (this.mIsActive\n            && this.mHasVideo\n            && this.mCanvasElement != null) {\n            if (this.mLastFrameNumber > 0) {\n                this.mFrameEventMethod = FrameEventMethod.EXACT;\n                //we are getting frame numbers. use those to \n                //check if we have a new one\n                if (this.GetFrameNumber() > this.mLastFrameNumber) {\n                    return true;\n                }\n            }\n            else {\n                //many browsers do not share the frame info\n                var now = new Date().getTime();\n                if (this.mNextFrameTime <= now) {\n                    {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    };\n    BrowserMediaStream.prototype.Update = function () {\n        this.EnsureLatestFrame();\n    };\n    BrowserMediaStream.prototype.DestroyCanvas = function () {\n        if (this.mCanvasElement != null && this.mCanvasElement.parentElement != null) {\n            this.mCanvasElement.parentElement.removeChild(this.mCanvasElement);\n        }\n    };\n    BrowserMediaStream.prototype.Dispose = function () {\n        this.mIsActive = false;\n        BrowserMediaStream.sBlockedStreams.delete(this);\n        this.DestroyCanvas();\n        if (this.mVideoElement != null && this.mVideoElement.parentElement != null) {\n            this.mVideoElement.parentElement.removeChild(this.mVideoElement);\n        }\n        //track cleanup is probably not needed but\n        //it might help ensure it properly stops\n        //in case there are other references out there\n        var tracks = this.mStream.getTracks();\n        for (var i = 0; i < tracks.length; i++) {\n            tracks[i].stop();\n        }\n        this.mStream = null;\n        this.mVideoElement = null;\n        this.mCanvasElement = null;\n    };\n    BrowserMediaStream.prototype.CreateFrame = function () {\n        this.mCanvasElement.width = this.mVideoElement.videoWidth;\n        this.mCanvasElement.height = this.mVideoElement.videoHeight;\n        var ctx = this.mCanvasElement.getContext(\"2d\");\n        /*\n        var fillBackgroundFirst = true;\n        if (fillBackgroundFirst) {\n            ctx.clearRect(0, 0, this.mCanvasElement.width, this.mCanvasElement.height);\n        }\n        */\n        ctx.drawImage(this.mVideoElement, 0, 0);\n        try {\n            //risk of security exception in firefox\n            var imgData = ctx.getImageData(0, 0, this.mCanvasElement.width, this.mCanvasElement.height);\n            var imgRawData = imgData.data;\n            var array = new Uint8Array(imgRawData.buffer);\n            return new _media_RawFrame__WEBPACK_IMPORTED_MODULE_0__[\"RawFrame\"](array, this.mCanvasElement.width, this.mCanvasElement.height);\n        }\n        catch (exception) {\n            //show white frame for now\n            var array = new Uint8Array(this.mCanvasElement.width * this.mCanvasElement.height * 4);\n            array.fill(255, 0, array.length - 1);\n            var res = new _media_RawFrame__WEBPACK_IMPORTED_MODULE_0__[\"RawFrame\"](array, this.mCanvasElement.width, this.mCanvasElement.height);\n            //attempted workaround for firefox bug / suspected cause: \n            // * root cause seems to be an internal origin-clean flag within the canvas. If set to false reading from the\n            //   canvas triggers a security exceptions. This is usually used if the canvas contains data that isn't \n            //   suppose to be accessible e.g. a picture from another domain\n            // * while moving the image to the canvas the origin-clean flag seems to be set to false but only \n            //   during the first few frames. (maybe a race condition within firefox? A higher CPU workload increases the risk)\n            // * the canvas will work and look just fine but calling getImageData isn't allowed anymore\n            // * After a few frames the video is back to normal but the canvas will still have the flag set to false\n            // \n            //Solution:\n            // * Recreate the canvas if the exception is triggered. During the next few frames firefox should get its flag right\n            //   and then stop causing the error. It might recreate the canvas multiple times until it finally works as we\n            //   can't detect if the video element will trigger the issue until we tried to access the data\n            _network_Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogWarning(\"Firefox workaround: Refused access to the remote video buffer. Retrying next frame...\");\n            this.DestroyCanvas();\n            this.mCanvasElement = this.SetupCanvas();\n            return res;\n        }\n    };\n    //Old buffed frame was replaced with a wrapepr that avoids buffering internally\n    //Only point of generate frame is now to ensure a consistent framerate\n    BrowserMediaStream.prototype.GenerateFrame = function () {\n        this.mLastFrameNumber = this.GetFrameNumber();\n        var now = new Date().getTime();\n        //js timing is very inaccurate. reduce time until next frame if we are\n        //late with this one.\n        var diff = now - this.mNextFrameTime;\n        var delta = (this.mMsPerFrame - diff);\n        delta = Math.min(this.mMsPerFrame, Math.max(1, delta));\n        this.mLastFrameTime = now;\n        this.mNextFrameTime = now + delta;\n        //console.log(\"last frame , new frame\", this.mLastFrameTime, this.mNextFrameTime, delta);\n        this.mBufferedFrame = new _media_RawFrame__WEBPACK_IMPORTED_MODULE_0__[\"LazyFrame\"](this);\n    };\n    BrowserMediaStream.prototype.SetupVideoElement = function () {\n        var videoElement = document.createElement(\"video\");\n        //width/doesn't seem to be important\n        videoElement.width = 320;\n        videoElement.height = 240;\n        videoElement.controls = true;\n        videoElement.setAttribute(\"playsinline\", \"\");\n        videoElement.id = \"awrtc_mediastream_video_\" + this.mInstanceId;\n        //videoElement.muted = true;\n        if (BrowserMediaStream.DEBUG_SHOW_ELEMENTS)\n            document.body.appendChild(videoElement);\n        return videoElement;\n    };\n    BrowserMediaStream.prototype.SetupCanvas = function () {\n        if (this.mVideoElement == null || this.mVideoElement.videoWidth <= 0 ||\n            this.mVideoElement.videoHeight <= 0)\n            return null;\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = this.mVideoElement.videoWidth;\n        canvas.height = this.mVideoElement.videoHeight;\n        canvas.id = \"awrtc_mediastream_canvas_\" + this.mInstanceId;\n        if (BrowserMediaStream.DEBUG_SHOW_ELEMENTS)\n            document.body.appendChild(canvas);\n        return canvas;\n    };\n    BrowserMediaStream.prototype.SetVolume = function (volume) {\n        if (this.mVideoElement == null) {\n            return;\n        }\n        if (volume < 0)\n            volume = 0;\n        if (volume > 1)\n            volume = 1;\n        this.mVideoElement.volume = volume;\n    };\n    BrowserMediaStream.prototype.HasAudioTrack = function () {\n        if (this.mStream != null && this.mStream.getAudioTracks() != null\n            && this.mStream.getAudioTracks().length > 0) {\n            return true;\n        }\n        return false;\n    };\n    BrowserMediaStream.prototype.HasVideoTrack = function () {\n        if (this.mStream != null && this.mStream.getVideoTracks() != null\n            && this.mStream.getVideoTracks().length > 0) {\n            return true;\n        }\n        return false;\n    };\n    //no double buffering in java script as it forces us to create a new frame each time\n    //for debugging. Will attach the HTMLVideoElement used to play the local and remote\n    //video streams to the document.\n    BrowserMediaStream.DEBUG_SHOW_ELEMENTS = false;\n    BrowserMediaStream.MUTE_IF_AUTOPLAT_BLOCKED = false;\n    //Gives each FrameBuffer and its HTMLVideoElement a fixed id for debugging purposes.\n    BrowserMediaStream.sNextInstanceId = 1;\n    BrowserMediaStream.VERBOSE = false;\n    //Framerate used as a workaround if\n    //the actual framerate is unknown due to browser restrictions\n    BrowserMediaStream.DEFAULT_FRAMERATE = 30;\n    BrowserMediaStream.sBlockedStreams = new Set();\n    BrowserMediaStream.onautoplayblocked = null;\n    return BrowserMediaStream;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0Jyb3dzZXJNZWRpYVN0cmVhbS50cz8zYWVhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDa0U7QUFDM0I7QUFHekM7Ozs7O0dBS0c7QUFDSCxJQUFLLGdCQW1CSjtBQW5CRCxXQUFLLGdCQUFnQjtJQUNqQjs7T0FFRztJQUNILHlEQUFxQztJQUNyQzs7Ozs7OztPQU9HO0lBQ0gsbUNBQWU7SUFDZjs7O09BR0c7SUFDSCxtQ0FBZTtBQUNuQixDQUFDLEVBbkJJLGdCQUFnQixLQUFoQixnQkFBZ0IsUUFtQnBCO0FBRUQ7Ozs7OztHQU1HO0FBQ0g7SUEwRkksNEJBQVksTUFBbUI7UUFyRXZCLG1CQUFjLEdBQWUsSUFBSSxDQUFDO1FBRWxDLGdCQUFXLEdBQUcsQ0FBQyxDQUFDO1FBTWhCLG1CQUFjLEdBQXNCLElBQUksQ0FBQztRQUN6QyxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBS2xCLGdCQUFXLEdBQUcsR0FBRyxHQUFHLGtCQUFrQixDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUVoRSxzQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQztRQUM5RCxpREFBaUQ7UUFDakQsaUZBQWlGO1FBQ3pFLG1CQUFjLEdBQUcsR0FBRyxDQUFDO1FBRzdCLG1DQUFtQztRQUMzQixtQkFBYyxHQUFHLENBQUMsQ0FBQztRQUNuQixtQkFBYyxHQUFHLENBQUMsQ0FBQztRQUUzQjs7O1dBR0c7UUFDSyxxQkFBZ0IsR0FBRyxDQUFDLENBQUM7UUFFckIsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUU1Qix3QkFBbUIsR0FBeUMsSUFBSSxDQUFDO1FBb0NwRSxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxHQUFHLGtCQUFrQixDQUFDLGVB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QUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLElBQUk7ZUFDMUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzdDLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBQ00sMENBQWEsR0FBcEI7UUFDSSxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLElBQUksSUFBSTtlQUMxRCxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDN0MsT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFsZ0JELG9GQUFvRjtJQUVwRixtRkFBbUY7SUFDbkYsZ0NBQWdDO0lBQ2xCLHNDQUFtQixHQUFHLEtBQUssQ0FBQztJQUM1QiwyQ0FBd0IsR0FBRyxLQUFLLENBQUM7SUFHL0Msb0ZBQW9GO0lBQ3RFLGtDQUFlLEdBQUcsQ0FBQyxDQUFDO0lBR3BCLDBCQUFPLEdBQUcsS0FBSyxDQUFDO0lBa0I5QixtQ0FBbUM7SUFDbkMsNkRBQTZEO0lBQy9DLG9DQUFpQixHQUFHLEVBQUUsQ0FBQztJQXVCdEIsa0NBQWUsR0FBNkIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN2RCxvQ0FBaUIsR0FBZSxJQUFJLENBQUM7SUE2Y3ZELHlCQUFDO0NBQUE7QUF2Z0I4QiIsImZpbGUiOiIuL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0Jyb3dzZXJNZWRpYVN0cmVhbS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbmltcG9ydCB7IElGcmFtZURhdGEsIFJhd0ZyYW1lLCBMYXp5RnJhbWUgfSBmcm9tIFwiLi4vbWVkaWEvUmF3RnJhbWVcIjtcbmltcG9ydCB7IFNMb2cgfSBmcm9tIFwiLi4vbmV0d29yay9IZWxwZXJcIjtcblxuXG4vKipcbiAqIE1vc3RseSB1c2VkIGZvciBkZWJ1Z2dpbmcgYXQgdGhlIG1vbWVudC4gQnJvd3NlciBBUEkgZG9lc24ndCBzZWVtIHRvIGhhdmUgYSBzdGFuZGFyZCB3YXkgdG9cbiAqIGRldGVybWluZSBpZiBhIGZyYW1lIHdhcyB1cGRhdGVkLiBUaGlzIGNsYXNzIGN1cnJlbnRseSB1c2VzIHNldmVyYWwgZGlmZmVyZW50IG1ldGhvZHMgYmFzZWRcbiAqIG9uIGF2YWlsYWJpbGl0eSBcbiAqIFxuICovXG5lbnVtIEZyYW1lRXZlbnRNZXRob2R7XG4gICAgLyoqV2UgdXNlIGEgc2V0IGRlZmF1bHQgZnJhbWVyYXRlLiBGUFMgaXMgdW5rbm93biBhbmQgd2UgY2FuJ3QgcmVjb2duaXplIGlmIGEgZnJhbWUgd2FzIHVwZGF0ZWQuIFxuICAgICAqIFVzZWQgZm9yIHJlbW90ZSB2aWRlbyB0cmFja3Mgb24gZmlyZWZveCBhcyB0aGUgXCJmcmFtZXJhdGVcIiBwcm9wZXJ0eSB3aWxsIG5vdCBiZSBzZXQuXG4gICAgICovXG4gICAgREVGQVVMVF9GQUxMQkFDSyA9IFwiREVGQVVMVF9GQUxMQkFDS1wiLFxuICAgIC8qKlxuICAgICAqIFVzaW5nIHRoZSB0cmFja3MgbWV0YSBkYXRhIHRvIGRlY2lkZSB0aGUgZnJhbWVyYXRlLiBXZSBtaWdodCBkcm9wIGZyYW1lcyBvciBkZWxpdmVyIHRoZW0gdHdpY2VcbiAgICAgKiBiZWNhdXNlIHdlIGNhbid0IHRlbGwgd2hlbiBleGFjdGx5IHRoZXkgYXJlIHVwZGF0ZWQuXG4gICAgICogU29tZSB2aWRlbyBkZXZpY2VzIGFsc28gY2xhaW0gMzAgRlBTIGJ1dCBnZW5lcmF0ZSBsZXNzIGNhdXNpbmcgdXMgdG8gd2FzdGUgcGVyZm9ybWFuY2UgY29weWluZyB0aGUgc2FtZSBpbWFnZVxuICAgICAqIG11bHRpcGVsIHRpbWVzXG4gICAgICogXG4gICAgICogVGhpcyBzeXN0ZW0gd29ya3Mgd2l0aCBsb2NhbCB2aWRlbyBpbiBmaXJlZm94XG4gICAgICovXG4gICAgVFJBQ0sgPSBcIlRSQUNLXCIsXG4gICAgLyoqXG4gICAgICogIHVzZXMgZnJhbWUgbnVtYmVycyByZXR1cm5lZCBieSB0aGUgYnJvd3Nlci4gVGhpcyB3b3JrcyBmb3Igd2Via2l0IGJhc2VkIGJyb3dzZXJzIG9ubHkgc28gZmFyLlxuICAgICAqICBGaXJlZm94IGlzIGVpdGhlciBtaXNzaW5nIHRoZSBuZWVkZWQgcHJvcGVydGllcyBvciB0aGV5IHJldHVybiBhbHdheXMgMFxuICAgICAqL1xuICAgIEVYQUNUID0gXCJFWEFDVFwiXG59XG5cbi8qKkludGVybmFsIHVzZSBvbmx5LiBcbiAqIEJ1bmRsZXMgYWxsIGZ1bmN0aW9uYWxpdHkgcmVsYXRlZCB0byBNZWRpYVN0cmVhbSwgVHJhY2tzIGFuZCB2aWRlbyBwcm9jZXNzaW5nLlxuICogSXQgY3JlYXRlcyB0d28gSFRNTCBlbGVtZW50czogVmlkZW8gYW5kIENhbnZhcyB0byBpbnRlcmFjdCB3aXRoIHRoZSB2aWRlbyBzdHJlYW1cbiAqIGFuZCBjb252ZXJ0IHRoZSB2aXNpYmxlIGZyYW1lIGRhdGEgdG8gVWludDhBcnJheSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZVxuICogdW5pdHkgcGx1Z2luIGFuZCBhbGwgb3RoZXIgcGxhdGZvcm1zLlxuICogXG4gKi9cbmV4cG9ydCBjbGFzcyBCcm93c2VyTWVkaWFTdHJlYW0ge1xuXG4gICAgLy9ubyBkb3VibGUgYnVmZmVyaW5nIGluIGphdmEgc2NyaXB0IGFzIGl0IGZvcmNlcyB1cyB0byBjcmVhdGUgYSBuZXcgZnJhbWUgZWFjaCB0aW1lXG5cbiAgICAvL2ZvciBkZWJ1Z2dpbmcuIFdpbGwgYXR0YWNoIHRoZSBIVE1MVmlkZW9FbGVtZW50IHVzZWQgdG8gcGxheSB0aGUgbG9jYWwgYW5kIHJlbW90ZVxuICAgIC8vdmlkZW8gc3RyZWFtcyB0byB0aGUgZG9jdW1lbnQuXG4gICAgcHVibGljIHN0YXRpYyBERUJVR19TSE9XX0VMRU1FTlRTID0gZmFsc2U7XG4gICAgcHVibGljIHN0YXRpYyBNVVRFX0lGX0FVVE9QTEFUX0JMT0NLRUQgPSBmYWxzZTtcbiAgICBcblxuICAgIC8vR2l2ZXMgZWFjaCBGcmFtZUJ1ZmZlciBhbmQgaXRzIEhUTUxWaWRlb0VsZW1lbnQgYSBmaXhlZCBpZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzLlxuICAgIHB1YmxpYyBzdGF0aWMgc05leHRJbnN0YW5jZUlkID0gMTtcblxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgVkVSQk9TRSA9IGZhbHNlO1xuXG5cbiAgICBwcml2YXRlIG1TdHJlYW06IE1lZGlhU3RyZWFtO1xuICAgIHB1YmxpYyBnZXQgU3RyZWFtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tU3RyZWFtO1xuICAgIH1cbiAgICBwcml2YXRlIG1CdWZmZXJlZEZyYW1lOiBJRnJhbWVEYXRhID0gbnVsbDtcblxuICAgIHByaXZhdGUgbUluc3RhbmNlSWQgPSAwO1xuXG4gICAgcHJpdmF0ZSBtVmlkZW9FbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50O1xuICAgIHB1YmxpYyBnZXQgVmlkZW9FbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tVmlkZW9FbGVtZW50O1xuICAgIH1cbiAgICBwcml2YXRlIG1DYW52YXNFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCA9IG51bGw7XG4gICAgcHJpdmF0ZSBtSXNBY3RpdmUgPSBmYWxzZTtcblxuICAgIC8vRnJhbWVyYXRlIHVzZWQgYXMgYSB3b3JrYXJvdW5kIGlmXG4gICAgLy90aGUgYWN0dWFsIGZyYW1lcmF0ZSBpcyB1bmtub3duIGR1ZSB0byBicm93c2VyIHJlc3RyaWN0aW9uc1xuICAgIHB1YmxpYyBzdGF0aWMgREVGQVVMVF9GUkFNRVJBVEUgPSAzMDtcbiAgICBwcml2YXRlIG1Nc1BlckZyYW1lID0gMS4wIC8gQnJvd3Nlck1lZGlhU3RyZWFtLkRFRkFVTFRfRlJBTUVSQVRFICogMTAwMDtcblxuICAgIHByaXZhdGUgbUZyYW1lRXZlbnRNZXRob2QgPSBGcmFtZUV2ZW50TWV0aG9kLkRFRkFVTFRfRkFMTEJBQ0s7XG4gICAgLy91c2VkIHRvIGJ1ZmZlciBsYXN0IHZvbHVtZSBsZXZlbCBhcyBwYXJ0IG9mIHRoZVxuICAgIC8vYXV0b3BsYXQgd29ya2Fyb3VuZCB0aGF0IHdpbGwgbXV0ZSB0aGUgYXVkaW8gdW50aWwgaXQgZ2V0cyB0aGUgb2sgZnJvbSB0aGUgdXNlclxuICAgIHByaXZhdGUgbURlZmF1bHRWb2x1bWUgPSAwLjU7XG4gICAgXG5cbiAgICAvL1RpbWUgdGhlIGxhc3QgZnJhbWUgd2FzIGdlbmVyYXRlZFxuICAgIHByaXZhdGUgbUxhc3RGcmFtZVRpbWUgPSAwO1xuICAgIHByaXZhdGUgbU5leHRGcmFtZVRpbWUgPSAwO1xuXG4gICAgLyoqIE51bWJlciBvZiB0aGUgbGFzdCBmcmFtZSAobm90IHlldCBzdXBwb3J0ZWQgaW4gYWxsIGJyb3dzZXJzKVxuICAgICAqIGlmIGl0IHJlbWFpbnMgYXQgPD0gMCB0aGVuIHdlIGp1c3QgZ2VuZXJhdGUgZnJhbWVzIGJhc2VkIG9uXG4gICAgICogdGhlIHRpbWVyIGFib3ZlXG4gICAgICovXG4gICAgcHJpdmF0ZSBtTGFzdEZyYW1lTnVtYmVyID0gMDtcblxuICAgIHByaXZhdGUgbUhhc1ZpZGVvOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBwdWJsaWMgSW50ZXJuYWxTdHJlYW1BZGRlZDogKHN0cmVhbTogQnJvd3Nlck1lZGlhU3RyZWFtKSA9PiB2b2lkID0gbnVsbDtcblxuICAgIHByaXZhdGUgc3RhdGljIHNCbG9ja2VkU3RyZWFtcyA6IFNldDxCcm93c2VyTWVkaWFTdHJlYW0+ID0gbmV3IFNldCgpO1xuICAgIHB1YmxpYyBzdGF0aWMgb25hdXRvcGxheWJsb2NrZWQ6ICgpID0+IHZvaWQgPSBudWxsO1xuXG4gICAgLy9tdXN0IGJlIGNhbGxlZCBmcm9tIG9uY2xpY2ssIHRvdWNoc3RhcnQsIC4uLiBldmVudCBoYW5kbGVyc1xuICAgIHB1YmxpYyBzdGF0aWMgUmVzb2x2ZUF1dG9wbGF5KCkgOiB2b2lke1xuXG4gICAgICAgIFNMb2cuTChcIlJlc29sdmVBdXRvcGxheS4gVHJ5aW5nIHRvIHJlc3RhcnQgdmlkZW8gLyB0dXJuIG9uIGF1ZGlvIGFmdGVyIHVzZXIgaW50ZXJhY3Rpb24gXCIgKTtcbiAgICAgICAgbGV0IHN0cmVhbXMgPSBCcm93c2VyTWVkaWFTdHJlYW0uc0Jsb2NrZWRTdHJlYW1zO1xuICAgICAgICBCcm93c2VyTWVkaWFTdHJlYW0uc0Jsb2NrZWRTdHJlYW1zID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IobGV0IHYgb2YgQXJyYXkuZnJvbShzdHJlYW1zKSl7XG4gICAgICAgICAgICB2LlJlc29sdmVBdXRvcGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBSZXNvbHZlQXV0b3BsYXkoKTp2b2lke1xuICAgICAgICBcbiAgICAgICAgaWYoQnJvd3Nlck1lZGlhU3RyZWFtLk1VVEVfSUZfQVVUT1BMQVRfQkxPQ0tFRClcbiAgICAgICAge1xuICAgICAgICAgICAgU0xvZy5MKFwiVHJ5IHRvIHJlcGxheSB2aWRlbyB3aXRoIGF1ZGlvLiBcIiApO1xuICAgICAgICAgICAgLy9pZiBtdXRlZCBkdWUgdG8gYXV0b3BsYXkgLT4gdW5tdXRlXG4gICAgICAgICAgICB0aGlzLlNldFZvbHVtZSh0aGlzLm1EZWZhdWx0Vm9sdW1lKTtcblxuICAgICAgICAgICAgaWYodGhpcy5tVmlkZW9FbGVtZW50Lm11dGVkKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1WaWRlb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vY2FsbCBwbGF5IGFnYWluIGlmIG5lZWRlZFxuICAgICAgICBpZih0aGlzLm1WaWRlb0VsZW1lbnQucGF1c2VkKVxuICAgICAgICAgICAgdGhpcy5tVmlkZW9FbGVtZW50LnBsYXkoKTtcblxuICAgIH1cblxuXG4gICAgY29uc3RydWN0b3Ioc3RyZWFtOiBNZWRpYVN0cmVhbSkge1xuICAgICAgICB0aGlzLm1TdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMubUluc3RhbmNlSWQgPSBCcm93c2VyTWVkaWFTdHJlYW0uc05leHRJbnN0YW5jZUlkO1xuICAgICAgICBCcm93c2VyTWVkaWFTdHJlYW0uc05leHRJbnN0YW5jZUlkKys7XG5cbiAgICAgICAgdGhpcy5tTXNQZXJGcmFtZSA9IDEuMCAvIEJyb3dzZXJNZWRpYVN0cmVhbS5ERUZBVUxUX0ZSQU1FUkFURSAqIDEwMDA7XG4gICAgICAgIHRoaXMubUZyYW1lRXZlbnRNZXRob2QgPSBGcmFtZUV2ZW50TWV0aG9kLkRFRkFVTFRfRkFMTEJBQ0s7XG4gICAgICAgIFxuXG4gICAgICAgIHRoaXMuU2V0dXBFbGVtZW50cygpO1xuICAgIH1cbiAgICBwcml2YXRlIENoZWNrRnJhbWVSYXRlKCk6dm9pZFxuICAgIHtcbiAgICAgICAgaWYodGhpcy5tVmlkZW9FbGVtZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5tU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1IYXNWaWRlbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IHZ0cmFjayA9IHRoaXMubVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHZ0cmFjay5nZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGxldCBmcHMgPSBzZXR0aW5ncy5mcmFtZVJhdGU7XG4gICAgICAgICAgICAgICAgaWYoZnBzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoQnJvd3Nlck1lZGlhU3RyZWFtLlZFUkJPU0UpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVHJhY2sgRlBTOiBcIiArIGZwcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tTXNQZXJGcmFtZSA9IDEuMCAvIGZwcyAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubUZyYW1lRXZlbnRNZXRob2QgPSBGcmFtZUV2ZW50TWV0aG9kLlRSQUNLO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy90cnkgdG8gZ2V0IHRoZSB2aWRlbyBmcHMgdmlhIHRoZSB0cmFja1xuICAgICAgICAgICAgLy9mYWlscyBvbiBmaXJlZm94IGlmIHRoZSB0cmFjayBjb21lcyBmcm9tIGEgcmVtb3RlIHNvdXJjZVxuICAgICAgICAgICAgaWYodGhpcy5HZXRGcmFtZU51bWJlcigpICE9IC0xKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmKEJyb3dzZXJNZWRpYVN0cmVhbS5WRVJCT1NFKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHZXQgZnJhbWUgYXZhaWxhYmxlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9icm93c2VyIHJldHVybnMgZXhhY3QgZnJhbWUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLm1GcmFtZUV2ZW50TWV0aG9kID0gRnJhbWVFdmVudE1ldGhvZC5FWEFDVDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9mYWlsZWQgdG8gZGV0ZXJtaW5lIGFueSBmcmFtZSByYXRlLiBUaGlzIGhhcHBlbnMgb24gZmlyZWZveCB3aXRoXG4gICAgICAgICAgICAvL3JlbW90ZSB0cmFja3NcbiAgICAgICAgICAgIGlmKHRoaXMubUZyYW1lRXZlbnRNZXRob2QgPT09IEZyYW1lRXZlbnRNZXRob2QuREVGQVVMVF9GQUxMQkFDSylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL2ZpcmVmb3ggYW5kIGNvIHdvbid0IHRlbGwgdXMgdGhlIEZQUyBmb3IgcmVtb3RlIHN0cmVhbVxuICAgICAgICAgICAgICAgIFNMb2cuTFcoXCJGcmFtZXJhdGUgdW5rbm93biBmb3Igc3RyZWFtIFwiICsgdGhpcy5tSW5zdGFuY2VJZCArIFwiLiBVc2luZyBkZWZhdWx0IGZyYW1lcmF0ZSBvZiBcIiArIEJyb3dzZXJNZWRpYVN0cmVhbS5ERUZBVUxUX0ZSQU1FUkFURSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIFRyaWdnZXJBdXRvcGxheUJsb2NrbGVkKCl7XG5cbiAgICAgICAgQnJvd3Nlck1lZGlhU3RyZWFtLnNCbG9ja2VkU3RyZWFtcy5hZGQodGhpcyk7XG4gICAgICAgIGlmKEJyb3dzZXJNZWRpYVN0cmVhbS5vbmF1dG9wbGF5YmxvY2tlZCAhPT0gbnVsbCl7XG4gICAgICAgICAgICBCcm93c2VyTWVkaWFTdHJlYW0ub25hdXRvcGxheWJsb2NrZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgVHJ5UGxheSgpe1xuXG4gICAgICAgIGxldCBwbGF5UHJvbWlzZSA9IHRoaXMubVZpZGVvRWxlbWVudC5wbGF5KCk7XG4gICAgICAgIHRoaXMubURlZmF1bHRWb2x1bWUgPSB0aGlzLm1WaWRlb0VsZW1lbnQudm9sdW1lO1xuXG4gICAgICAgIGlmICh0eXBlb2YgcGxheVByb21pc2UgIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHBsYXlQcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy9hbGwgZ29vZFxuICAgICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZihCcm93c2VyTWVkaWFTdHJlYW0uTVVURV9JRl9BVVRPUExBVF9CTE9DS0VEID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgIC8vYnJvd3NlciBibG9ja2VkIHJlcGxheS4gcHJpbnQgZXJyb3IgJiBzZXR1cCBhdXRvIHBsYXkgd29ya2Fyb3VuZFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VyQXV0b3BsYXlCbG9ja2xlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgICAgIC8vQmVsb3c6IFNhZmFyaSBvbiBNYWMgaXMgYWJsZSB0byBqdXN0IGRlYWN0aXZhdGUgYXVkaW8gYW5kIHNob3cgdGhlIHZpZGVvXG4gICAgICAgICAgICAgICAgICAgIC8vb25jZSB1c2VyIGludGVyYWN0cyB3aXRoIHRoZSBjb250ZW50IGF1ZGlvIHdpbGwgYmUgYWN0aXZhdGVkIGFnYWluIHZpYSBTZXRWb2x1ZVxuICAgICAgICAgICAgICAgICAgICAvL1dBUk5JTkc6IFRoaXMgZmFpbHMgb24gaU9TISBTZXRWb2x1bWUgZmFpbHMgYW5kIGF1ZGlvIHdvbid0IGV2ZXIgY29tZSBiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8va2VlcCBNVVRFX0lGX0FVVE9QTEFUX0JMT0NLRUQgPT09IGZhbHNlIGZvciBpT1Mgc3VwcG9ydFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgU0xvZy5MVyhcIlJlcGxheSBvZiB2aWRlbyBmYWlsZWQuIFRoZSBicm93c2VyIG1pZ2h0IGhhdmUgYmxvY2tlZCB0aGUgdmlkZW8gZHVlIHRvIGF1dG9wbGF5IHJlc3RyaWN0aW9ucy4gUmV0cnlpbmcgd2l0aG91dCBhdWRpbyAuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL3RyeSB0byBwbGF5IHdpdGhvdXQgYXVkaW8gZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLlNldFZvbHVtZSgwKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbWlzZTIgPSB0aGlzLm1WaWRlb0VsZW1lbnQucGxheSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBwcm9taXNlMiAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlMi50aGVuKCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU0xvZy5MKFwiUGxheWluZyB2aWRlbyBzdWNjZXNzZnVsIGJ1dCBtdXRlZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zdGlsbCB0cmlnZ2VyIGZvciB1bm11dGUgb24gbmV4dCBjbGlja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVHJpZ2dlckF1dG9wbGF5QmxvY2tsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcik9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTG9nLkxFKFwiUmVwbGF5IG9mIHZpZGVvIGZhaWxlZC4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGR1ZSB0byBhdXRvcGxheSByZXN0cmljdGlvbnMgb2YgdGhlIGJyb3dzZXIuIFRyeSBhbGxvd2luZyBhdXRvcGxheS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VyQXV0b3BsYXlCbG9ja2xlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgU2V0dXBFbGVtZW50cygpIHtcblxuICAgICAgICB0aGlzLm1WaWRlb0VsZW1lbnQgPSB0aGlzLlNldHVwVmlkZW9FbGVtZW50KCk7XG4gICAgICAgIC8vVE9PRDogaW52ZXN0aWdhdGUgYnVnIGhlcmVcbiAgICAgICAgLy9JbiBzb21lIGNhc2VzIG9ubG9hZGVkbWV0YWRhdGEgaXMgbmV2ZXIgY2FsbGVkLiBUaGlzIG1pZ2h0IGhhcHBlbiBkdWUgdG8gYSBcbiAgICAgICAgLy9idWcgaW4gZmlyZWZveCBvciBtaWdodCBiZSByZWxhdGVkIHRvIGEgZGV2aWNlIC8gZHJpdmVyIGVycm9yXG4gICAgICAgIC8vU28gZmFyIGl0IG9ubHkgaGFwcGVucyByYW5kb21seSAobWF5YmUgMSBpbiAxMCB0cmllcykgb24gYSBzaW5nbGUgdGVzdCBkZXZpY2UgYW5kIG9ubHlcbiAgICAgICAgLy93aXRoIDcyMHAuICh2aWRlbyBkZXZpY2UgXCJCaXNvbkNhbSwgTkIgUHJvXCIgb24gTVNJIGxhcHRvcClcbiAgICAgICAgU0xvZy5MKFwidmlkZW8gZWxlbWVudCBjcmVhdGVkLiB2aWRlbyB0cmFja3M6IFwiICsgdGhpcy5tU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5tVmlkZW9FbGVtZW50Lm9ubG9hZGVkbWV0YWRhdGEgPSAoZSkgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9ubG9hZGVkbWV0YWRhdGFcIik7XG4gICAgICAgICAgICAvL3dlIG1pZ2h0IGhhdmUgc2h1dGRvd24gZXZlcnl0aGluZyBieSBub3cgYWxyZWFkeVxuICAgICAgICAgICAgaWYodGhpcy5tVmlkZW9FbGVtZW50ID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLlRyeVBsYXkoKTtcblxuICAgICAgICAgICAgaWYodGhpcy5JbnRlcm5hbFN0cmVhbUFkZGVkICE9IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5JbnRlcm5hbFN0cmVhbUFkZGVkKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLkNoZWNrRnJhbWVSYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB2aWRlb19sb2cgPSBcIlJlc29sdXRpb246IFwiICsgdGhpcy5tVmlkZW9FbGVtZW50LnZpZGVvV2lkdGggKyBcInhcIiArIHRoaXMubVZpZGVvRWxlbWVudC52aWRlb0hlaWdodCBcbiAgICAgICAgICAgICAgICArIFwiIGZwcyBtZXRob2Q6IFwiICsgdGhpcy5tRnJhbWVFdmVudE1ldGhvZCArIFwiIFwiICsgTWF0aC5yb3VuZCgxMDAwLyh0aGlzLm1Nc1BlckZyYW1lKSk7XG4gICAgICAgICAgICBTTG9nLkwodmlkZW9fbG9nKTtcbiAgICAgICAgICAgIGlmKEJyb3dzZXJNZWRpYVN0cmVhbS5WRVJCT1NFKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2aWRlb19sb2cpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL25vdyBjcmVhdGUgY2FudmFzIGFmdGVyIHRoZSBtZXRhIGRhdGEgb2YgdGhlIHZpZGVvIGFyZSBrbm93blxuICAgICAgICAgICAgaWYgKHRoaXMubUhhc1ZpZGVvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tQ2FudmFzRWxlbWVudCA9IHRoaXMuU2V0dXBDYW52YXMoKTtcblxuICAgICAgICAgICAgICAgIC8vY2FudmFzIGNvdWxkbid0IGJlIGNyZWF0ZWQuIHNldCB2aWRlbyB0byBmYWxzZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1DYW52YXNFbGVtZW50ID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubUhhc1ZpZGVvID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubUNhbnZhc0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tSXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICAvL3NldCB0aGUgc3JjIHZhbHVlIGFuZCB0cmlnZ2VyIG9ubG9hZGVkbWV0YWRhdGEgYWJvdmVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vbmV3ZXIgbWV0aG9kLiBub3QgeWV0IHN1cHBvcnRlZCBldmVyeXdoZXJlXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA6IGFueSA9IHRoaXMubVZpZGVvRWxlbWVudDtcbiAgICAgICAgICAgIGVsZW1lbnQuc3JjT2JqZWN0ID0gdGhpcy5tU3RyZWFtO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcilcbiAgICAgICAge1xuICAgICAgICAgICAgLy9vbGQgd2F5IG9mIGRvaW5nIGl0LiB3b24ndCB3b3JrIGFueW1vcmUgaW4gZmlyZWZveCBhbmQgcG9zc2libHkgb3RoZXIgYnJvd3NlcnNcbiAgICAgICAgICAgIHRoaXMubVZpZGVvRWxlbWVudC5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLm1TdHJlYW0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCBmcmFtZSBudW1iZXIuXG4gICAgICogIFRyZWF0IGEgcmV0dXJuIHZhbHVlIG9mIDAgb3Igc21hbGxlciBhcyB1bmtub3duLlxuICAgICAqIChCcm93c2VycyBtaWdodCBoYXZlIHRoZSBwcm9wZXJ0eSBidXQgXG4gICAgICogYWx3YXlzIHJldHVybiAwKVxuICAgICAqL1xuICAgIHByaXZhdGUgR2V0RnJhbWVOdW1iZXIoKSA6IG51bWJlclxuICAgIHtcbiAgICAgICAgbGV0IGZyYW1lTnVtYmVyO1xuICAgICAgICBpZih0aGlzLm1WaWRlb0VsZW1lbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKCh0aGlzLm1WaWRlb0VsZW1lbnQgYXMgYW55KS53ZWJraXREZWNvZGVkRnJhbWVDb3VudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmcmFtZU51bWJlciA9ICh0aGlzLm1WaWRlb0VsZW1lbnQgYXMgYW55KS53ZWJraXREZWNvZGVkRnJhbWVDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBOb25lIG9mIHRoZXNlIHdvcmsgYW5kIGZ1dHVyZSB2ZXJzaW9ucyBtaWdodCByZXR1cm4gbnVtYmVycyB0aGF0IGFyZSBvbmx5XG4gICAgICAgICAgICB1cGRhdGVkIG9uY2UgYSBzZWNvbmQgb3Igc28uIEZvciBub3cgaXQgaXMgYmVzdCB0byBpZ25vcmUgdGhlc2UuXG5cbiAgICAgICAgICAgIFRPRE86IENoZWNrIGlmIGFueSBvZiB0aGVzZSB3aWxsIHdvcmsgaW4gdGhlIGZ1dHVyZS4gdGhpcy5tVmlkZW9FbGVtZW50LmdldFZpZGVvUGxheWJhY2tRdWFsaXR5KCkudG90YWxWaWRlb0ZyYW1lczsgXG4gICAgICAgICAgICBtaWdodCBhbHNvIGhlbHAgaW4gdGhlIGZ1dHVyZSAoc28gZmFyIGFsd2F5cyAwKVxuICAgICAgICAgICAgdGhpcy5tVmlkZW9FbGVtZW50LmN1cnJlbnRUaW1lIGFsc28gd29uJ3Qgd29yayBiZWNhdXNlIHRoaXMgaXMgdXBkYXRlZCBmYXN0ZXIgdGhhbiB0aGUgZnJhbWVyYXRlICh3b3VsZCByZXN1bHQgaW4gPjEwMCsgZnJhbWVyYXRlKVxuICAgICAgICAgICAgZWxzZSBpZigodGhpcy5tVmlkZW9FbGVtZW50IGFzIGFueSkubW96UGFyc2VkRnJhbWVzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZyYW1lTnVtYmVyID0gKHRoaXMubVZpZGVvRWxlbWVudCBhcyBhbnkpLm1velBhcnNlZEZyYW1lcztcbiAgICAgICAgICAgIH1lbHNlIGlmKCh0aGlzLm1WaWRlb0VsZW1lbnQgYXMgYW55KS5tb3pEZWNvZGVkRnJhbWVzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZyYW1lTnVtYmVyID0gKHRoaXMubVZpZGVvRWxlbWVudCBhcyBhbnkpLm1vekRlY29kZWRGcmFtZXM7XG4gICAgICAgICAgICB9ZWxzZSBpZigodGhpcy5tVmlkZW9FbGVtZW50IGFzIGFueSkuZGVjb2RlZEZyYW1lQ291bnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZnJhbWVOdW1iZXIgPSAodGhpcy5tVmlkZW9FbGVtZW50IGFzIGFueSkuZGVjb2RlZEZyYW1lQ291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZyYW1lTnVtYmVyID0gIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGZyYW1lTnVtYmVyID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYW1lTnVtYmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBUcnlHZXRGcmFtZSgpOiBJRnJhbWVEYXRhXG4gICAge1xuICAgICAgICAvL21ha2Ugc3VyZSB3ZSBnZXQgdGhlIG5ld2VzdCBmcmFtZVxuICAgICAgICAvL3RoaXMuRW5zdXJlTGF0ZXN0RnJhbWUoKTtcblxuICAgICAgICAvL3JlbW92ZSB0aGUgYnVmZmVyZWQgZnJhbWUgaWYgYW55XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm1CdWZmZXJlZEZyYW1lO1xuICAgICAgICB0aGlzLm1CdWZmZXJlZEZyYW1lID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHB1YmxpYyBTZXRNdXRlKG11dGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tVmlkZW9FbGVtZW50Lm11dGVkID0gbXV0ZTtcbiAgICB9XG4gICAgcHVibGljIFBlZWtGcmFtZSgpOiBJRnJhbWVEYXRhIHtcbiAgICAgICAgLy90aGlzLkVuc3VyZUxhdGVzdEZyYW1lKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm1CdWZmZXJlZEZyYW1lO1xuICAgIH1cblxuICAgIC8qKiBFbnN1cmVzIHdlIGhhdmUgdGhlIGxhdGVzdCBmcmFtZSByZWFkeVxuICAgICAqIGZvciB0aGUgbmV4dCBQZWVrRnJhbWUgLyBUcnlHZXRGcmFtZSBjYWxsc1xuICAgICAqL1xuICAgIHByaXZhdGUgRW5zdXJlTGF0ZXN0RnJhbWUoKTpib29sZWFuXG4gICAge1xuICAgICAgICBpZiAodGhpcy5IYXNOZXdlckZyYW1lKCkpIHtcbiAgICAgICAgICAgIHRoaXMuR2VuZXJhdGVGcmFtZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKiBjaGVja3MgaWYgdGhlIGh0bWwgdGFnIGhhcyBhIG5ld2VyIGZyYW1lIGF2YWlsYWJsZVxuICAgICAqIChvciBpZiAxLzMwdGggb2YgYSBzZWNvbmQgcGFzc2VkIHNpbmNlIGxhc3QgZnJhbWUgaWZcbiAgICAgKiB0aGlzIGluZm8gaXNuJ3QgYXZhaWxhYmxlKVxuICAgICAqL1xuICAgIHByaXZhdGUgSGFzTmV3ZXJGcmFtZSgpOmJvb2xlYW5cbiAgICB7XG4gICAgICAgIGlmICh0aGlzLm1Jc0FjdGl2ZSBcbiAgICAgICAgICAgICYmIHRoaXMubUhhc1ZpZGVvIFxuICAgICAgICAgICAgJiYgdGhpcy5tQ2FudmFzRWxlbWVudCAhPSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMubUxhc3RGcmFtZU51bWJlciA+IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1GcmFtZUV2ZW50TWV0aG9kID0gRnJhbWVFdmVudE1ldGhvZC5FWEFDVDtcbiAgICAgICAgICAgICAgICAgICAgLy93ZSBhcmUgZ2V0dGluZyBmcmFtZSBudW1iZXJzLiB1c2UgdGhvc2UgdG8gXG4gICAgICAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgd2UgaGF2ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5HZXRGcmFtZU51bWJlcigpID4gdGhpcy5tTGFzdEZyYW1lTnVtYmVyKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL21hbnkgYnJvd3NlcnMgZG8gbm90IHNoYXJlIHRoZSBmcmFtZSBpbmZvXG4gICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubU5leHRGcmFtZVRpbWUgPD0gbm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFxuICAgIHB1YmxpYyBVcGRhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuRW5zdXJlTGF0ZXN0RnJhbWUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgRGVzdHJveUNhbnZhcygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubUNhbnZhc0VsZW1lbnQgIT0gbnVsbCAmJiB0aGlzLm1DYW52YXNFbGVtZW50LnBhcmVudEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5tQ2FudmFzRWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMubUNhbnZhc0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBEaXNwb3NlKCk6IHZvaWQge1xuXG4gICAgICAgIHRoaXMubUlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIEJyb3dzZXJNZWRpYVN0cmVhbS5zQmxvY2tlZFN0cmVhbXMuZGVsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLkRlc3Ryb3lDYW52YXMoKTtcbiAgICAgICAgaWYgKHRoaXMubVZpZGVvRWxlbWVudCAhPSBudWxsICYmIHRoaXMubVZpZGVvRWxlbWVudC5wYXJlbnRFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubVZpZGVvRWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMubVZpZGVvRWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL3RyYWNrIGNsZWFudXAgaXMgcHJvYmFibHkgbm90IG5lZWRlZCBidXRcbiAgICAgICAgLy9pdCBtaWdodCBoZWxwIGVuc3VyZSBpdCBwcm9wZXJseSBzdG9wc1xuICAgICAgICAvL2luIGNhc2UgdGhlcmUgYXJlIG90aGVyIHJlZmVyZW5jZXMgb3V0IHRoZXJlXG4gICAgICAgIHZhciB0cmFja3MgPSB0aGlzLm1TdHJlYW0uZ2V0VHJhY2tzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0cmFja3NbaV0uc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1TdHJlYW0gPSBudWxsO1xuICAgICAgICB0aGlzLm1WaWRlb0VsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLm1DYW52YXNFbGVtZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgQ3JlYXRlRnJhbWUoKTogUmF3RnJhbWUge1xuXG4gICAgICAgIHRoaXMubUNhbnZhc0VsZW1lbnQud2lkdGggPSB0aGlzLm1WaWRlb0VsZW1lbnQudmlkZW9XaWR0aDtcbiAgICAgICAgdGhpcy5tQ2FudmFzRWxlbWVudC5oZWlnaHQgPSB0aGlzLm1WaWRlb0VsZW1lbnQudmlkZW9IZWlnaHQ7XG4gICAgICAgIGxldCBjdHggPSB0aGlzLm1DYW52YXNFbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgLypcbiAgICAgICAgdmFyIGZpbGxCYWNrZ3JvdW5kRmlyc3QgPSB0cnVlO1xuICAgICAgICBpZiAoZmlsbEJhY2tncm91bmRGaXJzdCkge1xuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLm1DYW52YXNFbGVtZW50LndpZHRoLCB0aGlzLm1DYW52YXNFbGVtZW50LmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLm1WaWRlb0VsZW1lbnQsIDAsIDApO1xuIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9yaXNrIG9mIHNlY3VyaXR5IGV4Y2VwdGlvbiBpbiBmaXJlZm94XG4gICAgICAgICAgICBsZXQgaW1nRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5tQ2FudmFzRWxlbWVudC53aWR0aCwgdGhpcy5tQ2FudmFzRWxlbWVudC5oZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGltZ1Jhd0RhdGEgPSBpbWdEYXRhLmRhdGE7XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShpbWdSYXdEYXRhLmJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJhd0ZyYW1lKGFycmF5LCB0aGlzLm1DYW52YXNFbGVtZW50LndpZHRoLCB0aGlzLm1DYW52YXNFbGVtZW50LmhlaWdodCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuXG4gICAgICAgICAgICAvL3Nob3cgd2hpdGUgZnJhbWUgZm9yIG5vd1xuICAgICAgICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5tQ2FudmFzRWxlbWVudC53aWR0aCAqIHRoaXMubUNhbnZhc0VsZW1lbnQuaGVpZ2h0ICogNCk7XG4gICAgICAgICAgICBhcnJheS5maWxsKDI1NSwgMCwgYXJyYXkubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBsZXQgcmVzID0gIG5ldyBSYXdGcmFtZShhcnJheSwgdGhpcy5tQ2FudmFzRWxlbWVudC53aWR0aCwgdGhpcy5tQ2FudmFzRWxlbWVudC5oZWlnaHQpO1xuXG4gICAgICAgICAgICAvL2F0dGVtcHRlZCB3b3JrYXJvdW5kIGZvciBmaXJlZm94IGJ1ZyAvIHN1c3BlY3RlZCBjYXVzZTogXG4gICAgICAgICAgICAvLyAqIHJvb3QgY2F1c2Ugc2VlbXMgdG8gYmUgYW4gaW50ZXJuYWwgb3JpZ2luLWNsZWFuIGZsYWcgd2l0aGluIHRoZSBjYW52YXMuIElmIHNldCB0byBmYWxzZSByZWFkaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyAgIGNhbnZhcyB0cmlnZ2VycyBhIHNlY3VyaXR5IGV4Y2VwdGlvbnMuIFRoaXMgaXMgdXN1YWxseSB1c2VkIGlmIHRoZSBjYW52YXMgY29udGFpbnMgZGF0YSB0aGF0IGlzbid0IFxuICAgICAgICAgICAgLy8gICBzdXBwb3NlIHRvIGJlIGFjY2Vzc2libGUgZS5nLiBhIHBpY3R1cmUgZnJvbSBhbm90aGVyIGRvbWFpblxuICAgICAgICAgICAgLy8gKiB3aGlsZSBtb3ZpbmcgdGhlIGltYWdlIHRvIHRoZSBjYW52YXMgdGhlIG9yaWdpbi1jbGVhbiBmbGFnIHNlZW1zIHRvIGJlIHNldCB0byBmYWxzZSBidXQgb25seSBcbiAgICAgICAgICAgIC8vICAgZHVyaW5nIHRoZSBmaXJzdCBmZXcgZnJhbWVzLiAobWF5YmUgYSByYWNlIGNvbmRpdGlvbiB3aXRoaW4gZmlyZWZveD8gQSBoaWdoZXIgQ1BVIHdvcmtsb2FkIGluY3JlYXNlcyB0aGUgcmlzaylcbiAgICAgICAgICAgIC8vICogdGhlIGNhbnZhcyB3aWxsIHdvcmsgYW5kIGxvb2sganVzdCBmaW5lIGJ1dCBjYWxsaW5nIGdldEltYWdlRGF0YSBpc24ndCBhbGxvd2VkIGFueW1vcmVcbiAgICAgICAgICAgIC8vICogQWZ0ZXIgYSBmZXcgZnJhbWVzIHRoZSB2aWRlbyBpcyBiYWNrIHRvIG5vcm1hbCBidXQgdGhlIGNhbnZhcyB3aWxsIHN0aWxsIGhhdmUgdGhlIGZsYWcgc2V0IHRvIGZhbHNlXG4gICAgICAgICAgICAvLyBcbiAgICAgICAgICAgIC8vU29sdXRpb246XG4gICAgICAgICAgICAvLyAqIFJlY3JlYXRlIHRoZSBjYW52YXMgaWYgdGhlIGV4Y2VwdGlvbiBpcyB0cmlnZ2VyZWQuIER1cmluZyB0aGUgbmV4dCBmZXcgZnJhbWVzIGZpcmVmb3ggc2hvdWxkIGdldCBpdHMgZmxhZyByaWdodFxuICAgICAgICAgICAgLy8gICBhbmQgdGhlbiBzdG9wIGNhdXNpbmcgdGhlIGVycm9yLiBJdCBtaWdodCByZWNyZWF0ZSB0aGUgY2FudmFzIG11bHRpcGxlIHRpbWVzIHVudGlsIGl0IGZpbmFsbHkgd29ya3MgYXMgd2VcbiAgICAgICAgICAgIC8vICAgY2FuJ3QgZGV0ZWN0IGlmIHRoZSB2aWRlbyBlbGVtZW50IHdpbGwgdHJpZ2dlciB0aGUgaXNzdWUgdW50aWwgd2UgdHJpZWQgdG8gYWNjZXNzIHRoZSBkYXRhXG4gICAgICAgICAgICBTTG9nLkxvZ1dhcm5pbmcoXCJGaXJlZm94IHdvcmthcm91bmQ6IFJlZnVzZWQgYWNjZXNzIHRvIHRoZSByZW1vdGUgdmlkZW8gYnVmZmVyLiBSZXRyeWluZyBuZXh0IGZyYW1lLi4uXCIpO1xuICAgICAgICAgICAgdGhpcy5EZXN0cm95Q2FudmFzKCk7XG4gICAgICAgICAgICB0aGlzLm1DYW52YXNFbGVtZW50ID0gdGhpcy5TZXR1cENhbnZhcygpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vT2xkIGJ1ZmZlZCBmcmFtZSB3YXMgcmVwbGFjZWQgd2l0aCBhIHdyYXBlcHIgdGhhdCBhdm9pZHMgYnVmZmVyaW5nIGludGVybmFsbHlcbiAgICAvL09ubHkgcG9pbnQgb2YgZ2VuZXJhdGUgZnJhbWUgaXMgbm93IHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgZnJhbWVyYXRlXG4gICAgcHJpdmF0ZSBHZW5lcmF0ZUZyYW1lKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubUxhc3RGcmFtZU51bWJlciA9IHRoaXMuR2V0RnJhbWVOdW1iZXIoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgLy9qcyB0aW1pbmcgaXMgdmVyeSBpbmFjY3VyYXRlLiByZWR1Y2UgdGltZSB1bnRpbCBuZXh0IGZyYW1lIGlmIHdlIGFyZVxuICAgICAgICAvL2xhdGUgd2l0aCB0aGlzIG9uZS5cbiAgICAgICAgbGV0IGRpZmYgPSBub3cgLSB0aGlzLm1OZXh0RnJhbWVUaW1lO1xuICAgICAgICBsZXQgZGVsdGEgPSAodGhpcy5tTXNQZXJGcmFtZSAtIGRpZmYpO1xuICAgICAgICBkZWx0YSA9IE1hdGgubWluKHRoaXMubU1zUGVyRnJhbWUsIE1hdGgubWF4KDEsIGRlbHRhKSlcbiAgICAgICAgdGhpcy5tTGFzdEZyYW1lVGltZSA9IG5vdztcbiAgICAgICAgdGhpcy5tTmV4dEZyYW1lVGltZSA9IG5vdyArIGRlbHRhO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwibGFzdCBmcmFtZSAsIG5ldyBmcmFtZVwiLCB0aGlzLm1MYXN0RnJhbWVUaW1lLCB0aGlzLm1OZXh0RnJhbWVUaW1lLCBkZWx0YSk7XG4gICAgICAgIHRoaXMubUJ1ZmZlcmVkRnJhbWUgPSBuZXcgTGF6eUZyYW1lKHRoaXMpO1xuICAgIH1cblxuXG5cblxuICAgIHByaXZhdGUgU2V0dXBWaWRlb0VsZW1lbnQoKTogSFRNTFZpZGVvRWxlbWVudCB7XG5cbiAgICAgICAgdmFyIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudD0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuICAgICAgICAvL3dpZHRoL2RvZXNuJ3Qgc2VlbSB0byBiZSBpbXBvcnRhbnRcbiAgICAgICAgdmlkZW9FbGVtZW50LndpZHRoID0gMzIwO1xuICAgICAgICB2aWRlb0VsZW1lbnQuaGVpZ2h0ID0gMjQwO1xuICAgICAgICB2aWRlb0VsZW1lbnQuY29udHJvbHMgPSB0cnVlO1xuICAgICAgICB2aWRlb0VsZW1lbnQuc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIiwgXCJcIik7XG4gICAgICAgIHZpZGVvRWxlbWVudC5pZCA9IFwiYXdydGNfbWVkaWFzdHJlYW1fdmlkZW9fXCIgKyB0aGlzLm1JbnN0YW5jZUlkO1xuXG4gICAgICAgIC8vdmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKEJyb3dzZXJNZWRpYVN0cmVhbS5ERUJVR19TSE9XX0VMRU1FTlRTKVxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aWRlb0VsZW1lbnQpO1xuXG4gICAgICAgIHJldHVybiB2aWRlb0VsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBTZXR1cENhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XG5cbiAgICAgICAgaWYgKHRoaXMubVZpZGVvRWxlbWVudCA9PSBudWxsIHx8IHRoaXMubVZpZGVvRWxlbWVudC52aWRlb1dpZHRoIDw9IDAgfHxcbiAgICAgICAgICAgIHRoaXMubVZpZGVvRWxlbWVudC52aWRlb0hlaWdodCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMubVZpZGVvRWxlbWVudC52aWRlb1dpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5tVmlkZW9FbGVtZW50LnZpZGVvSGVpZ2h0O1xuICAgICAgICBjYW52YXMuaWQgPSBcImF3cnRjX21lZGlhc3RyZWFtX2NhbnZhc19cIiArIHRoaXMubUluc3RhbmNlSWQ7XG5cbiAgICAgICAgaWYgKEJyb3dzZXJNZWRpYVN0cmVhbS5ERUJVR19TSE9XX0VMRU1FTlRTKVxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH1cblxuICAgIHB1YmxpYyBTZXRWb2x1bWUodm9sdW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubVZpZGVvRWxlbWVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvbHVtZSA8IDApXG4gICAgICAgICAgICB2b2x1bWUgPSAwO1xuICAgICAgICBpZiAodm9sdW1lID4gMSlcbiAgICAgICAgICAgIHZvbHVtZSA9IDE7XG4gICAgICAgIHRoaXMubVZpZGVvRWxlbWVudC52b2x1bWUgPSB2b2x1bWU7XG4gICAgfVxuXG4gICAgcHVibGljIEhhc0F1ZGlvVHJhY2soKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLm1TdHJlYW0gIT0gbnVsbCAmJiB0aGlzLm1TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSAhPSBudWxsXG4gICAgICAgICAgICAmJiB0aGlzLm1TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHB1YmxpYyBIYXNWaWRlb1RyYWNrKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5tU3RyZWFtICE9IG51bGwgJiYgdGhpcy5tU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkgIT0gbnVsbFxuICAgICAgICAgICAgJiYgdGhpcy5tU3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vZm9yIGRlYnVnZ2luZyBwdXJwb3NlcyB0aGlzIGlzIGluIGhlcmVcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/BrowserMediaStream.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/BrowserWebRtcCall.ts":
/*!******************************************************!*\
  !*** ./src/awrtc/media_browser/BrowserWebRtcCall.ts ***!
  \******************************************************/
/*! exports provided: BrowserWebRtcCall */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BrowserWebRtcCall\", function() { return BrowserWebRtcCall; });\n/* harmony import */ var _media_AWebRtcCall__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../media/AWebRtcCall */ \"./src/awrtc/media/AWebRtcCall.ts\");\n/* harmony import */ var _BrowserMediaNetwork__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BrowserMediaNetwork */ \"./src/awrtc/media_browser/BrowserMediaNetwork.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n/**Browser version of the C# version of WebRtcCall.\n *\n * See ICall interface for detailed documentation.\n * BrowserWebRtcCall mainly exists to allow other versions\n * in the future that might build on a different IMediaNetwork\n * interface (Maybe something running inside Webassembly?).\n */\nvar BrowserWebRtcCall = /** @class */ (function (_super) {\n    __extends(BrowserWebRtcCall, _super);\n    function BrowserWebRtcCall(config) {\n        var _this = _super.call(this, config) || this;\n        _this.Initialize(_this.CreateNetwork());\n        return _this;\n    }\n    BrowserWebRtcCall.prototype.CreateNetwork = function () {\n        return new _BrowserMediaNetwork__WEBPACK_IMPORTED_MODULE_1__[\"BrowserMediaNetwork\"](this.mNetworkConfig);\n    };\n    BrowserWebRtcCall.prototype.DisposeInternal = function (disposing) {\n        _super.prototype.DisposeInternal.call(this, disposing);\n        if (disposing) {\n            if (this.mNetwork != null)\n                this.mNetwork.Dispose();\n            this.mNetwork = null;\n        }\n    };\n    return BrowserWebRtcCall;\n}(_media_AWebRtcCall__WEBPACK_IMPORTED_MODULE_0__[\"AWebRtcCall\"]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0Jyb3dzZXJXZWJSdGNDYWxsLnRzP2ZkNTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUNpRDtBQUdTO0FBRTVEOzs7Ozs7R0FNRztBQUNIO0lBQXVDLHFDQUFXO0lBQzlDLDJCQUFtQixNQUFxQjtRQUF4QyxZQUNJLGtCQUFNLE1BQU0sQ0FBQyxTQUVoQjtRQURHLEtBQUksQ0FBQyxVQUFVLENBQUMsS0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7O0lBQzFDLENBQUM7SUFFTyx5Q0FBYSxHQUFyQjtRQUVJLE9BQU8sSUFBSSx3RUFBbUIsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUNTLDJDQUFlLEdBQXpCLFVBQTBCLFNBQWtCO1FBQ3hDLGlCQUFNLGVBQWUsWUFBQyxTQUFTLENBQUMsQ0FBQztRQUNqQyxJQUFJLFNBQVMsRUFBRTtZQUNYLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJO2dCQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQ3hCO0lBQ0wsQ0FBQztJQUNMLHdCQUFDO0FBQUQsQ0FBQyxDQWxCc0MsOERBQVcsR0FrQmpEIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL21lZGlhX2Jyb3dzZXIvQnJvd3NlcldlYlJ0Y0NhbGwudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQgeyBBV2ViUnRjQ2FsbCB9IGZyb20gXCIuLi9tZWRpYS9BV2ViUnRjQ2FsbFwiO1xuaW1wb3J0IHsgTmV0d29ya0NvbmZpZyB9IGZyb20gXCIuLi9tZWRpYS9OZXR3b3JrQ29uZmlnXCI7XG5pbXBvcnQgeyBJTWVkaWFOZXR3b3JrIH0gZnJvbSBcIi4uL21lZGlhL0lNZWRpYU5ldHdvcmtcIjtcbmltcG9ydCB7IEJyb3dzZXJNZWRpYU5ldHdvcmsgfSBmcm9tIFwiLi9Ccm93c2VyTWVkaWFOZXR3b3JrXCI7XG5cbi8qKkJyb3dzZXIgdmVyc2lvbiBvZiB0aGUgQyMgdmVyc2lvbiBvZiBXZWJSdGNDYWxsLiBcbiAqIFxuICogU2VlIElDYWxsIGludGVyZmFjZSBmb3IgZGV0YWlsZWQgZG9jdW1lbnRhdGlvbi4gXG4gKiBCcm93c2VyV2ViUnRjQ2FsbCBtYWlubHkgZXhpc3RzIHRvIGFsbG93IG90aGVyIHZlcnNpb25zIFxuICogaW4gdGhlIGZ1dHVyZSB0aGF0IG1pZ2h0IGJ1aWxkIG9uIGEgZGlmZmVyZW50IElNZWRpYU5ldHdvcmtcbiAqIGludGVyZmFjZSAoTWF5YmUgc29tZXRoaW5nIHJ1bm5pbmcgaW5zaWRlIFdlYmFzc2VtYmx5PykuXG4gKi9cbmV4cG9ydCBjbGFzcyBCcm93c2VyV2ViUnRjQ2FsbCBleHRlbmRzIEFXZWJSdGNDYWxsIHtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoY29uZmlnOiBOZXR3b3JrQ29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIHRoaXMuSW5pdGlhbGl6ZSh0aGlzLkNyZWF0ZU5ldHdvcmsoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBDcmVhdGVOZXR3b3JrKCk6IElNZWRpYU5ldHdvcmsge1xuXG4gICAgICAgIHJldHVybiBuZXcgQnJvd3Nlck1lZGlhTmV0d29yayh0aGlzLm1OZXR3b3JrQ29uZmlnKTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIERpc3Bvc2VJbnRlcm5hbChkaXNwb3Npbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuRGlzcG9zZUludGVybmFsKGRpc3Bvc2luZyk7XG4gICAgICAgIGlmIChkaXNwb3NpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1OZXR3b3JrICE9IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5tTmV0d29yay5EaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1OZXR3b3JrID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/BrowserWebRtcCall.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/DeviceApi.ts":
/*!**********************************************!*\
  !*** ./src/awrtc/media_browser/DeviceApi.ts ***!
  \**********************************************/
/*! exports provided: DeviceInfo, DeviceApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DeviceInfo\", function() { return DeviceInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DeviceApi\", function() { return DeviceApi; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\nvar DeviceInfo = /** @class */ (function () {\n    function DeviceInfo() {\n        this.deviceId = null;\n        this.defaultLabel = null;\n        this.label = null;\n        this.isLabelGuessed = true;\n    }\n    return DeviceInfo;\n}());\n\nvar DeviceApi = /** @class */ (function () {\n    function DeviceApi() {\n    }\n    Object.defineProperty(DeviceApi, \"LastUpdate\", {\n        get: function () {\n            return DeviceApi.sLastUpdate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DeviceApi, \"HasInfo\", {\n        get: function () {\n            return DeviceApi.sLastUpdate > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DeviceApi, \"IsPending\", {\n        get: function () {\n            return DeviceApi.sIsPending;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DeviceApi, \"LastError\", {\n        get: function () {\n            return this.sLastError;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DeviceApi.AddOnChangedHandler = function (evt) {\n        DeviceApi.sUpdateEvents.push(evt);\n    };\n    DeviceApi.RemOnChangedHandler = function (evt) {\n        var index = DeviceApi.sUpdateEvents.indexOf(evt);\n        if (index >= 0) {\n            DeviceApi.sUpdateEvents.splice(index, 1);\n        }\n        else {\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LW(\"Tried to remove an unknown event handler in DeviceApi.RemOnChangedHandler\");\n        }\n    };\n    DeviceApi.TriggerChangedEvent = function () {\n        for (var _i = 0, _a = DeviceApi.sUpdateEvents; _i < _a.length; _i++) {\n            var v = _a[_i];\n            try {\n                v();\n            }\n            catch (e) {\n                _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(\"Error in DeviceApi user event handler: \" + e);\n                console.exception(e);\n            }\n        }\n    };\n    Object.defineProperty(DeviceApi, \"Devices\", {\n        get: function () {\n            return DeviceApi.sDeviceInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DeviceApi.GetVideoDevices = function () {\n        var devices = DeviceApi.Devices;\n        var keys = Object.keys(devices);\n        var labels = keys.map(function (x) { return devices[x].label; });\n        return labels;\n    };\n    DeviceApi.Reset = function () {\n        DeviceApi.sUpdateEvents = [];\n        DeviceApi.sLastUpdate = 0;\n        DeviceApi.sDeviceInfo = {};\n        DeviceApi.sVideoDeviceCounter = 1;\n        DeviceApi.sAccessStream = null;\n        DeviceApi.sLastError = null;\n        DeviceApi.sIsPending = false;\n    };\n    /**Updates the device list based on the current\n     * access. Gives the devices numbers if the name isn't known.\n     */\n    DeviceApi.Update = function () {\n        DeviceApi.sLastError = null;\n        if (DeviceApi.IsApiAvailable()) {\n            DeviceApi.sIsPending = true;\n            navigator.mediaDevices.enumerateDevices()\n                .then(DeviceApi.InternalOnEnum)\n                .catch(DeviceApi.InternalOnErrorCatch);\n        }\n        else {\n            DeviceApi.InternalOnErrorString(DeviceApi.ENUM_FAILED);\n        }\n    };\n    DeviceApi.UpdateAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, fail) {\n                        DeviceApi.sLastError = null;\n                        if (DeviceApi.IsApiAvailable() == false) {\n                            DeviceApi.InternalOnErrorString(DeviceApi.ENUM_FAILED);\n                            fail(DeviceApi.ENUM_FAILED);\n                        }\n                        resolve();\n                    }).then(function () {\n                        DeviceApi.sIsPending = true;\n                        return navigator.mediaDevices.enumerateDevices()\n                            .then(DeviceApi.InternalOnEnum)\n                            .catch(DeviceApi.InternalOnErrorCatch);\n                    })];\n            });\n        });\n    };\n    /**Checks if the API is available in the browser.\n     * false - browser doesn't support this API\n     * true - browser supports the API (might still refuse to give\n     * us access later on)\n     */\n    DeviceApi.IsApiAvailable = function () {\n        if (navigator && navigator.mediaDevices && navigator.mediaDevices.enumerateDevices)\n            return true;\n        return false;\n    };\n    /**Asks the user for access first to get the full\n     * device names.\n     */\n    DeviceApi.RequestUpdate = function () {\n        DeviceApi.sLastError = null;\n        if (DeviceApi.IsApiAvailable()) {\n            DeviceApi.sIsPending = true;\n            var constraints = { video: true };\n            navigator.mediaDevices.getUserMedia(constraints)\n                .then(DeviceApi.InternalOnStream)\n                .catch(DeviceApi.InternalOnErrorCatch);\n        }\n        else {\n            DeviceApi.InternalOnErrorString(\"Can't access mediaDevices or enumerateDevices\");\n        }\n    };\n    DeviceApi.GetDeviceId = function (label) {\n        var devs = DeviceApi.Devices;\n        for (var key in devs) {\n            var dev = devs[key];\n            if (dev.label == label || dev.defaultLabel == label || dev.deviceId == label) {\n                return dev.deviceId;\n            }\n        }\n        return null;\n    };\n    DeviceApi.IsUserMediaAvailable = function () {\n        if (navigator && navigator.mediaDevices)\n            return true;\n        return false;\n    };\n    DeviceApi.ToConstraints = function (config) {\n        //ugly part starts -> call get user media data (no typescript support)\n        //different browsers have different calls...\n        //check  getSupportedConstraints()??? \n        //see https://w3c.github.io/mediacapture-main/getusermedia.html#constrainable-interface\n        //set default ideal to very common low 320x240 to avoid overloading weak computers\n        var constraints = {\n            audio: config.Audio\n        };\n        var width = {};\n        var height = {};\n        var video = {};\n        var fps = {};\n        if (config.MinWidth != -1)\n            width.min = config.MinWidth;\n        if (config.MaxWidth != -1)\n            width.max = config.MaxWidth;\n        if (config.IdealWidth != -1)\n            width.ideal = config.IdealWidth;\n        if (config.MinHeight != -1)\n            height.min = config.MinHeight;\n        if (config.MaxHeight != -1)\n            height.max = config.MaxHeight;\n        if (config.IdealHeight != -1)\n            height.ideal = config.IdealHeight;\n        if (config.MinFps != -1)\n            fps.min = config.MinFps;\n        if (config.MaxFps != -1)\n            fps.max = config.MaxFps;\n        if (config.IdealFps != -1)\n            fps.ideal = config.IdealFps;\n        //user requested specific device? get it now to properly add it to the\n        //constraints later\n        var deviceId = null;\n        if (config.Video && config.VideoDeviceName && config.VideoDeviceName !== \"\") {\n            deviceId = DeviceApi.GetDeviceId(config.VideoDeviceName);\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].L(\"using device \" + config.VideoDeviceName);\n            if (deviceId === \"\") {\n                //Workaround for Chrome 81: If no camera access is allowed chrome returns the deviceId \"\"\n                //thus we can only request any video device. We can't select a specific one\n                deviceId = null;\n            }\n            else if (deviceId !== null) {\n                //all good\n            }\n            else {\n                _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(\"Failed to find deviceId for label \" + config.VideoDeviceName);\n                throw new Error(\"Unknown device \" + config.VideoDeviceName);\n            }\n        }\n        //watch out: unity changed behaviour and will now\n        //give 0 / 1 instead of false/true\n        //using === won't work\n        if (config.Video == false) {\n            //video is off\n            video = false;\n        }\n        else {\n            if (Object.keys(width).length > 0) {\n                video.width = width;\n            }\n            if (Object.keys(height).length > 0) {\n                video.height = height;\n            }\n            if (Object.keys(fps).length > 0) {\n                video.frameRate = fps;\n            }\n            if (deviceId !== null) {\n                video.deviceId = { \"exact\": deviceId };\n            }\n            //if we didn't add anything we need to set it to true\n            //at least (I assume?)\n            if (Object.keys(video).length == 0) {\n                video = true;\n            }\n        }\n        constraints.video = video;\n        return constraints;\n    };\n    DeviceApi.getBrowserUserMedia = function (constraints) {\n        return navigator.mediaDevices.getUserMedia(constraints);\n    };\n    DeviceApi.getAssetUserMedia = function (config) {\n        return new Promise(function (resolve) {\n            var res = DeviceApi.ToConstraints(config);\n            resolve(res);\n        }).then(function (constraints) {\n            return DeviceApi.getBrowserUserMedia(constraints);\n        });\n    };\n    DeviceApi.sLastUpdate = 0;\n    DeviceApi.sIsPending = false;\n    DeviceApi.sLastError = null;\n    DeviceApi.sDeviceInfo = {};\n    DeviceApi.sVideoDeviceCounter = 1;\n    DeviceApi.sAccessStream = null;\n    DeviceApi.sUpdateEvents = [];\n    DeviceApi.InternalOnEnum = function (devices) {\n        DeviceApi.sIsPending = false;\n        DeviceApi.sLastUpdate = new Date().getTime();\n        var newDeviceInfo = {};\n        for (var _i = 0, devices_1 = devices; _i < devices_1.length; _i++) {\n            var info = devices_1[_i];\n            if (info.kind != \"videoinput\")\n                continue;\n            var newInfo = new DeviceInfo();\n            newInfo.deviceId = info.deviceId;\n            var knownInfo = null;\n            if (newInfo.deviceId in DeviceApi.Devices) {\n                //known device. reuse the default label\n                knownInfo = DeviceApi.Devices[newInfo.deviceId];\n            }\n            //check if we gave this device a default label already\n            //this is used to identify it via a user readable name in case\n            //we update multiple times with proper labels / default labels\n            if (knownInfo != null) {\n                newInfo.defaultLabel = knownInfo.defaultLabel;\n            }\n            else {\n                newInfo.defaultLabel = info.kind + \" \" + DeviceApi.sVideoDeviceCounter;\n                ;\n                DeviceApi.sVideoDeviceCounter++;\n            }\n            //check if we know a proper label or got one this update\n            if (knownInfo != null && knownInfo.isLabelGuessed == false) {\n                //already have one\n                newInfo.label = knownInfo.label;\n                newInfo.isLabelGuessed = false;\n            }\n            else if (info.label) {\n                //got a new one\n                newInfo.label = info.label;\n                newInfo.isLabelGuessed = false;\n            }\n            else {\n                //no known label -> just use the default one\n                newInfo.label = newInfo.defaultLabel;\n                newInfo.isLabelGuessed = true;\n            }\n            newDeviceInfo[newInfo.deviceId] = newInfo;\n        }\n        DeviceApi.sDeviceInfo = newDeviceInfo;\n        if (DeviceApi.sAccessStream) {\n            var tracks = DeviceApi.sAccessStream.getTracks();\n            for (var i = 0; i < tracks.length; i++) {\n                tracks[i].stop();\n            }\n            DeviceApi.sAccessStream = null;\n        }\n        DeviceApi.TriggerChangedEvent();\n    };\n    DeviceApi.InternalOnErrorCatch = function (err) {\n        var txt = err.toString();\n        DeviceApi.InternalOnErrorString(txt);\n    };\n    DeviceApi.InternalOnErrorString = function (err) {\n        DeviceApi.sIsPending = false;\n        DeviceApi.sLastError = err;\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(err);\n        DeviceApi.TriggerChangedEvent();\n    };\n    DeviceApi.InternalOnStream = function (stream) {\n        DeviceApi.sAccessStream = stream;\n        DeviceApi.Update();\n    };\n    DeviceApi.ENUM_FAILED = \"Can't access mediaDevices or enumerateDevices\";\n    return DeviceApi;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0RldmljZUFwaS50cz84NzAyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUNzQztBQUl4QztJQUFBO1FBRVcsYUFBUSxHQUFVLElBQUksQ0FBQztRQUN2QixpQkFBWSxHQUFVLElBQUksQ0FBQztRQUMzQixVQUFLLEdBQVUsSUFBSSxDQUFDO1FBQ3BCLG1CQUFjLEdBQVcsSUFBSSxDQUFDO0lBQ3pDLENBQUM7SUFBRCxpQkFBQztBQUFELENBQUM7O0FBTUQ7SUFBQTtJQWlYQSxDQUFDO0lBOVdHLHNCQUFrQix1QkFBVTthQUE1QjtZQUVJLE9BQU8sU0FBUyxDQUFDLFdBQVcsQ0FBQztRQUNqQyxDQUFDOzs7T0FBQTtJQUNELHNCQUFrQixvQkFBTzthQUF6QjtZQUVJLE9BQU8sU0FBUyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckMsQ0FBQzs7O09BQUE7SUFHRCxzQkFBa0Isc0JBQVM7YUFBM0I7WUFDSSxPQUFPLFNBQVMsQ0FBQyxVQUFVLENBQUM7UUFDaEMsQ0FBQzs7O09BQUE7SUFHRCxzQkFBbUIsc0JBQVM7YUFBNUI7WUFFSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQzs7O09BQUE7SUFTYSw2QkFBbUIsR0FBakMsVUFBa0MsR0FBdUI7UUFFckQsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUNhLDZCQUFtQixHQUFqQyxVQUFrQyxHQUF1QjtRQUVyRCxJQUFJLEtBQUssR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqRCxJQUFHLEtBQUssSUFBSSxDQUFDLEVBQ2I7WUFDSSxTQUFTLENBQUMsYUFB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QzthQUNwQjtZQUNELFNBQVMsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1NBQ2xDO1FBQ0QsU0FBUyxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDcEMsQ0FBQztJQTBCYyw4QkFBb0IsR0FBRyxVQUFDLEdBQVk7UUFFL0MsSUFBSSxHQUFHLEdBQVcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2pDLFNBQVMsQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBQ2MsK0JBQXFCLEdBQUcsVUFBQyxHQUFVO1FBRTlDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBQzdCLFNBQVMsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDO1FBQzNCLG1EQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2IsU0FBUyxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVjLDBCQUFnQixHQUFHLFVBQUMsTUFBa0I7UUFFakQsU0FBUyxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUM7UUFDakMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxxQkFBVyxHQUFHLCtDQUErQyxDQUFDO0lBeU16RSxnQkFBQztDQUFBO0FBalhxQiIsImZpbGUiOiIuL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL0RldmljZUFwaS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbmltcG9ydCB7IFNMb2cgfSBmcm9tIFwiLi4vbmV0d29yay9pbmRleFwiO1xuaW1wb3J0IHsgTWVkaWFDb25maWcgfSBmcm9tIFwibWVkaWEvTWVkaWFDb25maWdcIjtcbmltcG9ydCB7IFZpZGVvSW5wdXQgfSBmcm9tIFwiLi9WaWRlb0lucHV0XCI7XG5cbmV4cG9ydCBjbGFzcyBEZXZpY2VJbmZvXG57XG4gICAgcHVibGljIGRldmljZUlkOnN0cmluZyA9IG51bGw7XG4gICAgcHVibGljIGRlZmF1bHRMYWJlbDpzdHJpbmcgPSBudWxsO1xuICAgIHB1YmxpYyBsYWJlbDpzdHJpbmcgPSBudWxsO1xuICAgIHB1YmxpYyBpc0xhYmVsR3Vlc3NlZDpib29sZWFuID0gdHJ1ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZpY2VBcGlPbkNoYW5nZWQge1xuICAgICgpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRGV2aWNlQXBpXG57XG4gICAgcHJpdmF0ZSBzdGF0aWMgc0xhc3RVcGRhdGUgPSAwO1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IExhc3RVcGRhdGUoKSA6bnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gRGV2aWNlQXBpLnNMYXN0VXBkYXRlO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldCBIYXNJbmZvKClcbiAgICB7XG4gICAgICAgIHJldHVybiBEZXZpY2VBcGkuc0xhc3RVcGRhdGUgPiAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHNJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICBwdWJsaWMgc3RhdGljIGdldCBJc1BlbmRpbmcoKXtcbiAgICAgICAgcmV0dXJuIERldmljZUFwaS5zSXNQZW5kaW5nO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHNMYXN0RXJyb3I6c3RyaW5nID0gbnVsbDtcbiAgICBwcml2YXRlIHN0YXRpYyBnZXQgTGFzdEVycm9yKClcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnNMYXN0RXJyb3I7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBzRGV2aWNlSW5mbzogeyBbaWQ6IHN0cmluZ10gOiBEZXZpY2VJbmZvOyB9ID0ge307XG4gICAgcHJpdmF0ZSBzdGF0aWMgc1ZpZGVvRGV2aWNlQ291bnRlciA9IDE7XG4gICAgcHJpdmF0ZSBzdGF0aWMgc0FjY2Vzc1N0cmVhbTpNZWRpYVN0cmVhbSA9IG51bGw7XG5cblxuICAgIHByaXZhdGUgc3RhdGljIHNVcGRhdGVFdmVudHM6IEFycmF5PERldmljZUFwaU9uQ2hhbmdlZD4gPSBbXTtcbiAgICBwdWJsaWMgc3RhdGljIEFkZE9uQ2hhbmdlZEhhbmRsZXIoZXZ0OiBEZXZpY2VBcGlPbkNoYW5nZWQpXG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc1VwZGF0ZUV2ZW50cy5wdXNoKGV2dCk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgUmVtT25DaGFuZ2VkSGFuZGxlcihldnQ6IERldmljZUFwaU9uQ2hhbmdlZClcbiAgICB7XG4gICAgICAgIGxldCBpbmRleCA9IERldmljZUFwaS5zVXBkYXRlRXZlbnRzLmluZGV4T2YoZXZ0KTtcbiAgICAgICAgaWYoaW5kZXggPj0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgRGV2aWNlQXBpLnNVcGRhdGVFdmVudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBTTG9nLkxXKFwiVHJpZWQgdG8gcmVtb3ZlIGFuIHVua25vd24gZXZlbnQgaGFuZGxlciBpbiBEZXZpY2VBcGkuUmVtT25DaGFuZ2VkSGFuZGxlclwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIFRyaWdnZXJDaGFuZ2VkRXZlbnQoKVxuICAgIHtcbiAgICAgICAgZm9yKGxldCB2IG9mIERldmljZUFwaS5zVXBkYXRlRXZlbnRzKVxuICAgICAgICB7XG4gICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgdigpO1xuICAgICAgICAgICAgfWNhdGNoKGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgU0xvZy5MRShcIkVycm9yIGluIERldmljZUFwaSB1c2VyIGV2ZW50IGhhbmRsZXI6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5leGNlcHRpb24oZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBJbnRlcm5hbE9uRW51bSA9IChkZXZpY2VzOk1lZGlhRGV2aWNlSW5mb1tdKT0+XG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc0lzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICBEZXZpY2VBcGkuc0xhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICBsZXQgbmV3RGV2aWNlSW5mbzogeyBbaWQ6IHN0cmluZ10gOiBEZXZpY2VJbmZvOyB9ID0ge307XG4gICAgICAgIGZvcihsZXQgaW5mbyBvZiBkZXZpY2VzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZihpbmZvLmtpbmQgIT0gXCJ2aWRlb2lucHV0XCIpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgbmV3SW5mbyA9IG5ldyBEZXZpY2VJbmZvKCk7XG4gICAgICAgICAgICBuZXdJbmZvLmRldmljZUlkICA9IGluZm8uZGV2aWNlSWQ7XG5cbiAgICAgICAgICAgIGxldCBrbm93bkluZm86RGV2aWNlSW5mbz0gbnVsbDtcbiAgICAgICAgICAgIGlmKG5ld0luZm8uZGV2aWNlSWQgaW4gRGV2aWNlQXBpLkRldmljZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy9rbm93biBkZXZpY2UuIHJldXNlIHRoZSBkZWZhdWx0IGxhYmVsXG4gICAgICAgICAgICAgICAga25vd25JbmZvID0gRGV2aWNlQXBpLkRldmljZXNbbmV3SW5mby5kZXZpY2VJZF07XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy9jaGVjayBpZiB3ZSBnYXZlIHRoaXMgZGV2aWNlIGEgZGVmYXVsdCBsYWJlbCBhbHJlYWR5XG4gICAgICAgICAgICAvL3RoaXMgaXMgdXNlZCB0byBpZGVudGlmeSBpdCB2aWEgYSB1c2VyIHJlYWRhYmxlIG5hbWUgaW4gY2FzZVxuICAgICAgICAgICAgLy93ZSB1cGRhdGUgbXVsdGlwbGUgdGltZXMgd2l0aCBwcm9wZXIgbGFiZWxzIC8gZGVmYXVsdCBsYWJlbHNcbiAgICAgICAgICAgIGlmKGtub3duSW5mbyAhPSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5ld0luZm8uZGVmYXVsdExhYmVsID0ga25vd25JbmZvLmRlZmF1bHRMYWJlbDtcbiAgICAgICAgICAgIH1lbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmV3SW5mby5kZWZhdWx0TGFiZWwgPSBpbmZvLmtpbmQgICsgXCIgXCIgKyBEZXZpY2VBcGkuc1ZpZGVvRGV2aWNlQ291bnRlcjs7XG4gICAgICAgICAgICAgICAgRGV2aWNlQXBpLnNWaWRlb0RldmljZUNvdW50ZXIrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jaGVjayBpZiB3ZSBrbm93IGEgcHJvcGVyIGxhYmVsIG9yIGdvdCBvbmUgdGhpcyB1cGRhdGVcbiAgICAgICAgICAgIGlmKGtub3duSW5mbyAhPSBudWxsICYmIGtub3duSW5mby5pc0xhYmVsR3Vlc3NlZCA9PSBmYWxzZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL2FscmVhZHkgaGF2ZSBvbmVcbiAgICAgICAgICAgICAgICBuZXdJbmZvLmxhYmVsID0ga25vd25JbmZvLmxhYmVsO1xuICAgICAgICAgICAgICAgIG5ld0luZm8uaXNMYWJlbEd1ZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGluZm8ubGFiZWwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy9nb3QgYSBuZXcgb25lXG4gICAgICAgICAgICAgICAgbmV3SW5mby5sYWJlbCA9IGluZm8ubGFiZWw7XG4gICAgICAgICAgICAgICAgbmV3SW5mby5pc0xhYmVsR3Vlc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLy9ubyBrbm93biBsYWJlbCAtPiBqdXN0IHVzZSB0aGUgZGVmYXVsdCBvbmVcbiAgICAgICAgICAgICAgICBuZXdJbmZvLmxhYmVsID0gbmV3SW5mby5kZWZhdWx0TGFiZWw7XG4gICAgICAgICAgICAgICAgbmV3SW5mby5pc0xhYmVsR3Vlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ld0RldmljZUluZm9bbmV3SW5mby5kZXZpY2VJZF0gPSBuZXdJbmZvO1xuICAgICAgICB9XG5cbiAgICAgICAgRGV2aWNlQXBpLnNEZXZpY2VJbmZvID0gbmV3RGV2aWNlSW5mbztcblxuICAgICAgICBpZihEZXZpY2VBcGkuc0FjY2Vzc1N0cmVhbSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IERldmljZUFwaS5zQWNjZXNzU3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0cmFja3NbaV0uc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRGV2aWNlQXBpLnNBY2Nlc3NTdHJlYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIERldmljZUFwaS5UcmlnZ2VyQ2hhbmdlZEV2ZW50KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgRGV2aWNlcygpXG4gICAge1xuICAgICAgICByZXR1cm4gRGV2aWNlQXBpLnNEZXZpY2VJbmZvO1xuICAgIH1cblxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRWaWRlb0RldmljZXMoKTogc3RyaW5nW117XG4gICAgICAgIGNvbnN0IGRldmljZXMgPSBEZXZpY2VBcGkuRGV2aWNlcztcbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRldmljZXMpO1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBrZXlzLm1hcCgoeCk9PntyZXR1cm4gZGV2aWNlc1t4XS5sYWJlbH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGxhYmVscztcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBSZXNldCgpXG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc1VwZGF0ZUV2ZW50cyA9IFtdO1xuICAgICAgICBEZXZpY2VBcGkuc0xhc3RVcGRhdGUgPSAwO1xuICAgICAgICBEZXZpY2VBcGkuc0RldmljZUluZm8gPSB7fTtcbiAgICAgICAgRGV2aWNlQXBpLnNWaWRlb0RldmljZUNvdW50ZXIgPSAxO1xuICAgICAgICBEZXZpY2VBcGkuc0FjY2Vzc1N0cmVhbSA9IG51bGw7XG4gICAgICAgIERldmljZUFwaS5zTGFzdEVycm9yID0gbnVsbDtcbiAgICAgICAgRGV2aWNlQXBpLnNJc1BlbmRpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBJbnRlcm5hbE9uRXJyb3JDYXRjaCA9IChlcnI6RE9NRXJyb3IpPT5cbiAgICB7XG4gICAgICAgIGxldCB0eHQgOnN0cmluZyA9IGVyci50b1N0cmluZygpO1xuICAgICAgICBEZXZpY2VBcGkuSW50ZXJuYWxPbkVycm9yU3RyaW5nKHR4dCk7XG4gICAgfVxuICAgIHByaXZhdGUgc3RhdGljIEludGVybmFsT25FcnJvclN0cmluZyA9IChlcnI6c3RyaW5nKT0+XG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc0lzUGVuZGluZyA9IGZhbHNlO1xuICAgICAgICBEZXZpY2VBcGkuc0xhc3RFcnJvciA9IGVycjtcbiAgICAgICAgU0xvZy5MRShlcnIpO1xuICAgICAgICBEZXZpY2VBcGkuVHJpZ2dlckNoYW5nZWRFdmVudCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIEludGVybmFsT25TdHJlYW0gPSAoc3RyZWFtOk1lZGlhU3RyZWFtKT0+XG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc0FjY2Vzc1N0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgRGV2aWNlQXBpLlVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBFTlVNX0ZBSUxFRCA9IFwiQ2FuJ3QgYWNjZXNzIG1lZGlhRGV2aWNlcyBvciBlbnVtZXJhdGVEZXZpY2VzXCI7XG4gICAgLyoqVXBkYXRlcyB0aGUgZGV2aWNlIGxpc3QgYmFzZWQgb24gdGhlIGN1cnJlbnRcbiAgICAgKiBhY2Nlc3MuIEdpdmVzIHRoZSBkZXZpY2VzIG51bWJlcnMgaWYgdGhlIG5hbWUgaXNuJ3Qga25vd24uXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBVcGRhdGUoKTp2b2lkXG4gICAge1xuICAgICAgICBEZXZpY2VBcGkuc0xhc3RFcnJvciA9IG51bGw7XG4gICAgICAgIGlmKERldmljZUFwaS5Jc0FwaUF2YWlsYWJsZSgpKVxuICAgICAgICB7XG4gICAgICAgICAgICBEZXZpY2VBcGkuc0lzUGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgICAgICAgLnRoZW4oRGV2aWNlQXBpLkludGVybmFsT25FbnVtKVxuICAgICAgICAgICAgLmNhdGNoKERldmljZUFwaS5JbnRlcm5hbE9uRXJyb3JDYXRjaCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgRGV2aWNlQXBpLkludGVybmFsT25FcnJvclN0cmluZyhEZXZpY2VBcGkuRU5VTV9GQUlMRUQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgVXBkYXRlQXN5bmMoKTpQcm9taXNlPHZvaWQ+XG4gICAge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIGZhaWwpPT57XG5cbiAgICAgICAgICAgIERldmljZUFwaS5zTGFzdEVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmKERldmljZUFwaS5Jc0FwaUF2YWlsYWJsZSgpID09IGZhbHNlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIERldmljZUFwaS5JbnRlcm5hbE9uRXJyb3JTdHJpbmcoRGV2aWNlQXBpLkVOVU1fRkFJTEVEKTtcbiAgICAgICAgICAgICAgICBmYWlsKERldmljZUFwaS5FTlVNX0ZBSUxFRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pLnRoZW4oKCk9PntcbiAgICAgICAgICAgIERldmljZUFwaS5zSXNQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgICAgICAgLnRoZW4oRGV2aWNlQXBpLkludGVybmFsT25FbnVtKVxuICAgICAgICAgICAgLmNhdGNoKERldmljZUFwaS5JbnRlcm5hbE9uRXJyb3JDYXRjaCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipDaGVja3MgaWYgdGhlIEFQSSBpcyBhdmFpbGFibGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICogZmFsc2UgLSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGlzIEFQSVxuICAgICAqIHRydWUgLSBicm93c2VyIHN1cHBvcnRzIHRoZSBBUEkgKG1pZ2h0IHN0aWxsIHJlZnVzZSB0byBnaXZlXG4gICAgICogdXMgYWNjZXNzIGxhdGVyIG9uKVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgSXNBcGlBdmFpbGFibGUoKTpib29sZWFuXG4gICAge1xuICAgICAgICBpZihuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipBc2tzIHRoZSB1c2VyIGZvciBhY2Nlc3MgZmlyc3QgdG8gZ2V0IHRoZSBmdWxsXG4gICAgICogZGV2aWNlIG5hbWVzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgUmVxdWVzdFVwZGF0ZSgpOnZvaWRcbiAgICB7XG4gICAgICAgIERldmljZUFwaS5zTGFzdEVycm9yID0gbnVsbDtcbiAgICAgICAgaWYoRGV2aWNlQXBpLklzQXBpQXZhaWxhYmxlKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIERldmljZUFwaS5zSXNQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjb25zdHJhaW50cyA9IHt2aWRlbzp0cnVlfTtcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgICAgICAgICAgIC50aGVuKERldmljZUFwaS5JbnRlcm5hbE9uU3RyZWFtKVxuICAgICAgICAgICAgICAgIC5jYXRjaChEZXZpY2VBcGkuSW50ZXJuYWxPbkVycm9yQ2F0Y2gpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIERldmljZUFwaS5JbnRlcm5hbE9uRXJyb3JTdHJpbmcoXCJDYW4ndCBhY2Nlc3MgbWVkaWFEZXZpY2VzIG9yIGVudW1lcmF0ZURldmljZXNcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBzdGF0aWMgR2V0RGV2aWNlSWQobGFiZWw6c3RyaW5nKTpzdHJpbmcge1xuXG4gICAgICAgIGxldCBkZXZzID0gRGV2aWNlQXBpLkRldmljZXM7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkZXZzKSB7XG4gICAgICAgICAgICBsZXQgZGV2ID0gZGV2c1trZXldO1xuICAgICAgICAgICAgaWYoZGV2LmxhYmVsID09IGxhYmVsIHx8IGRldi5kZWZhdWx0TGFiZWwgPT0gbGFiZWwgfHwgZGV2LmRldmljZUlkID09IGxhYmVsKXtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZXYuZGV2aWNlSWQ7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgSXNVc2VyTWVkaWFBdmFpbGFibGUoKVxuICAgIHtcbiAgICAgICAgaWYobmF2aWdhdG9yICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcblxuICAgIHB1YmxpYyBzdGF0aWMgVG9Db25zdHJhaW50cyhjb25maWc6IE1lZGlhQ29uZmlnKTogTWVkaWFTdHJlYW1Db25zdHJhaW50c1xuICAgIHtcbiAgICAgICAgLy91Z2x5IHBhcnQgc3RhcnRzIC0+IGNhbGwgZ2V0IHVzZXIgbWVkaWEgZGF0YSAobm8gdHlwZXNjcmlwdCBzdXBwb3J0KVxuICAgICAgICAvL2RpZmZlcmVudCBicm93c2VycyBoYXZlIGRpZmZlcmVudCBjYWxscy4uLlxuXG4gICAgICAgIC8vY2hlY2sgIGdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCk/Pz8gXG4gICAgICAgIC8vc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9tZWRpYWNhcHR1cmUtbWFpbi9nZXR1c2VybWVkaWEuaHRtbCNjb25zdHJhaW5hYmxlLWludGVyZmFjZVxuXG4gICAgICAgIC8vc2V0IGRlZmF1bHQgaWRlYWwgdG8gdmVyeSBjb21tb24gbG93IDMyMHgyNDAgdG8gYXZvaWQgb3ZlcmxvYWRpbmcgd2VhayBjb21wdXRlcnNcbiAgICAgICAgdmFyIGNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgYXVkaW86IGNvbmZpZy5BdWRpb1xuICAgICAgICB9IGFzIGFueTtcblxuXG4gICAgICAgIFxuICAgICAgICBsZXQgd2lkdGggPSB7fSBhcyBhbnk7XG4gICAgICAgIGxldCBoZWlnaHQgPSB7fSBhcyBhbnk7XG4gICAgICAgIGxldCB2aWRlbyA9IHt9IGFzIGFueTtcbiAgICAgICAgbGV0IGZwcyA9IHt9IGFzIGFueTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcuTWluV2lkdGggIT0gLTEpXG4gICAgICAgICAgICB3aWR0aC5taW4gPSBjb25maWcuTWluV2lkdGg7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5NYXhXaWR0aCAhPSAtMSlcbiAgICAgICAgICAgIHdpZHRoLm1heCA9IGNvbmZpZy5NYXhXaWR0aDtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcuSWRlYWxXaWR0aCAhPSAtMSlcbiAgICAgICAgICAgIHdpZHRoLmlkZWFsID0gY29uZmlnLklkZWFsV2lkdGg7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLk1pbkhlaWdodCAhPSAtMSlcbiAgICAgICAgICAgIGhlaWdodC5taW4gPSBjb25maWcuTWluSGVpZ2h0O1xuXG4gICAgICAgIGlmIChjb25maWcuTWF4SGVpZ2h0ICE9IC0xKVxuICAgICAgICAgICAgaGVpZ2h0Lm1heCA9IGNvbmZpZy5NYXhIZWlnaHQ7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5JZGVhbEhlaWdodCAhPSAtMSlcbiAgICAgICAgICAgIGhlaWdodC5pZGVhbCA9IGNvbmZpZy5JZGVhbEhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLk1pbkZwcyAhPSAtMSlcbiAgICAgICAgICAgIGZwcy5taW4gPSBjb25maWcuTWluRnBzO1xuICAgICAgICBpZiAoY29uZmlnLk1heEZwcyAhPSAtMSlcbiAgICAgICAgICAgIGZwcy5tYXggPSBjb25maWcuTWF4RnBzO1xuICAgICAgICBpZiAoY29uZmlnLklkZWFsRnBzICE9IC0xKVxuICAgICAgICAgICAgZnBzLmlkZWFsID0gY29uZmlnLklkZWFsRnBzO1xuICAgICAgICAgICAgXG5cbiAgICAgICAgLy91c2VyIHJlcXVlc3RlZCBzcGVjaWZpYyBkZXZpY2U/IGdldCBpdCBub3cgdG8gcHJvcGVybHkgYWRkIGl0IHRvIHRoZVxuICAgICAgICAvL2NvbnN0cmFpbnRzIGxhdGVyXG4gICAgICAgIGxldCBkZXZpY2VJZDpzdHJpbmcgPSBudWxsO1xuICAgICAgICBpZihjb25maWcuVmlkZW8gJiYgY29uZmlnLlZpZGVvRGV2aWNlTmFtZSAmJiBjb25maWcuVmlkZW9EZXZpY2VOYW1lICE9PSBcIlwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBkZXZpY2VJZCA9IERldmljZUFwaS5HZXREZXZpY2VJZChjb25maWcuVmlkZW9EZXZpY2VOYW1lKTtcbiAgICAgICAgICAgIFNMb2cuTChcInVzaW5nIGRldmljZSBcIiArIGNvbmZpZy5WaWRlb0RldmljZU5hbWUpO1xuICAgICAgICAgICAgaWYoZGV2aWNlSWQgPT09IFwiXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy9Xb3JrYXJvdW5kIGZvciBDaHJvbWUgODE6IElmIG5vIGNhbWVyYSBhY2Nlc3MgaXMgYWxsb3dlZCBjaHJvbWUgcmV0dXJucyB0aGUgZGV2aWNlSWQgXCJcIlxuICAgICAgICAgICAgICAgIC8vdGh1cyB3ZSBjYW4gb25seSByZXF1ZXN0IGFueSB2aWRlbyBkZXZpY2UuIFdlIGNhbid0IHNlbGVjdCBhIHNwZWNpZmljIG9uZVxuICAgICAgICAgICAgICAgIGRldmljZUlkID0gbnVsbDtcbiAgICAgICAgICAgIH1lbHNlIGlmKGRldmljZUlkICE9PSBudWxsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vYWxsIGdvb2RcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgU0xvZy5MRShcIkZhaWxlZCB0byBmaW5kIGRldmljZUlkIGZvciBsYWJlbCBcIiArIGNvbmZpZy5WaWRlb0RldmljZU5hbWUpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gZGV2aWNlIFwiICsgY29uZmlnLlZpZGVvRGV2aWNlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy93YXRjaCBvdXQ6IHVuaXR5IGNoYW5nZWQgYmVoYXZpb3VyIGFuZCB3aWxsIG5vd1xuICAgICAgICAvL2dpdmUgMCAvIDEgaW5zdGVhZCBvZiBmYWxzZS90cnVlXG4gICAgICAgIC8vdXNpbmcgPT09IHdvbid0IHdvcmtcbiAgICAgICAgaWYoY29uZmlnLlZpZGVvID09IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICAvL3ZpZGVvIGlzIG9mZlxuICAgICAgICAgICAgdmlkZW8gPSBmYWxzZTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMod2lkdGgpLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIHZpZGVvLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihPYmplY3Qua2V5cyhoZWlnaHQpLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIHZpZGVvLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKGZwcykubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICAgICAgdmlkZW8uZnJhbWVSYXRlID0gZnBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZGV2aWNlSWQgIT09IG51bGwpe1xuICAgICAgICAgICAgICAgIHZpZGVvLmRldmljZUlkID0ge1wiZXhhY3RcIjpkZXZpY2VJZH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vaWYgd2UgZGlkbid0IGFkZCBhbnl0aGluZyB3ZSBuZWVkIHRvIHNldCBpdCB0byB0cnVlXG4gICAgICAgICAgICAvL2F0IGxlYXN0IChJIGFzc3VtZT8pXG4gICAgICAgICAgICBpZihPYmplY3Qua2V5cyh2aWRlbykubGVuZ3RoID09IDApe1xuICAgICAgICAgICAgICAgIHZpZGVvID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB2aWRlbztcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0QnJvd3NlclVzZXJNZWRpYShjb25zdHJhaW50cz86IE1lZGlhU3RyZWFtQ29uc3RyYWludHMpOiBQcm9taXNlPE1lZGlhU3RyZWFtPntcblxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIGdldEFzc2V0VXNlck1lZGlhKGNvbmZpZzogTWVkaWFDb25maWcpOiBQcm9taXNlPE1lZGlhU3RyZWFtPntcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKT0+e1xuICAgICAgICAgICAgY29uc3QgcmVzID0gRGV2aWNlQXBpLlRvQ29uc3RyYWludHMoY29uZmlnKTtcbiAgICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgfSkudGhlbigoY29uc3RyYWludHMpPT57XG4gICAgICAgICAgICByZXR1cm4gRGV2aWNlQXBpLmdldEJyb3dzZXJVc2VyTWVkaWEoY29uc3RyYWludHMgYXMgTWVkaWFTdHJlYW1Db25zdHJhaW50cyk7XG4gICAgICAgIH0pOyAgICAgICAgXG4gICAgfVxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/DeviceApi.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/Media.ts":
/*!******************************************!*\
  !*** ./src/awrtc/media_browser/Media.ts ***!
  \******************************************/
/*! exports provided: Media */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Media\", function() { return Media; });\n/* harmony import */ var _DeviceApi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./DeviceApi */ \"./src/awrtc/media_browser/DeviceApi.ts\");\n/* harmony import */ var _VideoInput__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./VideoInput */ \"./src/awrtc/media_browser/VideoInput.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\nvar Media = /** @class */ (function () {\n    function Media() {\n        this.videoInput = null;\n    }\n    Object.defineProperty(Media, \"SharedInstance\", {\n        /**\n         * Singleton used for now as the browser version is missing a proper factory yet.\n         * Might be removed later.\n         */\n        get: function () {\n            return this.sSharedInstance;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Media.ResetSharedInstance = function () {\n        this.sSharedInstance = new Media();\n    };\n    Object.defineProperty(Media.prototype, \"VideoInput\", {\n        get: function () {\n            if (this.videoInput === null)\n                this.videoInput = new _VideoInput__WEBPACK_IMPORTED_MODULE_1__[\"VideoInput\"]();\n            return this.videoInput;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Media.prototype.GetVideoDevices = function () {\n        var real_devices = _DeviceApi__WEBPACK_IMPORTED_MODULE_0__[\"DeviceApi\"].GetVideoDevices();\n        var virtual_devices = this.VideoInput.GetDeviceNames();\n        return real_devices.concat(virtual_devices);\n    };\n    Media.IsNameSet = function (videoDeviceName) {\n        if (videoDeviceName !== null && videoDeviceName !== \"\") {\n            return true;\n        }\n        return false;\n    };\n    Media.prototype.getUserMedia = function (config) {\n        var _this = this;\n        if (config.Video && Media.IsNameSet(config.VideoDeviceName)\n            && this.videoInput != null\n            && this.videoInput.HasDevice(config.VideoDeviceName)) {\n            var res = Promise.resolve().then(function () { return __awaiter(_this, void 0, void 0, function () {\n                var stream, constraints, audio_stream;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            stream = this.videoInput.GetStream(config.VideoDeviceName);\n                            if (!config.Audio) return [3 /*break*/, 2];\n                            constraints = {};\n                            constraints.audio = true;\n                            return [4 /*yield*/, _DeviceApi__WEBPACK_IMPORTED_MODULE_0__[\"DeviceApi\"].getBrowserUserMedia(constraints)];\n                        case 1:\n                            audio_stream = _a.sent();\n                            stream.addTrack(audio_stream.getTracks()[0]);\n                            _a.label = 2;\n                        case 2: return [2 /*return*/, stream];\n                    }\n                });\n            }); });\n            return res;\n        }\n        return _DeviceApi__WEBPACK_IMPORTED_MODULE_0__[\"DeviceApi\"].getAssetUserMedia(config);\n    };\n    //experimental. Will be used instead of the device api to create streams \n    Media.sSharedInstance = new Media();\n    return Media;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL01lZGlhLnRzPzY0NzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNFO0FBRzFDO0lBdUJJO1FBUlEsZUFBVSxHQUFlLElBQUksQ0FBQztJQVV0QyxDQUFDO0lBbEJELHNCQUFrQix1QkFBYztRQUpoQzs7O1dBR0c7YUFDSDtZQUNJLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUNoQyxDQUFDOzs7T0FBQTtJQUVhLHlCQUFtQixHQUFqQztRQUNJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBSUQsc0JBQVcsNkJBQVU7YUFBckI7WUFDSSxJQUFHLElBQUksQ0FBQyxVQUFVLEtBQUssSUFBSTtnQkFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLHNEQUFVLEVBQUUsQ0FBQztZQUN2QyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFFM0IsQ0FBQzs7O09BQUE7SUFJTSwrQkFBZSxHQUF0QjtRQUNJLElBQU0sWUFBWSxHQUFHLG9EQUFTLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDakQsSUFBTSxlQUFlLEdBQWMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUNwRSxPQUFPLFlBQVksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVhLGVBQVMsR0FBdkIsVUFBd0IsZUFBdUI7UUFFM0MsSUFBRyxlQUFlLEtBQUssSUFBSSxJQUFJLGVBQWUsS0FBSyxFQUFFLEVBQ3JEO1lBQ0ksT0FBTyxJQUFJLENBQUM7U0FDZjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFTSw0QkFBWSxHQUFuQixVQUFvQixNQUFtQjtRQUF2QyxpQkF1QkM7UUFyQkcsSUFBRyxNQUFNLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztlQUNuRCxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUk7ZUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUN4RDtZQUVJLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUM7Ozs7OzRCQUN6QixNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2lDQUM1RCxNQUFNLENBQUMsS0FBSyxFQUFaLHdCQUFZOzRCQUVQLFdBQVcsR0FBRyxFQUE0Qjs0QkFDOUMsV0FBVyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7NEJBQ04scUJBQU0sb0RBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUM7OzRCQUEvRCxZQUFZLEdBQUcsU0FBZ0Q7NEJBQ25FLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDOztnQ0FFaEQsc0JBQU8sTUFBTSxFQUFDOzs7aUJBQ2pCLENBQUM7WUFFRixPQUFPLEdBQUcsQ0FBQztTQUNkO1FBRUQsT0FBTyxvREFBUyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUEvREQseUVBQXlFO0lBQzFELHFCQUFlLEdBQVUsSUFBSSxLQUFLLEVBQUUsQ0FBQztJQStEeEQsWUFBQztDQUFBO0FBakVpQiIsImZpbGUiOiIuL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL01lZGlhLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGV2aWNlQXBpIH0gZnJvbSBcIi4vRGV2aWNlQXBpXCI7XG5pbXBvcnQgeyBWaWRlb0lucHV0IH0gZnJvbSBcIi4vVmlkZW9JbnB1dFwiO1xuaW1wb3J0IHsgTWVkaWFDb25maWcgfSBmcm9tIFwibWVkaWEvTWVkaWFDb25maWdcIjtcblxuZXhwb3J0IGNsYXNzIE1lZGlhe1xuICAgIC8vZXhwZXJpbWVudGFsLiBXaWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZGV2aWNlIGFwaSB0byBjcmVhdGUgc3RyZWFtcyBcbiAgICBwcml2YXRlIHN0YXRpYyBzU2hhcmVkSW5zdGFuY2UgOk1lZGlhID0gbmV3IE1lZGlhKCk7XG4gICAgLyoqXG4gICAgICogU2luZ2xldG9uIHVzZWQgZm9yIG5vdyBhcyB0aGUgYnJvd3NlciB2ZXJzaW9uIGlzIG1pc3NpbmcgYSBwcm9wZXIgZmFjdG9yeSB5ZXQuIFxuICAgICAqIE1pZ2h0IGJlIHJlbW92ZWQgbGF0ZXIuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXQgU2hhcmVkSW5zdGFuY2UoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuc1NoYXJlZEluc3RhbmNlO1xuICAgIH0gXG5cbiAgICBwdWJsaWMgc3RhdGljIFJlc2V0U2hhcmVkSW5zdGFuY2UoKXtcbiAgICAgICAgdGhpcy5zU2hhcmVkSW5zdGFuY2UgPSBuZXcgTWVkaWEoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZpZGVvSW5wdXQ6IFZpZGVvSW5wdXQgPSBudWxsO1xuXG4gICAgcHVibGljIGdldCBWaWRlb0lucHV0KCkgOiBWaWRlb0lucHV0e1xuICAgICAgICBpZih0aGlzLnZpZGVvSW5wdXQgPT09IG51bGwpXG4gICAgICAgICAgICB0aGlzLnZpZGVvSW5wdXQgPSBuZXcgVmlkZW9JbnB1dCgpO1xuICAgICAgICByZXR1cm4gdGhpcy52aWRlb0lucHV0O1xuXG4gICAgfVxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcigpe1xuXG4gICAgfVxuICAgIHB1YmxpYyBHZXRWaWRlb0RldmljZXMoKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCByZWFsX2RldmljZXMgPSBEZXZpY2VBcGkuR2V0VmlkZW9EZXZpY2VzKCk7XG4gICAgICAgIGNvbnN0IHZpcnR1YWxfZGV2aWNlcyA6IHN0cmluZ1tdID0gdGhpcy5WaWRlb0lucHV0LkdldERldmljZU5hbWVzKCk7XG4gICAgICAgIHJldHVybiByZWFsX2RldmljZXMuY29uY2F0KHZpcnR1YWxfZGV2aWNlcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBJc05hbWVTZXQodmlkZW9EZXZpY2VOYW1lOiBzdHJpbmcpIDogYm9vbGVhbntcblxuICAgICAgICBpZih2aWRlb0RldmljZU5hbWUgIT09IG51bGwgJiYgdmlkZW9EZXZpY2VOYW1lICE9PSBcIlwiIClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0VXNlck1lZGlhKGNvbmZpZzogTWVkaWFDb25maWcpOiBQcm9taXNlPE1lZGlhU3RyZWFtPntcbiAgICAgICAgXG4gICAgICAgIGlmKGNvbmZpZy5WaWRlbyAmJiBNZWRpYS5Jc05hbWVTZXQoY29uZmlnLlZpZGVvRGV2aWNlTmFtZSkgXG4gICAgICAgICAgICAmJiB0aGlzLnZpZGVvSW5wdXQgIT0gbnVsbCBcbiAgICAgICAgICAgICYmIHRoaXMudmlkZW9JbnB1dC5IYXNEZXZpY2UoY29uZmlnLlZpZGVvRGV2aWNlTmFtZSkpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgbGV0IHJlcyA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCk9PntcbiAgICAgICAgICAgICAgICBsZXQgc3RyZWFtID0gdGhpcy52aWRlb0lucHV0LkdldFN0cmVhbShjb25maWcuVmlkZW9EZXZpY2VOYW1lKTtcbiAgICAgICAgICAgICAgICBpZihjb25maWcuQXVkaW8pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29uc3RyYWludHMgPSB7fSBhcyBNZWRpYVN0cmVhbUNvbnN0cmFpbnRzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvX3N0cmVhbSA9IGF3YWl0IERldmljZUFwaS5nZXRCcm93c2VyVXNlck1lZGlhKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtLmFkZFRyYWNrKGF1ZGlvX3N0cmVhbS5nZXRUcmFja3MoKVswXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gRGV2aWNlQXBpLmdldEFzc2V0VXNlck1lZGlhKGNvbmZpZyk7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/Media.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/MediaPeer.ts":
/*!**********************************************!*\
  !*** ./src/awrtc/media_browser/MediaPeer.ts ***!
  \**********************************************/
/*! exports provided: MediaPeer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MediaPeer\", function() { return MediaPeer; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BrowserMediaStream */ \"./src/awrtc/media_browser/BrowserMediaStream.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\nvar MediaPeer = /** @class */ (function (_super) {\n    __extends(MediaPeer, _super);\n    function MediaPeer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mRemoteStream = null;\n        //quick workaround to allow html user to get the HTMLVideoElement once it is\n        //created. Might be done via events later to make wrapping to unity/emscripten possible\n        _this.InternalStreamAdded = null;\n        return _this;\n    }\n    MediaPeer.prototype.OnSetup = function () {\n        var _this = this;\n        _super.prototype.OnSetup.call(this);\n        //TODO: test in different browsers if boolean works now\n        //this is unclear in the API. according to typescript they are boolean, in native code they are int\n        //and some browser failed in the past if boolean was used ... \n        this.mOfferOptions = { \"offerToReceiveAudio\": true, \"offerToReceiveVideo\": true };\n        if (MediaPeer.sUseObsolete) {\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LW(\"Using obsolete onaddstream as not all browsers support ontrack\");\n            this.mPeer.onaddstream = function (streamEvent) { _this.OnAddStream(streamEvent); };\n        }\n        else {\n            this.mPeer.ontrack = function (ev) { _this.OnTrack(ev); };\n        }\n    };\n    MediaPeer.prototype.OnCleanup = function () {\n        _super.prototype.OnCleanup.call(this);\n        if (this.mRemoteStream != null) {\n            this.mRemoteStream.Dispose();\n            this.mRemoteStream = null;\n        }\n    };\n    MediaPeer.prototype.OnAddStream = function (streamEvent) {\n        this.SetupStream(streamEvent.stream);\n    };\n    MediaPeer.prototype.OnTrack = function (ev) {\n        if (ev && ev.streams && ev.streams.length > 0) {\n            //this is getting called twice if audio and video is active\n            if (this.mRemoteStream == null)\n                this.SetupStream(ev.streams[0]);\n        }\n        else {\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(\"Unexpected RTCTrackEvent: \" + JSON.stringify(ev));\n        }\n    };\n    MediaPeer.prototype.SetupStream = function (stream) {\n        var _this = this;\n        this.mRemoteStream = new _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_1__[\"BrowserMediaStream\"](stream);\n        //trigger events once the stream has its meta data available\n        this.mRemoteStream.InternalStreamAdded = function (stream) {\n            if (_this.InternalStreamAdded != null) {\n                _this.InternalStreamAdded(_this, stream);\n            }\n        };\n    };\n    MediaPeer.prototype.TryGetRemoteFrame = function () {\n        if (this.mRemoteStream == null)\n            return null;\n        return this.mRemoteStream.TryGetFrame();\n    };\n    MediaPeer.prototype.PeekFrame = function () {\n        if (this.mRemoteStream == null)\n            return null;\n        return this.mRemoteStream.PeekFrame();\n    };\n    MediaPeer.prototype.AddLocalStream = function (stream) {\n        if (MediaPeer.sUseObsolete) {\n            this.mPeer.addStream(stream);\n        }\n        else {\n            for (var _i = 0, _a = stream.getTracks(); _i < _a.length; _i++) {\n                var v = _a[_i];\n                this.mPeer.addTrack(v, stream);\n            }\n        }\n    };\n    MediaPeer.prototype.Update = function () {\n        _super.prototype.Update.call(this);\n        if (this.mRemoteStream != null) {\n            this.mRemoteStream.Update();\n        }\n    };\n    MediaPeer.prototype.SetVolume = function (volume) {\n        if (this.mRemoteStream != null)\n            this.mRemoteStream.SetVolume(volume);\n    };\n    MediaPeer.prototype.HasAudioTrack = function () {\n        if (this.mRemoteStream != null)\n            return this.mRemoteStream.HasAudioTrack();\n        return false;\n    };\n    MediaPeer.prototype.HasVideoTrack = function () {\n        if (this.mRemoteStream != null)\n            return this.mRemoteStream.HasVideoTrack();\n        return false;\n    };\n    //true - will use obsolete onstream / add stream\n    //false - will use ontrack / addtrack (seems to work fine now even on chrome)\n    MediaPeer.sUseObsolete = false;\n    return MediaPeer;\n}(_network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcDataPeer\"]));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL01lZGlhUGVlci50cz83NmNkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDc0Q7QUFDRTtBQWdCMUQ7SUFBK0IsNkJBQWM7SUFBN0M7UUFBQSxxRUFpSEM7UUEvR1csbUJBQWEsR0FBdUIsSUFBSSxDQUFDO1FBQ2pELDRFQUE0RTtRQUM1RSx1RkFBdUY7UUFDaEYseUJBQW1CLEdBQXlELElBQUksQ0FBQzs7SUE0RzVGLENBQUM7SUFyR2EsMkJBQU8sR0FBakI7UUFBQSxpQkFjQztRQWJHLGlCQUFNLE9BQU8sV0FBRSxDQUFDO1FBQ2hCLHVEQUF1RDtRQUN2RCxtR0FBbUc7UUFDbkcsOERBQThEO1FBQzlELElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxxQkFBcUIsRUFBRSxJQUFJLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFFbEYsSUFBRyxTQUFTLENBQUMsWUFBWSxFQUFFO1lBQ3ZCLG1EQUFJLENBQUMsRUFBRSxDQUFDLGdFQUFnRSxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLEtBQW1DLENBQUMsV0FBVyxHQUFHLFVBQUMsV0FBZ0MsSUFBTyxLQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BJO2FBQ0c7WUFDQSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxVQUFDLEVBQWdCLElBQUksS0FBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDO1NBQy9EO0lBQ0wsQ0FBQztJQUNTLDZCQUFTLEdBQW5CO1FBQ0ksaUJBQU0sU0FBUyxXQUFFLENBQUM7UUFDbEIsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksRUFBRTtZQUM1QixJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxD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LEVBQUUsQ0FBQztRQUM5QyxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBekdELGdEQUFnRDtJQUNoRCw2RUFBNkU7SUFDL0Qsc0JBQVksR0FBRyxLQUFLLENBQUM7SUF3R3ZDLGdCQUFDO0NBQUEsQ0FqSDhCLDZEQUFjLEdBaUg1QztBQWpIcUIiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWFfYnJvd3Nlci9NZWRpYVBlZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQgeyBXZWJSdGNEYXRhUGVlciwgU0xvZyB9IGZyb20gXCIuLi9uZXR3b3JrL2luZGV4XCI7XG5pbXBvcnQgeyBCcm93c2VyTWVkaWFTdHJlYW0gfSBmcm9tIFwiLi9Ccm93c2VyTWVkaWFTdHJlYW1cIjtcbmltcG9ydCB7IElGcmFtZURhdGEgfSBmcm9tIFwiLi4vbWVkaWEvUmF3RnJhbWVcIjtcblxuLy9UT0RPOiBOb3QgcGFydCBvZiB0eXBlc2NyaXB0IGFzIGl0IGlzIG9ic29sZXRlIGJ1dFxuLy9jaHJvbWUgbWlnaHQgc3RpbGwgbmVlZCB0aGlzXG5leHBvcnQgaW50ZXJmYWNlIFJUQ01lZGlhU3RyZWFtRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gICAgc3RyZWFtOiBNZWRpYVN0cmVhbTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSVENQZWVyQ29ubmVjdGlvbk9ic29sZXRlIGV4dGVuZHMgUlRDUGVlckNvbm5lY3Rpb25cbntcbiAgICBvbmFkZHN0cmVhbTogKCh0aGlzOiBSVENQZWVyQ29ubmVjdGlvbiwgc3RyZWFtRXZlbnQ6IFJUQ01lZGlhU3RyZWFtRXZlbnQpID0+IGFueSkgfCBudWxsO1xuICAgIGFkZFN0cmVhbShzdHJlYW06IE1lZGlhU3RyZWFtKTogdm9pZDtcbn1cblxuXG5leHBvcnQgY2xhc3MgTWVkaWFQZWVyIGV4dGVuZHMgV2ViUnRjRGF0YVBlZXJcbntcbiAgICBwcml2YXRlIG1SZW1vdGVTdHJlYW06IEJyb3dzZXJNZWRpYVN0cmVhbSA9IG51bGw7XG4gICAgLy9xdWljayB3b3JrYXJvdW5kIHRvIGFsbG93IGh0bWwgdXNlciB0byBnZXQgdGhlIEhUTUxWaWRlb0VsZW1lbnQgb25jZSBpdCBpc1xuICAgIC8vY3JlYXRlZC4gTWlnaHQgYmUgZG9uZSB2aWEgZXZlbnRzIGxhdGVyIHRvIG1ha2Ugd3JhcHBpbmcgdG8gdW5pdHkvZW1zY3JpcHRlbiBwb3NzaWJsZVxuICAgIHB1YmxpYyBJbnRlcm5hbFN0cmVhbUFkZGVkOiAocGVlcjpNZWRpYVBlZXIsIHN0cmVhbTogQnJvd3Nlck1lZGlhU3RyZWFtKSA9PiB2b2lkID0gbnVsbDtcbiAgICBcbiAgICAvL3RydWUgLSB3aWxsIHVzZSBvYnNvbGV0ZSBvbnN0cmVhbSAvIGFkZCBzdHJlYW1cbiAgICAvL2ZhbHNlIC0gd2lsbCB1c2Ugb250cmFjayAvIGFkZHRyYWNrIChzZWVtcyB0byB3b3JrIGZpbmUgbm93IGV2ZW4gb24gY2hyb21lKVxuICAgIHB1YmxpYyBzdGF0aWMgc1VzZU9ic29sZXRlID0gZmFsc2U7XG5cbiAgICBcbiAgICBwcm90ZWN0ZWQgT25TZXR1cCgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuT25TZXR1cCgpO1xuICAgICAgICAvL1RPRE86IHRlc3QgaW4gZGlmZmVyZW50IGJyb3dzZXJzIGlmIGJvb2xlYW4gd29ya3Mgbm93XG4gICAgICAgIC8vdGhpcyBpcyB1bmNsZWFyIGluIHRoZSBBUEkuIGFjY29yZGluZyB0byB0eXBlc2NyaXB0IHRoZXkgYXJlIGJvb2xlYW4sIGluIG5hdGl2ZSBjb2RlIHRoZXkgYXJlIGludFxuICAgICAgICAvL2FuZCBzb21lIGJyb3dzZXIgZmFpbGVkIGluIHRoZSBwYXN0IGlmIGJvb2xlYW4gd2FzIHVzZWQgLi4uIFxuICAgICAgICB0aGlzLm1PZmZlck9wdGlvbnMgPSB7IFwib2ZmZXJUb1JlY2VpdmVBdWRpb1wiOiB0cnVlLCBcIm9mZmVyVG9SZWNlaXZlVmlkZW9cIjogdHJ1ZSB9O1xuICAgICAgICBcbiAgICAgICAgaWYoTWVkaWFQZWVyLnNVc2VPYnNvbGV0ZSkge1xuICAgICAgICAgICAgU0xvZy5MVyhcIlVzaW5nIG9ic29sZXRlIG9uYWRkc3RyZWFtIGFzIG5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCBvbnRyYWNrXCIpO1xuICAgICAgICAgICAgKHRoaXMubVBlZXIgYXMgUlRDUGVlckNvbm5lY3Rpb25PYnNvbGV0ZSkub25hZGRzdHJlYW0gPSAoc3RyZWFtRXZlbnQ6IFJUQ01lZGlhU3RyZWFtRXZlbnQpID0+IHsgdGhpcy5PbkFkZFN0cmVhbShzdHJlYW1FdmVudCk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMubVBlZXIub250cmFjayA9IChldjpSVENUcmFja0V2ZW50KT0+e3RoaXMuT25UcmFjayhldik7fVxuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBPbkNsZWFudXAoKSB7XG4gICAgICAgIHN1cGVyLk9uQ2xlYW51cCgpO1xuICAgICAgICBpZiAodGhpcy5tUmVtb3RlU3RyZWFtICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubVJlbW90ZVN0cmVhbS5EaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1SZW1vdGVTdHJlYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgT25BZGRTdHJlYW0oc3RyZWFtRXZlbnQ6IFJUQ01lZGlhU3RyZWFtRXZlbnQpIHtcbiAgICAgICAgdGhpcy5TZXR1cFN0cmVhbShzdHJlYW1FdmVudC5zdHJlYW0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgT25UcmFjayhldjpSVENUcmFja0V2ZW50KXtcblxuICAgICAgICBpZihldiAmJiBldi5zdHJlYW1zICYmIGV2LnN0cmVhbXMubGVuZ3RoID4gMClcbiAgICAgICAge1xuICAgICAgICAgICAgLy90aGlzIGlzIGdldHRpbmcgY2FsbGVkIHR3aWNlIGlmIGF1ZGlvIGFuZCB2aWRlbyBpcyBhY3RpdmVcbiAgICAgICAgICAgIGlmKHRoaXMubVJlbW90ZVN0cmVhbSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHRoaXMuU2V0dXBTdHJlYW0oZXYuc3RyZWFtc1swXSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgU0xvZy5MRShcIlVuZXhwZWN0ZWQgUlRDVHJhY2tFdmVudDogXCIgKyBKU09OLnN0cmluZ2lmeShldikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBTZXR1cFN0cmVhbShzdHJlYW06TWVkaWFTdHJlYW0pXG4gICAge1xuICAgICAgICB0aGlzLm1SZW1vdGVTdHJlYW0gPSBuZXcgQnJvd3Nlck1lZGlhU3RyZWFtKHN0cmVhbSk7XG4gICAgICAgIC8vdHJpZ2dlciBldmVudHMgb25jZSB0aGUgc3RyZWFtIGhhcyBpdHMgbWV0YSBkYXRhIGF2YWlsYWJsZVxuICAgICAgICB0aGlzLm1SZW1vdGVTdHJlYW0uSW50ZXJuYWxTdHJlYW1BZGRlZCA9IChzdHJlYW0pID0+e1xuICAgICAgICAgICAgaWYodGhpcy5JbnRlcm5hbFN0cmVhbUFkZGVkICE9IG51bGwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5JbnRlcm5hbFN0cmVhbUFkZGVkKHRoaXMsIHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIFRyeUdldFJlbW90ZUZyYW1lKCk6IElGcmFtZURhdGFcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLm1SZW1vdGVTdHJlYW0gPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5tUmVtb3RlU3RyZWFtLlRyeUdldEZyYW1lKCk7XG4gICAgfVxuXG4gICAgcHVibGljIFBlZWtGcmFtZSgpOiBJRnJhbWVEYXRhIHtcbiAgICAgICAgaWYgKHRoaXMubVJlbW90ZVN0cmVhbSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm1SZW1vdGVTdHJlYW0uUGVla0ZyYW1lKCk7XG4gICAgfVxuXG4gICAgcHVibGljIEFkZExvY2FsU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pIHtcblxuICAgIFxuICAgICAgICBpZihNZWRpYVBlZXIuc1VzZU9ic29sZXRlKSB7XG4gICAgICAgICAgICAodGhpcy5tUGVlciBhcyBSVENQZWVyQ29ubmVjdGlvbk9ic29sZXRlKS5hZGRTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgZm9yKGxldCB2IG9mIHN0cmVhbS5nZXRUcmFja3MoKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1QZWVyLmFkZFRyYWNrKHYsIHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBVcGRhdGUoKSB7XG4gICAgICAgIHN1cGVyLlVwZGF0ZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLm1SZW1vdGVTdHJlYW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5tUmVtb3RlU3RyZWFtLlVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFNldFZvbHVtZSh2b2x1bWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tUmVtb3RlU3RyZWFtICE9IG51bGwpXG4gICAgICAgICAgICB0aGlzLm1SZW1vdGVTdHJlYW0uU2V0Vm9sdW1lKHZvbHVtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIEhhc0F1ZGlvVHJhY2soKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLm1SZW1vdGVTdHJlYW0gIT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1SZW1vdGVTdHJlYW0uSGFzQXVkaW9UcmFjaygpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHB1YmxpYyBIYXNWaWRlb1RyYWNrKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5tUmVtb3RlU3RyZWFtICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tUmVtb3RlU3RyZWFtLkhhc1ZpZGVvVHJhY2soKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/MediaPeer.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/VideoInput.ts":
/*!***********************************************!*\
  !*** ./src/awrtc/media_browser/VideoInput.ts ***!
  \***********************************************/
/*! exports provided: VideoInput, VideoInputType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VideoInput\", function() { return VideoInput; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VideoInputType\", function() { return VideoInputType; });\n/**TS version of the C++ / C# side Native VideoInput API\n *\n *\n * In addition it also supports adding a HTMLCanvasElement as a video device. This can be\n * a lot faster in the browser than the C / C++ style UpdateFrame methods that use raw byte arrays\n * or pointers to deliver an image.\n *\n * Note there are currently three distinct ways how this is used:\n * 1.   Using AddCanvasDevice without scaling (wdith = 0, height =0 or the same as the canvas)\n *      In this mode the MediaStream will be returned from the canvas. Drawing calls from the canvas\n *      turn into video frames of the video without any manual UpdateFrame calls\n *\n * 2.   Using AddCanvasDevice with scaling by setting a width / height different from the canvas.\n *      In this mode the user draws to the canvas and every time UpdateFrame is called a scaled frame\n *      is created that will turn into video frames. Lower UpdateFrame calls will reduce the framerate\n *      even if the original canvas us used a higher framerate.\n *      This mode should result in lower data usage.\n *\n * 3.   Using AddDevice and UpdateFrame to deliver raw byte array frames. This is a compatibility mode\n *      that works similar to the C / C++ and C# API. An internal canvas is created and updated based on\n *      the data the user delivers. This mode makes sense if you generate custom data that doesn't have\n *      a canvas as its source.\n *      This mode can be quite slow and inefficient.\n *\n * TODO:\n *  -   Using AddDevice with one resolution & UpdateFrame with another might not support scaling yet but\n *      activating the 2nd canvas for scaling might\n *      reduce the performance even more. Check if there is a better solution and if scaling is even needed.\n *      It could easily be added by calling initScaling but it must be known if scaling is required before\n *      the device is selected by the user. Given that scaling can reduce the performance doing so by default\n *      might cause problems for some users.\n *\n *  -   UpdateFrame rotation and firstRowIsBottom aren't supported yet. Looks like they aren't needed for\n *      WebGL anyway. Looks like frames here always start with the top line and rotation is automatically\n *      handled by the browser.\n *\n */\nvar VideoInput = /** @class */ (function () {\n    function VideoInput() {\n        this.canvasDevices = {};\n    }\n    /**Adds a canvas to use as video source for streaming.\n     *\n     * Make sure canvas.getContext is at least called once before calling this method.\n     *\n     * @param canvas\n     * @param deviceName\n     * @param width\n     * @param height\n     * @param fps\n     */\n    VideoInput.prototype.AddCanvasDevice = function (canvas, deviceName, width, height, fps) {\n        var cdev = CanvasDevice.CreateExternal(canvas, fps);\n        if (width != canvas.width || height != canvas.height) {\n            //console.warn(\"testing scaling\");\n            cdev.initScaling(width, height);\n        }\n        this.canvasDevices[deviceName] = cdev;\n    };\n    /**For internal use.\n     * Allows to check if the device already exists.\n     *\n     * @param dev\n     */\n    VideoInput.prototype.HasDevice = function (dev) {\n        return dev in this.canvasDevices;\n    };\n    /**For internal use.\n     * Lists all registered devices.\n     *\n     */\n    VideoInput.prototype.GetDeviceNames = function () {\n        return Object.keys(this.canvasDevices);\n    };\n    /**For internal use.\n     * Returns a MediaStream for the given device.\n     *\n     * @param dev\n     */\n    VideoInput.prototype.GetStream = function (dev) {\n        if (this.HasDevice(dev)) {\n            var device = this.canvasDevices[dev];\n            //watch out: This can trigger an exception if getContext has never been called before.\n            //There doesn't seem to way to detect this beforehand though\n            var stream = device.captureStream();\n            return stream;\n        }\n        return null;\n    };\n    /**C# API: public void AddDevice(string name, int width, int height, int fps);\n     *\n     * Adds a device that will be accessible via the given name. Width / Height determines\n     * the size of the canvas that is used to stream the video.\n     *\n     *\n     * @param name unique name for the canvas\n     * @param width width of the canvase used for the stream\n     * @param height height of the canvase used for the stream\n     * @param fps Expected FPS used by the stream. 0 or undefined to let the browser decide (likely based on actual draw calls)\n     */\n    VideoInput.prototype.AddDevice = function (name, width, height, fps) {\n        var cdev = CanvasDevice.CreateInternal(width, height, fps);\n        this.canvasDevices[name] = cdev;\n    };\n    VideoInput.prototype.RemCanvasDevice = function (deviceName) {\n        var cdev = this.canvasDevices[deviceName];\n        if (cdev) {\n            delete this.canvasDevices[deviceName];\n        }\n    };\n    //C# API: public void RemoveDevice(string name);\n    VideoInput.prototype.RemoveDevice = function (name) {\n        this.RemCanvasDevice(name);\n    };\n    /**\n     * Use UpdateFrame with name only to trigger a new frame without changing the content (e.g. if AddCanvasDevice was used to add the device and it needs scaling)\n     * Use UpdateFrame with image data if you added the device via AddDevice and want to updat its content\n     *\n     *\n     *\n     * @param name name of the device\n     * @param dataPtr array to the image data\n     * @param width must be the exact width of the image in dataPtr\n     * @param height must be the exact height of the image in dataPtr\n     * @param type must be ARGB at the moment\n     * @param rotation not yet supported\n     * @param firstRowIsBottom not yet supported\n     */\n    VideoInput.prototype.UpdateFrame = function (name, dataPtr, width, height, type, rotation, firstRowIsBottom) {\n        if (type === void 0) { type = VideoInputType.ARGB; }\n        if (rotation === void 0) { rotation = 0; }\n        if (firstRowIsBottom === void 0) { firstRowIsBottom = true; }\n        if (this.HasDevice(name)) {\n            var device = this.canvasDevices[name];\n            if (device.IsExternal() || dataPtr == null) {\n                //can't change external images / no data available. just generate a new frame without new data \n                device.UpdateFrame();\n            }\n            else {\n                var data = new ImageData(dataPtr, width, height);\n                device.UpdateFrame(data);\n            }\n            return true;\n        }\n        return false;\n    };\n    return VideoInput;\n}());\n\n/**Wraps around a canvas object to use as a source for MediaStream.\n * It supports streaming via a second canvas that is used to scale the image\n * before streaming. For scaling UpdateFrame needs to be called one a frame.\n * Without scaling the browser will detect changes in the original canvas\n * and automatically update the stream\n *\n */\nvar CanvasDevice = /** @class */ (function () {\n    function CanvasDevice(c, external_canvas, fps) {\n        /**false = we own the canvas and can change its settings e.g. via VideoInput\n         * true = externally used canvas. Can't change width / height or any other settings\n         */\n        this.external_canvas = false;\n        /**Canvas element to handle scaling.\n         * Remains null if initScaling is never called and width / height is expected to\n         * fit the canvas.\n         *\n         */\n        this.scaling_canvas = null;\n        //private scaling_interval = -1;\n        this.is_capturing = false;\n        this.canvas = c;\n        this.external_canvas = external_canvas;\n        this.fps = fps;\n    }\n    CanvasDevice.prototype.getStreamingCanvas = function () {\n        if (this.scaling_canvas == null)\n            return this.canvas;\n        return this.scaling_canvas;\n    };\n    CanvasDevice.prototype.captureStream = function () {\n        if (this.is_capturing == false && this.scaling_canvas) {\n            //scaling is active. \n            this.startScaling();\n        }\n        this.is_capturing = true;\n        if (this.fps && this.fps > 0) {\n            return this.getStreamingCanvas().captureStream(this.fps);\n        }\n        return this.getStreamingCanvas().captureStream();\n    };\n    CanvasDevice.CreateInternal = function (width, height, fps) {\n        var c = CanvasDevice.MakeCanvas(width, height);\n        return new CanvasDevice(c, false, fps);\n    };\n    CanvasDevice.CreateExternal = function (c, fps) {\n        return new CanvasDevice(c, true, fps);\n    };\n    /**Adds scaling support to this canvas device.\n     *\n     * @param width\n     * @param height\n     */\n    CanvasDevice.prototype.initScaling = function (width, height) {\n        this.scaling_canvas = document.createElement(\"canvas\");\n        this.scaling_canvas.width = width;\n        this.scaling_canvas.height = height;\n        this.scaling_canvas.getContext(\"2d\");\n    };\n    /**Used to update the frame data if the canvas is managed internally.\n     * Use without image data to just trigger the scaling / generation of a new frame if the canvas is drawn to externally.\n     *\n     * If the canvas is managed externally and scaling is not required this method won't do anything. A new frame is instead\n     * generated automatically based on the browser & canvas drawing operations.\n     */\n    CanvasDevice.prototype.UpdateFrame = function (data) {\n        if (data) {\n            var ctx = this.canvas.getContext(\"2d\");\n            //TODO: This doesn't seem to support scaling out of the box\n            //we might need to combien this with the scaling system as well\n            //in case users deliver different resolutions than the device is setup for\n            ctx.putImageData(data, 0, 0);\n        }\n        this.scaleNow();\n    };\n    /**Called the first time we need the scaled image to ensure\n     * the buffers are all filled.\n     */\n    CanvasDevice.prototype.startScaling = function () {\n        this.scaleNow();\n    };\n    CanvasDevice.prototype.scaleNow = function () {\n        if (this.scaling_canvas != null) {\n            var ctx = this.scaling_canvas.getContext(\"2d\");\n            //ctx.fillStyle = \"#FF0000\";\n            //ctx.fillRect(0, 0, this.scaling_canvas.width, this.scaling_canvas.height);\n            //ctx.clearRect(0, 0, this.scaling_canvas.width, this.scaling_canvas.height)\n            ctx.drawImage(this.canvas, 0, 0, this.scaling_canvas.width, this.scaling_canvas.height);\n        }\n    };\n    CanvasDevice.prototype.IsExternal = function () {\n        return this.external_canvas;\n    };\n    CanvasDevice.MakeCanvas = function (width, height) {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = width;\n        canvas.height = height;\n        var ctx = canvas.getContext(\"2d\");\n        //make red for debugging purposes\n        ctx.fillStyle = \"red\";\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        return canvas;\n    };\n    return CanvasDevice;\n}());\n/** Only one format supported by browsers so far.\n *  Maybe more can be added in the future.\n */\nvar VideoInputType;\n(function (VideoInputType) {\n    VideoInputType[VideoInputType[\"ARGB\"] = 0] = \"ARGB\";\n})(VideoInputType || (VideoInputType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL1ZpZGVvSW5wdXQudHM/ZTI2ZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBb0NHO0FBQ0g7SUFHSTtRQUZRLGtCQUFhLEdBQWMsRUFBRSxDQUFDO0lBSXRDLENBQUM7SUFDRDs7Ozs7Ozs7O09BU0c7SUFDSSxvQ0FBZSxHQUF0QixVQUF1QixNQUF5QixFQUFFLFVBQWtCLEVBQUUsS0FBYSxFQUFFLE1BQWMsRUFBRSxHQUFXO1FBRzVHLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRXBELElBQUksS0FBSyxJQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFDbEQsa0NBQWtDO1lBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ25DO1FBQ0QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDMUMsQ0FBQztJQUNEOzs7O09BSUc7SUFDSSw4QkFBUyxHQUFoQixVQUFpQixHQUFXO1FBQ3hCLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDckMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLG1DQUFjLEdBQXJCO1FBQ0ksT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLDhCQUFTLEdBQWhCLFVBQWlCLEdBQVc7UUFDeEIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3JCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFD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TSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hELE9BQU8sTUFBZ0MsQ0FBQztJQUM1QyxDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQUFDO0FBTUQ7O0dBRUc7QUFDSCxJQUFZLGNBRVg7QUFGRCxXQUFZLGNBQWM7SUFDdEIsbURBQUk7QUFDUixDQUFDLEVBRlcsY0FBYyxLQUFkLGNBQWMsUUFFekIiLCJmaWxlIjoiLi9zcmMvYXdydGMvbWVkaWFfYnJvd3Nlci9WaWRlb0lucHV0LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqVFMgdmVyc2lvbiBvZiB0aGUgQysrIC8gQyMgc2lkZSBOYXRpdmUgVmlkZW9JbnB1dCBBUElcbiAqIFxuICogXG4gKiBJbiBhZGRpdGlvbiBpdCBhbHNvIHN1cHBvcnRzIGFkZGluZyBhIEhUTUxDYW52YXNFbGVtZW50IGFzIGEgdmlkZW8gZGV2aWNlLiBUaGlzIGNhbiBiZVxuICogYSBsb3QgZmFzdGVyIGluIHRoZSBicm93c2VyIHRoYW4gdGhlIEMgLyBDKysgc3R5bGUgVXBkYXRlRnJhbWUgbWV0aG9kcyB0aGF0IHVzZSByYXcgYnl0ZSBhcnJheXNcbiAqIG9yIHBvaW50ZXJzIHRvIGRlbGl2ZXIgYW4gaW1hZ2UuXG4gKiBcbiAqIE5vdGUgdGhlcmUgYXJlIGN1cnJlbnRseSB0aHJlZSBkaXN0aW5jdCB3YXlzIGhvdyB0aGlzIGlzIHVzZWQ6XG4gKiAxLiAgIFVzaW5nIEFkZENhbnZhc0RldmljZSB3aXRob3V0IHNjYWxpbmcgKHdkaXRoID0gMCwgaGVpZ2h0ID0wIG9yIHRoZSBzYW1lIGFzIHRoZSBjYW52YXMpXG4gKiAgICAgIEluIHRoaXMgbW9kZSB0aGUgTWVkaWFTdHJlYW0gd2lsbCBiZSByZXR1cm5lZCBmcm9tIHRoZSBjYW52YXMuIERyYXdpbmcgY2FsbHMgZnJvbSB0aGUgY2FudmFzXG4gKiAgICAgIHR1cm4gaW50byB2aWRlbyBmcmFtZXMgb2YgdGhlIHZpZGVvIHdpdGhvdXQgYW55IG1hbnVhbCBVcGRhdGVGcmFtZSBjYWxsc1xuICogXG4gKiAyLiAgIFVzaW5nIEFkZENhbnZhc0RldmljZSB3aXRoIHNjYWxpbmcgYnkgc2V0dGluZyBhIHdpZHRoIC8gaGVpZ2h0IGRpZmZlcmVudCBmcm9tIHRoZSBjYW52YXMuXG4gKiAgICAgIEluIHRoaXMgbW9kZSB0aGUgdXNlciBkcmF3cyB0byB0aGUgY2FudmFzIGFuZCBldmVyeSB0aW1lIFVwZGF0ZUZyYW1lIGlzIGNhbGxlZCBhIHNjYWxlZCBmcmFtZVxuICogICAgICBpcyBjcmVhdGVkIHRoYXQgd2lsbCB0dXJuIGludG8gdmlkZW8gZnJhbWVzLiBMb3dlciBVcGRhdGVGcmFtZSBjYWxscyB3aWxsIHJlZHVjZSB0aGUgZnJhbWVyYXRlXG4gKiAgICAgIGV2ZW4gaWYgdGhlIG9yaWdpbmFsIGNhbnZhcyB1cyB1c2VkIGEgaGlnaGVyIGZyYW1lcmF0ZS4gXG4gKiAgICAgIFRoaXMgbW9kZSBzaG91bGQgcmVzdWx0IGluIGxvd2VyIGRhdGEgdXNhZ2UuXG4gKiBcbiAqIDMuICAgVXNpbmcgQWRkRGV2aWNlIGFuZCBVcGRhdGVGcmFtZSB0byBkZWxpdmVyIHJhdyBieXRlIGFycmF5IGZyYW1lcy4gVGhpcyBpcyBhIGNvbXBhdGliaWxpdHkgbW9kZVxuICogICAgICB0aGF0IHdvcmtzIHNpbWlsYXIgdG8gdGhlIEMgLyBDKysgYW5kIEMjIEFQSS4gQW4gaW50ZXJuYWwgY2FudmFzIGlzIGNyZWF0ZWQgYW5kIHVwZGF0ZWQgYmFzZWQgb25cbiAqICAgICAgdGhlIGRhdGEgdGhlIHVzZXIgZGVsaXZlcnMuIFRoaXMgbW9kZSBtYWtlcyBzZW5zZSBpZiB5b3UgZ2VuZXJhdGUgY3VzdG9tIGRhdGEgdGhhdCBkb2Vzbid0IGhhdmVcbiAqICAgICAgYSBjYW52YXMgYXMgaXRzIHNvdXJjZS5cbiAqICAgICAgVGhpcyBtb2RlIGNhbiBiZSBxdWl0ZSBzbG93IGFuZCBpbmVmZmljaWVudC4gXG4gKiBcbiAqIFRPRE86IFxuICogIC0gICBVc2luZyBBZGREZXZpY2Ugd2l0aCBvbmUgcmVzb2x1dGlvbiAmIFVwZGF0ZUZyYW1lIHdpdGggYW5vdGhlciBtaWdodCBub3Qgc3VwcG9ydCBzY2FsaW5nIHlldCBidXQgXG4gKiAgICAgIGFjdGl2YXRpbmcgdGhlIDJuZCBjYW52YXMgZm9yIHNjYWxpbmcgbWlnaHRcbiAqICAgICAgcmVkdWNlIHRoZSBwZXJmb3JtYW5jZSBldmVuIG1vcmUuIENoZWNrIGlmIHRoZXJlIGlzIGEgYmV0dGVyIHNvbHV0aW9uIGFuZCBpZiBzY2FsaW5nIGlzIGV2ZW4gbmVlZGVkLlxuICogICAgICBJdCBjb3VsZCBlYXNpbHkgYmUgYWRkZWQgYnkgY2FsbGluZyBpbml0U2NhbGluZyBidXQgaXQgbXVzdCBiZSBrbm93biBpZiBzY2FsaW5nIGlzIHJlcXVpcmVkIGJlZm9yZVxuICogICAgICB0aGUgZGV2aWNlIGlzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyLiBHaXZlbiB0aGF0IHNjYWxpbmcgY2FuIHJlZHVjZSB0aGUgcGVyZm9ybWFuY2UgZG9pbmcgc28gYnkgZGVmYXVsdFxuICogICAgICBtaWdodCBjYXVzZSBwcm9ibGVtcyBmb3Igc29tZSB1c2Vycy5cbiAqIFxuICogIC0gICBVcGRhdGVGcmFtZSByb3RhdGlvbiBhbmQgZmlyc3RSb3dJc0JvdHRvbSBhcmVuJ3Qgc3VwcG9ydGVkIHlldC4gTG9va3MgbGlrZSB0aGV5IGFyZW4ndCBuZWVkZWQgZm9yXG4gKiAgICAgIFdlYkdMIGFueXdheS4gTG9va3MgbGlrZSBmcmFtZXMgaGVyZSBhbHdheXMgc3RhcnQgd2l0aCB0aGUgdG9wIGxpbmUgYW5kIHJvdGF0aW9uIGlzIGF1dG9tYXRpY2FsbHlcbiAqICAgICAgaGFuZGxlZCBieSB0aGUgYnJvd3Nlci5cbiAqIFxuICovXG5leHBvcnQgY2xhc3MgVmlkZW9JbnB1dCB7XG4gICAgcHJpdmF0ZSBjYW52YXNEZXZpY2VzOiBDYW52YXNNYXAgPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuICAgIC8qKkFkZHMgYSBjYW52YXMgdG8gdXNlIGFzIHZpZGVvIHNvdXJjZSBmb3Igc3RyZWFtaW5nLiBcbiAgICAgKiBcbiAgICAgKiBNYWtlIHN1cmUgY2FudmFzLmdldENvbnRleHQgaXMgYXQgbGVhc3QgY2FsbGVkIG9uY2UgYmVmb3JlIGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAgICogXG4gICAgICogQHBhcmFtIGNhbnZhcyBcbiAgICAgKiBAcGFyYW0gZGV2aWNlTmFtZSBcbiAgICAgKiBAcGFyYW0gd2lkdGggXG4gICAgICogQHBhcmFtIGhlaWdodCBcbiAgICAgKiBAcGFyYW0gZnBzIFxuICAgICAqL1xuICAgIHB1YmxpYyBBZGRDYW52YXNEZXZpY2UoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZGV2aWNlTmFtZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZnBzOiBudW1iZXIpIHtcblxuXG4gICAgICAgIGxldCBjZGV2ID0gQ2FudmFzRGV2aWNlLkNyZWF0ZUV4dGVybmFsKGNhbnZhcywgZnBzKTtcblxuICAgICAgICBpZiAod2lkdGggIT0gY2FudmFzLndpZHRoIHx8IGhlaWdodCAhPSBjYW52YXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUud2FybihcInRlc3Rpbmcgc2NhbGluZ1wiKTtcbiAgICAgICAgICAgIGNkZXYuaW5pdFNjYWxpbmcod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW52YXNEZXZpY2VzW2RldmljZU5hbWVdID0gY2RldjtcbiAgICB9XG4gICAgLyoqRm9yIGludGVybmFsIHVzZS5cbiAgICAgKiBBbGxvd3MgdG8gY2hlY2sgaWYgdGhlIGRldmljZSBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZGV2IFxuICAgICAqL1xuICAgIHB1YmxpYyBIYXNEZXZpY2UoZGV2OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGRldiBpbiB0aGlzLmNhbnZhc0RldmljZXM7XG4gICAgfVxuXG4gICAgLyoqRm9yIGludGVybmFsIHVzZS5cbiAgICAgKiBMaXN0cyBhbGwgcmVnaXN0ZXJlZCBkZXZpY2VzLiBcbiAgICAgKiBcbiAgICAgKi9cbiAgICBwdWJsaWMgR2V0RGV2aWNlTmFtZXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNhbnZhc0RldmljZXMpO1xuICAgIH1cblxuICAgIC8qKkZvciBpbnRlcm5hbCB1c2UuXG4gICAgICogUmV0dXJucyBhIE1lZGlhU3RyZWFtIGZvciB0aGUgZ2l2ZW4gZGV2aWNlLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkZXYgXG4gICAgICovXG4gICAgcHVibGljIEdldFN0cmVhbShkZXY6IHN0cmluZyk6IE1lZGlhU3RyZWFtIHwgbnVsbCB7XG4gICAgICAgIGlmICh0aGlzLkhhc0RldmljZShkZXYpKSB7XG4gICAgICAgICAgICBsZXQgZGV2aWNlID0gdGhpcy5jYW52YXNEZXZpY2VzW2Rldl07XG5cbiAgICAgICAgICAgIC8vd2F0Y2ggb3V0OiBUaGlzIGNhbiB0cmlnZ2VyIGFuIGV4Y2VwdGlvbiBpZiBnZXRDb250ZXh0IGhhcyBuZXZlciBiZWVuIGNhbGxlZCBiZWZvcmUuXG4gICAgICAgICAgICAvL1RoZXJlIGRvZXNuJ3Qgc2VlbSB0byB3YXkgdG8gZGV0ZWN0IHRoaXMgYmVmb3JlaGFuZCB0aG91Z2hcbiAgICAgICAgICAgIGxldCBzdHJlYW0gPSBkZXZpY2UuY2FwdHVyZVN0cmVhbSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuXG4gICAgLyoqQyMgQVBJOiBwdWJsaWMgdm9pZCBBZGREZXZpY2Uoc3RyaW5nIG5hbWUsIGludCB3aWR0aCwgaW50IGhlaWdodCwgaW50IGZwcyk7XG4gICAgICogXG4gICAgICogQWRkcyBhIGRldmljZSB0aGF0IHdpbGwgYmUgYWNjZXNzaWJsZSB2aWEgdGhlIGdpdmVuIG5hbWUuIFdpZHRoIC8gSGVpZ2h0IGRldGVybWluZXNcbiAgICAgKiB0aGUgc2l6ZSBvZiB0aGUgY2FudmFzIHRoYXQgaXMgdXNlZCB0byBzdHJlYW0gdGhlIHZpZGVvLlxuICAgICAqIFxuICAgICAqIFxuICAgICAqIEBwYXJhbSBuYW1lIHVuaXF1ZSBuYW1lIGZvciB0aGUgY2FudmFzXG4gICAgICogQHBhcmFtIHdpZHRoIHdpZHRoIG9mIHRoZSBjYW52YXNlIHVzZWQgZm9yIHRoZSBzdHJlYW1cbiAgICAgKiBAcGFyYW0gaGVpZ2h0IGhlaWdodCBvZiB0aGUgY2FudmFzZSB1c2VkIGZvciB0aGUgc3RyZWFtXG4gICAgICogQHBhcmFtIGZwcyBFeHBlY3RlZCBGUFMgdXNlZCBieSB0aGUgc3RyZWFtLiAwIG9yIHVuZGVmaW5lZCB0byBsZXQgdGhlIGJyb3dzZXIgZGVjaWRlIChsaWtlbHkgYmFzZWQgb24gYWN0dWFsIGRyYXcgY2FsbHMpXG4gICAgICovXG4gICAgcHVibGljIEFkZERldmljZShuYW1lOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmcHM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNkZXYgPSBDYW52YXNEZXZpY2UuQ3JlYXRlSW50ZXJuYWwod2lkdGgsIGhlaWdodCwgZnBzKTtcbiAgICAgICAgdGhpcy5jYW52YXNEZXZpY2VzW25hbWVdID0gY2RldjtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgUmVtQ2FudmFzRGV2aWNlKGRldmljZU5hbWU6IHN0cmluZykge1xuXG4gICAgICAgIGxldCBjZGV2ID0gdGhpcy5jYW52YXNEZXZpY2VzW2RldmljZU5hbWVdO1xuICAgICAgICBpZiAoY2Rldikge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FudmFzRGV2aWNlc1tkZXZpY2VOYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvL0MjIEFQSTogcHVibGljIHZvaWQgUmVtb3ZlRGV2aWNlKHN0cmluZyBuYW1lKTtcbiAgICBwdWJsaWMgUmVtb3ZlRGV2aWNlKG5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLlJlbUNhbnZhc0RldmljZShuYW1lKTtcbiAgICB9XG4gICAgcHVibGljIFVwZGF0ZUZyYW1lKG5hbWU6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgcHVibGljIFVwZGF0ZUZyYW1lKG5hbWU6IHN0cmluZywgZGF0YVB0cjogVWludDhDbGFtcGVkQXJyYXksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCB0eXBlOiBWaWRlb0lucHV0VHlwZSk6IGJvb2xlYW5cbiAgICBwdWJsaWMgVXBkYXRlRnJhbWUobmFtZTogc3RyaW5nLCBkYXRhUHRyOiBVaW50OENsYW1wZWRBcnJheSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHR5cGU6IFZpZGVvSW5wdXRUeXBlLCByb3RhdGlvbjogbnVtYmVyLCBmaXJzdFJvd0lzQm90dG9tOiBib29sZWFuKTogYm9vbGVhblxuICAgIC8qKlxuICAgICAqIFVzZSBVcGRhdGVGcmFtZSB3aXRoIG5hbWUgb25seSB0byB0cmlnZ2VyIGEgbmV3IGZyYW1lIHdpdGhvdXQgY2hhbmdpbmcgdGhlIGNvbnRlbnQgKGUuZy4gaWYgQWRkQ2FudmFzRGV2aWNlIHdhcyB1c2VkIHRvIGFkZCB0aGUgZGV2aWNlIGFuZCBpdCBuZWVkcyBzY2FsaW5nKVxuICAgICAqIFVzZSBVcGRhdGVGcmFtZSB3aXRoIGltYWdlIGRhdGEgaWYgeW91IGFkZGVkIHRoZSBkZXZpY2UgdmlhIEFkZERldmljZSBhbmQgd2FudCB0byB1cGRhdCBpdHMgY29udGVudFxuICAgICAqIFxuICAgICAqIFxuICAgICAqIFxuICAgICAqIEBwYXJhbSBuYW1lIG5hbWUgb2YgdGhlIGRldmljZVxuICAgICAqIEBwYXJhbSBkYXRhUHRyIGFycmF5IHRvIHRoZSBpbWFnZSBkYXRhIFxuICAgICAqIEBwYXJhbSB3aWR0aCBtdXN0IGJlIHRoZSBleGFjdCB3aWR0aCBvZiB0aGUgaW1hZ2UgaW4gZGF0YVB0clxuICAgICAqIEBwYXJhbSBoZWlnaHQgbXVzdCBiZSB0aGUgZXhhY3QgaGVpZ2h0IG9mIHRoZSBpbWFnZSBpbiBkYXRhUHRyXG4gICAgICogQHBhcmFtIHR5cGUgbXVzdCBiZSBBUkdCIGF0IHRoZSBtb21lbnRcbiAgICAgKiBAcGFyYW0gcm90YXRpb24gbm90IHlldCBzdXBwb3J0ZWRcbiAgICAgKiBAcGFyYW0gZmlyc3RSb3dJc0JvdHRvbSBub3QgeWV0IHN1cHBvcnRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBVcGRhdGVGcmFtZShuYW1lOiBzdHJpbmcsIGRhdGFQdHI/OiBVaW50OENsYW1wZWRBcnJheSwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlciwgdHlwZTogVmlkZW9JbnB1dFR5cGUgPSBWaWRlb0lucHV0VHlwZS5BUkdCLCByb3RhdGlvbjogbnVtYmVyID0gMCwgZmlyc3RSb3dJc0JvdHRvbTogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcblxuICAgICAgICBpZiAodGhpcy5IYXNEZXZpY2UobmFtZSkpIHtcbiAgICAgICAgICAgIGxldCBkZXZpY2UgPSB0aGlzLmNhbnZhc0RldmljZXNbbmFtZV07XG4gICAgICAgICAgICBpZiAoZGV2aWNlLklzRXh0ZXJuYWwoKSB8fCBkYXRhUHRyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvL2Nhbid0IGNoYW5nZSBleHRlcm5hbCBpbWFnZXMgLyBubyBkYXRhIGF2YWlsYWJsZS4ganVzdCBnZW5lcmF0ZSBhIG5ldyBmcmFtZSB3aXRob3V0IG5ldyBkYXRhIFxuICAgICAgICAgICAgICAgIGRldmljZS5VcGRhdGVGcmFtZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBJbWFnZURhdGEoZGF0YVB0ciwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgZGV2aWNlLlVwZGF0ZUZyYW1lKGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmludGVyZmFjZSBGYW5jeUhUTUxDYW52YXNFbGVtZW50IGV4dGVuZHMgSFRNTENhbnZhc0VsZW1lbnQge1xuICAgIGNhcHR1cmVTdHJlYW0oZnBzPzogbnVtYmVyKTogTWVkaWFTdHJlYW07XG59XG5cbi8qKldyYXBzIGFyb3VuZCBhIGNhbnZhcyBvYmplY3QgdG8gdXNlIGFzIGEgc291cmNlIGZvciBNZWRpYVN0cmVhbS5cbiAqIEl0IHN1cHBvcnRzIHN0cmVhbWluZyB2aWEgYSBzZWNvbmQgY2FudmFzIHRoYXQgaXMgdXNlZCB0byBzY2FsZSB0aGUgaW1hZ2UgXG4gKiBiZWZvcmUgc3RyZWFtaW5nLiBGb3Igc2NhbGluZyBVcGRhdGVGcmFtZSBuZWVkcyB0byBiZSBjYWxsZWQgb25lIGEgZnJhbWUuIFxuICogV2l0aG91dCBzY2FsaW5nIHRoZSBicm93c2VyIHdpbGwgZGV0ZWN0IGNoYW5nZXMgaW4gdGhlIG9yaWdpbmFsIGNhbnZhc1xuICogYW5kIGF1dG9tYXRpY2FsbHkgdXBkYXRlIHRoZSBzdHJlYW1cbiAqIFxuICovXG5jbGFzcyBDYW52YXNEZXZpY2Uge1xuICAgIC8qKk1haW4gY2FudmFzLiBUaGlzIGlzIGFjdGl2ZWx5IGRyYXduIG9udG8gYnkgdGhlIHVzZXIgKGV4dGVybmFsKSBcbiAgICAgKiBvciBieSB0aGlzIGNsYXNzLlxuICAgICAqIFxuICAgICAqL1xuICAgIHByaXZhdGUgY2FudmFzOiBGYW5jeUhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgLyoqZmFsc2UgPSB3ZSBvd24gdGhlIGNhbnZhcyBhbmQgY2FuIGNoYW5nZSBpdHMgc2V0dGluZ3MgZS5nLiB2aWEgVmlkZW9JbnB1dFxuICAgICAqIHRydWUgPSBleHRlcm5hbGx5IHVzZWQgY2FudmFzLiBDYW4ndCBjaGFuZ2Ugd2lkdGggLyBoZWlnaHQgb3IgYW55IG90aGVyIHNldHRpbmdzXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRlcm5hbF9jYW52YXMgPSBmYWxzZTtcblxuICAgIC8qKiBGUFMgdXNlZCBmb3IgdGhlIGNhbnZhcyBjYXB0dXJlU3RyZWFtLlxuICAgICAqIDAgb3IgdW5kZWZpbmVkIHRvIGxldCB0aGUgYnJvd3NlciBoYW5kbGUgaXQgYXV0b21hdGljYWxseSB2aWEgY2FwdHVyZVN0cmVhbSgpXG4gICAgICovXG4gICAgcHJpdmF0ZSBmcHM/OiBudW1iZXI7XG5cbiAgICAvKipDYW52YXMgZWxlbWVudCB0byBoYW5kbGUgc2NhbGluZy5cbiAgICAgKiBSZW1haW5zIG51bGwgaWYgaW5pdFNjYWxpbmcgaXMgbmV2ZXIgY2FsbGVkIGFuZCB3aWR0aCAvIGhlaWdodCBpcyBleHBlY3RlZCB0b1xuICAgICAqIGZpdCB0aGUgY2FudmFzLlxuICAgICAqIFxuICAgICAqL1xuICAgIHByaXZhdGUgc2NhbGluZ19jYW52YXM6IEZhbmN5SFRNTENhbnZhc0VsZW1lbnQgPSBudWxsO1xuXG4gICAgLy9wcml2YXRlIHNjYWxpbmdfaW50ZXJ2YWwgPSAtMTtcblxuICAgIHByaXZhdGUgaXNfY2FwdHVyaW5nID0gZmFsc2U7XG5cbiAgICBwdWJsaWMgZ2V0U3RyZWFtaW5nQ2FudmFzKCkge1xuICAgICAgICBpZiAodGhpcy5zY2FsaW5nX2NhbnZhcyA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzO1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsaW5nX2NhbnZhcztcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FwdHVyZVN0cmVhbSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNfY2FwdHVyaW5nID09IGZhbHNlICYmIHRoaXMuc2NhbGluZ19jYW52YXMpIHtcbiAgICAgICAgICAgIC8vc2NhbGluZyBpcyBhY3RpdmUuIFxuICAgICAgICAgICAgdGhpcy5zdGFydFNjYWxpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzX2NhcHR1cmluZyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmZwcyAmJiB0aGlzLmZwcyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0cmVhbWluZ0NhbnZhcygpLmNhcHR1cmVTdHJlYW0odGhpcy5mcHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN0cmVhbWluZ0NhbnZhcygpLmNhcHR1cmVTdHJlYW0oKTtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoYzogSFRNTENhbnZhc0VsZW1lbnQsIGV4dGVybmFsX2NhbnZhczogYm9vbGVhbiwgZnBzPzogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gYyBhcyBGYW5jeUhUTUxDYW52YXNFbGVtZW50O1xuICAgICAgICB0aGlzLmV4dGVybmFsX2NhbnZhcyA9IGV4dGVybmFsX2NhbnZhcztcbiAgICAgICAgdGhpcy5mcHMgPSBmcHM7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBDcmVhdGVJbnRlcm5hbCh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZnBzPzogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGMgPSBDYW52YXNEZXZpY2UuTWFrZUNhbnZhcyh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYW52YXNEZXZpY2UoYywgZmFsc2UsIGZwcyk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgQ3JlYXRlRXh0ZXJuYWwoYzogSFRNTENhbnZhc0VsZW1lbnQsIGZwcz86IG51bWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc0RldmljZShjLCB0cnVlLCBmcHMpO1xuICAgIH1cblxuICAgIC8qKkFkZHMgc2NhbGluZyBzdXBwb3J0IHRvIHRoaXMgY2FudmFzIGRldmljZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gd2lkdGggXG4gICAgICogQHBhcmFtIGhlaWdodCBcbiAgICAgKi9cbiAgICBwdWJsaWMgaW5pdFNjYWxpbmcod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcblxuICAgICAgICB0aGlzLnNjYWxpbmdfY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSBhcyBGYW5jeUhUTUxDYW52YXNFbGVtZW50O1xuICAgICAgICB0aGlzLnNjYWxpbmdfY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuc2NhbGluZ19jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLnNjYWxpbmdfY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIH1cblxuICAgIC8qKlVzZWQgdG8gdXBkYXRlIHRoZSBmcmFtZSBkYXRhIGlmIHRoZSBjYW52YXMgaXMgbWFuYWdlZCBpbnRlcm5hbGx5LlxuICAgICAqIFVzZSB3aXRob3V0IGltYWdlIGRhdGEgdG8ganVzdCB0cmlnZ2VyIHRoZSBzY2FsaW5nIC8gZ2VuZXJhdGlvbiBvZiBhIG5ldyBmcmFtZSBpZiB0aGUgY2FudmFzIGlzIGRyYXduIHRvIGV4dGVybmFsbHkuXG4gICAgICogXG4gICAgICogSWYgdGhlIGNhbnZhcyBpcyBtYW5hZ2VkIGV4dGVybmFsbHkgYW5kIHNjYWxpbmcgaXMgbm90IHJlcXVpcmVkIHRoaXMgbWV0aG9kIHdvbid0IGRvIGFueXRoaW5nLiBBIG5ldyBmcmFtZSBpcyBpbnN0ZWFkXG4gICAgICogZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkgYmFzZWQgb24gdGhlIGJyb3dzZXIgJiBjYW52YXMgZHJhd2luZyBvcGVyYXRpb25zLlxuICAgICAqL1xuICAgIHB1YmxpYyBVcGRhdGVGcmFtZShkYXRhPzogSW1hZ2VEYXRhKTogdm9pZCB7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBsZXQgY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgLy9UT0RPOiBUaGlzIGRvZXNuJ3Qgc2VlbSB0byBzdXBwb3J0IHNjYWxpbmcgb3V0IG9mIHRoZSBib3hcbiAgICAgICAgICAgIC8vd2UgbWlnaHQgbmVlZCB0byBjb21iaWVuIHRoaXMgd2l0aCB0aGUgc2NhbGluZyBzeXN0ZW0gYXMgd2VsbFxuICAgICAgICAgICAgLy9pbiBjYXNlIHVzZXJzIGRlbGl2ZXIgZGlmZmVyZW50IHJlc29sdXRpb25zIHRoYW4gdGhlIGRldmljZSBpcyBzZXR1cCBmb3JcbiAgICAgICAgICAgIGN0eC5wdXRJbWFnZURhdGEoZGF0YSwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2FsZU5vdygpO1xuICAgIH1cbiAgICAvKipDYWxsZWQgdGhlIGZpcnN0IHRpbWUgd2UgbmVlZCB0aGUgc2NhbGVkIGltYWdlIHRvIGVuc3VyZVxuICAgICAqIHRoZSBidWZmZXJzIGFyZSBhbGwgZmlsbGVkLlxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhcnRTY2FsaW5nKCkge1xuXG4gICAgICAgIHRoaXMuc2NhbGVOb3coKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNjYWxlTm93KCkge1xuICAgICAgICBpZiAodGhpcy5zY2FsaW5nX2NhbnZhcyAhPSBudWxsKSB7XG5cbiAgICAgICAgICAgIGxldCBjdHggPSB0aGlzLnNjYWxpbmdfY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIC8vY3R4LmZpbGxTdHlsZSA9IFwiI0ZGMDAwMFwiO1xuICAgICAgICAgICAgLy9jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5zY2FsaW5nX2NhbnZhcy53aWR0aCwgdGhpcy5zY2FsaW5nX2NhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgLy9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuc2NhbGluZ19jYW52YXMud2lkdGgsIHRoaXMuc2NhbGluZ19jYW52YXMuaGVpZ2h0KVxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmNhbnZhcywgMCwgMCwgdGhpcy5zY2FsaW5nX2NhbnZhcy53aWR0aCwgdGhpcy5zY2FsaW5nX2NhbnZhcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBJc0V4dGVybmFsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbF9jYW52YXM7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBNYWtlQ2FudmFzKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogRmFuY3lIVE1MQ2FudmFzRWxlbWVudCB7XG5cbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgLy9tYWtlIHJlZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIGNhbnZhcyBhcyBGYW5jeUhUTUxDYW52YXNFbGVtZW50O1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIENhbnZhc01hcCB7XG4gICAgW2tleTogc3RyaW5nXTogQ2FudmFzRGV2aWNlO1xufVxuXG4vKiogT25seSBvbmUgZm9ybWF0IHN1cHBvcnRlZCBieSBicm93c2VycyBzbyBmYXIuXG4gKiAgTWF5YmUgbW9yZSBjYW4gYmUgYWRkZWQgaW4gdGhlIGZ1dHVyZS4gXG4gKi9cbmV4cG9ydCBlbnVtIFZpZGVvSW5wdXRUeXBlIHtcbiAgICBBUkdCXG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/VideoInput.ts\n");

/***/ }),

/***/ "./src/awrtc/media_browser/index.ts":
/*!******************************************!*\
  !*** ./src/awrtc/media_browser/index.ts ***!
  \******************************************/
/*! exports provided: BrowserMediaNetwork, BrowserWebRtcCall, BrowserMediaStream, MediaPeer, DeviceInfo, DeviceApi, VideoInput, VideoInputType, Media */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _BrowserMediaNetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BrowserMediaNetwork */ \"./src/awrtc/media_browser/BrowserMediaNetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaNetwork\", function() { return _BrowserMediaNetwork__WEBPACK_IMPORTED_MODULE_0__[\"BrowserMediaNetwork\"]; });\n\n/* harmony import */ var _BrowserWebRtcCall__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BrowserWebRtcCall */ \"./src/awrtc/media_browser/BrowserWebRtcCall.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserWebRtcCall\", function() { return _BrowserWebRtcCall__WEBPACK_IMPORTED_MODULE_1__[\"BrowserWebRtcCall\"]; });\n\n/* harmony import */ var _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./BrowserMediaStream */ \"./src/awrtc/media_browser/BrowserMediaStream.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"BrowserMediaStream\", function() { return _BrowserMediaStream__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaStream\"]; });\n\n/* harmony import */ var _MediaPeer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MediaPeer */ \"./src/awrtc/media_browser/MediaPeer.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"MediaPeer\", function() { return _MediaPeer__WEBPACK_IMPORTED_MODULE_3__[\"MediaPeer\"]; });\n\n/* harmony import */ var _DeviceApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DeviceApi */ \"./src/awrtc/media_browser/DeviceApi.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DeviceInfo\", function() { return _DeviceApi__WEBPACK_IMPORTED_MODULE_4__[\"DeviceInfo\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"DeviceApi\", function() { return _DeviceApi__WEBPACK_IMPORTED_MODULE_4__[\"DeviceApi\"]; });\n\n/* harmony import */ var _VideoInput__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./VideoInput */ \"./src/awrtc/media_browser/VideoInput.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VideoInput\", function() { return _VideoInput__WEBPACK_IMPORTED_MODULE_5__[\"VideoInput\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"VideoInputType\", function() { return _VideoInput__WEBPACK_IMPORTED_MODULE_5__[\"VideoInputType\"]; });\n\n/* harmony import */ var _Media__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Media */ \"./src/awrtc/media_browser/Media.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Media\", function() { return _Media__WEBPACK_IMPORTED_MODULE_6__[\"Media\"]; });\n\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9tZWRpYV9icm93c2VyL2luZGV4LnRzP2RhZjciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBNEJFO0FBQ21DO0FBQ0Y7QUFDQztBQUNUO0FBQ0E7QUFDQztBQUNMIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL21lZGlhX2Jyb3dzZXIvaW5kZXgudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5leHBvcnQgKiBmcm9tICcuL0Jyb3dzZXJNZWRpYU5ldHdvcmsnXG5leHBvcnQgKiBmcm9tICcuL0Jyb3dzZXJXZWJSdGNDYWxsJ1xuZXhwb3J0ICogZnJvbSAnLi9Ccm93c2VyTWVkaWFTdHJlYW0nXG5leHBvcnQgKiBmcm9tICcuL01lZGlhUGVlcidcbmV4cG9ydCAqIGZyb20gJy4vRGV2aWNlQXBpJ1xuZXhwb3J0ICogZnJvbSAnLi9WaWRlb0lucHV0J1xuZXhwb3J0ICogZnJvbSAnLi9NZWRpYSdcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/media_browser/index.ts\n");

/***/ }),

/***/ "./src/awrtc/network/Helper.ts":
/*!*************************************!*\
  !*** ./src/awrtc/network/Helper.ts ***!
  \*************************************/
/*! exports provided: Queue, List, Output, Debug, Encoder, UTF16Encoding, Encoding, Random, Helper, SLogLevel, SLog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Queue\", function() { return Queue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"List\", function() { return List; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Output\", function() { return Output; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Debug\", function() { return Debug; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Encoder\", function() { return Encoder; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UTF16Encoding\", function() { return UTF16Encoding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Encoding\", function() { return Encoding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Random\", function() { return Random; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Helper\", function() { return Helper; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SLogLevel\", function() { return SLogLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SLog\", function() { return SLog; });\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/**Contains some helper classes to keep the typescript implementation\n * similar to the C# implementation.\n *\n */\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Queue = /** @class */ (function () {\n    function Queue() {\n        this.mArr = new Array();\n    }\n    Queue.prototype.Enqueue = function (val) {\n        this.mArr.push(val);\n    };\n    Queue.prototype.TryDequeue = function (outp) {\n        var res = false;\n        if (this.mArr.length > 0) {\n            outp.val = this.mArr.shift();\n            res = true;\n        }\n        return res;\n    };\n    Queue.prototype.Dequeue = function () {\n        if (this.mArr.length > 0) {\n            return this.mArr.shift();\n        }\n        else {\n            return null;\n        }\n    };\n    Queue.prototype.Peek = function () {\n        if (this.mArr.length > 0) {\n            return this.mArr[0];\n        }\n        else {\n            return null;\n        }\n    };\n    Queue.prototype.Count = function () {\n        return this.mArr.length;\n    };\n    Queue.prototype.Clear = function () {\n        this.mArr = new Array();\n    };\n    return Queue;\n}());\n\nvar List = /** @class */ (function () {\n    function List() {\n        this.mArr = new Array();\n    }\n    Object.defineProperty(List.prototype, \"Internal\", {\n        get: function () {\n            return this.mArr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    List.prototype.Add = function (val) {\n        this.mArr.push(val);\n    };\n    Object.defineProperty(List.prototype, \"Count\", {\n        get: function () {\n            return this.mArr.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return List;\n}());\n\nvar Output = /** @class */ (function () {\n    function Output() {\n    }\n    return Output;\n}());\n\nvar Debug = /** @class */ (function () {\n    function Debug() {\n    }\n    Debug.Log = function (s) {\n        SLog.Log(s);\n    };\n    Debug.LogError = function (s) {\n        SLog.LogError(s);\n    };\n    Debug.LogWarning = function (s) {\n        SLog.LogWarning(s);\n    };\n    return Debug;\n}());\n\nvar Encoder = /** @class */ (function () {\n    function Encoder() {\n    }\n    return Encoder;\n}());\n\nvar UTF16Encoding = /** @class */ (function (_super) {\n    __extends(UTF16Encoding, _super);\n    function UTF16Encoding() {\n        return _super.call(this) || this;\n    }\n    UTF16Encoding.prototype.GetBytes = function (text) {\n        return this.stringToBuffer(text);\n    };\n    UTF16Encoding.prototype.GetString = function (buffer) {\n        return this.bufferToString(buffer);\n    };\n    UTF16Encoding.prototype.bufferToString = function (buffer) {\n        var arr = new Uint16Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 2);\n        return String.fromCharCode.apply(null, arr);\n    };\n    UTF16Encoding.prototype.stringToBuffer = function (str) {\n        var buf = new ArrayBuffer(str.length * 2);\n        var bufView = new Uint16Array(buf);\n        for (var i = 0, strLen = str.length; i < strLen; i++) {\n            bufView[i] = str.charCodeAt(i);\n        }\n        var result = new Uint8Array(buf);\n        return result;\n    };\n    return UTF16Encoding;\n}(Encoder));\n\nvar Encoding = /** @class */ (function () {\n    function Encoding() {\n    }\n    Object.defineProperty(Encoding, \"UTF16\", {\n        get: function () {\n            return new UTF16Encoding();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Encoding;\n}());\n\nvar Random = /** @class */ (function () {\n    function Random() {\n    }\n    Random.getRandomInt = function (min, max) {\n        min = Math.ceil(min);\n        max = Math.floor(max);\n        return Math.floor(Math.random() * (max - min)) + min;\n    };\n    return Random;\n}());\n\nvar Helper = /** @class */ (function () {\n    function Helper() {\n    }\n    Helper.tryParseInt = function (value) {\n        try {\n            if (/^(\\-|\\+)?([0-9]+)$/.test(value)) {\n                var result = Number(value);\n                if (isNaN(result) == false)\n                    return result;\n            }\n        }\n        catch (e) {\n        }\n        return null;\n    };\n    return Helper;\n}());\n\nvar SLogLevel;\n(function (SLogLevel) {\n    SLogLevel[SLogLevel[\"None\"] = 0] = \"None\";\n    SLogLevel[SLogLevel[\"Errors\"] = 1] = \"Errors\";\n    SLogLevel[SLogLevel[\"Warnings\"] = 2] = \"Warnings\";\n    SLogLevel[SLogLevel[\"Info\"] = 3] = \"Info\";\n})(SLogLevel || (SLogLevel = {}));\n//Simplified logger\nvar SLog = /** @class */ (function () {\n    function SLog() {\n    }\n    SLog.SetLogLevel = function (level) {\n        SLog.sLogLevel = level;\n    };\n    SLog.RequestLogLevel = function (level) {\n        if (level > SLog.sLogLevel)\n            SLog.sLogLevel = level;\n    };\n    SLog.L = function (msg, tag) {\n        SLog.Log(msg, tag);\n    };\n    SLog.LW = function (msg, tag) {\n        SLog.LogWarning(msg, tag);\n    };\n    SLog.LE = function (msg, tag) {\n        SLog.LogError(msg, tag);\n    };\n    SLog.Log = function (msg, tag) {\n        if (SLog.sLogLevel >= SLogLevel.Info) {\n            if (tag) {\n                console.log(msg, tag);\n            }\n            else {\n                console.log(msg);\n            }\n        }\n    };\n    SLog.LogWarning = function (msg, tag) {\n        if (!tag)\n            tag = \"\";\n        if (SLog.sLogLevel >= SLogLevel.Warnings) {\n            if (tag) {\n                console.warn(msg, tag);\n            }\n            else {\n                console.warn(msg);\n            }\n        }\n    };\n    SLog.LogError = function (msg, tag) {\n        if (SLog.sLogLevel >= SLogLevel.Errors) {\n            if (tag) {\n                console.error(msg, tag);\n            }\n            else {\n                console.error(msg);\n            }\n        }\n    };\n    SLog.sLogLevel = SLogLevel.Warnings;\n    return SLog;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL0hlbHBlci50cz8yODJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBNEJFO0FBQ0Y7OztHQUdHOzs7Ozs7Ozs7Ozs7OztBQUVIO0lBRUk7UUFEUSxTQUFJLEdBQWEsSUFBSSxLQUFLLEVBQUssQ0FBQztJQUV4QyxDQUFDO0lBRU0sdUJBQU8sR0FBZCxVQUFlLEdBQU07UUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUVNLDBCQUFVLEdBQWpCLFVBQWtCLElBQWU7UUFFN0IsSUFBSSxHQUFHLEdBQUcsS0FBSztRQUVmLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3RCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUM3QixHQUFHLEdBQUcsSUFBSSxDQUFDO1NBQ2Q7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFTSx1QkFBTyxHQUFkO1FBQ0ksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDdEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzVCO2FBQU07WUFDSCxPQUFPLElBQUksQ0FBQztTQUNmO0lBQ0wsQ0FBQztJQUNNLG9CQUFJLEdBQVg7UUFDSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN0QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdkI7YUFBTTtZQUNILE9BQU8sSUFBSSxDQUFDO1NBQ2Y7SUFDTCxDQUFDO0lBQ00scUJBQUssR0FBWjtRQUNJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDNUIsQ0FBQztJQUVNLHFCQUFLLEdBQVo7UUFFSSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksS0FBSyxFQUFLLENBQUM7SUFDL0IsQ0FBQztJQUNMLFlBQUM7QUFBRCxDQUFDOztBQUVEO0lBTUk7UUFMUSxTQUFJLEdBQWEsSUFBSSxLQUFLLEVBQUssQ0FBQztJQU14QyxDQUFDO0lBTEQsc0JBQVcsMEJBQVE7YUFBbkI7WUFFSSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDckIsQ0FBQzs7O09BQUE7SUFJTSxrQkFBRyxHQUFWLFVBQVcsR0FBTTtRQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFHRCxzQkFBVyx1QkFBSzthQUFoQjtZQUNJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDNUIsQ0FBQzs7O09BQUE7SUFDTCxXQUFDO0FBQUQsQ0FBQzs7QUFFRDtJQUFBO0lBR0EsQ0FBQztJQUFELGFBQUM7QUFBRCxDQUFDOztBQUNEO0lBQUE7SUFVQSxDQUFDO0lBVGlCLFNBQUcsR0FBakIsVUFBa0IsQ0FBTTtRQUNwQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hCLENBQUM7SUFDYSxjQUFRLEdBQXRCLFVBQXVCLENBQU07UUFDekIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBQ2EsZ0JBQVUsR0FBeEIsVUFBeUIsQ0FBTTtRQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFDTCxZQUFDO0FBQUQsQ0FBQzs7QUFFRDtJQUFBO0lBSUEsQ0FBQztJQUFELGNBQUM7QUFBRCxDQUFDOztBQUVEO0lBQW1DLGlDQUFPO0lBQ3RDO2VBQ0ksaUJBQU87SUFDWCxDQUFDO0lBQ00sZ0NBQVEsR0FBZixVQUFnQixJQUFZO1FBQ3hCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBQ00saUNBQVMsR0FBaEIsVUFBaUIsTUFBa0I7UUFDL0IsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFHTyxzQ0FBYyxHQUF0QixVQUF1QixNQUFrQjtRQUNyQyxJQUFJLEdBQUcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuRixPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRU8sc0NBQWMsR0FBdEIsVUFBdUIsR0FBVztRQUM5QixJQUFJLEdBQUcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQUksT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEM7UUFFRCxJQUFJLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBQ0wsb0JBQUM7QUFBRCxDQUFDLENBM0JrQyxPQUFPLEdBMkJ6Qzs7QUFDRDtJQU1JO0lBRUEsQ0FBQztJQU5ELHNCQUFrQixpQkFBSzthQUF2QjtZQUNJLE9BQU8sSUFBSSxhQUFhLEVBQUUsQ0FBQztRQUMvQixDQUFDOzs7T0FBQTtJQU1MLGVBQUM7QUFBRCxDQUFDOztBQUVEO0lBQUE7SUFPQSxDQUFDO0lBTGlCLG1CQUFZLEdBQTFCLFVBQTJCLEdBQUcsRUFBRSxHQUFHO1FBQy9CLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFDekQsQ0FBQztJQUNMLGFBQUM7QUFBRCxDQUFDOztBQUVEO0lBQUE7SUFhQSxDQUFDO0lBWmlCLGtCQUFXLEdBQXpCLFVBQTBCLEtBQWM7UUFDcEMsSUFBSTtZQUNBLElBQUksb0JBQW9CLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNsQyxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNCLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUs7b0JBQ3RCLE9BQU8sTUFBTSxDQUFDO2FBQ3JCO1NBRUo7UUFBQyxPQUFRLENBQUMsRUFBRTtTQUNaO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUNMLGFBQUM7QUFBRCxDQUFDOztBQUNELElBQVksU0FNWDtBQU5ELFdBQVksU0FBUztJQUVqQix5Q0FBUTtJQUNSLDZDQUFVO0lBQ1YsaURBQVk7SUFDWix5Q0FBUTtBQUNaLENBQUMsRUFOVyxTQUFTLEtBQVQsU0FBUyxRQU1wQjtBQUNELG1CQUFtQjtBQUNuQjtJQUFBO0lBK0RBLENBQUM7SUEzRGlCLGdCQUFXLEdBQXpCLFVBQTBCLEtBQWdCO1FBRXRDLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0lBQzNCLENBQUM7SUFDYSxvQkFBZSxHQUE3QixVQUE4QixLQUFnQjtRQUUxQyxJQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUztZQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztJQUMvQixDQUFDO0lBR2EsTUFBQyxHQUFmLFVBQWdCLEdBQVEsRUFBRSxHQUFXO1FBQ2pDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFDYSxPQUFFLEdBQWhCLFVBQWlCLEdBQVEsRUFBRSxHQUFXO1FBQ2xDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFDYSxPQUFFLEdBQWhCLFVBQWlCLEdBQVEsRUFBRSxHQUFXO1FBQ2xDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDYSxRQUFHLEdBQWpCLFVBQWtCLEdBQVEsRUFBRSxHQUFXO1FBRW5DLElBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsSUFBSSxFQUNuQztZQUNJLElBQUcsR0FBRyxFQUNOO2dCQUNJLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQ3pCO2lCQUFJO2dCQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDcEI7U0FDSjtJQUNMLENBQUM7SUFDYSxlQUFVLEdBQXhCLFVBQXlCLEdBQVEsRUFBRSxHQUFXO1FBQzFDLElBQUcsQ0FBQyxHQUFHO1lBQ0gsR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsUUFBUSxFQUN2QztZQUNJLElBQUcsR0FBRyxFQUNOO2dCQUNJLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQzFCO2lCQUFJO2dCQUNELE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDckI7U0FDSjtJQUNMLENBQUM7SUFFYSxhQUFRLEdBQXRCLFVBQXVCLEdBQVEsRUFBRSxHQUFXO1FBRXhDLElBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxTQUFTLENBQUMsTUFBTSxFQUNyQztZQUNJLElBQUcsR0FBRyxFQUNOO2dCQUNJLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQzNCO2lCQUFJO2dCQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdEI7U0FDSjtJQUVMLENBQUM7SUE1RGMsY0FBUyxHQUFjLFNBQVMsQ0FBQyxRQUFRLENBQUM7SUE2RDdELFdBQUM7Q0FBQTtBQS9EZ0IiLCJmaWxlIjoiLi9zcmMvYXdydGMvbmV0d29yay9IZWxwZXIudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG4vKipDb250YWlucyBzb21lIGhlbHBlciBjbGFzc2VzIHRvIGtlZXAgdGhlIHR5cGVzY3JpcHQgaW1wbGVtZW50YXRpb25cbiAqIHNpbWlsYXIgdG8gdGhlIEMjIGltcGxlbWVudGF0aW9uLlxuICogXG4gKi9cblxuZXhwb3J0IGNsYXNzIFF1ZXVlPFQ+IHtcbiAgICBwcml2YXRlIG1BcnI6IEFycmF5PFQ+ID0gbmV3IEFycmF5PFQ+KCk7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIEVucXVldWUodmFsOiBUKSB7XG4gICAgICAgIHRoaXMubUFyci5wdXNoKHZhbCk7XG4gICAgfVxuXG4gICAgcHVibGljIFRyeURlcXVldWUob3V0cDogT3V0cHV0PFQ+ICk6IGJvb2xlYW57XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzID0gZmFsc2VcblxuICAgICAgICBpZiAodGhpcy5tQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG91dHAudmFsID0gdGhpcy5tQXJyLnNoaWZ0KCk7XG4gICAgICAgICAgICByZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgcHVibGljIERlcXVldWUoKTogVCB7XG4gICAgICAgIGlmICh0aGlzLm1BcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubUFyci5zaGlmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIFBlZWsoKTogVCB7XG4gICAgICAgIGlmICh0aGlzLm1BcnIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubUFyclswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBDb3VudCgpOiBudW1iZXJ7XG4gICAgICAgIHJldHVybiB0aGlzLm1BcnIubGVuZ3RoO1xuICAgIH1cblxuICAgIHB1YmxpYyBDbGVhcigpOnZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubUFyciA9IG5ldyBBcnJheTxUPigpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExpc3Q8VD4ge1xuICAgIHByaXZhdGUgbUFycjogQXJyYXk8VD4gPSBuZXcgQXJyYXk8VD4oKTtcbiAgICBwdWJsaWMgZ2V0IEludGVybmFsKCkgOiBBcnJheTxUPlxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUFycjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIEFkZCh2YWw6IFQpIHtcbiAgICAgICAgdGhpcy5tQXJyLnB1c2godmFsKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBnZXQgQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUFyci5sZW5ndGg7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgT3V0cHV0PFQ+XG57XG4gICAgcHVibGljIHZhbCA6IFQ7XG59XG5leHBvcnQgY2xhc3MgRGVidWcge1xuICAgIHB1YmxpYyBzdGF0aWMgTG9nKHM6IGFueSkge1xuICAgICAgICBTTG9nLkxvZyhzKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBMb2dFcnJvcihzOiBhbnkpIHtcbiAgICAgICAgU0xvZy5Mb2dFcnJvcihzKTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBMb2dXYXJuaW5nKHM6IGFueSkge1xuICAgICAgICBTTG9nLkxvZ1dhcm5pbmcocyk7XG4gICAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRW5jb2RlciB7XG5cbiAgICBwdWJsaWMgYWJzdHJhY3QgR2V0Qnl0ZXModGV4dDogc3RyaW5nKTogVWludDhBcnJheTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgR2V0U3RyaW5nKGJ1ZmZlcjogVWludDhBcnJheSk6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFVURjE2RW5jb2RpbmcgZXh0ZW5kcyBFbmNvZGVye1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICBwdWJsaWMgR2V0Qnl0ZXModGV4dDogc3RyaW5nKTogVWludDhBcnJheSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmluZ1RvQnVmZmVyKHRleHQpO1xuICAgIH1cbiAgICBwdWJsaWMgR2V0U3RyaW5nKGJ1ZmZlcjogVWludDhBcnJheSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcik7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcjogVWludDhBcnJheSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBhcnIgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLmJ1ZmZlciwgYnVmZmVyLmJ5dGVPZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC8gMik7XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdHJpbmdUb0J1ZmZlcihzdHI6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xuICAgICAgICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGggKiAyKTtcbiAgICAgICAgbGV0IGJ1ZlZpZXcgPSBuZXcgVWludDE2QXJyYXkoYnVmKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykge1xuICAgICAgICAgICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEVuY29kaW5nIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFVURjE2KCkge1xuICAgICAgICByZXR1cm4gbmV3IFVURjE2RW5jb2RpbmcoKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxufVxuXG5leHBvcnQgY2xhc3MgUmFuZG9tIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmFuZG9tSW50KG1pbiwgbWF4KTogbnVtYmVyIHtcbiAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7XG4gICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBIZWxwZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgdHJ5UGFyc2VJbnQodmFsdWUgOiBzdHJpbmcpOiBudW1iZXIgeyAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoL14oXFwtfFxcKyk/KFswLTldKykkLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChpc05hTihyZXN1bHQpID09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKCBlKSB7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGVudW0gU0xvZ0xldmVsXG57XG4gICAgTm9uZSA9IDAsXG4gICAgRXJyb3JzID0gMSxcbiAgICBXYXJuaW5ncyA9IDIsXG4gICAgSW5mbyA9IDNcbn1cbi8vU2ltcGxpZmllZCBsb2dnZXJcbmV4cG9ydCBjbGFzcyBTTG9nIHtcblxuICAgIHByaXZhdGUgc3RhdGljIHNMb2dMZXZlbDogU0xvZ0xldmVsID0gU0xvZ0xldmVsLldhcm5pbmdzO1xuXG4gICAgcHVibGljIHN0YXRpYyBTZXRMb2dMZXZlbChsZXZlbDogU0xvZ0xldmVsKVxuICAgIHtcbiAgICAgICAgU0xvZy5zTG9nTGV2ZWwgPSBsZXZlbDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBSZXF1ZXN0TG9nTGV2ZWwobGV2ZWw6IFNMb2dMZXZlbClcbiAgICB7XG4gICAgICAgIGlmKGxldmVsID4gU0xvZy5zTG9nTGV2ZWwpXG4gICAgICAgICAgICBTTG9nLnNMb2dMZXZlbCA9IGxldmVsO1xuICAgIH1cblxuXG4gICAgcHVibGljIHN0YXRpYyBMKG1zZzogYW55LCB0YWc/OnN0cmluZyk6IHZvaWQge1xuICAgICAgICBTTG9nLkxvZyhtc2csIHRhZyk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgTFcobXNnOiBhbnksIHRhZz86c3RyaW5nKTogdm9pZCB7XG4gICAgICAgIFNMb2cuTG9nV2FybmluZyhtc2csIHRhZyk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgTEUobXNnOiBhbnksIHRhZz86c3RyaW5nKTogdm9pZCB7XG4gICAgICAgIFNMb2cuTG9nRXJyb3IobXNnLCB0YWcpO1xuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIExvZyhtc2c6IGFueSwgdGFnPzpzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgICAgIGlmKFNMb2cuc0xvZ0xldmVsID49IFNMb2dMZXZlbC5JbmZvKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0YWcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnLCB0YWcpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIExvZ1dhcm5pbmcobXNnOiBhbnksIHRhZz86c3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmKCF0YWcpXG4gICAgICAgICAgICB0YWcgPSBcIlwiO1xuICAgICAgICBpZihTTG9nLnNMb2dMZXZlbCA+PSBTTG9nTGV2ZWwuV2FybmluZ3MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRhZylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4obXNnLCB0YWcpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIExvZ0Vycm9yKG1zZzogYW55LCB0YWc/OnN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgaWYoU0xvZy5zTG9nTGV2ZWwgPj0gU0xvZ0xldmVsLkVycm9ycylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGFnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobXNnLCB0YWcpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/network/Helper.ts\n");

/***/ }),

/***/ "./src/awrtc/network/INetwork.ts":
/*!***************************************!*\
  !*** ./src/awrtc/network/INetwork.ts ***!
  \***************************************/
/*! exports provided: NetEventType, NetEventDataType, NetworkEvent, ConnectionId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NetEventType\", function() { return NetEventType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NetEventDataType\", function() { return NetEventDataType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NetworkEvent\", function() { return NetworkEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ConnectionId\", function() { return ConnectionId; });\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/** Abstract interfaces and serialization to keep different\n * versions compatible to each other.\n *\n * Watch out before changing anything in this file. Content is reused\n * between webclient, signaling server and needs to remain compatible to\n * the C# implementation.\n */\n\nvar NetEventType;\n(function (NetEventType) {\n    NetEventType[NetEventType[\"Invalid\"] = 0] = \"Invalid\";\n    NetEventType[NetEventType[\"UnreliableMessageReceived\"] = 1] = \"UnreliableMessageReceived\";\n    NetEventType[NetEventType[\"ReliableMessageReceived\"] = 2] = \"ReliableMessageReceived\";\n    NetEventType[NetEventType[\"ServerInitialized\"] = 3] = \"ServerInitialized\";\n    NetEventType[NetEventType[\"ServerInitFailed\"] = 4] = \"ServerInitFailed\";\n    NetEventType[NetEventType[\"ServerClosed\"] = 5] = \"ServerClosed\";\n    NetEventType[NetEventType[\"NewConnection\"] = 6] = \"NewConnection\";\n    NetEventType[NetEventType[\"ConnectionFailed\"] = 7] = \"ConnectionFailed\";\n    NetEventType[NetEventType[\"Disconnected\"] = 8] = \"Disconnected\";\n    NetEventType[NetEventType[\"FatalError\"] = 100] = \"FatalError\";\n    NetEventType[NetEventType[\"Warning\"] = 101] = \"Warning\";\n    NetEventType[NetEventType[\"Log\"] = 102] = \"Log\";\n    /// <summary>\n    /// This value and higher are reserved for other uses. \n    /// Should never get to the user and should be filtered out.\n    /// </summary>\n    NetEventType[NetEventType[\"ReservedStart\"] = 200] = \"ReservedStart\";\n    /// <summary>\n    /// Reserved.\n    /// Used by protocols that forward NetworkEvents\n    /// </summary>\n    NetEventType[NetEventType[\"MetaVersion\"] = 201] = \"MetaVersion\";\n    /// <summary>\n    /// Reserved.\n    /// Used by protocols that forward NetworkEvents.\n    /// </summary>\n    NetEventType[NetEventType[\"MetaHeartbeat\"] = 202] = \"MetaHeartbeat\";\n})(NetEventType || (NetEventType = {}));\nvar NetEventDataType;\n(function (NetEventDataType) {\n    NetEventDataType[NetEventDataType[\"Null\"] = 0] = \"Null\";\n    NetEventDataType[NetEventDataType[\"ByteArray\"] = 1] = \"ByteArray\";\n    NetEventDataType[NetEventDataType[\"UTF16String\"] = 2] = \"UTF16String\";\n})(NetEventDataType || (NetEventDataType = {}));\nvar NetworkEvent = /** @class */ (function () {\n    function NetworkEvent(t, conId, data) {\n        this.type = t;\n        this.connectionId = conId;\n        this.data = data;\n    }\n    Object.defineProperty(NetworkEvent.prototype, \"RawData\", {\n        get: function () {\n            return this.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkEvent.prototype, \"MessageData\", {\n        get: function () {\n            if (typeof this.data != \"string\")\n                return this.data;\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkEvent.prototype, \"Info\", {\n        get: function () {\n            if (typeof this.data == \"string\")\n                return this.data;\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkEvent.prototype, \"Type\", {\n        get: function () {\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(NetworkEvent.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.connectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    //for debugging only\n    NetworkEvent.prototype.toString = function () {\n        var output = \"NetworkEvent[\";\n        output += \"NetEventType: (\";\n        output += NetEventType[this.type];\n        output += \"), id: (\";\n        output += this.connectionId.id;\n        output += \"), Data: (\";\n        if (typeof this.data == \"string\") {\n            output += this.data;\n        }\n        output += \")]\";\n        return output;\n    };\n    NetworkEvent.parseFromString = function (str) {\n        var values = JSON.parse(str);\n        var data;\n        if (values.data == null) {\n            data = null;\n        }\n        else if (typeof values.data == \"string\") {\n            data = values.data;\n        }\n        else if (typeof values.data == \"object\") {\n            //json represents the array as an object containing each index and the\n            //value as string number ... improve that later\n            var arrayAsObject = values.data;\n            var length = 0;\n            for (var prop in arrayAsObject) {\n                //if (arrayAsObject.hasOwnProperty(prop)) { //shouldnt be needed\n                length++;\n                //}\n            }\n            var buffer = new Uint8Array(Object.keys(arrayAsObject).length);\n            for (var i = 0; i < buffer.length; i++)\n                buffer[i] = arrayAsObject[i];\n            data = buffer;\n        }\n        else {\n            _Helper__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogError(\"network event can't be parsed: \" + str);\n        }\n        var evt = new NetworkEvent(values.type, values.connectionId, data);\n        return evt;\n    };\n    NetworkEvent.toString = function (evt) {\n        return JSON.stringify(evt);\n    };\n    NetworkEvent.fromByteArray = function (arrin) {\n        //old node js versions seem to not return proper Uint8Arrays but\n        //buffers -> make sure it is a Uint8Array\n        var arr = new Uint8Array(arrin);\n        var type = arr[0]; //byte\n        var dataType = arr[1]; //byte\n        var id = new Int16Array(arr.buffer, arr.byteOffset + 2, 1)[0]; //short\n        var data = null;\n        if (dataType == NetEventDataType.ByteArray) {\n            var length_1 = new Uint32Array(arr.buffer, arr.byteOffset + 4, 1)[0]; //uint\n            var byteArray = new Uint8Array(arr.buffer, arr.byteOffset + 8, length_1);\n            data = byteArray;\n        }\n        else if (dataType == NetEventDataType.UTF16String) {\n            var length_2 = new Uint32Array(arr.buffer, arr.byteOffset + 4, 1)[0]; //uint\n            var uint16Arr = new Uint16Array(arr.buffer, arr.byteOffset + 8, length_2);\n            var str = \"\";\n            for (var i = 0; i < uint16Arr.length; i++) {\n                str += String.fromCharCode(uint16Arr[i]);\n            }\n            data = str;\n        }\n        else if (dataType == NetEventDataType.Null) {\n            //message has no data\n        }\n        else {\n            throw new Error('Message has an invalid data type flag: ' + dataType);\n        }\n        var conId = new ConnectionId(id);\n        var result = new NetworkEvent(type, conId, data);\n        return result;\n    };\n    NetworkEvent.toByteArray = function (evt) {\n        var dataType;\n        var length = 4; //4 bytes are always needed\n        //getting type and length\n        if (evt.data == null) {\n            dataType = NetEventDataType.Null;\n        }\n        else if (typeof evt.data == \"string\") {\n            dataType = NetEventDataType.UTF16String;\n            var str = evt.data;\n            length += str.length * 2 + 4;\n        }\n        else {\n            dataType = NetEventDataType.ByteArray;\n            var byteArray = evt.data;\n            length += 4 + byteArray.length;\n        }\n        //creating the byte array\n        var result = new Uint8Array(length);\n        result[0] = evt.type;\n        ;\n        result[1] = dataType;\n        var conIdField = new Int16Array(result.buffer, result.byteOffset + 2, 1);\n        conIdField[0] = evt.connectionId.id;\n        if (dataType == NetEventDataType.ByteArray) {\n            var byteArray = evt.data;\n            var lengthField = new Uint32Array(result.buffer, result.byteOffset + 4, 1);\n            lengthField[0] = byteArray.length;\n            for (var i = 0; i < byteArray.length; i++) {\n                result[8 + i] = byteArray[i];\n            }\n        }\n        else if (dataType == NetEventDataType.UTF16String) {\n            var str = evt.data;\n            var lengthField = new Uint32Array(result.buffer, result.byteOffset + 4, 1);\n            lengthField[0] = str.length;\n            var dataField = new Uint16Array(result.buffer, result.byteOffset + 8, str.length);\n            for (var i = 0; i < dataField.length; i++) {\n                dataField[i] = str.charCodeAt(i);\n            }\n        }\n        return result;\n    };\n    return NetworkEvent;\n}());\n\nvar ConnectionId = /** @class */ (function () {\n    function ConnectionId(nid) {\n        this.id = nid;\n    }\n    ConnectionId.INVALID = new ConnectionId(-1);\n    return ConnectionId;\n}());\n\n//export {NetEventType, NetworkEvent, ConnectionId, INetwork, IBasicNetwork};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL0lOZXR3b3JrLnRzP2I3OGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDRjs7Ozs7O0dBTUc7QUFFNkI7QUFFaEMsSUFBWSxZQTZCWDtBQTdCRCxXQUFZLFlBQVk7SUFDcEIscURBQVc7SUFDWCx5RkFBNkI7SUFDN0IscUZBQTJCO0lBQzNCLHlFQUFxQjtJQUNyQix1RUFBb0I7SUFDcEIsK0RBQWdCO0lBQ2hCLGlFQUFpQjtJQUNqQix1RUFBb0I7SUFDcEIsK0RBQWdCO0lBQ2hCLDZEQUFnQjtJQUNoQix1REFBYTtJQUNiLCtDQUFTO0lBRVQsYUFBYTtJQUNiLHVEQUF1RDtJQUN2RCw0REFBNEQ7SUFDNUQsY0FBYztJQUNkLG1FQUFtQjtJQUNuQixhQUFhO0lBQ2IsYUFBYTtJQUNiLGdEQUFnRDtJQUNoRCxjQUFjO0lBQ2QsK0RBQWlCO0lBQ2pCLGFBQWE7SUFDYixhQUFhO0lBQ2IsaURBQWlEO0lBQ2pELGNBQWM7SUFDZCxtRUFBbUI7QUFDdkIsQ0FBQyxFQTdCVyxZQUFZLEtBQVosWUFBWSxRQTZCdkI7QUFDRCxJQUFZLGdCQUlYO0FBSkQsV0FBWSxnQkFBZ0I7SUFDeEIsdURBQVE7SUFDUixpRUFBYTtJQUNiLHFFQUFlO0FBQ25CLENBQUMsRUFKVyxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBSTNCO0FBRUQ7SUFNSSxzQkFBWSxDQUFlLEVBQUUsS0FBbUIsRUFBRSxJQUFTO1FBQ3ZELElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDMUIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVELHNCQUFXLGlDQUFPO2FBQWxCO1lBQ0ksT0FBTyxJQUFJLENBQUMsSUFB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QUFNLElBQUksUUFBUSxJQUFJLGdCQUFnQixDQUFDLFdBQVcsRUFBRTtZQUVqRCxJQUFJLEdBQUcsR0FBVyxHQUFHLENBQUMsSUFBSSxDQUFDO1lBQzNCLElBQUksV0FBVyxHQUFHLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDM0UsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7WUFFNUIsSUFBSSxTQUFTLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEYsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3ZDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BDO1NBRUo7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQUFDOztBQUVEO0lBTUksc0JBQVksR0FBVztRQUNuQixJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBTmEsb0JBQU8sR0FBaUIsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQVMvRCxtQkFBQztDQUFBO0FBWHdCO0FBb0d6Qiw2RUFBNkUiLCJmaWxlIjoiLi9zcmMvYXdydGMvbmV0d29yay9JTmV0d29yay50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbi8qKiBBYnN0cmFjdCBpbnRlcmZhY2VzIGFuZCBzZXJpYWxpemF0aW9uIHRvIGtlZXAgZGlmZmVyZW50XG4gKiB2ZXJzaW9ucyBjb21wYXRpYmxlIHRvIGVhY2ggb3RoZXIuXG4gKiBcbiAqIFdhdGNoIG91dCBiZWZvcmUgY2hhbmdpbmcgYW55dGhpbmcgaW4gdGhpcyBmaWxlLiBDb250ZW50IGlzIHJldXNlZFxuICogYmV0d2VlbiB3ZWJjbGllbnQsIHNpZ25hbGluZyBzZXJ2ZXIgYW5kIG5lZWRzIHRvIHJlbWFpbiBjb21wYXRpYmxlIHRvXG4gKiB0aGUgQyMgaW1wbGVtZW50YXRpb24uXG4gKi9cblxuaW1wb3J0IHsgU0xvZyB9IGZyb20gXCIuL0hlbHBlclwiO1xuXG5leHBvcnQgZW51bSBOZXRFdmVudFR5cGUge1xuICAgIEludmFsaWQgPSAwLFxuICAgIFVucmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQgPSAxLFxuICAgIFJlbGlhYmxlTWVzc2FnZVJlY2VpdmVkID0gMixcbiAgICBTZXJ2ZXJJbml0aWFsaXplZCA9IDMsLy9jb25maXJtYXRpb24gdGhhdCB0aGUgc2VydmVyIHdhcyBzdGFydGVkLiBvdGhlciBwZW9wbGUgd2lsbCBiZSBhYmxlIHRvIGNvbm5lY3RcbiAgICBTZXJ2ZXJJbml0RmFpbGVkID0gNCwvL3NlcnZlciBjb3VsZG4ndCBiZSBzdGFydGVkXG4gICAgU2VydmVyQ2xvc2VkID0gNSwvL3NlcnZlciB3YXMgY2xvc2VkLiBubyBuZXcgaW5jb21pbmcgY29ubmVjdGlvbnNcbiAgICBOZXdDb25uZWN0aW9uID0gNiwvL25ldyBpbmNvbWluZyBvciBvdXRnb2luZyBjb25uZWN0aW9uIGVzdGFibGlzaGVkXG4gICAgQ29ubmVjdGlvbkZhaWxlZCA9IDcsLy9vdXRnb2luZyBjb25uZWN0aW9uIGZhaWxlZFxuICAgIERpc2Nvbm5lY3RlZCA9IDgsLy9hIGNvbm5lY3Rpb24gd2FzIGRpc2Nvbm5lY3RlZFxuICAgIEZhdGFsRXJyb3IgPSAxMDAsIC8vbm90IHlldCB1c2VkXG4gICAgV2FybmluZyA9IDEwMSwvL25vdCB5ZXQgdXNlZFxuICAgIExvZyA9IDEwMiwgLy9ub3QgeWV0IHVzZWRcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gVGhpcyB2YWx1ZSBhbmQgaGlnaGVyIGFyZSByZXNlcnZlZCBmb3Igb3RoZXIgdXNlcy4gXG4gICAgLy8vIFNob3VsZCBuZXZlciBnZXQgdG8gdGhlIHVzZXIgYW5kIHNob3VsZCBiZSBmaWx0ZXJlZCBvdXQuXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBSZXNlcnZlZFN0YXJ0ID0gMjAwLFxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gUmVzZXJ2ZWQuXG4gICAgLy8vIFVzZWQgYnkgcHJvdG9jb2xzIHRoYXQgZm9yd2FyZCBOZXR3b3JrRXZlbnRzXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBNZXRhVmVyc2lvbiA9IDIwMSxcbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIFJlc2VydmVkLlxuICAgIC8vLyBVc2VkIGJ5IHByb3RvY29scyB0aGF0IGZvcndhcmQgTmV0d29ya0V2ZW50cy5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIE1ldGFIZWFydGJlYXQgPSAyMDJcbn1cbmV4cG9ydCBlbnVtIE5ldEV2ZW50RGF0YVR5cGUge1xuICAgIE51bGwgPSAwLFxuICAgIEJ5dGVBcnJheSA9IDEsIC8vbGVhZGluZyAzMiBiaXQgYnl0ZSBsZW5ndGggKyBieXRlIGFycmF5XG4gICAgVVRGMTZTdHJpbmcgPSAyLCAvL2xlYWRpbmcgMzIgYml0IGxlbmd0aCAoaW4gdXRmMTYgY2h1bmtzKSAgKyBVVEYgMTYgXG59XG5cbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXZlbnQge1xuXG4gICAgcHJpdmF0ZSB0eXBlOiBOZXRFdmVudFR5cGU7XG4gICAgcHJpdmF0ZSBjb25uZWN0aW9uSWQ6IENvbm5lY3Rpb25JZDtcbiAgICBwcml2YXRlIGRhdGE6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHQ6IE5ldEV2ZW50VHlwZSwgY29uSWQ6IENvbm5lY3Rpb25JZCwgZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHQ7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbklkID0gY29uSWQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBSYXdEYXRhKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBNZXNzYWdlRGF0YSgpOiBVaW50OEFycmF5IHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGE7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgSW5mbygpOiBzdHJpbmcge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBUeXBlKCk6IE5ldEV2ZW50VHlwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgQ29ubmVjdGlvbklkKCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25JZDtcbiAgICB9XG5cbiAgICAvL2ZvciBkZWJ1Z2dpbmcgb25seVxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBsZXQgb3V0cHV0ID0gXCJOZXR3b3JrRXZlbnRbXCI7XG4gICAgICAgIG91dHB1dCArPSBcIk5ldEV2ZW50VHlwZTogKFwiO1xuICAgICAgICBvdXRwdXQgKz0gTmV0RXZlbnRUeXBlW3RoaXMudHlwZV07XG4gICAgICAgIG91dHB1dCArPSBcIiksIGlkOiAoXCI7XG4gICAgICAgIG91dHB1dCArPSB0aGlzLmNvbm5lY3Rpb25JZC5pZDtcbiAgICAgICAgb3V0cHV0ICs9IFwiKSwgRGF0YTogKFwiO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBvdXRwdXQgKz0gdGhpcy5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dCArPSBcIildXCI7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlRnJvbVN0cmluZyhzdHI6IHN0cmluZyk6IE5ldHdvcmtFdmVudCB7XG5cbiAgICAgICAgbGV0IHZhbHVlcyA9IEpTT04ucGFyc2Uoc3RyKTtcblxuXG4gICAgICAgIGxldCBkYXRhOiBhbnk7XG4gICAgICAgIGlmICh2YWx1ZXMuZGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICBkYXRhID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWVzLmRhdGEgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgZGF0YSA9IHZhbHVlcy5kYXRhO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZXMuZGF0YSA9PSBcIm9iamVjdFwiKSB7XG5cbiAgICAgICAgICAgIC8vanNvbiByZXByZXNlbnRzIHRoZSBhcnJheSBhcyBhbiBvYmplY3QgY29udGFpbmluZyBlYWNoIGluZGV4IGFuZCB0aGVcbiAgICAgICAgICAgIC8vdmFsdWUgYXMgc3RyaW5nIG51bWJlciAuLi4gaW1wcm92ZSB0aGF0IGxhdGVyXG4gICAgICAgICAgICBsZXQgYXJyYXlBc09iamVjdCA9IHZhbHVlcy5kYXRhO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGFycmF5QXNPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAvL2lmIChhcnJheUFzT2JqZWN0Lmhhc093blByb3BlcnR5KHByb3ApKSB7IC8vc2hvdWxkbnQgYmUgbmVlZGVkXG4gICAgICAgICAgICAgICAgbGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoT2JqZWN0LmtleXMoYXJyYXlBc09iamVjdCkubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGJ1ZmZlcltpXSA9IGFycmF5QXNPYmplY3RbaV07XG4gICAgICAgICAgICBkYXRhID0gYnVmZmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU0xvZy5Mb2dFcnJvcihcIm5ldHdvcmsgZXZlbnQgY2FuJ3QgYmUgcGFyc2VkOiBcIiArIHN0cik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV2dCA9IG5ldyBOZXR3b3JrRXZlbnQodmFsdWVzLnR5cGUsIHZhbHVlcy5jb25uZWN0aW9uSWQsIGRhdGEpO1xuICAgICAgICByZXR1cm4gZXZ0O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdG9TdHJpbmcoZXZ0OiBOZXR3b3JrRXZlbnQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXZ0KTtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyBmcm9tQnl0ZUFycmF5KGFycmluOiBVaW50OEFycmF5KTogTmV0d29ya0V2ZW50IHtcbiAgICAgICAgLy9vbGQgbm9kZSBqcyB2ZXJzaW9ucyBzZWVtIHRvIG5vdCByZXR1cm4gcHJvcGVyIFVpbnQ4QXJyYXlzIGJ1dFxuICAgICAgICAvL2J1ZmZlcnMgLT4gbWFrZSBzdXJlIGl0IGlzIGEgVWludDhBcnJheVxuICAgICAgICBsZXQgYXJyIDogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmluKVxuXG4gICAgICAgIGxldCB0eXBlOiBOZXRFdmVudFR5cGUgPSBhcnJbMF07IC8vYnl0ZVxuICAgICAgICBsZXQgZGF0YVR5cGU6IE5ldEV2ZW50RGF0YVR5cGUgPSBhcnJbMV07IC8vYnl0ZVxuICAgICAgICBsZXQgaWQ6IG51bWJlciA9IG5ldyBJbnQxNkFycmF5KGFyci5idWZmZXIsIGFyci5ieXRlT2Zmc2V0ICsgMiwgMSlbMF07IC8vc2hvcnRcblxuICAgICAgICBcbiAgICAgICAgbGV0IGRhdGE6IGFueSA9IG51bGw7XG4gICAgICAgIGlmIChkYXRhVHlwZSA9PSBOZXRFdmVudERhdGFUeXBlLkJ5dGVBcnJheSkge1xuXG4gICAgICAgICAgICBsZXQgbGVuZ3RoOiBudW1iZXIgPSBuZXcgVWludDMyQXJyYXkoYXJyLmJ1ZmZlciwgYXJyLmJ5dGVPZmZzZXQgKyA0LCAxKVswXTsgLy91aW50XG4gICAgICAgICAgICBsZXQgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyLmJ1ZmZlciwgYXJyLmJ5dGVPZmZzZXQgKyA4LCBsZW5ndGgpO1xuICAgICAgICAgICAgZGF0YSA9IGJ5dGVBcnJheTtcblxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09IE5ldEV2ZW50RGF0YVR5cGUuVVRGMTZTdHJpbmcpIHtcblxuICAgICAgICAgICAgbGV0IGxlbmd0aDogbnVtYmVyID0gbmV3IFVpbnQzMkFycmF5KGFyci5idWZmZXIsIGFyci5ieXRlT2Zmc2V0ICsgNCwgMSlbMF07IC8vdWludFxuICAgICAgICAgICAgbGV0IHVpbnQxNkFyciA9IG5ldyBVaW50MTZBcnJheShhcnIuYnVmZmVyLCBhcnIuYnl0ZU9mZnNldCArIDgsIGxlbmd0aCk7XG5cbiAgICAgICAgICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVpbnQxNkFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVpbnQxNkFycltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhID0gc3RyO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGFUeXBlID09IE5ldEV2ZW50RGF0YVR5cGUuTnVsbCkge1xuICAgICAgICAgICAgLy9tZXNzYWdlIGhhcyBubyBkYXRhXG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lc3NhZ2UgaGFzIGFuIGludmFsaWQgZGF0YSB0eXBlIGZsYWc6ICcgKyBkYXRhVHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29uSWQ6IENvbm5lY3Rpb25JZCA9IG5ldyBDb25uZWN0aW9uSWQoaWQpO1xuICAgICAgICBsZXQgcmVzdWx0OiBOZXR3b3JrRXZlbnQgPSBuZXcgTmV0d29ya0V2ZW50KHR5cGUsIGNvbklkLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcHVibGljIHN0YXRpYyB0b0J5dGVBcnJheShldnQ6IE5ldHdvcmtFdmVudCk6IFVpbnQ4QXJyYXkge1xuXG4gICAgICAgIGxldCBkYXRhVHlwZTogTmV0RXZlbnREYXRhVHlwZTtcbiAgICAgICAgbGV0IGxlbmd0aCA9IDQ7IC8vNCBieXRlcyBhcmUgYWx3YXlzIG5lZWRlZFxuXG4gICAgICAgIC8vZ2V0dGluZyB0eXBlIGFuZCBsZW5ndGhcbiAgICAgICAgaWYgKGV2dC5kYXRhID09IG51bGwpIHtcbiAgICAgICAgICAgIGRhdGFUeXBlID0gTmV0RXZlbnREYXRhVHlwZS5OdWxsO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBldnQuZGF0YSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBkYXRhVHlwZSA9IE5ldEV2ZW50RGF0YVR5cGUuVVRGMTZTdHJpbmc7XG4gICAgICAgICAgICBsZXQgc3RyOiBzdHJpbmcgPSBldnQuZGF0YTtcbiAgICAgICAgICAgIGxlbmd0aCArPSBzdHIubGVuZ3RoICogMiArIDQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhVHlwZSA9IE5ldEV2ZW50RGF0YVR5cGUuQnl0ZUFycmF5O1xuICAgICAgICAgICAgbGV0IGJ5dGVBcnJheTogVWludDhBcnJheSA9IGV2dC5kYXRhO1xuICAgICAgICAgICAgbGVuZ3RoICs9IDQgKyBieXRlQXJyYXkubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9jcmVhdGluZyB0aGUgYnl0ZSBhcnJheVxuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgICAgICAgcmVzdWx0WzBdID0gZXZ0LnR5cGU7O1xuICAgICAgICByZXN1bHRbMV0gPSBkYXRhVHlwZTtcblxuICAgICAgICBsZXQgY29uSWRGaWVsZCA9IG5ldyBJbnQxNkFycmF5KHJlc3VsdC5idWZmZXIsIHJlc3VsdC5ieXRlT2Zmc2V0ICsgMiwgMSk7XG4gICAgICAgIGNvbklkRmllbGRbMF0gPSBldnQuY29ubmVjdGlvbklkLmlkO1xuXG4gICAgICAgIGlmIChkYXRhVHlwZSA9PSBOZXRFdmVudERhdGFUeXBlLkJ5dGVBcnJheSkge1xuXG4gICAgICAgICAgICBsZXQgYnl0ZUFycmF5OiBVaW50OEFycmF5ID0gZXZ0LmRhdGE7XG4gICAgICAgICAgICBsZXQgbGVuZ3RoRmllbGQgPSBuZXcgVWludDMyQXJyYXkocmVzdWx0LmJ1ZmZlciwgcmVzdWx0LmJ5dGVPZmZzZXQgKyA0LCAxKTtcbiAgICAgICAgICAgIGxlbmd0aEZpZWxkWzBdID0gYnl0ZUFycmF5Lmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0WzggKyBpXSA9IGJ5dGVBcnJheVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhVHlwZSA9PSBOZXRFdmVudERhdGFUeXBlLlVURjE2U3RyaW5nKSB7XG5cbiAgICAgICAgICAgIGxldCBzdHI6IHN0cmluZyA9IGV2dC5kYXRhO1xuICAgICAgICAgICAgbGV0IGxlbmd0aEZpZWxkID0gbmV3IFVpbnQzMkFycmF5KHJlc3VsdC5idWZmZXIsIHJlc3VsdC5ieXRlT2Zmc2V0ICsgNCwgMSk7XG4gICAgICAgICAgICBsZW5ndGhGaWVsZFswXSA9IHN0ci5sZW5ndGg7XG5cbiAgICAgICAgICAgIGxldCBkYXRhRmllbGQgPSBuZXcgVWludDE2QXJyYXkocmVzdWx0LmJ1ZmZlciwgcmVzdWx0LmJ5dGVPZmZzZXQgKyA4LCBzdHIubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUZpZWxkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGF0YUZpZWxkW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25JZCB7XG5cbiAgICBwdWJsaWMgc3RhdGljIElOVkFMSUQ6IENvbm5lY3Rpb25JZCA9IG5ldyBDb25uZWN0aW9uSWQoLTEpO1xuXG4gICAgaWQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKG5pZDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuaWQgPSBuaWQ7XG4gICAgfVxuXG5cbn1cbi8vLyA8c3VtbWFyeT5cbi8vLyBJbnRlcmZhY2UgdG8gYSBuZXR3b3JrIHRoYXQgZG9lc24ndCBlbmZvcmNlIHN0b3JpbmcgYW55IHN0YXRlcy5cbi8vLyBcbi8vLyBBbnl0aGluZyBtb3JlIGlzIHJldXNhYmxlIGJldHdlZW4gbXVsdGlwbGUgZGlmZmVyZW50IG5ldHdvcmtzLlxuLy8vIDwvc3VtbWFyeT5cbmV4cG9ydCBpbnRlcmZhY2UgSU5ldHdvcmsge1xuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gVGhpcyB3aWxsIHJldHVybiB0aGUgaW5jb21pbmcgbmV0d29yayBldmVudHMuIENhbGwgdGhpcyBtZXRob2QgYW5kIGhhbmRsZSB0aGUgaW5jb21tZW4gZXZlbnRzIHVudGlsIGl0IHJldHVybnMgZmFsc2UuXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJldnRcIj48L3BhcmFtPlxuICAgIC8vLyA8cmV0dXJucz5SZXR1cm5zIHRydWUgaWYgdGhlIHBhcmFtZXRlciBldnQgY29udGFpbnMgYSBuZXcgZXZlbnQuIEZhbHNlIGlmIHRoZXJlIGFyZSBubyBldmVudHMgdG8gcHJvY2VzcyBsZWZ0LjwvcmV0dXJucz5cbiAgICBEZXF1ZXVlKCk6IE5ldHdvcmtFdmVudDtcblxuICAgIFBlZWsoKTogTmV0d29ya0V2ZW50O1xuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBTZW5kcyBidWZmZXJlZCBkYXRhLlxuICAgIC8vLyBNaWdodCBhbHNvIGNsZWFyIGFsbCB1bnVzZWQgZXZlbnRzIGZyb20gdGhlIHF1ZXVlIVxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgRmx1c2goKTogdm9pZDtcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gU2VuZHMgdGhlIGNvbnRlbnQgaWYgYSBieXRlIGFycmF5IHRvIHRoZSBnaXZlbiBjb25uZWN0aW9uLlxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiaWRcIj5UaGUgaWQgb2YgdGhlIHJlY2lwaWVudDwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiZGF0YVwiPkJ5dGUgYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSB0byBzZW5kPC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJvZmZzZXRcIj5UaGUgaW5kZXggaW4gZGF0YSB3aGVyZSB0aGUgbmV0d29yayBzaG91bGQgc3RhcnQgdG8gc2VuZDwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwibGVuZ3RoXCI+TGVuZ3RoIGluIGJ5dGVzIHlvdSB3YW50IHRvIHNlbmQ8L3BhcmFtPlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInJlbGlhYmxlXCI+VHJ1ZSB0byBzZW5kIGEgcmVsaWFibGUgbWVzc2FnZSh0Y3Agc3R5bGUpIGFuZCBmYWxzZSB0byBzZW5kIHVucmVsaWFibGUgKHVkcCBzdHlsZSk8L3BhcmFtPlxuICAgIFNlbmREYXRhKGlkOiBDb25uZWN0aW9uSWQsIGRhdGE6IFVpbnQ4QXJyYXksIC8qb2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCovIHJlbGlhYmxlOiBib29sZWFuKTogYm9vbGVhblxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBEaXNjb25uZWN0cyB0aGUgZ2l2ZW4gY29ubmVjdGlvblxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiaWRcIj5JZCBvZiB0aGUgY29ubmVjdGlvbiB0byBkaXNjb25uZWN0LjwvcGFyYW0+XG4gICAgRGlzY29ubmVjdChpZDogQ29ubmVjdGlvbklkKTogdm9pZDtcblxuICAgIC8vLyA8c3VtbWFyeT5cbiAgICAvLy8gRGlzY29ubmVjdHMgYWxsIGNvbm5lY3Rpb24gYW5kIHNodXRzZG93biB0aGUgc2VydmVyIGlmIHN0YXJ0ZWQuXG4gICAgLy8vIERlcXVldWUgd2lsbCBzdGlsbCByZXR1cm4gdGhlIGNvbmZpcm1hdGlvbiBtZXNzYWdlcyBzdWNoIGFzIERpc2Nvbm5lY3RlZCBldmVudCBmb3IgZWFjaCBjb25uZWN0aW9uLlxuICAgIC8vLyBcbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIFNodXRkb3duKCk6IHZvaWQ7XG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIENhbGwgdGhpcyBldmVyeSBmcmFtZSBpZiB5b3UgaW50ZW5kIHRvIHJlYWQgaW5jb21pbmcgbWVzc2FnZXMgdXNpbmcgRGVxdWV1ZS4gVGhpcyB3aWxsIG1ha2VcbiAgICAvLy8gc3VyZSBhbGwgZGF0YSBpcyByZWFkIHJlY2VpdmVkIGJ5IHRoZSBuZXR3b3JrLlxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgVXBkYXRlKCk6IHZvaWQ7XG5cbiAgICBEaXNwb3NlKCk6IHZvaWQ7XG59XG5cbi8vLyA8c3VtbWFyeT5cbi8vLyBTaGFyZWQgaW50ZXJmYWNlIGZvciBXZWJSdGNOZXR3b3JrIGFuZCBVbml0eU5ldHdvcmsuXG4vLy8gXG4vLy8gS2VlcCBpbiBtaW5kIHRoYXQgaW4gdGhlIGN1cnJlbnQgdmVyc2lvbiB0aGUgbmV0d29yayBjYW4gb25seSBhY3QgYXMgYSBzZXJ2ZXIgKFN0YXJ0U2VydmVyIG1ldGhvZCkgb3IgXG4vLy8gYXMgYSBjbGllbnQgKHZpYSBDb25uZWN0IG1ldGhvZCkuXG4vLy8gPC9zdW1tYXJ5PlxuZXhwb3J0IGludGVyZmFjZSBJQmFzaWNOZXR3b3JrIGV4dGVuZHMgSU5ldHdvcmsge1xuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBTdGFydHMgYSBuZXcgc2VydmVyLiBBZnRlciB0aGUgc2VydmVyIGlzIHN0YXJ0ZWQgdGhlIERlcXVldWUgbWV0aG9kIHdpbGwgcmV0dXJuIGFcbiAgICAvLy8gU2VydmVySW5pdGlhbGl6ZWQgZXZlbnQgd2l0aCB0aGUgYWRkcmVzcyBpbiB0aGUgSW5mbyBmaWVsZC5cbiAgICAvLy8gXG4gICAgLy8vIElmIHRoZSBzZXJ2ZXIgZmFpbHMgdG8gc3RhcnQgaXQgd2lsbCByZXR1cm4gYSBTZXJ2ZXJJbml0RmFpbGVkIGV2ZW50LiBJZiB0aGVcbiAgICAvLy8gc2VydmVyIGlzIGNsb3NlZCBkdWUgdG8gYW4gZXJyb3Igb3IgdGhlIFNodXRkb3duIG1ldGhvZCBhIFNlcnZlckNsb3NlZCBldmVudFxuICAgIC8vLyB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIFN0YXJ0U2VydmVyKGFkZHJlc3M/OiBzdHJpbmcpOiB2b2lkO1xuICAgIFN0b3BTZXJ2ZXIoKTogdm9pZFxuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBDb25uZWN0cyB0byBhIGdpdmVuIGFkZHJlc3Mgb3Igcm9vbW5hbWUuXG4gICAgLy8vIFxuICAgIC8vLyBUaGlzIGNhbGwgd2lsbCByZXN1bHQgaW4gb25lIG9mIHRob3NlIDIgZXZlbnRzIGluIHJlc3BvbnNlOlxuICAgIC8vLyAqIE5ld0Nvbm5lY3Rpb24gaWYgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkXG4gICAgLy8vICogQ29ubmVjdGlvbkZhaWxlZCBpZiB0aGUgY29ubmVjdGlvbiBmYWlsZWQuXG4gICAgLy8vIFxuICAgIC8vLyBcbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImFkZHJlc3NcIj5BIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhlIHRhcmdldC48L3BhcmFtPlxuICAgIC8vLyA8cmV0dXJucz5SZXR1cm5zIHRoZSBDb25uZWN0aW9uIGlkIHRoZSBlc3RhYmxpc2hlZCBjb25uZWN0aW9uIHdpbGwgaGF2ZSAob25seSBzdXBwb3J0ZWQgYnkgV2ViUnRjTmV0d29yaykuPC9yZXR1cm5zPlxuICAgIENvbm5lY3QoYWRkcmVzczogc3RyaW5nKTogQ29ubmVjdGlvbklkO1xufVxuZXhwb3J0IGludGVyZmFjZSBJV2ViUnRjTmV0d29yayBleHRlbmRzIElCYXNpY05ldHdvcmsge1xuICAgIEdldEJ1ZmZlcmVkQW1vdW50KGlkOiBDb25uZWN0aW9uSWQsIHJlbGlhYmxlOmJvb2xlYW4pOiBudW1iZXI7XG59XG4vL2V4cG9ydCB7TmV0RXZlbnRUeXBlLCBOZXR3b3JrRXZlbnQsIENvbm5lY3Rpb25JZCwgSU5ldHdvcmssIElCYXNpY05ldHdvcmt9O1xuXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/awrtc/network/INetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/network/LocalNetwork.ts":
/*!*******************************************!*\
  !*** ./src/awrtc/network/LocalNetwork.ts ***!
  \*******************************************/
/*! exports provided: LocalNetwork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LocalNetwork\", function() { return LocalNetwork; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n/**Helper to simulate the WebsocketNetwork or WebRtcNetwork\n * within a local application without\n * any actual network components.\n *\n * This implementation might lack some features.\n */\nvar LocalNetwork = /** @class */ (function () {\n    function LocalNetwork() {\n        this.mNextNetworkId = new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](1);\n        this.mServerAddress = null;\n        this.mEvents = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        this.mConnectionNetwork = {};\n        this.mIsDisposed = false;\n        this.mId = LocalNetwork.sNextId;\n        LocalNetwork.sNextId++;\n    }\n    Object.defineProperty(LocalNetwork.prototype, \"IsServer\", {\n        get: function () {\n            return this.mServerAddress != null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalNetwork.prototype.StartServer = function (serverAddress) {\n        if (serverAddress === void 0) { serverAddress = null; }\n        if (serverAddress == null)\n            serverAddress = \"\" + this.mId;\n        if (serverAddress in LocalNetwork.mServers) {\n            this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, serverAddress);\n            return;\n        }\n        LocalNetwork.mServers[serverAddress] = this;\n        this.mServerAddress = serverAddress;\n        this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitialized, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, serverAddress);\n    };\n    LocalNetwork.prototype.StopServer = function () {\n        if (this.IsServer) {\n            this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, this.mServerAddress);\n            delete LocalNetwork.mServers[this.mServerAddress];\n            this.mServerAddress = null;\n        }\n    };\n    LocalNetwork.prototype.Connect = function (address) {\n        var connectionId = this.NextConnectionId();\n        var sucessful = false;\n        if (address in LocalNetwork.mServers) {\n            var server = LocalNetwork.mServers[address];\n            if (server != null) {\n                server.ConnectClient(this);\n                //add the server as local connection\n                this.mConnectionNetwork[connectionId.id] = LocalNetwork.mServers[address];\n                this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection, connectionId, null);\n                sucessful = true;\n            }\n        }\n        if (sucessful == false) {\n            this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ConnectionFailed, connectionId, \"Couldn't connect to the given server with id \" + address);\n        }\n        return connectionId;\n    };\n    LocalNetwork.prototype.Shutdown = function () {\n        for (var id in this.mConnectionNetwork) //can be changed while looping?\n         {\n            this.Disconnect(new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](+id));\n        }\n        //this.mConnectionNetwork.Clear();\n        this.StopServer();\n    };\n    LocalNetwork.prototype.Dispose = function () {\n        if (this.mIsDisposed == false) {\n            this.Shutdown();\n        }\n    };\n    LocalNetwork.prototype.SendData = function (userId, data, reliable) {\n        if (userId.id in this.mConnectionNetwork) {\n            var net = this.mConnectionNetwork[userId.id];\n            net.ReceiveData(this, data, reliable);\n            return true;\n        }\n        return false;\n    };\n    LocalNetwork.prototype.Update = function () {\n        //work around for the GarbageCollection bug\n        //usually weak references are removed during garbage collection but that\n        //fails sometimes as others weak references get null to even though\n        //the objects still exist!\n        this.CleanupWreakReferences();\n    };\n    LocalNetwork.prototype.Dequeue = function () {\n        return this.mEvents.Dequeue();\n    };\n    LocalNetwork.prototype.Peek = function () {\n        return this.mEvents.Peek();\n    };\n    LocalNetwork.prototype.Flush = function () {\n    };\n    LocalNetwork.prototype.Disconnect = function (id) {\n        if (id.id in this.mConnectionNetwork) {\n            var other = this.mConnectionNetwork[id.id];\n            if (other != null) {\n                other.InternalDisconnectNetwork(this);\n                this.InternalDisconnect(id);\n            }\n            else {\n                //this is suppose to never happen but it does\n                //if a server is destroyed by the garbage collector the client\n                //weak reference appears to be NULL even though it still exists\n                //bug?\n                this.CleanupWreakReferences();\n            }\n        }\n    };\n    LocalNetwork.prototype.FindConnectionId = function (network) {\n        for (var kvp in this.mConnectionNetwork) {\n            var network_1 = this.mConnectionNetwork[kvp];\n            if (network_1 != null) {\n                return new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](+kvp);\n            }\n        }\n        return _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID;\n    };\n    LocalNetwork.prototype.NextConnectionId = function () {\n        var res = this.mNextNetworkId;\n        this.mNextNetworkId = new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](res.id + 1);\n        return res;\n    };\n    LocalNetwork.prototype.ConnectClient = function (client) {\n        //if (this.IsServer == false)\n        //    throw new InvalidOperationException();\n        var nextId = this.NextConnectionId();\n        //server side only\n        this.mConnectionNetwork[nextId.id] = client;\n        this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection, nextId, null);\n    };\n    LocalNetwork.prototype.Enqueue = function (type, id, data) {\n        var ev = new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](type, id, data);\n        this.mEvents.Enqueue(ev);\n    };\n    LocalNetwork.prototype.ReceiveData = function (network, data, reliable) {\n        var userId = this.FindConnectionId(network);\n        var buffer = new Uint8Array(data.length);\n        for (var i = 0; i < buffer.length; i++) {\n            buffer[i] = data[i];\n        }\n        var type = _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].UnreliableMessageReceived;\n        if (reliable)\n            type = _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ReliableMessageReceived;\n        this.Enqueue(type, userId, buffer);\n    };\n    LocalNetwork.prototype.InternalDisconnect = function (id) {\n        if (id.id in this.mConnectionNetwork) {\n            this.Enqueue(_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected, id, null);\n            delete this.mConnectionNetwork[id.id];\n        }\n    };\n    LocalNetwork.prototype.InternalDisconnectNetwork = function (ln) {\n        //if it can't be found it will return invalid which is ignored in internal disconnect\n        this.InternalDisconnect(this.FindConnectionId(ln));\n    };\n    LocalNetwork.prototype.CleanupWreakReferences = function () {\n        //foreach(var kvp in mConnectionNetwork.Keys.ToList())\n        //{\n        //    var val = mConnectionNetwork[kvp];\n        //    if (val.Get() == null) {\n        //        InternalDisconnect(kvp);\n        //    }\n        //}\n    };\n    LocalNetwork.sNextId = 1;\n    LocalNetwork.mServers = {};\n    return LocalNetwork;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL0xvY2FsTmV0d29yay50cz9lMDMyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDOEQ7QUFDL0I7QUFTakM7Ozs7O0dBS0c7QUFDSDtJQVlJO1FBUFEsbUJBQWMsR0FBRyxJQUFJLG1EQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckMsbUJBQWMsR0FBWSxJQUFJLENBQUM7UUFDL0IsWUFBTyxHQUFHLElBQUksNkNBQUssRUFBZ0IsQ0FBQztRQUNwQyx1QkFBa0IsR0FBRyxFQUEwQixDQUFDO1FBRWhELGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBSXhCLElBQUksQ0FBQyxHQUFHLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQztRQUNoQyxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELHNCQUFXLGtDQUFRO2FBQW5CO1lBQ0ksT0FBTyxJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQztRQUN2QyxDQUFDOzs7T0FBQTtJQUdNLGtDQUFXLEdBQWxCLFVBQW1CLGFBQTRCO1FBQTVCLG9EQUE0QjtRQUUzQyxJQUFJLGFBQWEsSUFBSSxJQUFJO1lBQ3JCLGFBQWEsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUVsQyxJQUFJLGFBQWEsSUFBSSxZQUFZLENBQUMsUUFBUSxFQUFFO1lBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsbURBQVksQ0FBQyxnQkFBZ0IsRUFBRSxtREFBWSxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztZQUNqRixPQUFPO1NBQ1Y7UUFFRCxZQUFZLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLGFBQWEsQ0FBQztRQUVwQyxJQUFJLENBQUMsT0FB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a0IsR0FBMUIsVUFBMkIsRUFBZ0I7UUFFdkMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUNsQyxJQUFJLENBQUMsT0FBTyxDQUFDLG1EQUFZLENBQUMsWUFBWSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUNsRCxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDekM7SUFDTCxDQUFDO0lBRU8sZ0RBQXlCLEdBQWpDLFVBQWtDLEVBQWdCO1FBRTlDLHFGQUFxRjtRQUNyRixJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVPLDZDQUFzQixHQUE5QjtRQUVJLHNEQUFzRDtRQUN0RCxHQUFHO1FBQ0gsd0NBQXdDO1FBQ3hDLDhCQUE4QjtRQUM5QixrQ0FBa0M7UUFDbEMsT0FBTztRQUNQLEdBQUc7SUFDUCxDQUFDO0lBeE5jLG9CQUFPLEdBQVUsQ0FBQyxDQUFDO0lBQ25CLHFCQUFRLEdBQUcsRUFBK0IsQ0FBQztJQXdOOUQsbUJBQUM7Q0FBQTtBQTFOd0IiLCJmaWxlIjoiLi9zcmMvYXdydGMvbmV0d29yay9Mb2NhbE5ldHdvcmsudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQge0Nvbm5lY3Rpb25JZCwgTmV0d29ya0V2ZW50LCBOZXRFdmVudFR5cGV9IGZyb20gXCIuL2luZGV4XCJcbmltcG9ydCB7IFF1ZXVlIH0gZnJvbSBcIi4vSGVscGVyXCI7XG5cbmludGVyZmFjZSBJSWROZXR3b3JrRGljdGlvbmFyeSB7XG4gICAgW2lkOiBudW1iZXJdOiBMb2NhbE5ldHdvcms7XG59XG5pbnRlcmZhY2UgSUFkZHJlc3NOZXR3b3JrRGljdGlvbmFyeSB7XG4gICAgW2FkZHJlc3M6IHN0cmluZ106IExvY2FsTmV0d29yaztcbn1cblxuLyoqSGVscGVyIHRvIHNpbXVsYXRlIHRoZSBXZWJzb2NrZXROZXR3b3JrIG9yIFdlYlJ0Y05ldHdvcmsgXG4gKiB3aXRoaW4gYSBsb2NhbCBhcHBsaWNhdGlvbiB3aXRob3V0XG4gKiBhbnkgYWN0dWFsIG5ldHdvcmsgY29tcG9uZW50cy4gXG4gKiBcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gbWlnaHQgbGFjayBzb21lIGZlYXR1cmVzLiBcbiAqL1xuZXhwb3J0IGNsYXNzIExvY2FsTmV0d29ya3tcbiAgICBwcml2YXRlIHN0YXRpYyBzTmV4dElkOm51bWJlciA9IDE7XG4gICAgcHJpdmF0ZSBzdGF0aWMgbVNlcnZlcnMgPSB7fSBhcyBJQWRkcmVzc05ldHdvcmtEaWN0aW9uYXJ5O1xuXG4gICAgcHJpdmF0ZSBtSWQ6bnVtYmVyO1xuICAgIHByaXZhdGUgbU5leHROZXR3b3JrSWQgPSBuZXcgQ29ubmVjdGlvbklkKDEpO1xuICAgIHByaXZhdGUgbVNlcnZlckFkZHJlc3MgOiBzdHJpbmcgPSBudWxsO1xuICAgIHByaXZhdGUgbUV2ZW50cyA9IG5ldyBRdWV1ZTxOZXR3b3JrRXZlbnQ+KCk7XG4gICAgcHJpdmF0ZSBtQ29ubmVjdGlvbk5ldHdvcmsgPSB7fSBhcyBJSWROZXR3b3JrRGljdGlvbmFyeTtcblxuICAgIHByaXZhdGUgbUlzRGlzcG9zZWQgPSBmYWxzZTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcblxuICAgICAgICB0aGlzLm1JZCA9IExvY2FsTmV0d29yay5zTmV4dElkO1xuICAgICAgICBMb2NhbE5ldHdvcmsuc05leHRJZCsrO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgSXNTZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1TZXJ2ZXJBZGRyZXNzICE9IG51bGw7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgU3RhcnRTZXJ2ZXIoc2VydmVyQWRkcmVzczogc3RyaW5nID0gbnVsbCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmIChzZXJ2ZXJBZGRyZXNzID09IG51bGwpXG4gICAgICAgICAgICBzZXJ2ZXJBZGRyZXNzID0gXCJcIiArIHRoaXMubUlkO1xuXG4gICAgICAgIGlmIChzZXJ2ZXJBZGRyZXNzIGluIExvY2FsTmV0d29yay5tU2VydmVycykge1xuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlKE5ldEV2ZW50VHlwZS5TZXJ2ZXJJbml0RmFpbGVkLCBDb25uZWN0aW9uSWQuSU5WQUxJRCwgc2VydmVyQWRkcmVzcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBMb2NhbE5ldHdvcmsubVNlcnZlcnNbc2VydmVyQWRkcmVzc10gPSB0aGlzO1xuICAgICAgICB0aGlzLm1TZXJ2ZXJBZGRyZXNzID0gc2VydmVyQWRkcmVzcztcblxuICAgICAgICB0aGlzLkVucXVldWUoTmV0RXZlbnRUeXBlLlNlcnZlckluaXRpYWxpemVkLCBDb25uZWN0aW9uSWQuSU5WQUxJRCwgc2VydmVyQWRkcmVzcyk7XG4gICAgfVxuICAgIHB1YmxpYyBTdG9wU2VydmVyKCkgOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5Jc1NlcnZlcikge1xuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlKE5ldEV2ZW50VHlwZS5TZXJ2ZXJDbG9zZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCB0aGlzLm1TZXJ2ZXJBZGRyZXNzKTtcbiAgICAgICAgICAgIGRlbGV0ZSBMb2NhbE5ldHdvcmsubVNlcnZlcnNbdGhpcy5tU2VydmVyQWRkcmVzc107XG4gICAgICAgICAgICB0aGlzLm1TZXJ2ZXJBZGRyZXNzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBDb25uZWN0KGFkZHJlc3M6IHN0cmluZyk6IENvbm5lY3Rpb25JZFxuICAgIHtcbiAgICAgICAgdmFyIGNvbm5lY3Rpb25JZCA9IHRoaXMuTmV4dENvbm5lY3Rpb25JZCgpO1xuXG4gICAgICAgIHZhciBzdWNlc3NmdWwgPSBmYWxzZTtcbiAgICAgICAgaWYgKGFkZHJlc3MgaW4gTG9jYWxOZXR3b3JrLm1TZXJ2ZXJzKSB7XG4gICAgICAgICAgICBsZXQgc2VydmVyID0gTG9jYWxOZXR3b3JrLm1TZXJ2ZXJzW2FkZHJlc3NdO1xuICAgICAgICAgICAgaWYgKHNlcnZlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyLkNvbm5lY3RDbGllbnQodGhpcyk7XG4gICAgICAgICAgICAgICAgLy9hZGQgdGhlIHNlcnZlciBhcyBsb2NhbCBjb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgdGhpcy5tQ29ubmVjdGlvbk5ldHdvcmtbY29ubmVjdGlvbklkLmlkXSA9IExvY2FsTmV0d29yay5tU2VydmVyc1thZGRyZXNzXTtcbiAgICAgICAgICAgICAgICB0aGlzLkVucXVldWUoTmV0RXZlbnRUeXBlLk5ld0Nvbm5lY3Rpb24sIGNvbm5lY3Rpb25JZCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgc3VjZXNzZnVsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdWNlc3NmdWwgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuRW5xdWV1ZShOZXRFdmVudFR5cGUuQ29ubmVjdGlvbkZhaWxlZCwgY29ubmVjdGlvbklkLCBcIkNvdWxkbid0IGNvbm5lY3QgdG8gdGhlIGdpdmVuIHNlcnZlciB3aXRoIGlkIFwiICsgYWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29ubmVjdGlvbklkO1xuICAgIH1cbiAgICAgICAgXG4gICAgcHVibGljICBTaHV0ZG93bigpIDogdm9pZFxuICAgIHtcbiAgICAgICAgZm9yKHZhciBpZCBpbiB0aGlzLm1Db25uZWN0aW9uTmV0d29yaykgLy9jYW4gYmUgY2hhbmdlZCB3aGlsZSBsb29waW5nP1xuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLkRpc2Nvbm5lY3QobmV3IENvbm5lY3Rpb25JZCgraWQpKTtcbiAgICAgICAgfVxuICAgICAgICAvL3RoaXMubUNvbm5lY3Rpb25OZXR3b3JrLkNsZWFyKCk7XG4gICAgICAgIHRoaXMuU3RvcFNlcnZlcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBEaXNwb3NlKCkgOiB2b2lke1xuICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5TaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFNlbmREYXRhKHVzZXJJZDogQ29ubmVjdGlvbklkLCBkYXRhOiBVaW50OEFycmF5LCByZWxpYWJsZTogYm9vbGVhbik6IGJvb2xlYW5cbiAgICB7XG5cbiAgICAgICAgaWYgKHVzZXJJZC5pZCBpbiB0aGlzLm1Db25uZWN0aW9uTmV0d29yaylcbiAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBuZXQgPSB0aGlzLm1Db25uZWN0aW9uTmV0d29ya1t1c2VySWQuaWRdO1xuICAgICAgICAgICAgICAgIG5ldC5SZWNlaXZlRGF0YSh0aGlzLCBkYXRhLCAgcmVsaWFibGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXBkYXRlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8vd29yayBhcm91bmQgZm9yIHRoZSBHYXJiYWdlQ29sbGVjdGlvbiBidWdcbiAgICAgICAgLy91c3VhbGx5IHdlYWsgcmVmZXJlbmNlcyBhcmUgcmVtb3ZlZCBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uIGJ1dCB0aGF0XG4gICAgICAgIC8vZmFpbHMgc29tZXRpbWVzIGFzIG90aGVycyB3ZWFrIHJlZmVyZW5jZXMgZ2V0IG51bGwgdG8gZXZlbiB0aG91Z2hcbiAgICAgICAgLy90aGUgb2JqZWN0cyBzdGlsbCBleGlzdCFcbiAgICAgICAgdGhpcy5DbGVhbnVwV3JlYWtSZWZlcmVuY2VzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIERlcXVldWUoKTogTmV0d29ya0V2ZW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5tRXZlbnRzLkRlcXVldWUoKTtcbiAgICB9XG4gICAgcHVibGljIFBlZWsoKTogTmV0d29ya0V2ZW50XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5tRXZlbnRzLlBlZWsoKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBGbHVzaCgpOiB2b2lkXG4gICAge1xuXG4gICAgfVxuXG4gICAgcHVibGljIERpc2Nvbm5lY3QoaWQ6IENvbm5lY3Rpb25JZCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmIChpZC5pZCBpbiB0aGlzLm1Db25uZWN0aW9uTmV0d29yaykge1xuICAgICAgICAgICAgbGV0IG90aGVyID0gdGhpcy5tQ29ubmVjdGlvbk5ldHdvcmtbaWQuaWRdO1xuICAgICAgICAgICAgaWYgKG90aGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvdGhlci5JbnRlcm5hbERpc2Nvbm5lY3ROZXR3b3JrKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuSW50ZXJuYWxEaXNjb25uZWN0KGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vdGhpcyBpcyBzdXBwb3NlIHRvIG5ldmVyIGhhcHBlbiBidXQgaXQgZG9lc1xuICAgICAgICAgICAgICAgIC8vaWYgYSBzZXJ2ZXIgaXMgZGVzdHJveWVkIGJ5IHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0aGUgY2xpZW50XG4gICAgICAgICAgICAgICAgLy93ZWFrIHJlZmVyZW5jZSBhcHBlYXJzIHRvIGJlIE5VTEwgZXZlbiB0aG91Z2ggaXQgc3RpbGwgZXhpc3RzXG4gICAgICAgICAgICAgICAgLy9idWc/XG4gICAgICAgICAgICAgICAgdGhpcy5DbGVhbnVwV3JlYWtSZWZlcmVuY2VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHByaXZhdGUgRmluZENvbm5lY3Rpb25JZChuZXR3b3JrOiBMb2NhbE5ldHdvcmspOiBDb25uZWN0aW9uSWRcbiAgICB7XG4gICAgICAgIGZvcih2YXIga3ZwIGluIHRoaXMubUNvbm5lY3Rpb25OZXR3b3JrKVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgbmV0d29yayA9IHRoaXMubUNvbm5lY3Rpb25OZXR3b3JrW2t2cF07XG4gICAgICAgICAgICBpZiAobmV0d29yayAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uSWQoK2t2cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25JZC5JTlZBTElEO1xuICAgIH1cbiAgICBcblxuICAgIHByaXZhdGUgTmV4dENvbm5lY3Rpb25JZCgpOiBDb25uZWN0aW9uSWRcbiAgICB7XG4gICAgICAgIGxldCByZXMgPSB0aGlzLm1OZXh0TmV0d29ya0lkO1xuICAgICAgICB0aGlzLm1OZXh0TmV0d29ya0lkID0gbmV3IENvbm5lY3Rpb25JZChyZXMuaWQgKyAxKTsgXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIENvbm5lY3RDbGllbnQoY2xpZW50OiBMb2NhbE5ldHdvcmspOiB2b2lkXG4gICAge1xuICAgICAgICAvL2lmICh0aGlzLklzU2VydmVyID09IGZhbHNlKVxuICAgICAgICAvLyAgICB0aHJvdyBuZXcgSW52YWxpZE9wZXJhdGlvbkV4Y2VwdGlvbigpO1xuXG4gICAgICAgIGxldCBuZXh0SWQgPSB0aGlzLk5leHRDb25uZWN0aW9uSWQoKTtcbiAgICAgICAgLy9zZXJ2ZXIgc2lkZSBvbmx5XG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25OZXR3b3JrW25leHRJZC5pZF0gPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuRW5xdWV1ZShOZXRFdmVudFR5cGUuTmV3Q29ubmVjdGlvbiwgbmV4dElkLCBudWxsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIEVucXVldWUodHlwZTogTmV0RXZlbnRUeXBlLCBpZDogQ29ubmVjdGlvbklkLCBkYXRhOiBhbnkpOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgZXYgPSBuZXcgTmV0d29ya0V2ZW50KHR5cGUsIGlkLCBkYXRhKTtcbiAgICAgICAgdGhpcy5tRXZlbnRzLkVucXVldWUoZXYpO1xuICAgIH1cblxuICAgIHByaXZhdGUgUmVjZWl2ZURhdGEobmV0d29yazogTG9jYWxOZXR3b3JrLCBkYXRhOiBVaW50OEFycmF5LCByZWxpYWJsZSA6IGJvb2xlYW4pOiB2b2lkXG4gICAge1xuICAgICAgICBsZXQgdXNlcklkID0gdGhpcy5GaW5kQ29ubmVjdGlvbklkKG5ldHdvcmspO1xuXG4gICAgICAgIGxldCBidWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBidWZmZXJbaV0gPSBkYXRhW2ldO1xuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgdHlwZSA9IE5ldEV2ZW50VHlwZS5VbnJlbGlhYmxlTWVzc2FnZVJlY2VpdmVkO1xuICAgICAgICBpZiAocmVsaWFibGUpXG4gICAgICAgICAgICB0eXBlID0gTmV0RXZlbnRUeXBlLlJlbGlhYmxlTWVzc2FnZVJlY2VpdmVkO1xuICAgICAgICB0aGlzLkVucXVldWUodHlwZSwgdXNlcklkLCBidWZmZXIpO1xuICAgIH1cbiAgICBwcml2YXRlIEludGVybmFsRGlzY29ubmVjdChpZDogQ29ubmVjdGlvbklkKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKGlkLmlkIGluIHRoaXMubUNvbm5lY3Rpb25OZXR3b3JrKSB7XG4gICAgICAgICAgICB0aGlzLkVucXVldWUoTmV0RXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCwgaWQsIG51bGwpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubUNvbm5lY3Rpb25OZXR3b3JrW2lkLmlkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgSW50ZXJuYWxEaXNjb25uZWN0TmV0d29yayhsbjogTG9jYWxOZXR3b3JrKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy9pZiBpdCBjYW4ndCBiZSBmb3VuZCBpdCB3aWxsIHJldHVybiBpbnZhbGlkIHdoaWNoIGlzIGlnbm9yZWQgaW4gaW50ZXJuYWwgZGlzY29ubmVjdFxuICAgICAgICB0aGlzLkludGVybmFsRGlzY29ubmVjdCh0aGlzLkZpbmRDb25uZWN0aW9uSWQobG4pKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIENsZWFudXBXcmVha1JlZmVyZW5jZXMoKTogdm9pZFxuICAgIHtcbiAgICAgICAgLy9mb3JlYWNoKHZhciBrdnAgaW4gbUNvbm5lY3Rpb25OZXR3b3JrLktleXMuVG9MaXN0KCkpXG4gICAgICAgIC8ve1xuICAgICAgICAvLyAgICB2YXIgdmFsID0gbUNvbm5lY3Rpb25OZXR3b3JrW2t2cF07XG4gICAgICAgIC8vICAgIGlmICh2YWwuR2V0KCkgPT0gbnVsbCkge1xuICAgICAgICAvLyAgICAgICAgSW50ZXJuYWxEaXNjb25uZWN0KGt2cCk7XG4gICAgICAgIC8vICAgIH1cbiAgICAgICAgLy99XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/network/LocalNetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/network/WebRtcNetwork.ts":
/*!********************************************!*\
  !*** ./src/awrtc/network/WebRtcNetwork.ts ***!
  \********************************************/
/*! exports provided: WebRtcNetworkServerState, WebRtcNetwork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetworkServerState\", function() { return WebRtcNetworkServerState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetwork\", function() { return WebRtcNetwork; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n//import {ConnectionId, NetworkEvent, NetEventType, IBasicNetwork} from './INetwork'\n\n\nvar WebRtcNetworkServerState;\n(function (WebRtcNetworkServerState) {\n    WebRtcNetworkServerState[WebRtcNetworkServerState[\"Invalid\"] = 0] = \"Invalid\";\n    WebRtcNetworkServerState[WebRtcNetworkServerState[\"Offline\"] = 1] = \"Offline\";\n    WebRtcNetworkServerState[WebRtcNetworkServerState[\"Starting\"] = 2] = \"Starting\";\n    WebRtcNetworkServerState[WebRtcNetworkServerState[\"Online\"] = 3] = \"Online\";\n})(WebRtcNetworkServerState || (WebRtcNetworkServerState = {}));\n/// <summary>\n/// Native version of WebRtc\n/// \n/// Make sure to use Shutdown before unity quits! (unity will probably get stuck without it)\n/// \n/// \n/// </summary>\nvar WebRtcNetwork = /** @class */ (function () {\n    //public\n    function WebRtcNetwork(signalingConfig, lRtcConfig) {\n        this.mTimeout = 60000;\n        this.mInSignaling = {};\n        this.mNextId = new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](1);\n        this.mSignaling = null;\n        this.mEvents = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        this.mIdToConnection = {};\n        //must be the same as the hashmap and later returned read only (avoids copies)\n        this.mConnectionIds = new Array();\n        this.mServerState = WebRtcNetworkServerState.Offline;\n        this.mIsDisposed = false;\n        this.mSignaling = signalingConfig;\n        this.mSignalingNetwork = this.mSignaling.GetNetwork();\n        this.mRtcConfig = lRtcConfig;\n    }\n    Object.defineProperty(WebRtcNetwork.prototype, \"IdToConnection\", {\n        get: function () {\n            return this.mIdToConnection;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    //only for internal use\n    WebRtcNetwork.prototype.GetConnections = function () {\n        return this.mConnectionIds;\n    };\n    //just for debugging / testing\n    WebRtcNetwork.prototype.SetLog = function (logDel) {\n        this.mLogDelegate = logDel;\n    };\n    WebRtcNetwork.prototype.StartServer = function (address) {\n        this.StartServerInternal(address);\n    };\n    WebRtcNetwork.prototype.StartServerInternal = function (address) {\n        this.mServerState = WebRtcNetworkServerState.Starting;\n        this.mSignalingNetwork.StartServer(address);\n    };\n    WebRtcNetwork.prototype.StopServer = function () {\n        if (this.mServerState == WebRtcNetworkServerState.Starting) {\n            this.mSignalingNetwork.StopServer();\n            //removed. the underlaying sygnaling network should set those values\n            //this.mServerState = WebRtcNetworkServerState.Offline;\n            //this.mEvents.Enqueue(new NetworkEvent(NetEventType.ServerInitFailed, ConnectionId.INVALID, null));\n        }\n        else if (this.mServerState == WebRtcNetworkServerState.Online) {\n            //dont wait for confirmation\n            this.mSignalingNetwork.StopServer();\n            //removed. the underlaying sygnaling network should set those values\n            //this.mServerState = WebRtcNetworkServerState.Offline;\n            //this.mEvents.Enqueue(new NetworkEvent(NetEventType.ServerClosed, ConnectionId.INVALID, null));\n        }\n    };\n    WebRtcNetwork.prototype.Connect = function (address) {\n        return this.AddOutgoingConnection(address);\n    };\n    WebRtcNetwork.prototype.Update = function () {\n        this.CheckSignalingState();\n        this.UpdateSignalingNetwork();\n        this.UpdatePeers();\n    };\n    WebRtcNetwork.prototype.Dequeue = function () {\n        if (this.mEvents.Count() > 0)\n            return this.mEvents.Dequeue();\n        return null;\n    };\n    WebRtcNetwork.prototype.Peek = function () {\n        if (this.mEvents.Count() > 0)\n            return this.mEvents.Peek();\n        return null;\n    };\n    WebRtcNetwork.prototype.Flush = function () {\n        this.mSignalingNetwork.Flush();\n    };\n    WebRtcNetwork.prototype.SendData = function (id, data /*, offset : number, length : number*/, reliable) {\n        if (id == null || data == null || data.length == 0)\n            return;\n        var peer = this.mIdToConnection[id.id];\n        if (peer) {\n            return peer.SendData(data, /* offset, length,*/ reliable);\n        }\n        else {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogWarning(\"unknown connection id\");\n            return false;\n        }\n    };\n    WebRtcNetwork.prototype.GetBufferedAmount = function (id, reliable) {\n        var peer = this.mIdToConnection[id.id];\n        if (peer) {\n            return peer.GetBufferedAmount(reliable);\n        }\n        else {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogWarning(\"unknown connection id\");\n            return -1;\n        }\n    };\n    WebRtcNetwork.prototype.Disconnect = function (id) {\n        var peer = this.mIdToConnection[id.id];\n        if (peer) {\n            this.HandleDisconnect(id);\n        }\n    };\n    WebRtcNetwork.prototype.Shutdown = function () {\n        //bugfix. Make copy before the loop as Disconnect changes the original mConnectionIds array\n        var ids = this.mConnectionIds.slice();\n        for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {\n            var id = ids_1[_i];\n            this.Disconnect(id);\n        }\n        this.StopServer();\n        this.mSignalingNetwork.Shutdown();\n    };\n    WebRtcNetwork.prototype.DisposeInternal = function () {\n        if (this.mIsDisposed == false) {\n            this.Shutdown();\n            this.mIsDisposed = true;\n        }\n    };\n    WebRtcNetwork.prototype.Dispose = function () {\n        this.DisposeInternal();\n    };\n    //protected\n    WebRtcNetwork.prototype.CreatePeer = function (peerId, rtcConfig) {\n        var peer = new _index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcDataPeer\"](peerId, rtcConfig);\n        return peer;\n    };\n    //private\n    WebRtcNetwork.prototype.CheckSignalingState = function () {\n        var connected = new Array();\n        var failed = new Array();\n        //update the signaling channels\n        for (var key in this.mInSignaling) {\n            var peer = this.mInSignaling[key];\n            peer.Update();\n            var timeAlive = peer.SignalingInfo.GetCreationTimeMs();\n            var msg = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Output\"]();\n            while (peer.DequeueSignalingMessage(msg)) {\n                var buffer = this.StringToBuffer(msg.val);\n                this.mSignalingNetwork.SendData(new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](+key), buffer, true);\n            }\n            if (peer.GetState() == _index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcPeerState\"].Connected) {\n                connected.push(peer.SignalingInfo.ConnectionId);\n            }\n            else if (peer.GetState() == _index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcPeerState\"].SignalingFailed || timeAlive > this.mTimeout) {\n                failed.push(peer.SignalingInfo.ConnectionId);\n            }\n        }\n        for (var _i = 0, connected_1 = connected; _i < connected_1.length; _i++) {\n            var v = connected_1[_i];\n            this.ConnectionEstablished(v);\n        }\n        for (var _a = 0, failed_1 = failed; _a < failed_1.length; _a++) {\n            var v = failed_1[_a];\n            this.SignalingFailed(v);\n        }\n    };\n    WebRtcNetwork.prototype.UpdateSignalingNetwork = function () {\n        //update the signaling system\n        this.mSignalingNetwork.Update();\n        var evt;\n        while ((evt = this.mSignalingNetwork.Dequeue()) != null) {\n            if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitialized) {\n                this.mServerState = WebRtcNetworkServerState.Online;\n                this.mEvents.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitialized, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, evt.RawData));\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed) {\n                this.mServerState = WebRtcNetworkServerState.Offline;\n                this.mEvents.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, evt.RawData));\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed) {\n                this.mServerState = WebRtcNetworkServerState.Offline;\n                this.mEvents.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed, _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, evt.RawData));\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection) {\n                //check if new incoming connection or an outgoing was established\n                var peer = this.mInSignaling[evt.ConnectionId.id];\n                if (peer) {\n                    peer.StartSignaling();\n                }\n                else {\n                    this.AddIncomingConnection(evt.ConnectionId);\n                }\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ConnectionFailed) {\n                //Outgoing connection failed\n                this.SignalingFailed(evt.ConnectionId);\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected) {\n                var peer = this.mInSignaling[evt.ConnectionId.id];\n                if (peer) {\n                    peer.SignalingInfo.SignalingDisconnected();\n                }\n                //if signaling was completed this isn't a problem\n                //SignalingDisconnected(evt.ConnectionId);\n                //do nothing. either webrtc has enough information to connect already\n                //or it will wait forever for the information -> after 30 sec we give up\n            }\n            else if (evt.Type == _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ReliableMessageReceived) {\n                var peer = this.mInSignaling[evt.ConnectionId.id];\n                if (peer) {\n                    var msg = this.BufferToString(evt.MessageData);\n                    peer.AddSignalingMessage(msg);\n                }\n                else {\n                    _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogWarning(\"Signaling message from unknown connection received\");\n                }\n            }\n        }\n    };\n    WebRtcNetwork.prototype.UpdatePeers = function () {\n        //every peer has a queue storing incoming messages to avoid multi threading problems -> handle it now\n        var disconnected = new Array();\n        for (var key in this.mIdToConnection) {\n            var peer = this.mIdToConnection[key];\n            peer.Update();\n            var ev = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Output\"]();\n            while (peer.DequeueEvent(/*out*/ ev)) {\n                this.mEvents.Enqueue(ev.val);\n            }\n            if (peer.GetState() == _index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcPeerState\"].Closed) {\n                disconnected.push(peer.ConnectionId);\n            }\n        }\n        for (var _i = 0, disconnected_1 = disconnected; _i < disconnected_1.length; _i++) {\n            var key_1 = disconnected_1[_i];\n            this.HandleDisconnect(key_1);\n        }\n    };\n    WebRtcNetwork.prototype.AddOutgoingConnection = function (address) {\n        var signalingConId = this.mSignalingNetwork.Connect(address);\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"new outgoing connection\");\n        var info = new _index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingInfo\"](signalingConId, false, Date.now());\n        var peer = this.CreatePeer(this.NextConnectionId(), this.mRtcConfig);\n        peer.SetSignalingInfo(info);\n        this.mInSignaling[signalingConId.id] = peer;\n        return peer.ConnectionId;\n    };\n    WebRtcNetwork.prototype.AddIncomingConnection = function (signalingConId) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"new incoming connection\");\n        var info = new _index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingInfo\"](signalingConId, true, Date.now());\n        var peer = this.CreatePeer(this.NextConnectionId(), this.mRtcConfig);\n        peer.SetSignalingInfo(info);\n        this.mInSignaling[signalingConId.id] = peer;\n        //passive way of starting signaling -> send out random number. if the other one does the same\n        //the one with the highest number starts signaling\n        peer.NegotiateSignaling();\n        return peer.ConnectionId;\n    };\n    WebRtcNetwork.prototype.ConnectionEstablished = function (signalingConId) {\n        var peer = this.mInSignaling[signalingConId.id];\n        delete this.mInSignaling[signalingConId.id];\n        this.mSignalingNetwork.Disconnect(signalingConId);\n        this.mConnectionIds.push(peer.ConnectionId);\n        this.mIdToConnection[peer.ConnectionId.id] = peer;\n        this.mEvents.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection, peer.ConnectionId, null));\n    };\n    WebRtcNetwork.prototype.SignalingFailed = function (signalingConId) {\n        var peer = this.mInSignaling[signalingConId.id];\n        if (peer) {\n            //connection was still believed to be in signaling -> notify the user of the event\n            delete this.mInSignaling[signalingConId.id];\n            this.mEvents.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ConnectionFailed, peer.ConnectionId, null));\n            if (peer.SignalingInfo.IsSignalingConnected()) {\n                this.mSignalingNetwork.Disconnect(signalingConId);\n            }\n            peer.Dispose();\n        }\n    };\n    WebRtcNetwork.prototype.HandleDisconnect = function (id) {\n        var peer = this.mIdToConnection[id.id];\n        if (peer) {\n            peer.Dispose();\n        }\n        //search for the index to remove the id (user might provide a different object with the same id\n        //don't use indexOf!\n        var index = this.mConnectionIds.findIndex(function (e) { return e.id == id.id; });\n        if (index != -1) {\n            this.mConnectionIds.splice(index, 1);\n            delete this.mIdToConnection[id.id];\n        }\n        var ev = new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected, id, null);\n        this.mEvents.Enqueue(ev);\n    };\n    WebRtcNetwork.prototype.NextConnectionId = function () {\n        var id = new _index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](this.mNextId.id);\n        this.mNextId.id++;\n        return id;\n    };\n    WebRtcNetwork.prototype.StringToBuffer = function (str) {\n        var buf = new ArrayBuffer(str.length * 2);\n        var bufView = new Uint16Array(buf);\n        for (var i = 0, strLen = str.length; i < strLen; i++) {\n            bufView[i] = str.charCodeAt(i);\n        }\n        var result = new Uint8Array(buf);\n        return result;\n    };\n    WebRtcNetwork.prototype.BufferToString = function (buffer) {\n        var arr = new Uint16Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 2);\n        return String.fromCharCode.apply(null, arr);\n    };\n    return WebRtcNetwork;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL1dlYlJ0Y05ldHdvcmsudHM/MzE0YyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFFRixvRkFBb0Y7QUFHUjtBQUM3QjtBQUUvQyxJQUFZLHdCQUtYO0FBTEQsV0FBWSx3QkFBd0I7SUFDaEMsNkVBQU87SUFDUCw2RUFBTztJQUNQLCtFQUFRO0lBQ1IsMkVBQU07QUFDVixDQUFDLEVBTFcsd0JBQXdCLEtBQXhCLHdCQUF3QixRQUtuQztBQUNELGFBQWE7QUFDYiw0QkFBNEI7QUFDNUIsSUFBSTtBQUNKLDRGQUE0RjtBQUM1RixJQUFJO0FBQ0osSUFBSTtBQUNKLGNBQWM7QUFDZDtJQThCSSxRQUFRO0lBQ1IsdUJBQW1CLGVBQWdDLEVBQUUsVUFBNEI7UUE3QnpFLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFFakIsaUJBQVksR0FBcUMsRUFBRTtRQUNuRCxZQUFPLEdBQWlCLElBQUksbURBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QyxlQUFVLEdBQW9CLElBQUksQ0FBQztRQUNuQyxZQUFPLEdBQXdCLElBQUksNkNBQUssRUFBZ0IsQ0FBQztRQUN6RCxvQkFBZSxHQUFxQyxFQUFFLENBQUM7UUFJL0QsOEVBQThFO1FBQ3RFLG1CQUFjLEdBQXdCLElBQUksS0FBSyxFQUFnQixDQUFDO1FBTWhFLGlCQUFZLEdBQUcsd0JBQXdCLENBQUMsT0FBTyxDQUFDO1FBSWhELGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBU3hCLElBQUksQ0FBQyxVQUFVLEdBQUcsZUFBZSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3RELElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQ2pDLENBQUM7SUExQkQsc0JB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dEIsVUFBdUIsR0FBVztRQUM5QixJQUFJLEdBQUcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFDLElBQUksT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbEQsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEM7UUFFRCxJQUFJLE1BQU0sR0FBRyxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQyxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRU8sc0NBQWMsR0FBdEIsVUFBdUIsTUFBa0I7UUFDckMsSUFBSSxHQUFHLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkYsT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVMLG9CQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiIuL3NyYy9hd3J0Yy9uZXR3b3JrL1dlYlJ0Y05ldHdvcmsudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDE5LCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5cbi8vaW1wb3J0IHtDb25uZWN0aW9uSWQsIE5ldHdvcmtFdmVudCwgTmV0RXZlbnRUeXBlLCBJQmFzaWNOZXR3b3JrfSBmcm9tICcuL0lOZXR3b3JrJ1xuaW1wb3J0IHtcbiAgICBTaWduYWxpbmdJbmZvLCBTaWduYWxpbmdDb25maWcsIFdlYlJ0Y1BlZXJTdGF0ZSwgV2ViUnRjRGF0YVBlZXIsXG4gICAgTmV0d29ya0V2ZW50LCBOZXRFdmVudFR5cGUsIENvbm5lY3Rpb25JZCwgSUJhc2ljTmV0d29ya30gIGZyb20gXCIuL2luZGV4XCJcbmltcG9ydCB7IFF1ZXVlLCBTTG9nLCBPdXRwdXQgfSBmcm9tIFwiLi9IZWxwZXJcIjtcblxuZXhwb3J0IGVudW0gV2ViUnRjTmV0d29ya1NlcnZlclN0YXRlIHtcbiAgICBJbnZhbGlkLFxuICAgIE9mZmxpbmUsXG4gICAgU3RhcnRpbmcsXG4gICAgT25saW5lXG59XG4vLy8gPHN1bW1hcnk+XG4vLy8gTmF0aXZlIHZlcnNpb24gb2YgV2ViUnRjXG4vLy8gXG4vLy8gTWFrZSBzdXJlIHRvIHVzZSBTaHV0ZG93biBiZWZvcmUgdW5pdHkgcXVpdHMhICh1bml0eSB3aWxsIHByb2JhYmx5IGdldCBzdHVjayB3aXRob3V0IGl0KVxuLy8vIFxuLy8vIFxuLy8vIDwvc3VtbWFyeT5cbmV4cG9ydCBjbGFzcyBXZWJSdGNOZXR3b3JrIGltcGxlbWVudHMgSUJhc2ljTmV0d29yayB7XG5cbiAgICBwcml2YXRlIG1UaW1lb3V0ID0gNjAwMDA7XG5cbiAgICBwcml2YXRlIG1JblNpZ25hbGluZzogeyBbaWQ6IG51bWJlcl06IFdlYlJ0Y0RhdGFQZWVyIH0gPSB7fVxuICAgIHByaXZhdGUgbU5leHRJZDogQ29ubmVjdGlvbklkID0gbmV3IENvbm5lY3Rpb25JZCgxKTtcbiAgICBwcml2YXRlIG1TaWduYWxpbmc6IFNpZ25hbGluZ0NvbmZpZyA9IG51bGw7XG4gICAgcHJpdmF0ZSBtRXZlbnRzOiBRdWV1ZTxOZXR3b3JrRXZlbnQ+ID0gbmV3IFF1ZXVlPE5ldHdvcmtFdmVudD4oKTtcbiAgICBwcml2YXRlIG1JZFRvQ29ubmVjdGlvbjogeyBbaWQ6IG51bWJlcl06IFdlYlJ0Y0RhdGFQZWVyIH0gPSB7fTtcbiAgICBwcm90ZWN0ZWQgZ2V0IElkVG9Db25uZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tSWRUb0Nvbm5lY3Rpb247XG4gICAgfVxuICAgIC8vbXVzdCBiZSB0aGUgc2FtZSBhcyB0aGUgaGFzaG1hcCBhbmQgbGF0ZXIgcmV0dXJuZWQgcmVhZCBvbmx5IChhdm9pZHMgY29waWVzKVxuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25JZHM6IEFycmF5PENvbm5lY3Rpb25JZD4gPSBuZXcgQXJyYXk8Q29ubmVjdGlvbklkPigpO1xuICAgIC8vb25seSBmb3IgaW50ZXJuYWwgdXNlXG4gICAgcHVibGljIEdldENvbm5lY3Rpb25zKCk6IEFycmF5PENvbm5lY3Rpb25JZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbklkcztcbiAgICB9XG5cbiAgICBwcml2YXRlIG1TZXJ2ZXJTdGF0ZSA9IFdlYlJ0Y05ldHdvcmtTZXJ2ZXJTdGF0ZS5PZmZsaW5lO1xuICAgIHByaXZhdGUgbVJ0Y0NvbmZpZzogUlRDQ29uZmlndXJhdGlvbjtcbiAgICBwcml2YXRlIG1TaWduYWxpbmdOZXR3b3JrOiBJQmFzaWNOZXR3b3JrO1xuICAgIHByaXZhdGUgbUxvZ0RlbGVnYXRlOiAoczogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgbUlzRGlzcG9zZWQgPSBmYWxzZTtcblxuLy9qdXN0IGZvciBkZWJ1Z2dpbmcgLyB0ZXN0aW5nXG4gICAgcHVibGljIFNldExvZyhsb2dEZWw6IChzOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5tTG9nRGVsZWdhdGUgPSBsb2dEZWw7XG4gICAgfVxuXG4gICAgLy9wdWJsaWNcbiAgICBwdWJsaWMgY29uc3RydWN0b3Ioc2lnbmFsaW5nQ29uZmlnOiBTaWduYWxpbmdDb25maWcsIGxSdGNDb25maWc6IFJUQ0NvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdGhpcy5tU2lnbmFsaW5nID0gc2lnbmFsaW5nQ29uZmlnO1xuICAgICAgICB0aGlzLm1TaWduYWxpbmdOZXR3b3JrID0gdGhpcy5tU2lnbmFsaW5nLkdldE5ldHdvcmsoKTtcbiAgICAgICAgdGhpcy5tUnRjQ29uZmlnID0gbFJ0Y0NvbmZpZztcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RhcnRTZXJ2ZXIoKTogdm9pZDtcbiAgICBwdWJsaWMgU3RhcnRTZXJ2ZXIoYWRkcmVzczogc3RyaW5nKTogdm9pZDtcbiAgICBwdWJsaWMgU3RhcnRTZXJ2ZXIoYWRkcmVzcz86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLlN0YXJ0U2VydmVySW50ZXJuYWwoYWRkcmVzcyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIFN0YXJ0U2VydmVySW50ZXJuYWwoYWRkcmVzcz86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLm1TZXJ2ZXJTdGF0ZSA9IFdlYlJ0Y05ldHdvcmtTZXJ2ZXJTdGF0ZS5TdGFydGluZztcbiAgICAgICAgdGhpcy5tU2lnbmFsaW5nTmV0d29yay5TdGFydFNlcnZlcihhZGRyZXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU3RvcFNlcnZlcigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubVNlcnZlclN0YXRlID09IFdlYlJ0Y05ldHdvcmtTZXJ2ZXJTdGF0ZS5TdGFydGluZykge1xuICAgICAgICAgICAgdGhpcy5tU2lnbmFsaW5nTmV0d29yay5TdG9wU2VydmVyKCk7XG5cbiAgICAgICAgICAgIC8vcmVtb3ZlZC4gdGhlIHVuZGVybGF5aW5nIHN5Z25hbGluZyBuZXR3b3JrIHNob3VsZCBzZXQgdGhvc2UgdmFsdWVzXG4gICAgICAgICAgICAvL3RoaXMubVNlcnZlclN0YXRlID0gV2ViUnRjTmV0d29ya1NlcnZlclN0YXRlLk9mZmxpbmU7XG4gICAgICAgICAgICAvL3RoaXMubUV2ZW50cy5FbnF1ZXVlKG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLlNlcnZlckluaXRGYWlsZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBudWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5tU2VydmVyU3RhdGUgPT0gV2ViUnRjTmV0d29ya1NlcnZlclN0YXRlLk9ubGluZSkge1xuICAgICAgICAgICAgLy9kb250IHdhaXQgZm9yIGNvbmZpcm1hdGlvblxuICAgICAgICAgICAgdGhpcy5tU2lnbmFsaW5nTmV0d29yay5TdG9wU2VydmVyKCk7XG4gICAgICAgICAgICAvL3JlbW92ZWQuIHRoZSB1bmRlcmxheWluZyBzeWduYWxpbmcgbmV0d29yayBzaG91bGQgc2V0IHRob3NlIHZhbHVlc1xuICAgICAgICAgICAgLy90aGlzLm1TZXJ2ZXJTdGF0ZSA9IFdlYlJ0Y05ldHdvcmtTZXJ2ZXJTdGF0ZS5PZmZsaW5lO1xuICAgICAgICAgICAgLy90aGlzLm1FdmVudHMuRW5xdWV1ZShuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5TZXJ2ZXJDbG9zZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBudWxsKSk7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBDb25uZWN0KGFkZHJlc3M6IHN0cmluZyk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIHJldHVybiB0aGlzLkFkZE91dGdvaW5nQ29ubmVjdGlvbihhZGRyZXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXBkYXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLkNoZWNrU2lnbmFsaW5nU3RhdGUoKTtcbiAgICAgICAgdGhpcy5VcGRhdGVTaWduYWxpbmdOZXR3b3JrKCk7XG4gICAgICAgIHRoaXMuVXBkYXRlUGVlcnMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgRGVxdWV1ZSgpOiBOZXR3b3JrRXZlbnQge1xuICAgICAgICBpZiAodGhpcy5tRXZlbnRzLkNvdW50KCkgPiAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubUV2ZW50cy5EZXF1ZXVlKCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBQZWVrKCk6IE5ldHdvcmtFdmVudCB7XG5cbiAgICAgICAgaWYgKHRoaXMubUV2ZW50cy5Db3VudCgpID4gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1FdmVudHMuUGVlaygpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgRmx1c2goKTogdm9pZCB7XG4gICAgICAgIHRoaXMubVNpZ25hbGluZ05ldHdvcmsuRmx1c2goKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgU2VuZERhdGEoaWQ6IENvbm5lY3Rpb25JZCwgZGF0YTogVWludDhBcnJheS8qLCBvZmZzZXQgOiBudW1iZXIsIGxlbmd0aCA6IG51bWJlciovLCByZWxpYWJsZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaWQgPT0gbnVsbCB8fCBkYXRhID09IG51bGwgfHwgZGF0YS5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHBlZXIgPSB0aGlzLm1JZFRvQ29ubmVjdGlvbltpZC5pZF07XG4gICAgICAgIGlmIChwZWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVlci5TZW5kRGF0YShkYXRhLC8qIG9mZnNldCwgbGVuZ3RoLCovIHJlbGlhYmxlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU0xvZy5Mb2dXYXJuaW5nKFwidW5rbm93biBjb25uZWN0aW9uIGlkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBHZXRCdWZmZXJlZEFtb3VudChpZDogQ29ubmVjdGlvbklkLCByZWxpYWJsZTogYm9vbGVhbik6IG51bWJlciB7XG4gICAgICAgIGxldCBwZWVyID0gdGhpcy5tSWRUb0Nvbm5lY3Rpb25baWQuaWRdO1xuICAgICAgICBpZiAocGVlcikge1xuICAgICAgICAgICAgcmV0dXJuIHBlZXIuR2V0QnVmZmVyZWRBbW91bnQocmVsaWFibGUpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTTG9nLkxvZ1dhcm5pbmcoXCJ1bmtub3duIGNvbm5lY3Rpb24gaWRcIik7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBwdWJsaWMgRGlzY29ubmVjdChpZDogQ29ubmVjdGlvbklkKTogdm9pZCB7XG4gICAgICAgIGxldCBwZWVyID0gdGhpcy5tSWRUb0Nvbm5lY3Rpb25baWQuaWRdO1xuICAgICAgICBpZiAocGVlcikge1xuICAgICAgICAgICAgdGhpcy5IYW5kbGVEaXNjb25uZWN0KGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBTaHV0ZG93bigpOiB2b2lkIHtcbiAgICAgICAgLy9idWdmaXguIE1ha2UgY29weSBiZWZvcmUgdGhlIGxvb3AgYXMgRGlzY29ubmVjdCBjaGFuZ2VzIHRoZSBvcmlnaW5hbCBtQ29ubmVjdGlvbklkcyBhcnJheVxuICAgICAgICBsZXQgaWRzID0gdGhpcy5tQ29ubmVjdGlvbklkcy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpZCBvZiBpZHMpIHtcbiAgICAgICAgICAgIHRoaXMuRGlzY29ubmVjdChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5TdG9wU2VydmVyKCk7XG4gICAgICAgIHRoaXMubVNpZ25hbGluZ05ldHdvcmsuU2h1dGRvd24oKTtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBEaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgICAgIGlmICh0aGlzLm1Jc0Rpc3Bvc2VkID09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLlNodXRkb3duKCk7XG4gICAgICAgICAgICB0aGlzLm1Jc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBEaXNwb3NlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLkRpc3Bvc2VJbnRlcm5hbCgpO1xuICAgIH1cblxuLy9wcm90ZWN0ZWRcbiAgICBwcm90ZWN0ZWQgQ3JlYXRlUGVlcihwZWVySWQ6IENvbm5lY3Rpb25JZCwgcnRjQ29uZmlnOiBSVENDb25maWd1cmF0aW9uKTogV2ViUnRjRGF0YVBlZXJcbiAgICB7XG4gICAgICAgIGxldCBwZWVyID0gbmV3IFdlYlJ0Y0RhdGFQZWVyKHBlZXJJZCwgcnRjQ29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHBlZXI7XG4gICAgfVxuLy9wcml2YXRlXG4gICAgcHJpdmF0ZSBDaGVja1NpZ25hbGluZ1N0YXRlKCkge1xuICAgICAgICBsZXQgY29ubmVjdGVkID0gbmV3IEFycmF5PENvbm5lY3Rpb25JZD4oKTtcbiAgICAgICAgbGV0IGZhaWxlZCA9IG5ldyBBcnJheTxDb25uZWN0aW9uSWQ+KCk7XG5cbiAgICAgICAgLy91cGRhdGUgdGhlIHNpZ25hbGluZyBjaGFubmVsc1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5tSW5TaWduYWxpbmcpIHtcblxuICAgICAgICAgICAgbGV0IHBlZXIgPSB0aGlzLm1JblNpZ25hbGluZ1trZXldO1xuICAgICAgICAgICAgcGVlci5VcGRhdGUoKTtcbiAgICAgICAgICAgIGxldCB0aW1lQWxpdmUgPSBwZWVyLlNpZ25hbGluZ0luZm8uR2V0Q3JlYXRpb25UaW1lTXMoKTtcblxuICAgICAgICAgICAgbGV0IG1zZyA9IG5ldyBPdXRwdXQ8c3RyaW5nPigpO1xuICAgICAgICAgICAgd2hpbGUgKHBlZXIuRGVxdWV1ZVNpZ25hbGluZ01lc3NhZ2UobXNnKSkge1xuICAgICAgICAgICAgICAgIGxldCBidWZmZXIgPSB0aGlzLlN0cmluZ1RvQnVmZmVyKG1zZy52YWwpO1xuICAgICAgICAgICAgICAgIHRoaXMubVNpZ25hbGluZ05ldHdvcmsuU2VuZERhdGEobmV3IENvbm5lY3Rpb25JZCgra2V5KSwgYnVmZmVyLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBlZXIuR2V0U3RhdGUoKSA9PSBXZWJSdGNQZWVyU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGVkLnB1c2gocGVlci5TaWduYWxpbmdJbmZvLkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwZWVyLkdldFN0YXRlKCkgPT0gV2ViUnRjUGVlclN0YXRlLlNpZ25hbGluZ0ZhaWxlZCB8fCB0aW1lQWxpdmUgPiB0aGlzLm1UaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgZmFpbGVkLnB1c2gocGVlci5TaWduYWxpbmdJbmZvLkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZvciAodmFyIHYgb2YgY29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLkNvbm5lY3Rpb25Fc3RhYmxpc2hlZCh2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIHYgb2YgZmFpbGVkKSB7XG4gICAgICAgICAgICB0aGlzLlNpZ25hbGluZ0ZhaWxlZCh2KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgVXBkYXRlU2lnbmFsaW5nTmV0d29yaygpOiB2b2lkIHtcbiAgICAgICAgLy91cGRhdGUgdGhlIHNpZ25hbGluZyBzeXN0ZW1cbiAgICAgICAgdGhpcy5tU2lnbmFsaW5nTmV0d29yay5VcGRhdGUoKTtcblxuXG4gICAgICAgIGxldCBldnQ6IE5ldHdvcmtFdmVudDtcblxuICAgICAgICB3aGlsZSAoKGV2dCA9IHRoaXMubVNpZ25hbGluZ05ldHdvcmsuRGVxdWV1ZSgpKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlNlcnZlckluaXRpYWxpemVkKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLm1TZXJ2ZXJTdGF0ZSA9IFdlYlJ0Y05ldHdvcmtTZXJ2ZXJTdGF0ZS5PbmxpbmU7XG4gICAgICAgICAgICAgICAgdGhpcy5tRXZlbnRzLkVucXVldWUobmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVySW5pdGlhbGl6ZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBldnQuUmF3RGF0YSkpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5TZXJ2ZXJJbml0RmFpbGVkKSB7XG5cblxuICAgICAgICAgICAgICAgIHRoaXMubVNlcnZlclN0YXRlID0gV2ViUnRjTmV0d29ya1NlcnZlclN0YXRlLk9mZmxpbmU7XG4gICAgICAgICAgICAgICAgdGhpcy5tRXZlbnRzLkVucXVldWUobmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVySW5pdEZhaWxlZCwgQ29ubmVjdGlvbklkLklOVkFMSUQsIGV2dC5SYXdEYXRhKSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlNlcnZlckNsb3NlZCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tU2VydmVyU3RhdGUgPSBXZWJSdGNOZXR3b3JrU2VydmVyU3RhdGUuT2ZmbGluZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1FdmVudHMuRW5xdWV1ZShuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5TZXJ2ZXJDbG9zZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBldnQuUmF3RGF0YSkpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5OZXdDb25uZWN0aW9uKSB7XG5cbiAgICAgICAgICAgICAgICAvL2NoZWNrIGlmIG5ldyBpbmNvbWluZyBjb25uZWN0aW9uIG9yIGFuIG91dGdvaW5nIHdhcyBlc3RhYmxpc2hlZFxuXG4gICAgICAgICAgICAgICAgbGV0IHBlZXIgPSB0aGlzLm1JblNpZ25hbGluZ1tldnQuQ29ubmVjdGlvbklkLmlkXTtcbiAgICAgICAgICAgICAgICBpZiAocGVlcikge1xuICAgICAgICAgICAgICAgICAgICBwZWVyLlN0YXJ0U2lnbmFsaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGRJbmNvbWluZ0Nvbm5lY3Rpb24oZXZ0LkNvbm5lY3Rpb25JZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkKSB7XG5cbiAgICAgICAgICAgICAgICAvL091dGdvaW5nIGNvbm5lY3Rpb24gZmFpbGVkXG4gICAgICAgICAgICAgICAgdGhpcy5TaWduYWxpbmdGYWlsZWQoZXZ0LkNvbm5lY3Rpb25JZCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCkge1xuXG5cbiAgICAgICAgICAgICAgICBsZXQgcGVlciA9IHRoaXMubUluU2lnbmFsaW5nW2V2dC5Db25uZWN0aW9uSWQuaWRdO1xuICAgICAgICAgICAgICAgIGlmIChwZWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZXIuU2lnbmFsaW5nSW5mby5TaWduYWxpbmdEaXNjb25uZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2lmIHNpZ25hbGluZyB3YXMgY29tcGxldGVkIHRoaXMgaXNuJ3QgYSBwcm9ibGVtXG4gICAgICAgICAgICAgICAgLy9TaWduYWxpbmdEaXNjb25uZWN0ZWQoZXZ0LkNvbm5lY3Rpb25JZCk7XG5cbiAgICAgICAgICAgICAgICAvL2RvIG5vdGhpbmcuIGVpdGhlciB3ZWJydGMgaGFzIGVub3VnaCBpbmZvcm1hdGlvbiB0byBjb25uZWN0IGFscmVhZHlcbiAgICAgICAgICAgICAgICAvL29yIGl0IHdpbGwgd2FpdCBmb3JldmVyIGZvciB0aGUgaW5mb3JtYXRpb24gLT4gYWZ0ZXIgMzAgc2VjIHdlIGdpdmUgdXBcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlJlbGlhYmxlTWVzc2FnZVJlY2VpdmVkKSB7XG5cbiAgICAgICAgICAgICAgICBsZXQgcGVlciA9IHRoaXMubUluU2lnbmFsaW5nW2V2dC5Db25uZWN0aW9uSWQuaWRdO1xuICAgICAgICAgICAgICAgIGlmIChwZWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtc2cgPSB0aGlzLkJ1ZmZlclRvU3RyaW5nKGV2dC5NZXNzYWdlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHBlZXIuQWRkU2lnbmFsaW5nTWVzc2FnZShtc2cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFNMb2cuTG9nV2FybmluZyhcIlNpZ25hbGluZyBtZXNzYWdlIGZyb20gdW5rbm93biBjb25uZWN0aW9uIHJlY2VpdmVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgVXBkYXRlUGVlcnMoKTogdm9pZCB7XG4gICAgICAgIC8vZXZlcnkgcGVlciBoYXMgYSBxdWV1ZSBzdG9yaW5nIGluY29taW5nIG1lc3NhZ2VzIHRvIGF2b2lkIG11bHRpIHRocmVhZGluZyBwcm9ibGVtcyAtPiBoYW5kbGUgaXQgbm93XG4gICAgICAgIGxldCBkaXNjb25uZWN0ZWQgPSBuZXcgQXJyYXk8Q29ubmVjdGlvbklkPigpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5tSWRUb0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBwZWVyOiBXZWJSdGNEYXRhUGVlciA9IHRoaXMubUlkVG9Db25uZWN0aW9uW2tleV07XG4gICAgICAgICAgICBwZWVyLlVwZGF0ZSgpO1xuXG4gICAgICAgICAgICBsZXQgZXYgPSBuZXcgT3V0cHV0PE5ldHdvcmtFdmVudD4oKTtcblxuICAgICAgICAgICAgd2hpbGUgKHBlZXIuRGVxdWV1ZUV2ZW50KC8qb3V0Ki8gZXYpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tRXZlbnRzLkVucXVldWUoZXYudmFsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBlZXIuR2V0U3RhdGUoKSA9PSBXZWJSdGNQZWVyU3RhdGUuQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdGVkLnB1c2gocGVlci5Db25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQga2V5IG9mIGRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5IYW5kbGVEaXNjb25uZWN0KGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBBZGRPdXRnb2luZ0Nvbm5lY3Rpb24oYWRkcmVzczogc3RyaW5nKTogQ29ubmVjdGlvbklkIHtcbiAgICAgICAgbGV0IHNpZ25hbGluZ0NvbklkID0gdGhpcy5tU2lnbmFsaW5nTmV0d29yay5Db25uZWN0KGFkZHJlc3MpO1xuICAgICAgICBTTG9nLkwoXCJuZXcgb3V0Z29pbmcgY29ubmVjdGlvblwiKTtcbiAgICAgICAgbGV0IGluZm8gPSBuZXcgU2lnbmFsaW5nSW5mbyhzaWduYWxpbmdDb25JZCwgZmFsc2UsIERhdGUubm93KCkpO1xuICAgICAgICBsZXQgcGVlciA9IHRoaXMuQ3JlYXRlUGVlcih0aGlzLk5leHRDb25uZWN0aW9uSWQoKSwgdGhpcy5tUnRjQ29uZmlnKTtcbiAgICAgICAgcGVlci5TZXRTaWduYWxpbmdJbmZvKGluZm8pO1xuICAgICAgICB0aGlzLm1JblNpZ25hbGluZ1tzaWduYWxpbmdDb25JZC5pZF0gPSBwZWVyO1xuICAgICAgICByZXR1cm4gcGVlci5Db25uZWN0aW9uSWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBBZGRJbmNvbWluZ0Nvbm5lY3Rpb24oc2lnbmFsaW5nQ29uSWQ6IENvbm5lY3Rpb25JZCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIFNMb2cuTChcIm5ldyBpbmNvbWluZyBjb25uZWN0aW9uXCIpO1xuICAgICAgICBsZXQgaW5mbyA9IG5ldyBTaWduYWxpbmdJbmZvKHNpZ25hbGluZ0NvbklkLCB0cnVlLCBEYXRlLm5vdygpKTtcbiAgICAgICAgbGV0IHBlZXIgPSB0aGlzLkNyZWF0ZVBlZXIodGhpcy5OZXh0Q29ubmVjdGlvbklkKCksIHRoaXMubVJ0Y0NvbmZpZyk7XG4gICAgICAgIHBlZXIuU2V0U2lnbmFsaW5nSW5mbyhpbmZvKTtcbiAgICAgICAgdGhpcy5tSW5TaWduYWxpbmdbc2lnbmFsaW5nQ29uSWQuaWRdID0gcGVlcjtcbiAgICAgICAgLy9wYXNzaXZlIHdheSBvZiBzdGFydGluZyBzaWduYWxpbmcgLT4gc2VuZCBvdXQgcmFuZG9tIG51bWJlci4gaWYgdGhlIG90aGVyIG9uZSBkb2VzIHRoZSBzYW1lXG4gICAgICAgIC8vdGhlIG9uZSB3aXRoIHRoZSBoaWdoZXN0IG51bWJlciBzdGFydHMgc2lnbmFsaW5nXG4gICAgICAgIHBlZXIuTmVnb3RpYXRlU2lnbmFsaW5nKCk7XG4gICAgICAgIHJldHVybiBwZWVyLkNvbm5lY3Rpb25JZDtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBDb25uZWN0aW9uRXN0YWJsaXNoZWQoc2lnbmFsaW5nQ29uSWQ6IENvbm5lY3Rpb25JZCk6IHZvaWQge1xuICAgICAgICBsZXQgcGVlciA9IHRoaXMubUluU2lnbmFsaW5nW3NpZ25hbGluZ0NvbklkLmlkXTtcblxuICAgICAgICBkZWxldGUgdGhpcy5tSW5TaWduYWxpbmdbc2lnbmFsaW5nQ29uSWQuaWRdO1xuICAgICAgICB0aGlzLm1TaWduYWxpbmdOZXR3b3JrLkRpc2Nvbm5lY3Qoc2lnbmFsaW5nQ29uSWQpO1xuXG4gICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZHMucHVzaChwZWVyLkNvbm5lY3Rpb25JZCk7XG4gICAgICAgIHRoaXMubUlkVG9Db25uZWN0aW9uW3BlZXIuQ29ubmVjdGlvbklkLmlkXSA9IHBlZXI7XG4gICAgICAgIHRoaXMubUV2ZW50cy5FbnF1ZXVlKG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLk5ld0Nvbm5lY3Rpb24sIHBlZXIuQ29ubmVjdGlvbklkLCBudWxsKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBTaWduYWxpbmdGYWlsZWQoc2lnbmFsaW5nQ29uSWQ6IENvbm5lY3Rpb25JZCk6IHZvaWQge1xuICAgICAgICBsZXQgcGVlciA9IHRoaXMubUluU2lnbmFsaW5nW3NpZ25hbGluZ0NvbklkLmlkXTtcbiAgICAgICAgaWYgKHBlZXIpIHtcbiAgICAgICAgICAgIC8vY29ubmVjdGlvbiB3YXMgc3RpbGwgYmVsaWV2ZWQgdG8gYmUgaW4gc2lnbmFsaW5nIC0+IG5vdGlmeSB0aGUgdXNlciBvZiB0aGUgZXZlbnRcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1JblNpZ25hbGluZ1tzaWduYWxpbmdDb25JZC5pZF07XG4gICAgICAgICAgICB0aGlzLm1FdmVudHMuRW5xdWV1ZShuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkLCBwZWVyLkNvbm5lY3Rpb25JZCwgbnVsbCkpO1xuXG4gICAgICAgICAgICBpZiAocGVlci5TaWduYWxpbmdJbmZvLklzU2lnbmFsaW5nQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1TaWduYWxpbmdOZXR3b3JrLkRpc2Nvbm5lY3Qoc2lnbmFsaW5nQ29uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGVlci5EaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIEhhbmRsZURpc2Nvbm5lY3QoaWQ6IENvbm5lY3Rpb25JZCk6IHZvaWQge1xuICAgICAgICBsZXQgcGVlciA9IHRoaXMubUlkVG9Db25uZWN0aW9uW2lkLmlkXTtcbiAgICAgICAgaWYgKHBlZXIpIHtcbiAgICAgICAgICAgIHBlZXIuRGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vc2VhcmNoIGZvciB0aGUgaW5kZXggdG8gcmVtb3ZlIHRoZSBpZCAodXNlciBtaWdodCBwcm92aWRlIGEgZGlmZmVyZW50IG9iamVjdCB3aXRoIHRoZSBzYW1lIGlkXG4gICAgICAgIC8vZG9uJ3QgdXNlIGluZGV4T2YhXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMubUNvbm5lY3Rpb25JZHMuZmluZEluZGV4KCBlID0+IGUuaWQgPT0gaWQuaWQpO1xuICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMubUNvbm5lY3Rpb25JZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1JZFRvQ29ubmVjdGlvbltpZC5pZF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGxldCBldiA9IG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLkRpc2Nvbm5lY3RlZCwgaWQsIG51bGwpO1xuICAgICAgICB0aGlzLm1FdmVudHMuRW5xdWV1ZShldik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBOZXh0Q29ubmVjdGlvbklkKCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIGxldCBpZCA9IG5ldyBDb25uZWN0aW9uSWQodGhpcy5tTmV4dElkLmlkKTtcbiAgICAgICAgdGhpcy5tTmV4dElkLmlkKys7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIFN0cmluZ1RvQnVmZmVyKHN0cjogc3RyaW5nKTogVWludDhBcnJheSB7XG4gICAgICAgIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCAqIDIpO1xuICAgICAgICBsZXQgYnVmVmlldyA9IG5ldyBVaW50MTZBcnJheShidWYpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgc3RyTGVuID0gc3RyLmxlbmd0aDsgaSA8IHN0ckxlbjsgaSsrKSB7XG4gICAgICAgICAgICBidWZWaWV3W2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIEJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcjogVWludDhBcnJheSk6IHN0cmluZyB7XG4gICAgICAgIGxldCBhcnIgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLmJ1ZmZlciwgYnVmZmVyLmJ5dGVPZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC8gMik7XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGFycik7XG4gICAgfVxuICAgIFxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/network/WebRtcNetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/network/WebRtcPeer.ts":
/*!*****************************************!*\
  !*** ./src/awrtc/network/WebRtcPeer.ts ***!
  \*****************************************/
/*! exports provided: SignalingConfig, SignalingInfo, WebRtcPeerState, WebRtcInternalState, AWebRtcPeer, WebRtcDataPeer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SignalingConfig\", function() { return SignalingConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SignalingInfo\", function() { return SignalingInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebRtcPeerState\", function() { return WebRtcPeerState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebRtcInternalState\", function() { return WebRtcInternalState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AWebRtcPeer\", function() { return AWebRtcPeer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebRtcDataPeer\", function() { return WebRtcDataPeer; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\nvar SignalingConfig = /** @class */ (function () {\n    function SignalingConfig(network) {\n        this.mNetwork = network;\n    }\n    SignalingConfig.prototype.GetNetwork = function () {\n        return this.mNetwork;\n    };\n    return SignalingConfig;\n}());\n\nvar SignalingInfo = /** @class */ (function () {\n    function SignalingInfo(id, isIncoming, timeStamp) {\n        this.mConnectionId = id;\n        this.mIsIncoming = isIncoming;\n        this.mCreationTime = timeStamp;\n        this.mSignalingConnected = true;\n    }\n    SignalingInfo.prototype.IsSignalingConnected = function () {\n        return this.mSignalingConnected;\n    };\n    Object.defineProperty(SignalingInfo.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SignalingInfo.prototype.IsIncoming = function () {\n        return this.mIsIncoming;\n    };\n    SignalingInfo.prototype.GetCreationTimeMs = function () {\n        return Date.now() - this.mCreationTime;\n    };\n    SignalingInfo.prototype.SignalingDisconnected = function () {\n        this.mSignalingConnected = false;\n    };\n    return SignalingInfo;\n}());\n\nvar WebRtcPeerState;\n(function (WebRtcPeerState) {\n    WebRtcPeerState[WebRtcPeerState[\"Invalid\"] = 0] = \"Invalid\";\n    WebRtcPeerState[WebRtcPeerState[\"Created\"] = 1] = \"Created\";\n    WebRtcPeerState[WebRtcPeerState[\"Signaling\"] = 2] = \"Signaling\";\n    WebRtcPeerState[WebRtcPeerState[\"SignalingFailed\"] = 3] = \"SignalingFailed\";\n    WebRtcPeerState[WebRtcPeerState[\"Connected\"] = 4] = \"Connected\";\n    WebRtcPeerState[WebRtcPeerState[\"Closing\"] = 5] = \"Closing\";\n    WebRtcPeerState[WebRtcPeerState[\"Closed\"] = 6] = \"Closed\"; //either Closed call finished or closed remotely or Cleanup/Dispose finished -> peer connection is destroyed and all resources are released\n})(WebRtcPeerState || (WebRtcPeerState = {}));\nvar WebRtcInternalState;\n(function (WebRtcInternalState) {\n    WebRtcInternalState[WebRtcInternalState[\"None\"] = 0] = \"None\";\n    WebRtcInternalState[WebRtcInternalState[\"Signaling\"] = 1] = \"Signaling\";\n    WebRtcInternalState[WebRtcInternalState[\"SignalingFailed\"] = 2] = \"SignalingFailed\";\n    WebRtcInternalState[WebRtcInternalState[\"Connected\"] = 3] = \"Connected\";\n    WebRtcInternalState[WebRtcInternalState[\"Closed\"] = 4] = \"Closed\"; //at least one channel was closed\n})(WebRtcInternalState || (WebRtcInternalState = {}));\nvar AWebRtcPeer = /** @class */ (function () {\n    function AWebRtcPeer(rtcConfig) {\n        var _this = this;\n        this.mState = WebRtcPeerState.Invalid;\n        //only written during webrtc callbacks\n        this.mRtcInternalState = WebRtcInternalState.None;\n        this.mIncomingSignalingQueue = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        this.mOutgoingSignalingQueue = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        //Used to negotiate who starts the signaling if 2 peers listening\n        //at the same time\n        this.mDidSendRandomNumber = false;\n        this.mRandomNumerSent = 0;\n        this.mOfferOptions = { \"offerToReceiveAudio\": false, \"offerToReceiveVideo\": false };\n        this.mReadyForIce = false;\n        this.mBufferedIceCandidates = [];\n        this.OnIceCandidate = function (ev) {\n            if (ev && ev.candidate) {\n                var candidate = ev.candidate;\n                var msg = JSON.stringify(candidate);\n                _this.EnqueueOutgoing(msg);\n            }\n        };\n        this.OnIceConnectionStateChange = function (ev) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"oniceconnectionstatechange: \" + _this.mPeer.iceConnectionState);\n            //Chrome stopped emitting \"failed\" events. We have to react to disconnected events now\n            if (_this.mPeer.iceConnectionState == \"failed\" || _this.mPeer.iceConnectionState == \"disconnected\") {\n                if (_this.mState == WebRtcPeerState.Signaling) {\n                    _this.RtcSetSignalingFailed();\n                }\n                else if (_this.mState == WebRtcPeerState.Connected) {\n                    _this.RtcSetClosed();\n                }\n            }\n        };\n        /*\n        So far useless. never triggered in firefox.\n        In Chrome it triggers together with the DataChannels opening which might be more useful in the future\n        */\n        this.OnConnectionStateChange = function (ev) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"onconnectionstatechange: \" + _this.mPeer.iceConnectionState);\n        };\n        this.OnIceGatheringStateChange = function (ev) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"onicegatheringstatechange: \" + _this.mPeer.iceGatheringState);\n        };\n        this.OnRenegotiationNeeded = function (ev) {\n        };\n        //broken in chrome. won't switch to closed anymore\n        this.OnSignalingChange = function (ev) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"onsignalingstatechange:\" + _this.mPeer.signalingState);\n            //obsolete\n            if (_this.mPeer.signalingState == \"closed\") {\n                _this.RtcSetClosed();\n            }\n        };\n        this.SetupPeer(rtcConfig);\n        //remove this. it will trigger this call before the subclasses\n        //are initialized\n        this.OnSetup();\n        this.mState = WebRtcPeerState.Created;\n    }\n    AWebRtcPeer.prototype.GetState = function () {\n        return this.mState;\n    };\n    AWebRtcPeer.prototype.SetupPeer = function (rtcConfig) {\n        this.mPeer = new RTCPeerConnection(rtcConfig);\n        this.mPeer.onicecandidate = this.OnIceCandidate;\n        this.mPeer.oniceconnectionstatechange = this.OnIceConnectionStateChange;\n        this.mPeer.onicegatheringstatechange = this.OnIceGatheringStateChange;\n        this.mPeer.onnegotiationneeded = this.OnRenegotiationNeeded;\n        this.mPeer.onconnectionstatechange = this.OnConnectionStateChange;\n        this.mPeer.onsignalingstatechange = this.OnSignalingChange;\n    };\n    AWebRtcPeer.prototype.DisposeInternal = function () {\n        this.Cleanup();\n    };\n    AWebRtcPeer.prototype.Dispose = function () {\n        if (this.mPeer != null) {\n            this.DisposeInternal();\n        }\n    };\n    AWebRtcPeer.prototype.Cleanup = function () {\n        //closing webrtc could cause old events to flush out -> make sure we don't call cleanup\n        //recursively\n        if (this.mState == WebRtcPeerState.Closed || this.mState == WebRtcPeerState.Closing) {\n            return;\n        }\n        this.mState = WebRtcPeerState.Closing;\n        this.OnCleanup();\n        if (this.mPeer != null)\n            this.mPeer.close();\n        //js version still receives callbacks after this. would make it\n        //impossible to get the state\n        //this.mReliableDataChannel = null;\n        //this.mUnreliableDataChannel = null;\n        //this.mPeer = null;\n        this.mState = WebRtcPeerState.Closed;\n    };\n    AWebRtcPeer.prototype.Update = function () {\n        if (this.mState != WebRtcPeerState.Closed && this.mState != WebRtcPeerState.Closing && this.mState != WebRtcPeerState.SignalingFailed)\n            this.UpdateState();\n        if (this.mState == WebRtcPeerState.Signaling || this.mState == WebRtcPeerState.Created)\n            this.HandleIncomingSignaling();\n    };\n    AWebRtcPeer.prototype.UpdateState = function () {\n        //will only be entered if the current state isn't already one of the ending states (closed, closing, signalingfailed)\n        if (this.mRtcInternalState == WebRtcInternalState.Closed) {\n            //if webrtc switched to the closed state -> make sure everything is destroyed.\n            //webrtc closed the connection. update internal state + destroy the references\n            //to webrtc\n            this.Cleanup();\n            //mState will be Closed now as well\n        }\n        else if (this.mRtcInternalState == WebRtcInternalState.SignalingFailed) {\n            //if webrtc switched to a state indicating the signaling process failed ->  set the whole state to failed\n            //this step will be ignored if the peers are destroyed already to not jump back from closed state to failed\n            this.mState = WebRtcPeerState.SignalingFailed;\n        }\n        else if (this.mRtcInternalState == WebRtcInternalState.Connected) {\n            this.mState = WebRtcPeerState.Connected;\n        }\n    };\n    AWebRtcPeer.prototype.BufferIceCandidate = function (ice) {\n        this.mBufferedIceCandidates.push(ice);\n    };\n    /**Called after setRemoteDescription succeeded.\n     * After this call we accept ice candidates and add all buffered ice candidates we received\n     * until then.\n     *\n     * This is a workaround for problems between Safari & Firefox. Safari sometimes sends ice candidates before\n     * it sends an answer causing an error in firefox.\n     */\n    AWebRtcPeer.prototype.StartIce = function () {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"accepting ice candidates\");\n        this.mReadyForIce = true;\n        if (this.mBufferedIceCandidates.length > 0) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"adding locally buffered ice candidates\");\n            //signaling active. Forward ice candidates we received so far\n            var candidates = this.mBufferedIceCandidates;\n            this.mBufferedIceCandidates = [];\n            for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\n                var candidate = candidates_1[_i];\n                this.AddIceCandidate(candidate);\n            }\n        }\n    };\n    AWebRtcPeer.prototype.AddIceCandidate = function (ice) {\n        //based on the shim internals there is a risk it triggers errors outside of the promise\n        try {\n            var promise = this.mPeer.addIceCandidate(ice);\n            promise.then(function () { });\n            promise.catch(function (error) { _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error); });\n        }\n        catch (error) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n        }\n    };\n    AWebRtcPeer.prototype.HandleIncomingSignaling = function () {\n        //handle the incoming messages all at once\n        while (this.mIncomingSignalingQueue.Count() > 0) {\n            var msgString = this.mIncomingSignalingQueue.Dequeue();\n            var randomNumber = _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Helper\"].tryParseInt(msgString);\n            if (randomNumber != null) {\n                //was a random number for signaling negotiation\n                //if this peer uses negotiation as well then\n                //this would be true\n                if (this.mDidSendRandomNumber) {\n                    //no peer is set to start signaling -> the one with the bigger number starts\n                    if (randomNumber < this.mRandomNumerSent) {\n                        //own diced number was bigger -> start signaling\n                        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"Signaling negotiation complete. Starting signaling.\");\n                        this.StartSignaling();\n                    }\n                    else if (randomNumber == this.mRandomNumerSent) {\n                        //same numbers. restart the process\n                        this.NegotiateSignaling();\n                    }\n                    else {\n                        //wait for other peer to start signaling\n                        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"Signaling negotiation complete. Waiting for signaling.\");\n                    }\n                }\n                else {\n                    //ignore. this peer starts signaling automatically and doesn't use this\n                    //negotiation\n                }\n            }\n            else {\n                //must be a webrtc signaling message using default json formatting\n                var msg = JSON.parse(msgString);\n                if (msg.sdp) {\n                    var sdp = new RTCSessionDescription(msg);\n                    if (sdp.type == 'offer') {\n                        this.CreateAnswer(sdp);\n                        //setTimeout(() => {  }, 5000);\n                    }\n                    else {\n                        //setTimeout(() => { }, 5000);\n                        this.RecAnswer(sdp);\n                    }\n                }\n                else {\n                    var ice = new RTCIceCandidate(msg);\n                    if (ice != null) {\n                        if (this.mReadyForIce) {\n                            //expected normal behaviour\n                            this.AddIceCandidate(ice);\n                        }\n                        else {\n                            //Safari sometimes sends ice candidates before the answer message\n                            //causing firefox to trigger an error\n                            //buffer and reemit once setRemoteCandidate has been called\n                            this.BufferIceCandidate(ice);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    AWebRtcPeer.prototype.AddSignalingMessage = function (msg) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"incoming Signaling message \" + msg);\n        this.mIncomingSignalingQueue.Enqueue(msg);\n    };\n    AWebRtcPeer.prototype.DequeueSignalingMessage = function (/*out*/ msg) {\n        //lock might be not the best way to deal with this\n        //lock(mOutgoingSignalingQueue)\n        {\n            if (this.mOutgoingSignalingQueue.Count() > 0) {\n                msg.val = this.mOutgoingSignalingQueue.Dequeue();\n                return true;\n            }\n            else {\n                msg.val = null;\n                return false;\n            }\n        }\n    };\n    AWebRtcPeer.prototype.EnqueueOutgoing = function (msg) {\n        //lock(mOutgoingSignalingQueue)\n        {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"Outgoing Signaling message \" + msg);\n            this.mOutgoingSignalingQueue.Enqueue(msg);\n        }\n    };\n    AWebRtcPeer.prototype.StartSignaling = function () {\n        this.OnStartSignaling();\n        this.CreateOffer();\n    };\n    AWebRtcPeer.prototype.NegotiateSignaling = function () {\n        var nb = _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Random\"].getRandomInt(0, 2147483647);\n        this.mRandomNumerSent = nb;\n        this.mDidSendRandomNumber = true;\n        this.EnqueueOutgoing(\"\" + nb);\n    };\n    AWebRtcPeer.prototype.CreateOffer = function () {\n        var _this = this;\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"CreateOffer\");\n        var createOfferPromise = this.mPeer.createOffer(this.mOfferOptions);\n        createOfferPromise.then(function (desc_in) {\n            var desc_out = _this.ProcLocalSdp(desc_in);\n            var msg = JSON.stringify(desc_out);\n            var setDescPromise = _this.mPeer.setLocalDescription(desc_in);\n            setDescPromise.then(function () {\n                _this.RtcSetSignalingStarted();\n                _this.EnqueueOutgoing(msg);\n            });\n            setDescPromise.catch(function (error) {\n                _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n                _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(\"Error during setLocalDescription with sdp: \" + JSON.stringify(desc_in));\n                _this.RtcSetSignalingFailed();\n            });\n        });\n        createOfferPromise.catch(function (error) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n            _this.RtcSetSignalingFailed();\n        });\n    };\n    //Gives a specific codec priority over the others\n    AWebRtcPeer.prototype.EditCodecs = function (lines) {\n        var prefCodec = \"H264\";\n        console.warn(\"sdp munging: prioritizing codec \" + prefCodec);\n        //index and list of all video codec id's\n        //e.g.: m=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 102 121 127 120 125 107 108 109 35 36 124 119 123 118 114 115 116\n        var vcodecs_line_index;\n        var vcodecs_line_split;\n        var vcodecs_list;\n        for (var i = 0; i < lines.length; i++) {\n            var line = lines[i];\n            if (line.startsWith(\"m=video\")) {\n                vcodecs_line_split = line.split(\" \");\n                vcodecs_list = vcodecs_line_split.slice(3, vcodecs_line_split.length);\n                vcodecs_line_index = i;\n                //console.log(vcodecs_list);\n                break;\n            }\n        }\n        //list of video codecs positioned based on our priority list\n        var vcodecs_list_new = [];\n        //start below the the m=video line\n        for (var i = vcodecs_line_index + 1; i < lines.length; i++) {\n            var line = lines[i];\n            var prefix = \"a=rtpmap:\";\n            if (line.startsWith(prefix)) {\n                var subline = line.substr(prefix.length);\n                var split = subline.split(\" \");\n                var codecId = split[0];\n                var codecDesc = split[1];\n                var codecSplit = codecDesc.split(\"/\");\n                var codecName = codecSplit[0];\n                //sanity check. is this a video codec?\n                if (vcodecs_list.includes(codecId)) {\n                    if (codecName === prefCodec) {\n                        vcodecs_list_new.unshift(codecId);\n                    }\n                    else {\n                        vcodecs_list_new.push(codecId);\n                    }\n                }\n            }\n        }\n        //first 3 elements remain the same\n        var vcodecs_line_new = vcodecs_line_split[0] + \" \" + vcodecs_line_split[1] + \" \" + vcodecs_line_split[2];\n        //add new codec list after it\n        vcodecs_list_new.forEach(function (x) { vcodecs_line_new = vcodecs_line_new + \" \" + x; });\n        //replace old line\n        lines[vcodecs_line_index] = vcodecs_line_new;\n    };\n    //Replaces H264 profile levels\n    //iOS workaround. Streaming from iOS to browser currently fails without this if\n    //resolution is above 720p and h264 is active\n    AWebRtcPeer.prototype.EditProfileLevel = function (lines) {\n        var target_profile_level_id = \"2a\";\n        //TODO: Make sure we only edit H264. There could be other codecs in the future\n        //that look identical\n        console.warn(\"sdp munging: replacing h264 profile-level with \" + target_profile_level_id);\n        var vcodecs_line_index;\n        var vcodecs_line_split;\n        var vcodecs_list;\n        for (var i = 0; i < lines.length; i++) {\n            var line = lines[i];\n            if (line.startsWith(\"a=fmtp:\")) {\n                //looking for profile-level-id=42001f\n                //we replace the 1f\n                var searchString = \"profile-level-id=\";\n                var sublines = line.split(\";\");\n                var updateLine = false;\n                for (var k = 0; k < sublines.length; k++) {\n                    var subline = sublines[k];\n                    if (subline.startsWith(searchString)) {\n                        var len = searchString.length + 4;\n                        sublines[k] = sublines[k].substr(0, len) + target_profile_level_id;\n                        updateLine = true;\n                        break;\n                    }\n                }\n                if (updateLine) {\n                    lines[i] = sublines.join(\";\");\n                }\n            }\n        }\n    };\n    AWebRtcPeer.prototype.ProcLocalSdp = function (desc) {\n        if (AWebRtcPeer.MUNGE_SDP === false)\n            return desc;\n        console.warn(\"sdp munging active\");\n        var sdp_in = desc.sdp;\n        var sdp_out = \"\";\n        var lines = sdp_in.split(\"\\r\\n\");\n        this.EditCodecs(lines);\n        //this.EditProfileLevel(lines);\n        sdp_out = lines.join(\"\\r\\n\");\n        var desc_out = { type: desc.type, sdp: sdp_out };\n        return desc_out;\n    };\n    AWebRtcPeer.prototype.ProcRemoteSdp = function (desc) {\n        if (AWebRtcPeer.MUNGE_SDP === false)\n            return desc;\n        //console.warn(\"sdp munging active\");\n        return desc;\n    };\n    AWebRtcPeer.prototype.CreateAnswer = function (offer) {\n        var _this = this;\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"CreateAnswer\");\n        offer = this.ProcRemoteSdp(offer);\n        var remoteDescPromise = this.mPeer.setRemoteDescription(offer);\n        remoteDescPromise.then(function () {\n            _this.StartIce();\n            var createAnswerPromise = _this.mPeer.createAnswer();\n            createAnswerPromise.then(function (desc_in) {\n                var desc_out = _this.ProcLocalSdp(desc_in);\n                var msg = JSON.stringify(desc_out);\n                var localDescPromise = _this.mPeer.setLocalDescription(desc_in);\n                localDescPromise.then(function () {\n                    _this.RtcSetSignalingStarted();\n                    _this.EnqueueOutgoing(msg);\n                });\n                localDescPromise.catch(function (error) {\n                    _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n                    _this.RtcSetSignalingFailed();\n                });\n            });\n            createAnswerPromise.catch(function (error) {\n                _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n                _this.RtcSetSignalingFailed();\n            });\n        });\n        remoteDescPromise.catch(function (error) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n            _this.RtcSetSignalingFailed();\n        });\n    };\n    AWebRtcPeer.prototype.RecAnswer = function (answer) {\n        var _this = this;\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"RecAnswer\");\n        answer = this.ProcRemoteSdp(answer);\n        var remoteDescPromise = this.mPeer.setRemoteDescription(answer);\n        remoteDescPromise.then(function () {\n            //all done\n            _this.StartIce();\n        });\n        remoteDescPromise.catch(function (error) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(error);\n            _this.RtcSetSignalingFailed();\n        });\n    };\n    AWebRtcPeer.prototype.RtcSetSignalingStarted = function () {\n        if (this.mRtcInternalState == WebRtcInternalState.None) {\n            this.mRtcInternalState = WebRtcInternalState.Signaling;\n        }\n    };\n    AWebRtcPeer.prototype.RtcSetSignalingFailed = function () {\n        this.mRtcInternalState = WebRtcInternalState.SignalingFailed;\n    };\n    AWebRtcPeer.prototype.RtcSetConnected = function () {\n        if (this.mRtcInternalState == WebRtcInternalState.Signaling)\n            this.mRtcInternalState = WebRtcInternalState.Connected;\n    };\n    AWebRtcPeer.prototype.RtcSetClosed = function () {\n        if (this.mRtcInternalState == WebRtcInternalState.Connected) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"triggering closure\");\n            this.mRtcInternalState = WebRtcInternalState.Closed;\n        }\n    };\n    AWebRtcPeer.MUNGE_SDP = false;\n    return AWebRtcPeer;\n}());\n\nvar WebRtcDataPeer = /** @class */ (function (_super) {\n    __extends(WebRtcDataPeer, _super);\n    function WebRtcDataPeer(id, rtcConfig) {\n        var _this = _super.call(this, rtcConfig) || this;\n        _this.mInfo = null;\n        _this.mEvents = new _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]();\n        _this.mReliableDataChannelReady = false;\n        _this.mUnreliableDataChannelReady = false;\n        _this.mConnectionId = id;\n        return _this;\n    }\n    Object.defineProperty(WebRtcDataPeer.prototype, \"ConnectionId\", {\n        get: function () {\n            return this.mConnectionId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(WebRtcDataPeer.prototype, \"SignalingInfo\", {\n        get: function () {\n            return this.mInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WebRtcDataPeer.prototype.SetSignalingInfo = function (info) {\n        this.mInfo = info;\n    };\n    WebRtcDataPeer.prototype.OnSetup = function () {\n        var _this = this;\n        this.mPeer.ondatachannel = function (ev) { _this.OnDataChannel(ev.channel); };\n    };\n    WebRtcDataPeer.prototype.OnStartSignaling = function () {\n        var configReliable = {};\n        this.mReliableDataChannel = this.mPeer.createDataChannel(WebRtcDataPeer.sLabelReliable, configReliable);\n        this.RegisterObserverReliable();\n        var configUnreliable = {};\n        configUnreliable.maxRetransmits = 0;\n        configUnreliable.ordered = false;\n        this.mUnreliableDataChannel = this.mPeer.createDataChannel(WebRtcDataPeer.sLabelUnreliable, configUnreliable);\n        this.RegisterObserverUnreliable();\n    };\n    WebRtcDataPeer.prototype.OnCleanup = function () {\n        if (this.mReliableDataChannel != null)\n            this.mReliableDataChannel.close();\n        if (this.mUnreliableDataChannel != null)\n            this.mUnreliableDataChannel.close();\n        //dont set to null. handlers will be called later\n    };\n    WebRtcDataPeer.prototype.RegisterObserverReliable = function () {\n        var _this = this;\n        this.mReliableDataChannel.onmessage = function (event) { _this.ReliableDataChannel_OnMessage(event); };\n        this.mReliableDataChannel.onopen = function (event) { _this.ReliableDataChannel_OnOpen(); };\n        this.mReliableDataChannel.onclose = function (event) { _this.ReliableDataChannel_OnClose(); };\n        this.mReliableDataChannel.onerror = function (event) { _this.ReliableDataChannel_OnError(\"\"); }; //should the event just be a string?\n    };\n    WebRtcDataPeer.prototype.RegisterObserverUnreliable = function () {\n        var _this = this;\n        this.mUnreliableDataChannel.onmessage = function (event) { _this.UnreliableDataChannel_OnMessage(event); };\n        this.mUnreliableDataChannel.onopen = function (event) { _this.UnreliableDataChannel_OnOpen(); };\n        this.mUnreliableDataChannel.onclose = function (event) { _this.UnreliableDataChannel_OnClose(); };\n        this.mUnreliableDataChannel.onerror = function (event) { _this.UnreliableDataChannel_OnError(\"\"); }; //should the event just be a string?\n    };\n    WebRtcDataPeer.prototype.SendData = function (data, /* offset : number, length : number,*/ reliable) {\n        //let buffer: ArrayBufferView = data.subarray(offset, offset + length) as ArrayBufferView;\n        var buffer = data;\n        var MAX_SEND_BUFFER = 1024 * 1024;\n        //chrome bug: If the channels is closed remotely trough disconnect\n        //then the local channel can appear open but will throw an exception\n        //if send is called\n        var sentSuccessfully = false;\n        try {\n            if (reliable) {\n                if (this.mReliableDataChannel.readyState === \"open\") {\n                    //bugfix: WebRTC seems to simply close the data channel if we send\n                    //too much at once. avoid this from now on by returning false\n                    //if the buffer gets too full\n                    if ((this.mReliableDataChannel.bufferedAmount + buffer.byteLength) < MAX_SEND_BUFFER) {\n                        this.mReliableDataChannel.send(buffer);\n                        sentSuccessfully = true;\n                    }\n                }\n            }\n            else {\n                if (this.mUnreliableDataChannel.readyState === \"open\") {\n                    if ((this.mUnreliableDataChannel.bufferedAmount + buffer.byteLength) < MAX_SEND_BUFFER) {\n                        this.mUnreliableDataChannel.send(buffer);\n                        sentSuccessfully = true;\n                    }\n                }\n            }\n        }\n        catch (e) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogError(\"Exception while trying to send: \" + e);\n        }\n        return sentSuccessfully;\n    };\n    WebRtcDataPeer.prototype.GetBufferedAmount = function (reliable) {\n        var result = -1;\n        try {\n            if (reliable) {\n                if (this.mReliableDataChannel.readyState === \"open\") {\n                    result = this.mReliableDataChannel.bufferedAmount;\n                }\n            }\n            else {\n                if (this.mUnreliableDataChannel.readyState === \"open\") {\n                    result = this.mUnreliableDataChannel.bufferedAmount;\n                }\n            }\n        }\n        catch (e) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LogError(\"Exception while trying to access GetBufferedAmount: \" + e);\n        }\n        return result;\n    };\n    WebRtcDataPeer.prototype.DequeueEvent = function (/*out*/ ev) {\n        //lock(mEvents)\n        {\n            if (this.mEvents.Count() > 0) {\n                ev.val = this.mEvents.Dequeue();\n                return true;\n            }\n        }\n        return false;\n    };\n    WebRtcDataPeer.prototype.Enqueue = function (ev) {\n        //lock(mEvents)\n        {\n            this.mEvents.Enqueue(ev);\n        }\n    };\n    WebRtcDataPeer.prototype.OnDataChannel = function (data_channel) {\n        var newChannel = data_channel;\n        if (newChannel.label == WebRtcDataPeer.sLabelReliable) {\n            this.mReliableDataChannel = newChannel;\n            this.RegisterObserverReliable();\n        }\n        else if (newChannel.label == WebRtcDataPeer.sLabelUnreliable) {\n            this.mUnreliableDataChannel = newChannel;\n            this.RegisterObserverUnreliable();\n        }\n        else {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(\"Datachannel with unexpected label \" + newChannel.label);\n        }\n    };\n    WebRtcDataPeer.prototype.RtcOnMessageReceived = function (event, reliable) {\n        var eventType = _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].UnreliableMessageReceived;\n        if (reliable) {\n            eventType = _index__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ReliableMessageReceived;\n        }\n        //async conversion to blob/arraybuffer here\n        if (event.data instanceof ArrayBuffer) {\n            var buffer = new Uint8Array(event.data);\n            this.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](eventType, this.mConnectionId, buffer));\n        }\n        else if (event.data instanceof Blob) {\n            var connectionId = this.mConnectionId;\n            var fileReader = new FileReader();\n            var self = this;\n            fileReader.onload = function () {\n                //need to use function as this pointer is needed to reference to the data\n                var data = this.result;\n                var buffer = new Uint8Array(data);\n                self.Enqueue(new _index__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](eventType, self.mConnectionId, buffer));\n            };\n            fileReader.readAsArrayBuffer(event.data);\n        }\n        else {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(\"Invalid message type. Only blob and arraybuffer supported: \" + event.data);\n        }\n    };\n    WebRtcDataPeer.prototype.ReliableDataChannel_OnMessage = function (event) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"ReliableDataChannel_OnMessage \");\n        this.RtcOnMessageReceived(event, true);\n    };\n    WebRtcDataPeer.prototype.ReliableDataChannel_OnOpen = function () {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"mReliableDataChannelReady\");\n        this.mReliableDataChannelReady = true;\n        if (this.IsRtcConnected()) {\n            this.RtcSetConnected();\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"Fully connected\");\n        }\n    };\n    WebRtcDataPeer.prototype.ReliableDataChannel_OnClose = function () {\n        this.RtcSetClosed();\n    };\n    WebRtcDataPeer.prototype.ReliableDataChannel_OnError = function (errorMsg) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(errorMsg);\n        this.RtcSetClosed();\n    };\n    WebRtcDataPeer.prototype.UnreliableDataChannel_OnMessage = function (event) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"UnreliableDataChannel_OnMessage \");\n        this.RtcOnMessageReceived(event, false);\n    };\n    WebRtcDataPeer.prototype.UnreliableDataChannel_OnOpen = function () {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"mUnreliableDataChannelReady\");\n        this.mUnreliableDataChannelReady = true;\n        if (this.IsRtcConnected()) {\n            this.RtcSetConnected();\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].Log(\"Fully connected\");\n        }\n    };\n    WebRtcDataPeer.prototype.UnreliableDataChannel_OnClose = function () {\n        this.RtcSetClosed();\n    };\n    WebRtcDataPeer.prototype.UnreliableDataChannel_OnError = function (errorMsg) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"].LogError(errorMsg);\n        this.RtcSetClosed();\n    };\n    WebRtcDataPeer.prototype.IsRtcConnected = function () {\n        return this.mReliableDataChannelReady && this.mUnreliableDataChannelReady;\n    };\n    WebRtcDataPeer.sLabelReliable = \"reliable\";\n    WebRtcDataPeer.sLabelUnreliable = \"unreliable\";\n    return WebRtcDataPeer;\n}(AWebRtcPeer));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL1dlYlJ0Y1BlZXIudHM/ODRkZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUE0QkU7QUFDNkU7QUFDVDtBQUV0RTtJQUdJLHlCQUFZLE9BQXNCO1FBQzlCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO0lBQzVCLENBQUM7SUFDTSxvQ0FBVSxHQUFqQjtRQUNJLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBRUwsc0JBQUM7QUFBRCxDQUFDOztBQUVEO0lBMkJJLHVCQUFtQixFQUFnQixFQUFFLFVBQW1CLEVBQUUsU0FBa0I7UUFFeEUsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxTQUFTLENBQUM7UUFDL0IsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztJQUNwQyxDQUFDO0lBOUJNLDRDQUFvQixHQUEzQjtRQUVJLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ3BDLENBQUM7SUFFRCxzQkFBVyx1Q0FBWTthQUF2QjtZQUVJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM5QixDQUFDOzs7T0FBQTtJQUdNLGtDQUFVLEdBQWpCO1FBRUksT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7SUFLTSx5Q0FBaUIsR0FBeEI7UUFFSSxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzNDLENBQUM7SUFTTSw2Q0FBcUIsR0FBNUI7UUFFSSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDO0lBQ3JDLENBQUM7SUFDTCxvQkFBQztBQUFELENBQUM7O0FBQ0QsSUFB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IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cbmltcG9ydCB7SUJhc2ljTmV0d29yaywgQ29ubmVjdGlvbklkLCBOZXR3b3JrRXZlbnQsIE5ldEV2ZW50VHlwZX0gZnJvbSBcIi4vaW5kZXhcIlxuaW1wb3J0IHsgUXVldWUsIEhlbHBlciwgU0xvZywgRGVidWcsIE91dHB1dCwgUmFuZG9tIH0gZnJvbSBcIi4vSGVscGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTaWduYWxpbmdDb25maWcge1xuICAgIHByaXZhdGUgbU5ldHdvcms6IElCYXNpY05ldHdvcms7XG5cbiAgICBjb25zdHJ1Y3RvcihuZXR3b3JrOiBJQmFzaWNOZXR3b3JrKSB7XG4gICAgICAgIHRoaXMubU5ldHdvcmsgPSBuZXR3b3JrO1xuICAgIH1cbiAgICBwdWJsaWMgR2V0TmV0d29yaygpOiBJQmFzaWNOZXR3b3JrIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubU5ldHdvcms7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBTaWduYWxpbmdJbmZvIHtcblxuICAgIHByaXZhdGUgbVNpZ25hbGluZ0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgSXNTaWduYWxpbmdDb25uZWN0ZWQoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVNpZ25hbGluZ0Nvbm5lY3RlZDtcbiAgICB9XG4gICAgcHJpdmF0ZSBtQ29ubmVjdGlvbklkOiBDb25uZWN0aW9uSWQ7XG4gICAgcHVibGljIGdldCBDb25uZWN0aW9uSWQoKSA6IENvbm5lY3Rpb25JZFxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUNvbm5lY3Rpb25JZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1Jc0luY29taW5nOiBib29sZWFuO1xuICAgIHB1YmxpYyBJc0luY29taW5nKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLm1Jc0luY29taW5nO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBtQ3JlYXRpb25UaW1lOiBudW1iZXI7XG5cbiAgICBwdWJsaWMgR2V0Q3JlYXRpb25UaW1lTXMoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMubUNyZWF0aW9uVGltZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoaWQ6IENvbm5lY3Rpb25JZCwgaXNJbmNvbWluZzogYm9vbGVhbiwgdGltZVN0YW1wIDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgdGhpcy5tQ29ubmVjdGlvbklkID0gaWQ7XG4gICAgICAgIHRoaXMubUlzSW5jb21pbmcgPSBpc0luY29taW5nO1xuICAgICAgICB0aGlzLm1DcmVhdGlvblRpbWUgPSB0aW1lU3RhbXA7XG4gICAgICAgIHRoaXMubVNpZ25hbGluZ0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgfVxuICAgIHB1YmxpYyBTaWduYWxpbmdEaXNjb25uZWN0ZWQoKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5tU2lnbmFsaW5nQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGVudW0gV2ViUnRjUGVlclN0YXRlIHtcbiAgICBJbnZhbGlkLFxuICAgIENyZWF0ZWQsIC8vZnJlc2hseSBjcmVhdGVkIHBlZXIuIGRpZG4ndCBzdGFydCB0byBjb25uZWN0IHlldCBidXQgY2FuIHJlY2VpdmUgbWVzc2FnZSB0byB0cmlnZ2VyIGl0XG4gICAgU2lnbmFsaW5nLCAvL3dlYnJ0YyBzdGFydGVkIHRoZSBwcm9jZXNzIG9mIGNvbm5lY3RpbmcgMiBwZWVyc1xuICAgIFNpZ25hbGluZ0ZhaWxlZCwgLy9jb25uZWN0aW9uIGZhaWxlZCB0byBiZSBlc3RhYmxpc2hlZCAtPiBlaXRoZXIgY2xlYW51cC9jbG9zZSBvciB0cnkgYWdhaW4gKG5vdCB5ZXQgcG9zc2libGUpXG4gICAgQ29ubmVjdGVkLCAvL2Nvbm5lY3Rpb24gaXMgcnVubmluZ1xuICAgIENsb3NpbmcsIC8vVXNlZCBiZWZvcmUgQ2xvc2UgY2FsbCB0byBibG9jayByZWFjdGlvbiB0byB3ZWJydGMgZXZlbnRzIGNvbWluZyBiYWNrXG4gICAgQ2xvc2VkIC8vZWl0aGVyIENsb3NlZCBjYWxsIGZpbmlzaGVkIG9yIGNsb3NlZCByZW1vdGVseSBvciBDbGVhbnVwL0Rpc3Bvc2UgZmluaXNoZWQgLT4gcGVlciBjb25uZWN0aW9uIGlzIGRlc3Ryb3llZCBhbmQgYWxsIHJlc291cmNlcyBhcmUgcmVsZWFzZWRcbn1cbmV4cG9ydCBlbnVtIFdlYlJ0Y0ludGVybmFsU3RhdGUge1xuICAgIE5vbmUsIC8vbm90aGluZyBoYXBwZW5lZCB5ZXRcbiAgICBTaWduYWxpbmcsIC8vQ3JlYXRlIE9mZmVyIG9yIENyZWF0ZUFuc3dlciBzdWNjZXNzZnVsbHkgY2FsbGVkIChhZnRlciBjcmVhdGUgY2FsbGJhY2tzKVxuICAgIFNpZ25hbGluZ0ZhaWxlZCwgLy9TaWduYWxpbmcgZmFpbGVkXG4gICAgQ29ubmVjdGVkLCAvL2FsbCBjaGFubmVscyBvcGVuZWRcbiAgICBDbG9zZWQgLy9hdCBsZWFzdCBvbmUgY2hhbm5lbCB3YXMgY2xvc2VkXG59XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQVdlYlJ0Y1BlZXIge1xuXG4gICAgcHJpdmF0ZSBtU3RhdGUgPSBXZWJSdGNQZWVyU3RhdGUuSW52YWxpZDtcbiAgICBwdWJsaWMgR2V0U3RhdGUoKTogV2ViUnRjUGVlclN0YXRlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubVN0YXRlO1xuICAgIH1cblxuICAgIC8vb25seSB3cml0dGVuIGR1cmluZyB3ZWJydGMgY2FsbGJhY2tzXG4gICAgcHJpdmF0ZSBtUnRjSW50ZXJuYWxTdGF0ZSA9IFdlYlJ0Y0ludGVybmFsU3RhdGUuTm9uZTtcblxuICAgIHByb3RlY3RlZCBtUGVlcjogUlRDUGVlckNvbm5lY3Rpb247XG5cbiAgICBwcml2YXRlIG1JbmNvbWluZ1NpZ25hbGluZ1F1ZXVlOiBRdWV1ZTxzdHJpbmc+ID0gbmV3IFF1ZXVlPHN0cmluZz4oKTtcbiAgICBwcml2YXRlIG1PdXRnb2luZ1NpZ25hbGluZ1F1ZXVlOiBRdWV1ZTxzdHJpbmc+ID0gbmV3IFF1ZXVlPHN0cmluZz4oKTtcblxuXG4gICAgLy9Vc2VkIHRvIG5lZ290aWF0ZSB3aG8gc3RhcnRzIHRoZSBzaWduYWxpbmcgaWYgMiBwZWVycyBsaXN0ZW5pbmdcbiAgICAvL2F0IHRoZSBzYW1lIHRpbWVcbiAgICBwcml2YXRlIG1EaWRTZW5kUmFuZG9tTnVtYmVyID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBtUmFuZG9tTnVtZXJTZW50ID0gMDtcblxuXG4gICAgcHJvdGVjdGVkIG1PZmZlck9wdGlvbnM6IFJUQ09mZmVyT3B0aW9ucyA9IHsgXCJvZmZlclRvUmVjZWl2ZUF1ZGlvXCI6IGZhbHNlLCBcIm9mZmVyVG9SZWNlaXZlVmlkZW9cIjogZmFsc2UgfTtcbiAgICBcbiAgICBwcml2YXRlIG1SZWFkeUZvckljZSA9IGZhbHNlO1xuICAgIHByaXZhdGUgbUJ1ZmZlcmVkSWNlQ2FuZGlkYXRlcyA6IFJUQ0ljZUNhbmRpZGF0ZVtdID0gW107XG5cblxuICAgIGNvbnN0cnVjdG9yKHJ0Y0NvbmZpZzogUlRDQ29uZmlndXJhdGlvbikge1xuICAgICAgICB0aGlzLlNldHVwUGVlcihydGNDb25maWcpO1xuICAgICAgICAvL3JlbW92ZSB0aGlzLiBpdCB3aWxsIHRyaWdnZXIgdGhpcyBjYWxsIGJlZm9yZSB0aGUgc3ViY2xhc3Nlc1xuICAgICAgICAvL2FyZSBpbml0aWFsaXplZFxuICAgICAgICB0aGlzLk9uU2V0dXAoKTtcbiAgICAgICAgdGhpcy5tU3RhdGUgPSBXZWJSdGNQZWVyU3RhdGUuQ3JlYXRlZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgT25TZXR1cCgpOiB2b2lkO1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBPblN0YXJ0U2lnbmFsaW5nKCk6IHZvaWQ7XG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IE9uQ2xlYW51cCgpOiB2b2lkO1xuXG4gICAgcHJpdmF0ZSBTZXR1cFBlZXIocnRjQ29uZmlnOiBSVENDb25maWd1cmF0aW9uKTogdm9pZCB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1QZWVyID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHJ0Y0NvbmZpZyk7XG4gICAgICAgIHRoaXMubVBlZXIub25pY2VjYW5kaWRhdGUgPSB0aGlzLk9uSWNlQ2FuZGlkYXRlO1xuICAgICAgICB0aGlzLm1QZWVyLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gIHRoaXMuT25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2U7IFxuICAgICAgICB0aGlzLm1QZWVyLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSB0aGlzLk9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2U7XG4gICAgICAgIHRoaXMubVBlZXIub25uZWdvdGlhdGlvbm5lZWRlZCA9IHRoaXMuT25SZW5lZ290aWF0aW9uTmVlZGVkO1xuICAgICAgICB0aGlzLm1QZWVyLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gdGhpcy5PbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZTtcbiAgICAgICAgdGhpcy5tUGVlci5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gdGhpcy5PblNpZ25hbGluZ0NoYW5nZTtcblxuICAgIH1cbiAgICBcblxuICAgIHByb3RlY3RlZCBEaXNwb3NlSW50ZXJuYWwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuQ2xlYW51cCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBEaXNwb3NlKCk6IHZvaWQge1xuXG4gICAgICAgIGlmICh0aGlzLm1QZWVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuRGlzcG9zZUludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIENsZWFudXAoKTogdm9pZCB7XG4gICAgICAgIC8vY2xvc2luZyB3ZWJydGMgY291bGQgY2F1c2Ugb2xkIGV2ZW50cyB0byBmbHVzaCBvdXQgLT4gbWFrZSBzdXJlIHdlIGRvbid0IGNhbGwgY2xlYW51cFxuICAgICAgICAvL3JlY3Vyc2l2ZWx5XG4gICAgICAgIGlmICh0aGlzLm1TdGF0ZSA9PSBXZWJSdGNQZWVyU3RhdGUuQ2xvc2VkIHx8IHRoaXMubVN0YXRlID09IFdlYlJ0Y1BlZXJTdGF0ZS5DbG9zaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1TdGF0ZSA9IFdlYlJ0Y1BlZXJTdGF0ZS5DbG9zaW5nO1xuXG4gICAgICAgIHRoaXMuT25DbGVhbnVwKCk7XG5cbiAgICAgICAgaWYgKHRoaXMubVBlZXIgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMubVBlZXIuY2xvc2UoKTtcblxuICAgICAgICAvL2pzIHZlcnNpb24gc3RpbGwgcmVjZWl2ZXMgY2FsbGJhY2tzIGFmdGVyIHRoaXMuIHdvdWxkIG1ha2UgaXRcbiAgICAgICAgLy9pbXBvc3NpYmxlIHRvIGdldCB0aGUgc3RhdGVcbiAgICAgICAgLy90aGlzLm1SZWxpYWJsZURhdGFDaGFubmVsID0gbnVsbDtcbiAgICAgICAgLy90aGlzLm1VbnJlbGlhYmxlRGF0YUNoYW5uZWwgPSBudWxsO1xuICAgICAgICAvL3RoaXMubVBlZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMubVN0YXRlID0gV2ViUnRjUGVlclN0YXRlLkNsb3NlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXBkYXRlKCk6IHZvaWQge1xuXG4gICAgICAgIGlmICh0aGlzLm1TdGF0ZSAhPSBXZWJSdGNQZWVyU3RhdGUuQ2xvc2VkICYmIHRoaXMubVN0YXRlICE9IFdlYlJ0Y1BlZXJTdGF0ZS5DbG9zaW5nICYmIHRoaXMubVN0YXRlICE9IFdlYlJ0Y1BlZXJTdGF0ZS5TaWduYWxpbmdGYWlsZWQpXG4gICAgICAgICAgICB0aGlzLlVwZGF0ZVN0YXRlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMubVN0YXRlID09IFdlYlJ0Y1BlZXJTdGF0ZS5TaWduYWxpbmcgfHwgdGhpcy5tU3RhdGUgPT0gV2ViUnRjUGVlclN0YXRlLkNyZWF0ZWQpXG4gICAgICAgICAgICB0aGlzLkhhbmRsZUluY29taW5nU2lnbmFsaW5nKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBVcGRhdGVTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgLy93aWxsIG9ubHkgYmUgZW50ZXJlZCBpZiB0aGUgY3VycmVudCBzdGF0ZSBpc24ndCBhbHJlYWR5IG9uZSBvZiB0aGUgZW5kaW5nIHN0YXRlcyAoY2xvc2VkLCBjbG9zaW5nLCBzaWduYWxpbmdmYWlsZWQpXG5cbiAgICAgICAgaWYgKHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPT0gV2ViUnRjSW50ZXJuYWxTdGF0ZS5DbG9zZWQpIHtcbiAgICAgICAgICAgIC8vaWYgd2VicnRjIHN3aXRjaGVkIHRvIHRoZSBjbG9zZWQgc3RhdGUgLT4gbWFrZSBzdXJlIGV2ZXJ5dGhpbmcgaXMgZGVzdHJveWVkLlxuXG4gICAgICAgICAgICAvL3dlYnJ0YyBjbG9zZWQgdGhlIGNvbm5lY3Rpb24uIHVwZGF0ZSBpbnRlcm5hbCBzdGF0ZSArIGRlc3Ryb3kgdGhlIHJlZmVyZW5jZXNcbiAgICAgICAgICAgIC8vdG8gd2VicnRjXG4gICAgICAgICAgICB0aGlzLkNsZWFudXAoKTtcbiAgICAgICAgICAgIC8vbVN0YXRlIHdpbGwgYmUgQ2xvc2VkIG5vdyBhcyB3ZWxsXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tUnRjSW50ZXJuYWxTdGF0ZSA9PSBXZWJSdGNJbnRlcm5hbFN0YXRlLlNpZ25hbGluZ0ZhaWxlZCkge1xuICAgICAgICAgICAgLy9pZiB3ZWJydGMgc3dpdGNoZWQgdG8gYSBzdGF0ZSBpbmRpY2F0aW5nIHRoZSBzaWduYWxpbmcgcHJvY2VzcyBmYWlsZWQgLT4gIHNldCB0aGUgd2hvbGUgc3RhdGUgdG8gZmFpbGVkXG4gICAgICAgICAgICAvL3RoaXMgc3RlcCB3aWxsIGJlIGlnbm9yZWQgaWYgdGhlIHBlZXJzIGFyZSBkZXN0cm95ZWQgYWxyZWFkeSB0byBub3QganVtcCBiYWNrIGZyb20gY2xvc2VkIHN0YXRlIHRvIGZhaWxlZFxuICAgICAgICAgICAgdGhpcy5tU3RhdGUgPSBXZWJSdGNQZWVyU3RhdGUuU2lnbmFsaW5nRmFpbGVkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPT0gV2ViUnRjSW50ZXJuYWxTdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubVN0YXRlID0gV2ViUnRjUGVlclN0YXRlLkNvbm5lY3RlZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgQnVmZmVySWNlQ2FuZGlkYXRlKGljZTogUlRDSWNlQ2FuZGlkYXRlKXtcbiAgICAgICAgdGhpcy5tQnVmZmVyZWRJY2VDYW5kaWRhdGVzLnB1c2goaWNlKTtcbiAgICB9XG5cbiAgICAvKipDYWxsZWQgYWZ0ZXIgc2V0UmVtb3RlRGVzY3JpcHRpb24gc3VjY2VlZGVkLiBcbiAgICAgKiBBZnRlciB0aGlzIGNhbGwgd2UgYWNjZXB0IGljZSBjYW5kaWRhdGVzIGFuZCBhZGQgYWxsIGJ1ZmZlcmVkIGljZSBjYW5kaWRhdGVzIHdlIHJlY2VpdmVkIFxuICAgICAqIHVudGlsIHRoZW4uIFxuICAgICAqIFxuICAgICAqIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciBwcm9ibGVtcyBiZXR3ZWVuIFNhZmFyaSAmIEZpcmVmb3guIFNhZmFyaSBzb21ldGltZXMgc2VuZHMgaWNlIGNhbmRpZGF0ZXMgYmVmb3JlXG4gICAgICogaXQgc2VuZHMgYW4gYW5zd2VyIGNhdXNpbmcgYW4gZXJyb3IgaW4gZmlyZWZveC5cbiAgICAgKi9cbiAgICBwcml2YXRlIFN0YXJ0SWNlKCl7XG5cbiAgICAgICAgRGVidWcuTG9nKFwiYWNjZXB0aW5nIGljZSBjYW5kaWRhdGVzXCIpO1xuICAgICAgICB0aGlzLm1SZWFkeUZvckljZSA9IHRydWU7XG4gICAgICAgIGlmKHRoaXMubUJ1ZmZlcmVkSWNlQ2FuZGlkYXRlcy5sZW5ndGggPiAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBEZWJ1Zy5Mb2coXCJhZGRpbmcgbG9jYWxseSBidWZmZXJlZCBpY2UgY2FuZGlkYXRlc1wiKTtcbiAgICAgICAgICAgIC8vc2lnbmFsaW5nIGFjdGl2ZS4gRm9yd2FyZCBpY2UgY2FuZGlkYXRlcyB3ZSByZWNlaXZlZCBzbyBmYXJcbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLm1CdWZmZXJlZEljZUNhbmRpZGF0ZXM7XG4gICAgICAgICAgICB0aGlzLm1CdWZmZXJlZEljZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5BZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIEFkZEljZUNhbmRpZGF0ZShpY2U6IFJUQ0ljZUNhbmRpZGF0ZSl7XG5cbiAgICAgICAgLy9iYXNlZCBvbiB0aGUgc2hpbSBpbnRlcm5hbHMgdGhlcmUgaXMgYSByaXNrIGl0IHRyaWdnZXJzIGVycm9ycyBvdXRzaWRlIG9mIHRoZSBwcm9taXNlXG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gdGhpcy5tUGVlci5hZGRJY2VDYW5kaWRhdGUoaWNlKTtcbiAgICAgICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7LypzdWNjZXNzKi8gfSk7XG4gICAgICAgICAgICBwcm9taXNlLmNhdGNoKChlcnJvcjogRE9NRXJyb3IpID0+IHsgRGVidWcuTG9nRXJyb3IoZXJyb3IpOyB9KTtcbiAgICAgICAgfWNhdGNoKGVycm9yKXtcbiAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBIYW5kbGVJbmNvbWluZ1NpZ25hbGluZygpOiB2b2lkIHtcblxuICAgICAgICAvL2hhbmRsZSB0aGUgaW5jb21pbmcgbWVzc2FnZXMgYWxsIGF0IG9uY2VcbiAgICAgICAgd2hpbGUgKHRoaXMubUluY29taW5nU2lnbmFsaW5nUXVldWUuQ291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIGxldCBtc2dTdHJpbmc6IHN0cmluZyA9IHRoaXMubUluY29taW5nU2lnbmFsaW5nUXVldWUuRGVxdWV1ZSgpO1xuXG4gICAgICAgICAgICBsZXQgcmFuZG9tTnVtYmVyID0gSGVscGVyLnRyeVBhcnNlSW50KG1zZ1N0cmluZyk7XG4gICAgICAgICAgICBpZiAocmFuZG9tTnVtYmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvL3dhcyBhIHJhbmRvbSBudW1iZXIgZm9yIHNpZ25hbGluZyBuZWdvdGlhdGlvblxuXG4gICAgICAgICAgICAgICAgLy9pZiB0aGlzIHBlZXIgdXNlcyBuZWdvdGlhdGlvbiBhcyB3ZWxsIHRoZW5cbiAgICAgICAgICAgICAgICAvL3RoaXMgd291bGQgYmUgdHJ1ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1EaWRTZW5kUmFuZG9tTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vbm8gcGVlciBpcyBzZXQgdG8gc3RhcnQgc2lnbmFsaW5nIC0+IHRoZSBvbmUgd2l0aCB0aGUgYmlnZ2VyIG51bWJlciBzdGFydHNcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZG9tTnVtYmVyIDwgdGhpcy5tUmFuZG9tTnVtZXJTZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL293biBkaWNlZCBudW1iZXIgd2FzIGJpZ2dlciAtPiBzdGFydCBzaWduYWxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIFNMb2cuTChcIlNpZ25hbGluZyBuZWdvdGlhdGlvbiBjb21wbGV0ZS4gU3RhcnRpbmcgc2lnbmFsaW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuU3RhcnRTaWduYWxpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyYW5kb21OdW1iZXIgPT0gdGhpcy5tUmFuZG9tTnVtZXJTZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NhbWUgbnVtYmVycy4gcmVzdGFydCB0aGUgcHJvY2Vzc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5OZWdvdGlhdGVTaWduYWxpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vd2FpdCBmb3Igb3RoZXIgcGVlciB0byBzdGFydCBzaWduYWxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIFNMb2cuTChcIlNpZ25hbGluZyBuZWdvdGlhdGlvbiBjb21wbGV0ZS4gV2FpdGluZyBmb3Igc2lnbmFsaW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vaWdub3JlLiB0aGlzIHBlZXIgc3RhcnRzIHNpZ25hbGluZyBhdXRvbWF0aWNhbGx5IGFuZCBkb2Vzbid0IHVzZSB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vbmVnb3RpYXRpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL211c3QgYmUgYSB3ZWJydGMgc2lnbmFsaW5nIG1lc3NhZ2UgdXNpbmcgZGVmYXVsdCBqc29uIGZvcm1hdHRpbmdcblxuICAgICAgICAgICAgICAgIGxldCBtc2c6IGFueSA9IEpTT04ucGFyc2UobXNnU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAobXNnLnNkcCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBzZHA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obXNnIGFzIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbkluaXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2RwLnR5cGUgPT0gJ29mZmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5DcmVhdGVBbnN3ZXIoc2RwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB7ICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXRUaW1lb3V0KCgpID0+IHsgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlJlY0Fuc3dlcihzZHApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGljZTogUlRDSWNlQ2FuZGlkYXRlID0gbmV3IFJUQ0ljZUNhbmRpZGF0ZShtc2cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWNlICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5tUmVhZHlGb3JJY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9leHBlY3RlZCBub3JtYWwgYmVoYXZpb3VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGRJY2VDYW5kaWRhdGUoaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2FmYXJpIHNvbWV0aW1lcyBzZW5kcyBpY2UgY2FuZGlkYXRlcyBiZWZvcmUgdGhlIGFuc3dlciBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jYXVzaW5nIGZpcmVmb3ggdG8gdHJpZ2dlciBhbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYnVmZmVyIGFuZCByZWVtaXQgb25jZSBzZXRSZW1vdGVDYW5kaWRhdGUgaGFzIGJlZW4gY2FsbGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5CdWZmZXJJY2VDYW5kaWRhdGUoaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIEFkZFNpZ25hbGluZ01lc3NhZ2UobXNnOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgRGVidWcuTG9nKFwiaW5jb21pbmcgU2lnbmFsaW5nIG1lc3NhZ2UgXCIgKyBtc2cpO1xuICAgICAgICB0aGlzLm1JbmNvbWluZ1NpZ25hbGluZ1F1ZXVlLkVucXVldWUobXNnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgRGVxdWV1ZVNpZ25hbGluZ01lc3NhZ2UoLypvdXQqLyAgbXNnOiBPdXRwdXQ8c3RyaW5nPik6IGJvb2xlYW4ge1xuXG4gICAgICAgIC8vbG9jayBtaWdodCBiZSBub3QgdGhlIGJlc3Qgd2F5IHRvIGRlYWwgd2l0aCB0aGlzXG4gICAgICAgIC8vbG9jayhtT3V0Z29pbmdTaWduYWxpbmdRdWV1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMubU91dGdvaW5nU2lnbmFsaW5nUXVldWUuQ291bnQoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBtc2cudmFsID0gdGhpcy5tT3V0Z29pbmdTaWduYWxpbmdRdWV1ZS5EZXF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtc2cudmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIEVucXVldWVPdXRnb2luZyhtc2c6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvL2xvY2sobU91dGdvaW5nU2lnbmFsaW5nUXVldWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIERlYnVnLkxvZyhcIk91dGdvaW5nIFNpZ25hbGluZyBtZXNzYWdlIFwiICsgbXNnKTtcbiAgICAgICAgICAgIHRoaXMubU91dGdvaW5nU2lnbmFsaW5nUXVldWUuRW5xdWV1ZShtc2cpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgU3RhcnRTaWduYWxpbmcoKTogdm9pZCB7XG5cbiAgICAgICAgdGhpcy5PblN0YXJ0U2lnbmFsaW5nKCk7XG4gICAgICAgIHRoaXMuQ3JlYXRlT2ZmZXIoKTtcbiAgICB9XG4gICAgcHVibGljIE5lZ290aWF0ZVNpZ25hbGluZygpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBuYiA9IFJhbmRvbS5nZXRSYW5kb21JbnQoMCwgMjE0NzQ4MzY0Nyk7XG4gICAgICAgIHRoaXMubVJhbmRvbU51bWVyU2VudCA9IG5iO1xuICAgICAgICB0aGlzLm1EaWRTZW5kUmFuZG9tTnVtYmVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5FbnF1ZXVlT3V0Z29pbmcoXCJcIiArIG5iKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIENyZWF0ZU9mZmVyKCk6IHZvaWQge1xuICAgICAgICBEZWJ1Zy5Mb2coXCJDcmVhdGVPZmZlclwiKTtcblxuICAgICAgICBcblxuXG4gICAgICAgIGxldCBjcmVhdGVPZmZlclByb21pc2UgPSB0aGlzLm1QZWVyLmNyZWF0ZU9mZmVyKHRoaXMubU9mZmVyT3B0aW9ucyk7XG4gICAgICAgIGNyZWF0ZU9mZmVyUHJvbWlzZS50aGVuKChkZXNjX2luOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIGxldCBkZXNjX291dCA9IHRoaXMuUHJvY0xvY2FsU2RwKGRlc2NfaW4pO1xuICAgICAgICAgICAgbGV0IG1zZzogc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGVzY19vdXQpO1xuXG4gICAgICAgICAgICBsZXQgc2V0RGVzY1Byb21pc2UgPSB0aGlzLm1QZWVyLnNldExvY2FsRGVzY3JpcHRpb24oZGVzY19pbik7XG5cbiAgICAgICAgICAgIHNldERlc2NQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuUnRjU2V0U2lnbmFsaW5nU3RhcnRlZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuRW5xdWV1ZU91dGdvaW5nKG1zZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldERlc2NQcm9taXNlLmNhdGNoKChlcnJvcjogRE9NRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBEZWJ1Zy5Mb2dFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgRGVidWcuTG9nRXJyb3IoXCJFcnJvciBkdXJpbmcgc2V0TG9jYWxEZXNjcmlwdGlvbiB3aXRoIHNkcDogXCIgKyBKU09OLnN0cmluZ2lmeShkZXNjX2luKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5SdGNTZXRTaWduYWxpbmdGYWlsZWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgY3JlYXRlT2ZmZXJQcm9taXNlLmNhdGNoKChlcnJvcjogRE9NRXJyb3IpID0+IHtcbiAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuUnRjU2V0U2lnbmFsaW5nRmFpbGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vR2l2ZXMgYSBzcGVjaWZpYyBjb2RlYyBwcmlvcml0eSBvdmVyIHRoZSBvdGhlcnNcbiAgICBwcml2YXRlIEVkaXRDb2RlY3MobGluZXM6IHN0cmluZ1tdKXtcblxuICAgICAgICBsZXQgcHJlZkNvZGVjID0gXCJIMjY0XCI7XG4gICAgICAgIGNvbnNvbGUud2FybihcInNkcCBtdW5naW5nOiBwcmlvcml0aXppbmcgY29kZWMgXCIgKyBwcmVmQ29kZWMpO1xuXG4gICAgICAgIC8vaW5kZXggYW5kIGxpc3Qgb2YgYWxsIHZpZGVvIGNvZGVjIGlkJ3NcbiAgICAgICAgLy9lLmcuOiBtPXZpZGVvIDkgVURQL1RMUy9SVFAvU0FWUEYgOTYgOTcgOTggOTkgMTAwIDEwMSAxMDIgMTIxIDEyNyAxMjAgMTI1IDEwNyAxMDggMTA5IDM1IDM2IDEyNCAxMTkgMTIzIDExOCAxMTQgMTE1IDExNlxuICAgICAgICBsZXQgdmNvZGVjc19saW5lX2luZGV4O1xuICAgICAgICBsZXQgdmNvZGVjc19saW5lX3NwbGl0OiBzdHJpbmdbXTtcbiAgICAgICAgbGV0IHZjb2RlY3NfbGlzdCA6IHN0cmluZ1tdO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgIGlmKGxpbmUuc3RhcnRzV2l0aChcIm09dmlkZW9cIikpe1xuICAgICAgICAgICAgICAgIHZjb2RlY3NfbGluZV9zcGxpdD0gbGluZS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgdmNvZGVjc19saXN0PSB2Y29kZWNzX2xpbmVfc3BsaXQuc2xpY2UoMywgdmNvZGVjc19saW5lX3NwbGl0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmNvZGVjc19saW5lX2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHZjb2RlY3NfbGlzdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9saXN0IG9mIHZpZGVvIGNvZGVjcyBwb3NpdGlvbmVkIGJhc2VkIG9uIG91ciBwcmlvcml0eSBsaXN0XG4gICAgICAgIGxldCB2Y29kZWNzX2xpc3RfbmV3IDogc3RyaW5nW10gPSBbXSA7XG4gICAgICAgIC8vc3RhcnQgYmVsb3cgdGhlIHRoZSBtPXZpZGVvIGxpbmVcbiAgICAgICAgZm9yKGxldCBpID0gdmNvZGVjc19saW5lX2luZGV4ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICBsZXQgcHJlZml4ID0gXCJhPXJ0cG1hcDpcIjtcbiAgICAgICAgICAgIGlmKGxpbmUuc3RhcnRzV2l0aChwcmVmaXgpKXtcbiAgICAgICAgICAgICAgICBsZXQgc3VibGluZSA9IGxpbmUuc3Vic3RyKHByZWZpeC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGxldCBzcGxpdCA9IHN1YmxpbmUuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlY0lkID0gc3BsaXRbMF07XG4gICAgICAgICAgICAgICAgbGV0IGNvZGVjRGVzYyA9IHNwbGl0WzFdO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlY1NwbGl0PSBjb2RlY0Rlc2Muc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlY05hbWUgPSBjb2RlY1NwbGl0WzBdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vc2FuaXR5IGNoZWNrLiBpcyB0aGlzIGEgdmlkZW8gY29kZWM/XG4gICAgICAgICAgICAgICAgaWYodmNvZGVjc19saXN0LmluY2x1ZGVzKGNvZGVjSWQpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29kZWNOYW1lID09PSBwcmVmQ29kZWMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmNvZGVjc19saXN0X25ldy51bnNoaWZ0KGNvZGVjSWQpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZjb2RlY3NfbGlzdF9uZXcucHVzaChjb2RlY0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL2ZpcnN0IDMgZWxlbWVudHMgcmVtYWluIHRoZSBzYW1lXG4gICAgICAgIGxldCB2Y29kZWNzX2xpbmVfbmV3ID0gdmNvZGVjc19saW5lX3NwbGl0WzBdICsgXCIgXCIgKyB2Y29kZWNzX2xpbmVfc3BsaXRbMV0gKyBcIiBcIiArIHZjb2RlY3NfbGluZV9zcGxpdFsyXTtcbiAgICAgICAgLy9hZGQgbmV3IGNvZGVjIGxpc3QgYWZ0ZXIgaXRcbiAgICAgICAgdmNvZGVjc19saXN0X25ldy5mb3JFYWNoKCh4KT0+e3Zjb2RlY3NfbGluZV9uZXcgPSB2Y29kZWNzX2xpbmVfbmV3ICsgXCIgXCIgKyB4fSk7XG4gICAgICAgIC8vcmVwbGFjZSBvbGQgbGluZVxuICAgICAgICBsaW5lc1t2Y29kZWNzX2xpbmVfaW5kZXhdID0gdmNvZGVjc19saW5lX25ldztcbiAgICB9XG5cbiAgICAvL1JlcGxhY2VzIEgyNjQgcHJvZmlsZSBsZXZlbHNcbiAgICAvL2lPUyB3b3JrYXJvdW5kLiBTdHJlYW1pbmcgZnJvbSBpT1MgdG8gYnJvd3NlciBjdXJyZW50bHkgZmFpbHMgd2l0aG91dCB0aGlzIGlmXG4gICAgLy9yZXNvbHV0aW9uIGlzIGFib3ZlIDcyMHAgYW5kIGgyNjQgaXMgYWN0aXZlXG4gICAgcHJpdmF0ZSBFZGl0UHJvZmlsZUxldmVsKGxpbmVzOiBzdHJpbmdbXSl7XG4gICAgICAgIGNvbnN0IHRhcmdldF9wcm9maWxlX2xldmVsX2lkID0gXCIyYVwiO1xuICAgICAgICAvL1RPRE86IE1ha2Ugc3VyZSB3ZSBvbmx5IGVkaXQgSDI2NC4gVGhlcmUgY291bGQgYmUgb3RoZXIgY29kZWNzIGluIHRoZSBmdXR1cmVcbiAgICAgICAgLy90aGF0IGxvb2sgaWRlbnRpY2FsXG4gICAgICAgIGNvbnNvbGUud2FybihcInNkcCBtdW5naW5nOiByZXBsYWNpbmcgaDI2NCBwcm9maWxlLWxldmVsIHdpdGggXCIgKyB0YXJnZXRfcHJvZmlsZV9sZXZlbF9pZCk7XG4gICAgICAgIGxldCB2Y29kZWNzX2xpbmVfaW5kZXg7XG4gICAgICAgIGxldCB2Y29kZWNzX2xpbmVfc3BsaXQ6IHN0cmluZ1tdO1xuICAgICAgICBsZXQgdmNvZGVjc19saXN0IDogc3RyaW5nW107XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBsZXQgbGluZSA9IGxpbmVzW2ldO1xuICAgICAgICAgICAgaWYobGluZS5zdGFydHNXaXRoKFwiYT1mbXRwOlwiKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL2xvb2tpbmcgZm9yIHByb2ZpbGUtbGV2ZWwtaWQ9NDIwMDFmXG4gICAgICAgICAgICAgICAgLy93ZSByZXBsYWNlIHRoZSAxZlxuICAgICAgICAgICAgICAgIGxldCBzZWFyY2hTdHJpbmcgPSBcInByb2ZpbGUtbGV2ZWwtaWQ9XCI7XG4gICAgICAgICAgICAgICAgbGV0IHN1YmxpbmVzID0gbGluZS5zcGxpdChcIjtcIik7XG4gICAgICAgICAgICAgICAgbGV0IHVwZGF0ZUxpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGsgPSAwOyBrIDwgc3VibGluZXMubGVuZ3RoOyBrKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3VibGluZSA9IHN1YmxpbmVzW2tdO1xuICAgICAgICAgICAgICAgICAgICBpZihzdWJsaW5lLnN0YXJ0c1dpdGgoc2VhcmNoU3RyaW5nKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGVuID0gc2VhcmNoU3RyaW5nLmxlbmd0aCArIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJsaW5lc1trXSA9IHN1YmxpbmVzW2tdLnN1YnN0cigwLCBsZW4pICsgdGFyZ2V0X3Byb2ZpbGVfbGV2ZWxfaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHVwZGF0ZUxpbmUpe1xuICAgICAgICAgICAgICAgICAgICBsaW5lc1tpXSA9IHN1YmxpbmVzLmpvaW4oXCI7XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBNVU5HRV9TRFAgPSBmYWxzZTtcbiAgICBcbiAgICBwcml2YXRlIFByb2NMb2NhbFNkcChkZXNjOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pIDpSVENTZXNzaW9uRGVzY3JpcHRpb24ge1xuICAgICAgICBpZihBV2ViUnRjUGVlci5NVU5HRV9TRFAgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIGRlc2NcblxuICAgICAgICBjb25zb2xlLndhcm4oXCJzZHAgbXVuZ2luZyBhY3RpdmVcIik7XG4gICAgICAgIGxldCBzZHBfaW4gPSBkZXNjLnNkcDtcbiAgICAgICAgbGV0IHNkcF9vdXQgPSBcIlwiO1xuICAgICAgICBsZXQgbGluZXMgPSBzZHBfaW4uc3BsaXQoXCJcXHJcXG5cIik7XG5cbiAgICAgICAgdGhpcy5FZGl0Q29kZWNzKGxpbmVzKTtcbiAgICAgICAgLy90aGlzLkVkaXRQcm9maWxlTGV2ZWwobGluZXMpO1xuXG4gICAgICAgIHNkcF9vdXQgPSBsaW5lcy5qb2luKFwiXFxyXFxuXCIpO1xuICAgICAgICBsZXQgZGVzY19vdXQgPSB7dHlwZTogZGVzYy50eXBlLCBzZHA6IHNkcF9vdXR9IGFzIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlc2Nfb3V0O1xuICAgIH1cbiAgICBwcml2YXRlIFByb2NSZW1vdGVTZHAoZGVzYzogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbntcbiAgICAgICAgaWYoQVdlYlJ0Y1BlZXIuTVVOR0VfU0RQID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiBkZXNjO1xuICAgICAgICAvL2NvbnNvbGUud2FybihcInNkcCBtdW5naW5nIGFjdGl2ZVwiKTtcbiAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIENyZWF0ZUFuc3dlcihvZmZlcjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKTogdm9pZCB7XG4gICAgICAgIERlYnVnLkxvZyhcIkNyZWF0ZUFuc3dlclwiKTtcbiAgICAgICAgXG4gICAgICAgIG9mZmVyID0gdGhpcy5Qcm9jUmVtb3RlU2RwKG9mZmVyKTtcbiAgICAgICAgbGV0IHJlbW90ZURlc2NQcm9taXNlID0gdGhpcy5tUGVlci5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgIHJlbW90ZURlc2NQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5TdGFydEljZSgpO1xuICAgICAgICAgICAgbGV0IGNyZWF0ZUFuc3dlclByb21pc2UgPSB0aGlzLm1QZWVyLmNyZWF0ZUFuc3dlcigpO1xuICAgICAgICAgICAgY3JlYXRlQW5zd2VyUHJvbWlzZS50aGVuKChkZXNjX2luOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGVzY19vdXQgPSB0aGlzLlByb2NMb2NhbFNkcChkZXNjX2luKTtcbiAgICAgICAgICAgICAgICBsZXQgbXNnOiBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkZXNjX291dCk7XG4gICAgICAgICAgICAgICAgbGV0IGxvY2FsRGVzY1Byb21pc2UgPSB0aGlzLm1QZWVyLnNldExvY2FsRGVzY3JpcHRpb24oZGVzY19pbik7XG4gICAgICAgICAgICAgICAgbG9jYWxEZXNjUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5SdGNTZXRTaWduYWxpbmdTdGFydGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRW5xdWV1ZU91dGdvaW5nKG1zZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbG9jYWxEZXNjUHJvbWlzZS5jYXRjaCgoZXJyb3I6IERPTUVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5SdGNTZXRTaWduYWxpbmdGYWlsZWQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3JlYXRlQW5zd2VyUHJvbWlzZS5jYXRjaCggKGVycm9yOiBET01FcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLlJ0Y1NldFNpZ25hbGluZ0ZhaWxlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbW90ZURlc2NQcm9taXNlLmNhdGNoKChlcnJvcjogRE9NRXJyb3IpID0+IHtcbiAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuUnRjU2V0U2lnbmFsaW5nRmFpbGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBSZWNBbnN3ZXIoYW5zd2VyOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pOiB2b2lkIHtcbiAgICAgICAgRGVidWcuTG9nKFwiUmVjQW5zd2VyXCIpO1xuICAgICAgICBhbnN3ZXIgPSB0aGlzLlByb2NSZW1vdGVTZHAoYW5zd2VyKTtcbiAgICAgICAgbGV0IHJlbW90ZURlc2NQcm9taXNlID0gdGhpcy5tUGVlci5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICByZW1vdGVEZXNjUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vYWxsIGRvbmVcbiAgICAgICAgICAgIHRoaXMuU3RhcnRJY2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbW90ZURlc2NQcm9taXNlLmNhdGNoKChlcnJvcjogRE9NRXJyb3IpID0+IHtcbiAgICAgICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuUnRjU2V0U2lnbmFsaW5nRmFpbGVkKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBwcml2YXRlIFJ0Y1NldFNpZ25hbGluZ1N0YXJ0ZWQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLm1SdGNJbnRlcm5hbFN0YXRlID09IFdlYlJ0Y0ludGVybmFsU3RhdGUuTm9uZSkge1xuICAgICAgICAgICAgdGhpcy5tUnRjSW50ZXJuYWxTdGF0ZSA9IFdlYlJ0Y0ludGVybmFsU3RhdGUuU2lnbmFsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RlZCBSdGNTZXRTaWduYWxpbmdGYWlsZWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPSBXZWJSdGNJbnRlcm5hbFN0YXRlLlNpZ25hbGluZ0ZhaWxlZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgUnRjU2V0Q29ubmVjdGVkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tUnRjSW50ZXJuYWxTdGF0ZSA9PSBXZWJSdGNJbnRlcm5hbFN0YXRlLlNpZ25hbGluZylcbiAgICAgICAgICAgIHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPSBXZWJSdGNJbnRlcm5hbFN0YXRlLkNvbm5lY3RlZDtcbiAgICB9XG4gICAgcHJvdGVjdGVkIFJ0Y1NldENsb3NlZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPT0gV2ViUnRjSW50ZXJuYWxTdGF0ZS5Db25uZWN0ZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIERlYnVnLkxvZyhcInRyaWdnZXJpbmcgY2xvc3VyZVwiKTtcbiAgICAgICAgICAgIHRoaXMubVJ0Y0ludGVybmFsU3RhdGUgPSBXZWJSdGNJbnRlcm5hbFN0YXRlLkNsb3NlZDtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgfVxuXG4gICAgXG5cbiAgICBwcml2YXRlIE9uSWNlQ2FuZGlkYXRlID0gKGV2OiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KTogdm9pZCA9PlxuICAgIHtcbiAgICAgICAgaWYgKGV2ICYmIGV2LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IGV2LmNhbmRpZGF0ZTtcbiAgICAgICAgICAgIGxldCBtc2c6IHN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB0aGlzLkVucXVldWVPdXRnb2luZyhtc2cpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIE9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlID0gKGV2OiBFdmVudCk6IHZvaWQgPT5cbiAgICB7XG4gICAgICAgIERlYnVnLkxvZyhcIm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlOiBcIiArIHRoaXMubVBlZXIuaWNlQ29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgLy9DaHJvbWUgc3RvcHBlZCBlbWl0dGluZyBcImZhaWxlZFwiIGV2ZW50cy4gV2UgaGF2ZSB0byByZWFjdCB0byBkaXNjb25uZWN0ZWQgZXZlbnRzIG5vd1xuICAgICAgICBpZiAodGhpcy5tUGVlci5pY2VDb25uZWN0aW9uU3RhdGUgPT0gXCJmYWlsZWRcIiB8fCB0aGlzLm1QZWVyLmljZUNvbm5lY3Rpb25TdGF0ZSA9PSBcImRpc2Nvbm5lY3RlZFwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0aGlzLm1TdGF0ZSA9PSBXZWJSdGNQZWVyU3RhdGUuU2lnbmFsaW5nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuUnRjU2V0U2lnbmFsaW5nRmFpbGVkKCk7XG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzLm1TdGF0ZSA9PSBXZWJSdGNQZWVyU3RhdGUuQ29ubmVjdGVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuUnRjU2V0Q2xvc2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgIFNvIGZhciB1c2VsZXNzLiBuZXZlciB0cmlnZ2VyZWQgaW4gZmlyZWZveC5cbiAgICBJbiBDaHJvbWUgaXQgdHJpZ2dlcnMgdG9nZXRoZXIgd2l0aCB0aGUgRGF0YUNoYW5uZWxzIG9wZW5pbmcgd2hpY2ggbWlnaHQgYmUgbW9yZSB1c2VmdWwgaW4gdGhlIGZ1dHVyZVxuICAgICovXG4gICAgcHJpdmF0ZSBPbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZSA9IChldjpFdmVudCk6IHZvaWQgPT5cbiAgICB7XG4gICAgICAgIERlYnVnLkxvZyhcIm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlOiBcIiArIHRoaXMubVBlZXIuaWNlQ29ubmVjdGlvblN0YXRlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIE9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSAoZXY6RXZlbnQpOiB2b2lkID0+XG4gICAge1xuICAgICAgICBEZWJ1Zy5Mb2coXCJvbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlOiBcIiArIHRoaXMubVBlZXIuaWNlR2F0aGVyaW5nU3RhdGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgT25SZW5lZ290aWF0aW9uTmVlZGVkID0gKGV2OkV2ZW50KTogdm9pZCA9PlxuICAgIHtcblxuICAgIH1cblxuICAgIC8vYnJva2VuIGluIGNocm9tZS4gd29uJ3Qgc3dpdGNoIHRvIGNsb3NlZCBhbnltb3JlXG4gICAgcHJpdmF0ZSBPblNpZ25hbGluZ0NoYW5nZSA9IChldjpFdmVudCk6IHZvaWQgPT5cbiAgICB7XG4gICAgICAgIERlYnVnLkxvZyhcIm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U6XCIgKyB0aGlzLm1QZWVyLnNpZ25hbGluZ1N0YXRlKTtcbiAgICAgICAgLy9vYnNvbGV0ZVxuICAgICAgICBpZiAodGhpcy5tUGVlci5zaWduYWxpbmdTdGF0ZSA9PSBcImNsb3NlZFwiKSB7XG4gICAgICAgICAgICB0aGlzLlJ0Y1NldENsb3NlZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2ViUnRjRGF0YVBlZXIgZXh0ZW5kcyBBV2ViUnRjUGVlciB7XG5cbiAgICBwcml2YXRlIG1Db25uZWN0aW9uSWQ6IENvbm5lY3Rpb25JZDtcbiAgICBwdWJsaWMgZ2V0IENvbm5lY3Rpb25JZCgpOiBDb25uZWN0aW9uSWQge1xuICAgICAgICByZXR1cm4gdGhpcy5tQ29ubmVjdGlvbklkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbUluZm86IFNpZ25hbGluZ0luZm8gPSBudWxsO1xuICAgIHB1YmxpYyBnZXQgU2lnbmFsaW5nSW5mbygpOiBTaWduYWxpbmdJbmZvIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubUluZm87XG4gICAgfVxuICAgIHB1YmxpYyBTZXRTaWduYWxpbmdJbmZvKGluZm86IFNpZ25hbGluZ0luZm8pIHtcbiAgICAgICAgdGhpcy5tSW5mbyA9IGluZm87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtRXZlbnRzOiBRdWV1ZTxOZXR3b3JrRXZlbnQ+ID0gbmV3IFF1ZXVlPE5ldHdvcmtFdmVudD4oKTtcblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc0xhYmVsUmVsaWFibGU6IHN0cmluZyA9IFwicmVsaWFibGVcIjtcbiAgICBwcml2YXRlIHN0YXRpYyBzTGFiZWxVbnJlbGlhYmxlOiBzdHJpbmcgPSBcInVucmVsaWFibGVcIjtcbiAgICBwcml2YXRlIG1SZWxpYWJsZURhdGFDaGFubmVsUmVhZHk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIG1VbnJlbGlhYmxlRGF0YUNoYW5uZWxSZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBtUmVsaWFibGVEYXRhQ2hhbm5lbDogUlRDRGF0YUNoYW5uZWw7XG4gICAgcHJpdmF0ZSBtVW5yZWxpYWJsZURhdGFDaGFubmVsOiBSVENEYXRhQ2hhbm5lbDtcblxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGlkOiBDb25uZWN0aW9uSWQsIHJ0Y0NvbmZpZzogUlRDQ29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihydGNDb25maWcpO1xuICAgICAgICB0aGlzLm1Db25uZWN0aW9uSWQgPSBpZDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgT25TZXR1cCgpOnZvaWQge1xuICAgICAgICB0aGlzLm1QZWVyLm9uZGF0YWNoYW5uZWwgPSAoZXY6IEV2ZW50KSA9PiB7IHRoaXMuT25EYXRhQ2hhbm5lbCgoZXYgYXMgYW55KS5jaGFubmVsKTsgfTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgT25TdGFydFNpZ25hbGluZygpOiB2b2lkIHtcblxuICAgICAgICBsZXQgY29uZmlnUmVsaWFibGU6IFJUQ0RhdGFDaGFubmVsSW5pdCA9IHt9IGFzIFJUQ0RhdGFDaGFubmVsSW5pdDtcbiAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbCA9IHRoaXMubVBlZXIuY3JlYXRlRGF0YUNoYW5uZWwoV2ViUnRjRGF0YVBlZXIuc0xhYmVsUmVsaWFibGUsIGNvbmZpZ1JlbGlhYmxlKTtcbiAgICAgICAgdGhpcy5SZWdpc3Rlck9ic2VydmVyUmVsaWFibGUoKTtcblxuICAgICAgICBsZXQgY29uZmlnVW5yZWxpYWJsZTogUlRDRGF0YUNoYW5uZWxJbml0ID0ge30gYXMgUlRDRGF0YUNoYW5uZWxJbml0O1xuICAgICAgICBjb25maWdVbnJlbGlhYmxlLm1heFJldHJhbnNtaXRzID0gMDtcbiAgICAgICAgY29uZmlnVW5yZWxpYWJsZS5vcmRlcmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbCA9IHRoaXMubVBlZXIuY3JlYXRlRGF0YUNoYW5uZWwoV2ViUnRjRGF0YVBlZXIuc0xhYmVsVW5yZWxpYWJsZSwgY29uZmlnVW5yZWxpYWJsZSk7XG4gICAgICAgIHRoaXMuUmVnaXN0ZXJPYnNlcnZlclVucmVsaWFibGUoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgT25DbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbCAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5jbG9zZSgpO1xuXG4gICAgICAgIGlmICh0aGlzLm1VbnJlbGlhYmxlRGF0YUNoYW5uZWwgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5jbG9zZSgpO1xuXG4gICAgICAgIC8vZG9udCBzZXQgdG8gbnVsbC4gaGFuZGxlcnMgd2lsbCBiZSBjYWxsZWQgbGF0ZXJcbiAgICB9XG5cbiAgICBwcml2YXRlIFJlZ2lzdGVyT2JzZXJ2ZXJSZWxpYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4geyB0aGlzLlJlbGlhYmxlRGF0YUNoYW5uZWxfT25NZXNzYWdlKGV2ZW50KTsgfTtcbiAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5vbm9wZW4gPSAoZXZlbnQ6IEV2ZW50KSA9PiB7IHRoaXMuUmVsaWFibGVEYXRhQ2hhbm5lbF9Pbk9wZW4oKTsgfTtcbiAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5vbmNsb3NlID0gKGV2ZW50OiBFdmVudCkgPT4geyB0aGlzLlJlbGlhYmxlRGF0YUNoYW5uZWxfT25DbG9zZSgpOyB9O1xuICAgICAgICB0aGlzLm1SZWxpYWJsZURhdGFDaGFubmVsLm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7IHRoaXMuUmVsaWFibGVEYXRhQ2hhbm5lbF9PbkVycm9yKFwiXCIpOyB9OyAvL3Nob3VsZCB0aGUgZXZlbnQganVzdCBiZSBhIHN0cmluZz9cbiAgICB9XG5cbiAgICBwcml2YXRlIFJlZ2lzdGVyT2JzZXJ2ZXJVbnJlbGlhYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1VbnJlbGlhYmxlRGF0YUNoYW5uZWwub25tZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHsgdGhpcy5VbnJlbGlhYmxlRGF0YUNoYW5uZWxfT25NZXNzYWdlKGV2ZW50KTsgfTtcbiAgICAgICAgdGhpcy5tVW5yZWxpYWJsZURhdGFDaGFubmVsLm9ub3BlbiA9IChldmVudDogRXZlbnQpID0+IHsgdGhpcy5VbnJlbGlhYmxlRGF0YUNoYW5uZWxfT25PcGVuKCk7IH07XG4gICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5vbmNsb3NlID0gKGV2ZW50OiBFdmVudCkgPT4geyB0aGlzLlVucmVsaWFibGVEYXRhQ2hhbm5lbF9PbkNsb3NlKCk7IH07XG4gICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5vbmVycm9yID0gKGV2ZW50OiBFdmVudCkgPT4geyB0aGlzLlVucmVsaWFibGVEYXRhQ2hhbm5lbF9PbkVycm9yKFwiXCIpOyB9Oy8vc2hvdWxkIHRoZSBldmVudCBqdXN0IGJlIGEgc3RyaW5nP1xuICAgIH1cblxuXG4gICAgcHVibGljIFNlbmREYXRhKGRhdGE6IFVpbnQ4QXJyYXksLyogb2Zmc2V0IDogbnVtYmVyLCBsZW5ndGggOiBudW1iZXIsKi8gcmVsaWFibGU6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICAgICAgLy9sZXQgYnVmZmVyOiBBcnJheUJ1ZmZlclZpZXcgPSBkYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKSBhcyBBcnJheUJ1ZmZlclZpZXc7XG4gICAgICAgIGxldCBidWZmZXI6IEFycmF5QnVmZmVyVmlldyA9IGRhdGEgYXMgQXJyYXlCdWZmZXJWaWV3O1xuICAgICAgICBsZXQgTUFYX1NFTkRfQlVGRkVSID0gMTAyNCAqIDEwMjQ7XG4gICAgICAgIC8vY2hyb21lIGJ1ZzogSWYgdGhlIGNoYW5uZWxzIGlzIGNsb3NlZCByZW1vdGVseSB0cm91Z2ggZGlzY29ubmVjdFxuICAgICAgICAvL3RoZW4gdGhlIGxvY2FsIGNoYW5uZWwgY2FuIGFwcGVhciBvcGVuIGJ1dCB3aWxsIHRocm93IGFuIGV4Y2VwdGlvblxuICAgICAgICAvL2lmIHNlbmQgaXMgY2FsbGVkXG4gICAgICAgIGxldCBzZW50U3VjY2Vzc2Z1bGx5ID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAocmVsaWFibGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSBcIm9wZW5cIilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYnVnZml4OiBXZWJSVEMgc2VlbXMgdG8gc2ltcGx5IGNsb3NlIHRoZSBkYXRhIGNoYW5uZWwgaWYgd2Ugc2VuZFxuICAgICAgICAgICAgICAgICAgICAvL3RvbyBtdWNoIGF0IG9uY2UuIGF2b2lkIHRoaXMgZnJvbSBub3cgb24gYnkgcmV0dXJuaW5nIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlIGJ1ZmZlciBnZXRzIHRvbyBmdWxsXG4gICAgICAgICAgICAgICAgICAgIGlmKCh0aGlzLm1SZWxpYWJsZURhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50ICsgYnVmZmVyLmJ5dGVMZW5ndGgpIDwgTUFYX1NFTkRfQlVGRkVSKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1SZWxpYWJsZURhdGFDaGFubmVsLnNlbmQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRTdWNjZXNzZnVsbHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSBcIm9wZW5cIilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCh0aGlzLm1VbnJlbGlhYmxlRGF0YUNoYW5uZWwuYnVmZmVyZWRBbW91bnQgKyBidWZmZXIuYnl0ZUxlbmd0aCkgPCBNQVhfU0VORF9CVUZGRVIpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5zZW5kKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW50U3VjY2Vzc2Z1bGx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgU0xvZy5Mb2dFcnJvcihcIkV4Y2VwdGlvbiB3aGlsZSB0cnlpbmcgdG8gc2VuZDogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VudFN1Y2Nlc3NmdWxseTtcbiAgICB9XG4gICAgcHVibGljIEdldEJ1ZmZlcmVkQW1vdW50KHJlbGlhYmxlOiBib29sZWFuKTogbnVtYmVyIHtcblxuICAgICAgICBsZXQgcmVzdWx0ID0gLTE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAocmVsaWFibGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSBcIm9wZW5cIilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMubVJlbGlhYmxlRGF0YUNoYW5uZWwuYnVmZmVyZWRBbW91bnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSBcIm9wZW5cIilcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbC5idWZmZXJlZEFtb3VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIFNMb2cuTG9nRXJyb3IoXCJFeGNlcHRpb24gd2hpbGUgdHJ5aW5nIHRvIGFjY2VzcyBHZXRCdWZmZXJlZEFtb3VudDogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHB1YmxpYyBEZXF1ZXVlRXZlbnQoLypvdXQqLyBldjogT3V0cHV0PE5ldHdvcmtFdmVudD4pOiBib29sZWFuIHtcbiAgICAgICAgLy9sb2NrKG1FdmVudHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1FdmVudHMuQ291bnQoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBldi52YWwgPSB0aGlzLm1FdmVudHMuRGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIEVucXVldWUoZXY6IE5ldHdvcmtFdmVudCk6IHZvaWQge1xuICAgICAgICAvL2xvY2sobUV2ZW50cylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tRXZlbnRzLkVucXVldWUoZXYpO1xuICAgICAgICB9XG5cbiAgICB9XG5cblxuXG4gICAgcHVibGljIE9uRGF0YUNoYW5uZWwoZGF0YV9jaGFubmVsOiBSVENEYXRhQ2hhbm5lbCk6IHZvaWQge1xuICAgICAgICBsZXQgbmV3Q2hhbm5lbCA9IGRhdGFfY2hhbm5lbDtcbiAgICAgICAgaWYgKG5ld0NoYW5uZWwubGFiZWwgPT0gV2ViUnRjRGF0YVBlZXIuc0xhYmVsUmVsaWFibGUpIHtcbiAgICAgICAgICAgIHRoaXMubVJlbGlhYmxlRGF0YUNoYW5uZWwgPSBuZXdDaGFubmVsO1xuICAgICAgICAgICAgdGhpcy5SZWdpc3Rlck9ic2VydmVyUmVsaWFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdDaGFubmVsLmxhYmVsID09IFdlYlJ0Y0RhdGFQZWVyLnNMYWJlbFVucmVsaWFibGUpIHtcbiAgICAgICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbCA9IG5ld0NoYW5uZWw7XG4gICAgICAgICAgICB0aGlzLlJlZ2lzdGVyT2JzZXJ2ZXJVbnJlbGlhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBEZWJ1Zy5Mb2dFcnJvcihcIkRhdGFjaGFubmVsIHdpdGggdW5leHBlY3RlZCBsYWJlbCBcIiArIG5ld0NoYW5uZWwubGFiZWwpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIFJ0Y09uTWVzc2FnZVJlY2VpdmVkKGV2ZW50OiBNZXNzYWdlRXZlbnQsIHJlbGlhYmxlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGxldCBldmVudFR5cGUgPSBOZXRFdmVudFR5cGUuVW5yZWxpYWJsZU1lc3NhZ2VSZWNlaXZlZDtcbiAgICAgICAgaWYgKHJlbGlhYmxlKSB7XG4gICAgICAgICAgICBldmVudFR5cGUgPSBOZXRFdmVudFR5cGUuUmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvL2FzeW5jIGNvbnZlcnNpb24gdG8gYmxvYi9hcnJheWJ1ZmZlciBoZXJlXG4gICAgICAgIGlmIChldmVudC5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcblxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlKG5ldyBOZXR3b3JrRXZlbnQoZXZlbnRUeXBlLCB0aGlzLm1Db25uZWN0aW9uSWQsIGJ1ZmZlcikpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgIHZhciBjb25uZWN0aW9uSWQgPSB0aGlzLm1Db25uZWN0aW9uSWQ7XG4gICAgICAgICAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICB2YXIgc2VsZjogV2ViUnRjRGF0YVBlZXIgPSB0aGlzO1xuICAgICAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9uZWVkIHRvIHVzZSBmdW5jdGlvbiBhcyB0aGlzIHBvaW50ZXIgaXMgbmVlZGVkIHRvIHJlZmVyZW5jZSB0byB0aGUgZGF0YVxuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5yZXN1bHQgYXMgQXJyYXlCdWZmZXI7XG4gICAgICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgICAgICAgICAgIHNlbGYuRW5xdWV1ZShuZXcgTmV0d29ya0V2ZW50KGV2ZW50VHlwZSwgc2VsZi5tQ29ubmVjdGlvbklkLCBidWZmZXIpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGV2ZW50LmRhdGEpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBEZWJ1Zy5Mb2dFcnJvcihcIkludmFsaWQgbWVzc2FnZSB0eXBlLiBPbmx5IGJsb2IgYW5kIGFycmF5YnVmZmVyIHN1cHBvcnRlZDogXCIgKyBldmVudC5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBSZWxpYWJsZURhdGFDaGFubmVsX09uTWVzc2FnZShldmVudDogTWVzc2FnZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIERlYnVnLkxvZyhcIlJlbGlhYmxlRGF0YUNoYW5uZWxfT25NZXNzYWdlIFwiKTtcbiAgICAgICAgdGhpcy5SdGNPbk1lc3NhZ2VSZWNlaXZlZChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBSZWxpYWJsZURhdGFDaGFubmVsX09uT3BlbigpOiB2b2lkIHtcbiAgICAgICAgRGVidWcuTG9nKFwibVJlbGlhYmxlRGF0YUNoYW5uZWxSZWFkeVwiKTtcbiAgICAgICAgdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbFJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuSXNSdGNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5SdGNTZXRDb25uZWN0ZWQoKTtcbiAgICAgICAgICAgIERlYnVnLkxvZyhcIkZ1bGx5IGNvbm5lY3RlZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgUmVsaWFibGVEYXRhQ2hhbm5lbF9PbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLlJ0Y1NldENsb3NlZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgUmVsaWFibGVEYXRhQ2hhbm5lbF9PbkVycm9yKGVycm9yTXNnOiBzdHJpbmcpIDogdm9pZFxuICAgIHtcbiAgICAgICAgRGVidWcuTG9nRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICB0aGlzLlJ0Y1NldENsb3NlZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgVW5yZWxpYWJsZURhdGFDaGFubmVsX09uTWVzc2FnZShldmVudDogTWVzc2FnZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIERlYnVnLkxvZyhcIlVucmVsaWFibGVEYXRhQ2hhbm5lbF9Pbk1lc3NhZ2UgXCIpO1xuICAgICAgICB0aGlzLlJ0Y09uTWVzc2FnZVJlY2VpdmVkKGV2ZW50LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBVbnJlbGlhYmxlRGF0YUNoYW5uZWxfT25PcGVuKCk6IHZvaWQge1xuICAgICAgICBEZWJ1Zy5Mb2coXCJtVW5yZWxpYWJsZURhdGFDaGFubmVsUmVhZHlcIik7XG4gICAgICAgIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbFJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuSXNSdGNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5SdGNTZXRDb25uZWN0ZWQoKTtcbiAgICAgICAgICAgIERlYnVnLkxvZyhcIkZ1bGx5IGNvbm5lY3RlZFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgVW5yZWxpYWJsZURhdGFDaGFubmVsX09uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuUnRjU2V0Q2xvc2VkKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBVbnJlbGlhYmxlRGF0YUNoYW5uZWxfT25FcnJvcihlcnJvck1zZzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIERlYnVnLkxvZ0Vycm9yKGVycm9yTXNnKTtcbiAgICAgICAgdGhpcy5SdGNTZXRDbG9zZWQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIElzUnRjQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tUmVsaWFibGVEYXRhQ2hhbm5lbFJlYWR5ICYmIHRoaXMubVVucmVsaWFibGVEYXRhQ2hhbm5lbFJlYWR5O1xuICAgIH1cblxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/network/WebRtcPeer.ts\n");

/***/ }),

/***/ "./src/awrtc/network/WebsocketNetwork.ts":
/*!***********************************************!*\
  !*** ./src/awrtc/network/WebsocketNetwork.ts ***!
  \***********************************************/
/*! exports provided: WebsocketConnectionStatus, WebsocketServerStatus, WebsocketNetwork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebsocketConnectionStatus\", function() { return WebsocketConnectionStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebsocketServerStatus\", function() { return WebsocketServerStatus; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WebsocketNetwork\", function() { return WebsocketNetwork; });\n/* harmony import */ var _INetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./INetwork */ \"./src/awrtc/network/INetwork.ts\");\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\n/*\nCopyright (c) 2021, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\nvar WebsocketConnectionStatus;\n(function (WebsocketConnectionStatus) {\n    WebsocketConnectionStatus[WebsocketConnectionStatus[\"Uninitialized\"] = 0] = \"Uninitialized\";\n    WebsocketConnectionStatus[WebsocketConnectionStatus[\"NotConnected\"] = 1] = \"NotConnected\";\n    WebsocketConnectionStatus[WebsocketConnectionStatus[\"Connecting\"] = 2] = \"Connecting\";\n    WebsocketConnectionStatus[WebsocketConnectionStatus[\"Connected\"] = 3] = \"Connected\";\n    WebsocketConnectionStatus[WebsocketConnectionStatus[\"Disconnecting\"] = 4] = \"Disconnecting\"; //server will shut down, all clients disconnect, ...\n})(WebsocketConnectionStatus || (WebsocketConnectionStatus = {}));\nvar WebsocketServerStatus;\n(function (WebsocketServerStatus) {\n    WebsocketServerStatus[WebsocketServerStatus[\"Offline\"] = 0] = \"Offline\";\n    WebsocketServerStatus[WebsocketServerStatus[\"Starting\"] = 1] = \"Starting\";\n    WebsocketServerStatus[WebsocketServerStatus[\"Online\"] = 2] = \"Online\";\n    WebsocketServerStatus[WebsocketServerStatus[\"ShuttingDown\"] = 3] = \"ShuttingDown\";\n})(WebsocketServerStatus || (WebsocketServerStatus = {}));\n//TODO: handle errors if the socket connection failed\n//+ send back failed events for connected / serverstart events that are buffered\nvar WebsocketNetwork = /** @class */ (function () {\n    function WebsocketNetwork(url, configuration) {\n        //currents status. will be updated based on update call\n        this.mStatus = WebsocketConnectionStatus.Uninitialized;\n        //queue to hold buffered outgoing messages\n        this.mOutgoingQueue = new Array();\n        //buffer for incoming messages\n        this.mIncomingQueue = new Array();\n        //Status of the server for incoming connections\n        this.mServerStatus = WebsocketServerStatus.Offline;\n        //outgoing connections (just need to be stored to allow to send out a failed message\n        //if the whole signaling connection fails\n        this.mConnecting = new Array();\n        this.mConnections = new Array();\n        //next free connection id\n        this.mNextOutgoingConnectionId = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](1);\n        /// <summary>\n        /// Assume 1 until message received\n        /// </summary>\n        this.mRemoteProtocolVersion = 1;\n        this.mUrl = null;\n        this.mHeartbeatReceived = true;\n        this.mIsDisposed = false;\n        this.mUrl = url;\n        this.mStatus = WebsocketConnectionStatus.NotConnected;\n        this.mConfig = configuration;\n        if (!this.mConfig)\n            this.mConfig = new WebsocketNetwork.Configuration();\n        this.mConfig.Lock();\n    }\n    WebsocketNetwork.prototype.getStatus = function () { return this.mStatus; };\n    ;\n    WebsocketNetwork.prototype.WebsocketConnect = function () {\n        var _this = this;\n        this.mStatus = WebsocketConnectionStatus.Connecting;\n        this.mSocket = new WebSocket(this.mUrl);\n        this.mSocket.binaryType = \"arraybuffer\";\n        this.mSocket.onopen = function () { _this.OnWebsocketOnOpen(); };\n        this.mSocket.onerror = function (error) { _this.OnWebsocketOnError(error); };\n        this.mSocket.onmessage = function (e) { _this.OnWebsocketOnMessage(e); };\n        this.mSocket.onclose = function (e) { _this.OnWebsocketOnClose(e); };\n    };\n    WebsocketNetwork.prototype.WebsocketCleanup = function () {\n        this.mSocket.onopen = null;\n        this.mSocket.onerror = null;\n        this.mSocket.onmessage = null;\n        this.mSocket.onclose = null;\n        if (this.mSocket.readyState == this.mSocket.OPEN\n            || this.mSocket.readyState == this.mSocket.CONNECTING) {\n            this.mSocket.close();\n        }\n        this.mSocket = null;\n    };\n    WebsocketNetwork.prototype.EnsureServerConnection = function () {\n        if (this.mStatus == WebsocketConnectionStatus.NotConnected) {\n            //no server\n            //no connection about to be established\n            //no current connections\n            //-> disconnect the server connection\n            this.WebsocketConnect();\n        }\n    };\n    WebsocketNetwork.prototype.UpdateHeartbeat = function () {\n        if (this.mStatus == WebsocketConnectionStatus.Connected && this.mConfig.Heartbeat > 0) {\n            var diff = Date.now() - this.mLastHeartbeat;\n            if (diff > (this.mConfig.Heartbeat * 1000)) {\n                //We trigger heatbeat timeouts only for protocol V2\n                //protocol 1 can receive the heatbeats but \n                //won't send a reply\n                //(still helpful to trigger TCP ACK timeout)\n                if (this.mRemoteProtocolVersion > 1\n                    && this.mHeartbeatReceived == false) {\n                    this.TriggerHeartbeatTimeout();\n                    return;\n                }\n                this.mLastHeartbeat = Date.now();\n                this.mHeartbeatReceived = false;\n                this.SendHeartbeat();\n            }\n        }\n    };\n    WebsocketNetwork.prototype.TriggerHeartbeatTimeout = function () {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L(\"Closing due to heartbeat timeout. Server didn't respond in time.\", WebsocketNetwork.LOGTAG);\n        this.Cleanup();\n    };\n    WebsocketNetwork.prototype.CheckSleep = function () {\n        if (this.mStatus == WebsocketConnectionStatus.Connected\n            && this.mServerStatus == WebsocketServerStatus.Offline\n            && this.mConnecting.length == 0\n            && this.mConnections.length == 0) {\n            //no server\n            //no connection about to be established\n            //no current connections\n            //-> disconnect the server connection\n            this.Cleanup();\n        }\n    };\n    WebsocketNetwork.prototype.OnWebsocketOnOpen = function () {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L('onWebsocketOnOpen', WebsocketNetwork.LOGTAG);\n        this.mStatus = WebsocketConnectionStatus.Connected;\n        this.mLastHeartbeat = Date.now();\n        this.SendVersion();\n    };\n    WebsocketNetwork.prototype.OnWebsocketOnClose = function (event) {\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].L('Closed: ' + JSON.stringify(event), WebsocketNetwork.LOGTAG);\n        if (event.code != 1000) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LE(\"Websocket closed with code: \" + event.code + \" \" + event.reason);\n        }\n        //ignore closed event if it was caused due to a shutdown (as that means we cleaned up already)\n        if (this.mStatus == WebsocketConnectionStatus.Disconnecting\n            || this.mStatus == WebsocketConnectionStatus.NotConnected)\n            return;\n        this.Cleanup();\n        this.mStatus = WebsocketConnectionStatus.NotConnected;\n    };\n    WebsocketNetwork.prototype.OnWebsocketOnMessage = function (event) {\n        if (this.mStatus == WebsocketConnectionStatus.Disconnecting\n            || this.mStatus == WebsocketConnectionStatus.NotConnected)\n            return;\n        //browsers will have ArrayBuffer in event.data -> change to byte array\n        var msg = new Uint8Array(event.data);\n        this.ParseMessage(msg);\n    };\n    WebsocketNetwork.prototype.OnWebsocketOnError = function (error) {\n        //the error event doesn't seem to have any useful information?\n        //browser is expected to call OnClose after this\n        console.error(\"Websocket triggered onerror: \", error);\n        _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LE('WebSocket Error. See browser log for more information. ' + JSON.stringify(error));\n    };\n    /// <summary>\n    /// called during Disconnecting state either trough server connection failed or due to Shutdown\n    /// \n    /// Also used to switch to sleeping mode. In this case there connection isn't used as\n    /// server and doesn't have any connections (established or connecting) thus\n    /// only WebsocketCleanup is in effect.\n    /// \n    /// WebsocketNetwork has to be still usable after this call like a newly\n    /// created connections (except with events in the message queue)\n    /// </summary>\n    WebsocketNetwork.prototype.Cleanup = function () {\n        //check if this was done already (or we are in the process of cleanup already)\n        if (this.mStatus == WebsocketConnectionStatus.Disconnecting\n            || this.mStatus == WebsocketConnectionStatus.NotConnected)\n            return;\n        this.mStatus = WebsocketConnectionStatus.Disconnecting;\n        //throw connection failed events for each connection in mConnecting\n        for (var _i = 0, _a = this.mConnecting; _i < _a.length; _i++) {\n            var conId = _a[_i];\n            //all connection it tries to establish right now fail due to shutdown\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ConnectionFailed, new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](conId), null));\n        }\n        this.mConnecting = new Array();\n        //throw disconnect events for all NewConnection events in the outgoing queue\n        //ignore messages and everything else\n        for (var _b = 0, _c = this.mConnections; _b < _c.length; _b++) {\n            var conId = _c[_b];\n            //all connection it tries to establish right now fail due to shutdown\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected, new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](conId), null));\n        }\n        this.mConnections = new Array();\n        if (this.mServerStatus == WebsocketServerStatus.Starting) {\n            //if server was Starting -> throw failed event\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, null));\n        }\n        else if (this.mServerStatus == WebsocketServerStatus.Online) {\n            //if server was Online -> throw close event\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, null));\n        }\n        else if (this.mServerStatus == WebsocketServerStatus.ShuttingDown) {\n            //if server was ShuttingDown -> throw close event (don't think this can happen)\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, null));\n        }\n        this.mServerStatus = WebsocketServerStatus.Offline;\n        this.mOutgoingQueue = new Array();\n        this.WebsocketCleanup();\n        this.mStatus = WebsocketConnectionStatus.NotConnected;\n    };\n    WebsocketNetwork.prototype.EnqueueOutgoing = function (evt) {\n        this.mOutgoingQueue.push(evt);\n    };\n    WebsocketNetwork.prototype.EnqueueIncoming = function (evt) {\n        this.mIncomingQueue.push(evt);\n    };\n    WebsocketNetwork.prototype.TryRemoveConnecting = function (id) {\n        var index = this.mConnecting.indexOf(id.id);\n        if (index != -1) {\n            this.mConnecting.splice(index, 1);\n        }\n    };\n    WebsocketNetwork.prototype.TryRemoveConnection = function (id) {\n        var index = this.mConnections.indexOf(id.id);\n        if (index != -1) {\n            this.mConnections.splice(index, 1);\n        }\n    };\n    WebsocketNetwork.prototype.ParseMessage = function (msg) {\n        if (msg.length == 0) {\n        }\n        else if (msg[0] == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].MetaVersion) {\n            if (msg.length > 1) {\n                this.mRemoteProtocolVersion = msg[1];\n            }\n            else {\n                _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LW(\"Received an invalid MetaVersion header without content.\");\n            }\n        }\n        else if (msg[0] == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].MetaHeartbeat) {\n            this.mHeartbeatReceived = true;\n        }\n        else {\n            var evt = _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"].fromByteArray(msg);\n            this.HandleIncomingEvent(evt);\n        }\n    };\n    WebsocketNetwork.prototype.HandleIncomingEvent = function (evt) {\n        if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection) {\n            //removing connecting info\n            this.TryRemoveConnecting(evt.ConnectionId);\n            //add connection\n            this.mConnections.push(evt.ConnectionId.id);\n        }\n        else if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ConnectionFailed) {\n            //remove connecting info\n            this.TryRemoveConnecting(evt.ConnectionId);\n        }\n        else if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected) {\n            //remove from connections\n            this.TryRemoveConnection(evt.ConnectionId);\n        }\n        else if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitialized) {\n            this.mServerStatus = WebsocketServerStatus.Online;\n        }\n        else if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed) {\n            this.mServerStatus = WebsocketServerStatus.Offline;\n        }\n        else if (evt.Type == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed) {\n            this.mServerStatus = WebsocketServerStatus.ShuttingDown;\n            //any cleaning up to do?\n            this.mServerStatus = WebsocketServerStatus.Offline;\n        }\n        this.EnqueueIncoming(evt);\n    };\n    WebsocketNetwork.prototype.HandleOutgoingEvents = function () {\n        while (this.mOutgoingQueue.length > 0) {\n            var evt = this.mOutgoingQueue.shift();\n            this.SendNetworkEvent(evt);\n        }\n    };\n    WebsocketNetwork.prototype.SendHeartbeat = function () {\n        var msg = new Uint8Array(1);\n        msg[0] = _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].MetaHeartbeat;\n        this.InternalSend(msg);\n    };\n    WebsocketNetwork.prototype.SendVersion = function () {\n        var msg = new Uint8Array(2);\n        msg[0] = _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].MetaVersion;\n        msg[1] = WebsocketNetwork.PROTOCOL_VERSION;\n        this.InternalSend(msg);\n    };\n    WebsocketNetwork.prototype.SendNetworkEvent = function (evt) {\n        var msg = _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"].toByteArray(evt);\n        this.InternalSend(msg);\n    };\n    WebsocketNetwork.prototype.InternalSend = function (msg) {\n        this.mSocket.send(msg);\n    };\n    WebsocketNetwork.prototype.NextConnectionId = function () {\n        var result = this.mNextOutgoingConnectionId;\n        this.mNextOutgoingConnectionId = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](this.mNextOutgoingConnectionId.id + 1);\n        return result;\n    };\n    WebsocketNetwork.prototype.GetRandomKey = function () {\n        var result = \"\";\n        for (var i = 0; i < 7; i++) {\n            result += String.fromCharCode(65 + Math.round(Math.random() * 25));\n        }\n        return result;\n    };\n    //interface implementation\n    WebsocketNetwork.prototype.Dequeue = function () {\n        if (this.mIncomingQueue.length > 0)\n            return this.mIncomingQueue.shift();\n        return null;\n    };\n    WebsocketNetwork.prototype.Peek = function () {\n        if (this.mIncomingQueue.length > 0)\n            return this.mIncomingQueue[0];\n        return null;\n    };\n    WebsocketNetwork.prototype.Update = function () {\n        this.UpdateHeartbeat();\n        this.CheckSleep();\n    };\n    WebsocketNetwork.prototype.Flush = function () {\n        //ideally we buffer everything and then flush when it is connected as\n        //websockets aren't suppose to be used for realtime communication anyway\n        if (this.mStatus == WebsocketConnectionStatus.Connected)\n            this.HandleOutgoingEvents();\n    };\n    WebsocketNetwork.prototype.SendData = function (id, data, /*offset: number, length: number,*/ reliable) {\n        if (id == null || id.id == _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID.id) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LW(\"Ignored message. Invalid connection id.\");\n            return;\n        }\n        if (data == null || data.length == 0) {\n            _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"].LW(\"Ignored message. Invalid data.\");\n            return;\n        }\n        var evt;\n        if (reliable) {\n            evt = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ReliableMessageReceived, id, data);\n        }\n        else {\n            evt = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].UnreliableMessageReceived, id, data);\n        }\n        this.EnqueueOutgoing(evt);\n        return true;\n    };\n    WebsocketNetwork.prototype.Disconnect = function (id) {\n        var evt = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].Disconnected, id, null);\n        this.EnqueueOutgoing(evt);\n    };\n    WebsocketNetwork.prototype.Shutdown = function () {\n        this.Cleanup();\n        this.mStatus = WebsocketConnectionStatus.NotConnected;\n    };\n    WebsocketNetwork.prototype.Dispose = function () {\n        if (this.mIsDisposed == false) {\n            this.Shutdown();\n            this.mIsDisposed = true;\n        }\n    };\n    WebsocketNetwork.prototype.StartServer = function (address) {\n        if (address == null) {\n            address = \"\" + this.GetRandomKey();\n        }\n        if (this.mServerStatus == WebsocketServerStatus.Offline) {\n            this.EnsureServerConnection();\n            this.mServerStatus = WebsocketServerStatus.Starting;\n            //TODO: address is a string but ubytearray is defined. will fail if binary\n            this.EnqueueOutgoing(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitialized, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, address));\n        }\n        else {\n            this.EnqueueIncoming(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerInitFailed, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, address));\n        }\n    };\n    WebsocketNetwork.prototype.StopServer = function () {\n        this.EnqueueOutgoing(new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].ServerClosed, _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"].INVALID, null));\n    };\n    WebsocketNetwork.prototype.Connect = function (address) {\n        this.EnsureServerConnection();\n        var newConId = this.NextConnectionId();\n        this.mConnecting.push(newConId.id);\n        var evt = new _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"](_INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"].NewConnection, newConId, address);\n        this.EnqueueOutgoing(evt);\n        return newConId;\n    };\n    WebsocketNetwork.LOGTAG = \"WebsocketNetwork\";\n    /// <summary>\n    /// Version of the protocol implemented here\n    /// </summary>\n    WebsocketNetwork.PROTOCOL_VERSION = 2;\n    /// <summary>\n    /// Minimal protocol version that is still supported.\n    /// V 1 servers won't understand heartbeat and version\n    /// messages but would just log an unknown message and\n    /// continue normally.\n    /// </summary>\n    WebsocketNetwork.PROTOCOL_VERSION_MIN = 1;\n    return WebsocketNetwork;\n}());\n\n(function (WebsocketNetwork) {\n    var Configuration = /** @class */ (function () {\n        function Configuration() {\n            this.mHeartbeat = 30;\n            this.mLocked = false;\n        }\n        Object.defineProperty(Configuration.prototype, \"Heartbeat\", {\n            get: function () {\n                return this.mHeartbeat;\n            },\n            set: function (value) {\n                if (this.mLocked) {\n                    throw new Error(\"Can't change configuration once used.\");\n                }\n                this.mHeartbeat = value;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Configuration.prototype.Lock = function () {\n            this.mLocked = true;\n        };\n        return Configuration;\n    }());\n    WebsocketNetwork.Configuration = Configuration;\n})(WebsocketNetwork || (WebsocketNetwork = {}));\n//Below tests only. Move out later\nfunction bufferToString(buffer) {\n    var arr = new Uint16Array(buffer.buffer, buffer.byteOffset, buffer.byteLength / 2);\n    return String.fromCharCode.apply(null, arr);\n}\nfunction stringToBuffer(str) {\n    var buf = new ArrayBuffer(str.length * 2);\n    var bufView = new Uint16Array(buf);\n    for (var i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    var result = new Uint8Array(buf);\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL1dlYnNvY2tldE5ldHdvcmsudHM/NjU0NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUNnRjtBQUNsRDtBQUVoQyxJQUFZLHlCQU1YO0FBTkQsV0FBWSx5QkFBeUI7SUFDakMsMkZBQWE7SUFDYix5RkFBWTtJQUNaLHFGQUFVO0lBQ1YsbUZBQVM7SUFDVCwyRkFBYSxFQUFDLG9EQUFvRDtBQUN0RSxDQUFDLEVBTlcseUJBQXlCLEtBQXpCLHlCQUF5QixRQU1wQztBQUVELElBQVkscUJBS1g7QUFMRCxXQUFZLHFCQUFxQjtJQUM3Qix1RUFBTztJQUNQLHlFQUFRO0lBQ1IscUVBQU07SUFDTixpRkFBWTtBQUNoQixDQUFDLEVBTFcscUJBQXFCLEtBQXJCLHFCQUFxQixRQUtoQztBQUdELHFEQUFxRDtBQUNyRCxnRkFBZ0Y7QUFDaEY7SUFzREksMEJBQW1CLEdBQVcsRUFBRSxhQUE2QztRQS9DN0UsdURBQXVEO1FBQy9DLFlBQU8sR0FBRyx5QkFBeUIsQ0FBQyxhQUFhLENBQUM7UUFHMUQsMENBQTBDO1FBQ2xDLG1CQUFjLEdBQUcsSUFBSSxLQUFLLEVBQWdCLENBQUM7UUFFbkQsOEJBQThCO1FBQ3RCLG1CQUFjLEdBQUcsSUFBSSxLQUFLLEVBQWdCLENBQUM7UUFFbkQsK0NBQStDO1FBQ3ZDLGtCQUFhLEdBQUcscUJBQXFCLENBQUMsT0FBTyxDQUFDO1FBRXRELG9GQUFvRjtRQUNwRix5Q0FBeUM7UUFDakMsZ0JBQVcsR0FBRyxJQUFJLEtBQUssRUFBVSxDQUFDO1FBQ2xDLGlCQUFZLEdBQUcsSUFBSSxLQUFLLEVBQVUsQ0FBQztRQUUzQyx5QkFBeUI7UUFDakIsOEJBQXlCLEdBQUcsSUFBSSxzREFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBZXhELGFBQWE7UUFDYixt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LE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDeEIsQ0FBQztRQUNMLG9CQUFDO0lBQUQsQ0FBQztJQXJCWSw4QkFBYSxnQkFxQnpCO0FBQ0wsQ0FBQyxFQXhCZ0IsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQXdCaEM7QUFHRCxrQ0FBa0M7QUFFbEMsU0FBUyxjQUFjLENBQUMsTUFBa0I7SUFDdEMsSUFBSSxHQUFHLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbkYsT0FBTyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDaEQsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFDLEdBQVc7SUFDL0IsSUFBSSxHQUFHLEdBQUcsSUFBSSxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMxQyxJQUFJLE9BQU8sR0FBRyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2xELE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2xDO0lBRUQsSUFBSSxNQUFNLEdBQUcsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQyIsImZpbGUiOiIuL3NyYy9hd3J0Yy9uZXR3b3JrL1dlYnNvY2tldE5ldHdvcmsudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IChjKSAyMDIxLCBiZWNhdXNlLXdoeS1ub3QuY29tIExpbWl0ZWRcbkFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxubW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tXG4gIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG5BTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG5JTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEVcbkZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMXG5EQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUlxuU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVJcbkNBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksXG5PUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRVxuT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiovXG5pbXBvcnQge0Nvbm5lY3Rpb25JZCwgTmV0d29ya0V2ZW50LCBOZXRFdmVudFR5cGUsIElCYXNpY05ldHdvcmt9IGZyb20gJy4vSU5ldHdvcmsnXG5pbXBvcnQgeyBTTG9nIH0gZnJvbSAnLi9IZWxwZXInO1xuXG5leHBvcnQgZW51bSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzIHtcbiAgICBVbmluaXRpYWxpemVkLFxuICAgIE5vdENvbm5lY3RlZCxcbiAgICBDb25uZWN0aW5nLFxuICAgIENvbm5lY3RlZCxcbiAgICBEaXNjb25uZWN0aW5nIC8vc2VydmVyIHdpbGwgc2h1dCBkb3duLCBhbGwgY2xpZW50cyBkaXNjb25uZWN0LCAuLi5cbn1cblxuZXhwb3J0IGVudW0gV2Vic29ja2V0U2VydmVyU3RhdHVzIHtcbiAgICBPZmZsaW5lLFxuICAgIFN0YXJ0aW5nLFxuICAgIE9ubGluZSxcbiAgICBTaHV0dGluZ0Rvd25cbn1cblxuXG4vL1RPRE86IGhhbmRsZSBlcnJvcnMgaWYgdGhlIHNvY2tldCBjb25uZWN0aW9uIGZhaWxlZFxuLy8rIHNlbmQgYmFjayBmYWlsZWQgZXZlbnRzIGZvciBjb25uZWN0ZWQgLyBzZXJ2ZXJzdGFydCBldmVudHMgdGhhdCBhcmUgYnVmZmVyZWRcbmV4cG9ydCBjbGFzcyBXZWJzb2NrZXROZXR3b3JrIGltcGxlbWVudHMgSUJhc2ljTmV0d29yayAge1xuXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMT0dUQUcgPSBcIldlYnNvY2tldE5ldHdvcmtcIjtcblxuICAgIC8vd2Vic29ja2V0LiBcbiAgICBwcml2YXRlIG1Tb2NrZXQ6IFdlYlNvY2tldDtcblxuICAgIC8vY3VycmVudHMgc3RhdHVzLiB3aWxsIGJlIHVwZGF0ZWQgYmFzZWQgb24gdXBkYXRlIGNhbGxcbiAgICBwcml2YXRlIG1TdGF0dXMgPSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzLlVuaW5pdGlhbGl6ZWQ7XG4gICAgcHVibGljIGdldFN0YXR1cygpIHsgcmV0dXJuIHRoaXMubVN0YXR1czt9O1xuXG4gICAgLy9xdWV1ZSB0byBob2xkIGJ1ZmZlcmVkIG91dGdvaW5nIG1lc3NhZ2VzXG4gICAgcHJpdmF0ZSBtT3V0Z29pbmdRdWV1ZSA9IG5ldyBBcnJheTxOZXR3b3JrRXZlbnQ+KCk7XG5cbiAgICAvL2J1ZmZlciBmb3IgaW5jb21pbmcgbWVzc2FnZXNcbiAgICBwcml2YXRlIG1JbmNvbWluZ1F1ZXVlID0gbmV3IEFycmF5PE5ldHdvcmtFdmVudD4oKTtcblxuICAgIC8vU3RhdHVzIG9mIHRoZSBzZXJ2ZXIgZm9yIGluY29taW5nIGNvbm5lY3Rpb25zXG4gICAgcHJpdmF0ZSBtU2VydmVyU3RhdHVzID0gV2Vic29ja2V0U2VydmVyU3RhdHVzLk9mZmxpbmU7XG5cbiAgICAvL291dGdvaW5nIGNvbm5lY3Rpb25zIChqdXN0IG5lZWQgdG8gYmUgc3RvcmVkIHRvIGFsbG93IHRvIHNlbmQgb3V0IGEgZmFpbGVkIG1lc3NhZ2VcbiAgICAvL2lmIHRoZSB3aG9sZSBzaWduYWxpbmcgY29ubmVjdGlvbiBmYWlsc1xuICAgIHByaXZhdGUgbUNvbm5lY3RpbmcgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuICAgIHByaXZhdGUgbUNvbm5lY3Rpb25zID0gbmV3IEFycmF5PG51bWJlcj4oKTtcblxuICAgIC8vbmV4dCBmcmVlIGNvbm5lY3Rpb24gaWRcbiAgICBwcml2YXRlIG1OZXh0T3V0Z29pbmdDb25uZWN0aW9uSWQgPSBuZXcgQ29ubmVjdGlvbklkKDEpO1xuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBWZXJzaW9uIG9mIHRoZSBwcm90b2NvbCBpbXBsZW1lbnRlZCBoZXJlXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFBST1RPQ09MX1ZFUlNJT04gPSAyO1xuXG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBNaW5pbWFsIHByb3RvY29sIHZlcnNpb24gdGhhdCBpcyBzdGlsbCBzdXBwb3J0ZWQuXG4gICAgLy8vIFYgMSBzZXJ2ZXJzIHdvbid0IHVuZGVyc3RhbmQgaGVhcnRiZWF0IGFuZCB2ZXJzaW9uXG4gICAgLy8vIG1lc3NhZ2VzIGJ1dCB3b3VsZCBqdXN0IGxvZyBhbiB1bmtub3duIG1lc3NhZ2UgYW5kXG4gICAgLy8vIGNvbnRpbnVlIG5vcm1hbGx5LlxuICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBQUk9UT0NPTF9WRVJTSU9OX01JTiA9IDE7XG5cbiAgICAvLy8gPHN1bW1hcnk+XG4gICAgLy8vIEFzc3VtZSAxIHVudGlsIG1lc3NhZ2UgcmVjZWl2ZWRcbiAgICAvLy8gPC9zdW1tYXJ5PlxuICAgIHByaXZhdGUgbVJlbW90ZVByb3RvY29sVmVyc2lvbiA9IDE7XG5cbiAgICBwcml2YXRlIG1Vcmw6IHN0cmluZyA9IG51bGw7XG4gICAgcHJpdmF0ZSBtQ29uZmlnOiBXZWJzb2NrZXROZXR3b3JrLkNvbmZpZ3VyYXRpb247XG4gICAgcHJpdmF0ZSBtTGFzdEhlYXJ0YmVhdDogbnVtYmVyO1xuICAgIHByaXZhdGUgbUhlYXJ0YmVhdFJlY2VpdmVkID0gdHJ1ZTtcblxuICAgIHByaXZhdGUgbUlzRGlzcG9zZWQgPSBmYWxzZTtcblxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBjb25maWd1cmF0aW9uPzpXZWJzb2NrZXROZXR3b3JrLkNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdGhpcy5tVXJsID0gdXJsO1xuICAgICAgICB0aGlzLm1TdGF0dXMgPSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzLk5vdENvbm5lY3RlZDtcblxuICAgICAgICB0aGlzLm1Db25maWcgPSBjb25maWd1cmF0aW9uO1xuICAgICAgICBpZighdGhpcy5tQ29uZmlnKVxuICAgICAgICAgICAgdGhpcy5tQ29uZmlnID0gbmV3IFdlYnNvY2tldE5ldHdvcmsuQ29uZmlndXJhdGlvbigpO1xuICAgICAgICB0aGlzLm1Db25maWcuTG9jaygpO1xuICAgIH1cbiAgICBwcml2YXRlIFdlYnNvY2tldENvbm5lY3QoKTogdm9pZCB7XG5cbiAgICAgICAgdGhpcy5tU3RhdHVzID0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0aW5nO1xuICAgICAgICB0aGlzLm1Tb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMubVVybCk7XG4gICAgICAgIHRoaXMubVNvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiOyBcbiAgICAgICAgdGhpcy5tU29ja2V0Lm9ub3BlbiA9ICgpID0+IHsgdGhpcy5PbldlYnNvY2tldE9uT3BlbigpOyB9XG4gICAgICAgIHRoaXMubVNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7IHRoaXMuT25XZWJzb2NrZXRPbkVycm9yKGVycm9yKTsgfTtcbiAgICAgICAgdGhpcy5tU29ja2V0Lm9ubWVzc2FnZSA9IChlKSA9PiB7IHRoaXMuT25XZWJzb2NrZXRPbk1lc3NhZ2UoZSk7IH07XG4gICAgICAgIHRoaXMubVNvY2tldC5vbmNsb3NlID0gKGUpID0+IHsgdGhpcy5PbldlYnNvY2tldE9uQ2xvc2UoZSk7IH07XG4gICAgfVxuICAgIHByaXZhdGUgV2Vic29ja2V0Q2xlYW51cCgpIDogdm9pZCB7XG4gICAgICAgIHRoaXMubVNvY2tldC5vbm9wZW4gPSBudWxsO1xuICAgICAgICB0aGlzLm1Tb2NrZXQub25lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMubVNvY2tldC5vbm1lc3NhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLm1Tb2NrZXQub25jbG9zZSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLm1Tb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLm1Tb2NrZXQuT1BFTlxuICAgICAgICAgICAgfHwgdGhpcy5tU29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy5tU29ja2V0LkNPTk5FQ1RJTkcpIHtcblxuICAgICAgICAgICAgdGhpcy5tU29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tU29ja2V0ID0gbnVsbDtcbiAgICB9XG4gICAgcHJpdmF0ZSBFbnN1cmVTZXJ2ZXJDb25uZWN0aW9uKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Ob3RDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAvL25vIHNlcnZlclxuICAgICAgICAgICAgICAgIC8vbm8gY29ubmVjdGlvbiBhYm91dCB0byBiZSBlc3RhYmxpc2hlZFxuICAgICAgICAgICAgICAgIC8vbm8gY3VycmVudCBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICAgIC8vLT4gZGlzY29ubmVjdCB0aGUgc2VydmVyIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIHRoaXMuV2Vic29ja2V0Q29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgVXBkYXRlSGVhcnRiZWF0KCk6dm9pZHtcblxuICAgICAgICBpZih0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0ZWQgJiYgdGhpcy5tQ29uZmlnLkhlYXJ0YmVhdCA+IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBkaWZmID0gRGF0ZS5ub3coKSAtIHRoaXMubUxhc3RIZWFydGJlYXQ7XG4gICAgICAgICAgICBpZihkaWZmID4gKHRoaXMubUNvbmZpZy5IZWFydGJlYXQgKiAxMDAwKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL1dlIHRyaWdnZXIgaGVhdGJlYXQgdGltZW91dHMgb25seSBmb3IgcHJvdG9jb2wgVjJcbiAgICAgICAgICAgICAgICAvL3Byb3RvY29sIDEgY2FuIHJlY2VpdmUgdGhlIGhlYXRiZWF0cyBidXQgXG4gICAgICAgICAgICAgICAgLy93b24ndCBzZW5kIGEgcmVwbHlcbiAgICAgICAgICAgICAgICAvLyhzdGlsbCBoZWxwZnVsIHRvIHRyaWdnZXIgVENQIEFDSyB0aW1lb3V0KVxuICAgICAgICAgICAgICAgIGlmKHRoaXMubVJlbW90ZVByb3RvY29sVmVyc2lvbiA+IDFcbiAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMubUhlYXJ0YmVhdFJlY2VpdmVkID09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5UcmlnZ2VySGVhcnRiZWF0VGltZW91dCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubUxhc3RIZWFydGJlYXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMubUhlYXJ0YmVhdFJlY2VpdmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5TZW5kSGVhcnRiZWF0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBUcmlnZ2VySGVhcnRiZWF0VGltZW91dCgpe1xuICAgICAgICBTTG9nLkwoXCJDbG9zaW5nIGR1ZSB0byBoZWFydGJlYXQgdGltZW91dC4gU2VydmVyIGRpZG4ndCByZXNwb25kIGluIHRpbWUuXCIsIFdlYnNvY2tldE5ldHdvcmsuTE9HVEFHKTtcbiAgICAgICAgdGhpcy5DbGVhbnVwKCk7XG4gICAgfVxuICAgIHByaXZhdGUgQ2hlY2tTbGVlcCgpIDogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMubVN0YXR1cyA9PSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzLkNvbm5lY3RlZFxuICAgICAgICAgICAgJiYgdGhpcy5tU2VydmVyU3RhdHVzID09IFdlYnNvY2tldFNlcnZlclN0YXR1cy5PZmZsaW5lXG4gICAgICAgICAgICAmJiB0aGlzLm1Db25uZWN0aW5nLmxlbmd0aCA9PSAwXG4gICAgICAgICAgICAmJiB0aGlzLm1Db25uZWN0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy9ubyBzZXJ2ZXJcbiAgICAgICAgICAgIC8vbm8gY29ubmVjdGlvbiBhYm91dCB0byBiZSBlc3RhYmxpc2hlZFxuICAgICAgICAgICAgLy9ubyBjdXJyZW50IGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAvLy0+IGRpc2Nvbm5lY3QgdGhlIHNlcnZlciBjb25uZWN0aW9uXG4gICAgICAgICAgICB0aGlzLkNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgT25XZWJzb2NrZXRPbk9wZW4oKSB7XG5cbiAgICAgICAgU0xvZy5MKCdvbldlYnNvY2tldE9uT3BlbicsIFdlYnNvY2tldE5ldHdvcmsuTE9HVEFHKTtcbiAgICAgICAgdGhpcy5tU3RhdHVzID0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0ZWQ7XG4gICAgICAgIHRoaXMubUxhc3RIZWFydGJlYXQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLlNlbmRWZXJzaW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgT25XZWJzb2NrZXRPbkNsb3NlKGV2ZW50OiBDbG9zZUV2ZW50KSB7XG4gICAgICAgIFNMb2cuTCgnQ2xvc2VkOiAnICsgSlNPTi5zdHJpbmdpZnkoZXZlbnQpLCBXZWJzb2NrZXROZXR3b3JrLkxPR1RBRyk7XG5cbiAgICAgICAgaWYoZXZlbnQuY29kZSAhPSAxMDAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBTTG9nLkxFKFwiV2Vic29ja2V0IGNsb3NlZCB3aXRoIGNvZGU6IFwiICsgZXZlbnQuY29kZSArIFwiIFwiICsgZXZlbnQucmVhc29uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vaWdub3JlIGNsb3NlZCBldmVudCBpZiBpdCB3YXMgY2F1c2VkIGR1ZSB0byBhIHNodXRkb3duIChhcyB0aGF0IG1lYW5zIHdlIGNsZWFuZWQgdXAgYWxyZWFkeSlcbiAgICAgICAgaWYgKHRoaXMubVN0YXR1cyA9PSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RpbmdcbiAgICAgICAgICAgIHx8IHRoaXMubVN0YXR1cyA9PSBXZWJzb2NrZXRDb25uZWN0aW9uU3RhdHVzLk5vdENvbm5lY3RlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5DbGVhbnVwKCk7XG4gICAgICAgIHRoaXMubVN0YXR1cyA9IFdlYnNvY2tldENvbm5lY3Rpb25TdGF0dXMuTm90Q29ubmVjdGVkO1xuICAgIH1cbiAgICBwcml2YXRlIE9uV2Vic29ja2V0T25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0aW5nXG4gICAgICAgICAgICB8fCB0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Ob3RDb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vYnJvd3NlcnMgd2lsbCBoYXZlIEFycmF5QnVmZmVyIGluIGV2ZW50LmRhdGEgLT4gY2hhbmdlIHRvIGJ5dGUgYXJyYXlcbiAgICAgICAgbGV0IG1zZyA9IG5ldyBVaW50OEFycmF5KGV2ZW50LmRhdGEpO1xuICAgICAgICB0aGlzLlBhcnNlTWVzc2FnZShtc2cpO1xuICAgIH1cbiAgICBwcml2YXRlIE9uV2Vic29ja2V0T25FcnJvcihlcnJvcjogRXZlbnQpIHtcbiAgICAgICAgLy90aGUgZXJyb3IgZXZlbnQgZG9lc24ndCBzZWVtIHRvIGhhdmUgYW55IHVzZWZ1bCBpbmZvcm1hdGlvbj9cbiAgICAgICAgLy9icm93c2VyIGlzIGV4cGVjdGVkIHRvIGNhbGwgT25DbG9zZSBhZnRlciB0aGlzXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWJzb2NrZXQgdHJpZ2dlcmVkIG9uZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgICAgIFNMb2cuTEUoJ1dlYlNvY2tldCBFcnJvci4gU2VlIGJyb3dzZXIgbG9nIGZvciBtb3JlIGluZm9ybWF0aW9uLiAnICsgSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTtcbiAgICB9XG4gICAgLy8vIDxzdW1tYXJ5PlxuICAgIC8vLyBjYWxsZWQgZHVyaW5nIERpc2Nvbm5lY3Rpbmcgc3RhdGUgZWl0aGVyIHRyb3VnaCBzZXJ2ZXIgY29ubmVjdGlvbiBmYWlsZWQgb3IgZHVlIHRvIFNodXRkb3duXG4gICAgLy8vIFxuICAgIC8vLyBBbHNvIHVzZWQgdG8gc3dpdGNoIHRvIHNsZWVwaW5nIG1vZGUuIEluIHRoaXMgY2FzZSB0aGVyZSBjb25uZWN0aW9uIGlzbid0IHVzZWQgYXNcbiAgICAvLy8gc2VydmVyIGFuZCBkb2Vzbid0IGhhdmUgYW55IGNvbm5lY3Rpb25zIChlc3RhYmxpc2hlZCBvciBjb25uZWN0aW5nKSB0aHVzXG4gICAgLy8vIG9ubHkgV2Vic29ja2V0Q2xlYW51cCBpcyBpbiBlZmZlY3QuXG4gICAgLy8vIFxuICAgIC8vLyBXZWJzb2NrZXROZXR3b3JrIGhhcyB0byBiZSBzdGlsbCB1c2FibGUgYWZ0ZXIgdGhpcyBjYWxsIGxpa2UgYSBuZXdseVxuICAgIC8vLyBjcmVhdGVkIGNvbm5lY3Rpb25zIChleGNlcHQgd2l0aCBldmVudHMgaW4gdGhlIG1lc3NhZ2UgcXVldWUpXG4gICAgLy8vIDwvc3VtbWFyeT5cbiAgICBwcml2YXRlIENsZWFudXAoKTogdm9pZCB7XG5cbiAgICAgICAgLy9jaGVjayBpZiB0aGlzIHdhcyBkb25lIGFscmVhZHkgKG9yIHdlIGFyZSBpbiB0aGUgcHJvY2VzcyBvZiBjbGVhbnVwIGFscmVhZHkpXG4gICAgICAgIGlmICh0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0aW5nXG4gICAgICAgICAgICB8fCB0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Ob3RDb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5tU3RhdHVzID0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0aW5nO1xuXG4gICAgICAgIC8vdGhyb3cgY29ubmVjdGlvbiBmYWlsZWQgZXZlbnRzIGZvciBlYWNoIGNvbm5lY3Rpb24gaW4gbUNvbm5lY3RpbmdcbiAgICAgICAgZm9yIChsZXQgY29uSWQgb2YgdGhpcy5tQ29ubmVjdGluZykge1xuICAgICAgICAgICAgLy9hbGwgY29ubmVjdGlvbiBpdCB0cmllcyB0byBlc3RhYmxpc2ggcmlnaHQgbm93IGZhaWwgZHVlIHRvIHNodXRkb3duXG4gICAgICAgICAgICB0aGlzLkVucXVldWVJbmNvbWluZyhcbiAgICAgICAgICAgICAgICBuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkLCBuZXcgQ29ubmVjdGlvbklkKGNvbklkKSwgbnVsbCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubUNvbm5lY3RpbmcgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXG4gICAgICAgIC8vdGhyb3cgZGlzY29ubmVjdCBldmVudHMgZm9yIGFsbCBOZXdDb25uZWN0aW9uIGV2ZW50cyBpbiB0aGUgb3V0Z29pbmcgcXVldWVcbiAgICAgICAgLy9pZ25vcmUgbWVzc2FnZXMgYW5kIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICBmb3IgKGxldCBjb25JZCBvZiB0aGlzLm1Db25uZWN0aW9ucykge1xuICAgICAgICAgICAgLy9hbGwgY29ubmVjdGlvbiBpdCB0cmllcyB0byBlc3RhYmxpc2ggcmlnaHQgbm93IGZhaWwgZHVlIHRvIHNodXRkb3duXG4gICAgICAgICAgICB0aGlzLkVucXVldWVJbmNvbWluZyhcbiAgICAgICAgICAgICAgICBuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQsIG5ldyBDb25uZWN0aW9uSWQoY29uSWQpLCBudWxsKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tQ29ubmVjdGlvbnMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xuXG4gICAgICAgIGlmICh0aGlzLm1TZXJ2ZXJTdGF0dXMgPT0gV2Vic29ja2V0U2VydmVyU3RhdHVzLlN0YXJ0aW5nKSB7XG5cbiAgICAgICAgICAgIC8vaWYgc2VydmVyIHdhcyBTdGFydGluZyAtPiB0aHJvdyBmYWlsZWQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuRW5xdWV1ZUluY29taW5nKFxuICAgICAgICAgICAgICAgIG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLlNlcnZlckluaXRGYWlsZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBudWxsKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tU2VydmVyU3RhdHVzID09IFdlYnNvY2tldFNlcnZlclN0YXR1cy5PbmxpbmUpIHtcblxuICAgICAgICAgICAgLy9pZiBzZXJ2ZXIgd2FzIE9ubGluZSAtPiB0aHJvdyBjbG9zZSBldmVudFxuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlSW5jb21pbmcoXG4gICAgICAgICAgICAgICAgbmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVyQ2xvc2VkLCBDb25uZWN0aW9uSWQuSU5WQUxJRCwgbnVsbCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubVNlcnZlclN0YXR1cyA9PSBXZWJzb2NrZXRTZXJ2ZXJTdGF0dXMuU2h1dHRpbmdEb3duKSB7XG5cblxuICAgICAgICAgICAgLy9pZiBzZXJ2ZXIgd2FzIFNodXR0aW5nRG93biAtPiB0aHJvdyBjbG9zZSBldmVudCAoZG9uJ3QgdGhpbmsgdGhpcyBjYW4gaGFwcGVuKVxuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlSW5jb21pbmcoXG4gICAgICAgICAgICAgICAgbmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVyQ2xvc2VkLCBDb25uZWN0aW9uSWQuSU5WQUxJRCwgbnVsbCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubVNlcnZlclN0YXR1cyA9IFdlYnNvY2tldFNlcnZlclN0YXR1cy5PZmZsaW5lO1xuXG5cbiAgICAgICAgdGhpcy5tT3V0Z29pbmdRdWV1ZSA9IG5ldyBBcnJheTxOZXR3b3JrRXZlbnQ+KCk7XG5cblxuICAgICAgICB0aGlzLldlYnNvY2tldENsZWFudXAoKTtcbiAgICAgICAgdGhpcy5tU3RhdHVzID0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Ob3RDb25uZWN0ZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBFbnF1ZXVlT3V0Z29pbmcoZXZ0OiBOZXR3b3JrRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tT3V0Z29pbmdRdWV1ZS5wdXNoKGV2dCk7XG4gICAgfVxuICAgIHByaXZhdGUgRW5xdWV1ZUluY29taW5nKGV2dDogTmV0d29ya0V2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMubUluY29taW5nUXVldWUucHVzaChldnQpO1xuICAgIH1cbiAgICBwcml2YXRlIFRyeVJlbW92ZUNvbm5lY3RpbmcoaWQ6IENvbm5lY3Rpb25JZCk6IHZvaWQge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLm1Db25uZWN0aW5nLmluZGV4T2YoaWQuaWQpO1xuICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMubUNvbm5lY3Rpbmcuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIFRyeVJlbW92ZUNvbm5lY3Rpb24oaWQ6IENvbm5lY3Rpb25JZCk6IHZvaWQge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLm1Db25uZWN0aW9ucy5pbmRleE9mKGlkLmlkKTtcbiAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm1Db25uZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgUGFyc2VNZXNzYWdlKG1zZzpVaW50OEFycmF5KTp2b2lke1xuICAgICAgICBpZihtc2cubGVuZ3RoID09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZSBpZihtc2dbMF0gPT0gTmV0RXZlbnRUeXBlLk1ldGFWZXJzaW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAobXNnLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5tUmVtb3RlUHJvdG9jb2xWZXJzaW9uID0gbXNnWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFNMb2cuTFcoXCJSZWNlaXZlZCBhbiBpbnZhbGlkIE1ldGFWZXJzaW9uIGhlYWRlciB3aXRob3V0IGNvbnRlbnQuXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1lbHNlIGlmKG1zZ1swXSA9PSBOZXRFdmVudFR5cGUuTWV0YUhlYXJ0YmVhdClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tSGVhcnRiZWF0UmVjZWl2ZWQgPSB0cnVlO1xuICAgICAgICB9ZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgZXZ0ID0gTmV0d29ya0V2ZW50LmZyb21CeXRlQXJyYXkobXNnKTtcbiAgICAgICAgICAgIHRoaXMuSGFuZGxlSW5jb21pbmdFdmVudChldnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgSGFuZGxlSW5jb21pbmdFdmVudChldnQ6IE5ldHdvcmtFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5OZXdDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAvL3JlbW92aW5nIGNvbm5lY3RpbmcgaW5mb1xuICAgICAgICAgICAgdGhpcy5UcnlSZW1vdmVDb25uZWN0aW5nKGV2dC5Db25uZWN0aW9uSWQpO1xuXG4gICAgICAgICAgICAvL2FkZCBjb25uZWN0aW9uXG4gICAgICAgICAgICB0aGlzLm1Db25uZWN0aW9ucy5wdXNoKGV2dC5Db25uZWN0aW9uSWQuaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5Db25uZWN0aW9uRmFpbGVkKSB7XG5cbiAgICAgICAgICAgIC8vcmVtb3ZlIGNvbm5lY3RpbmcgaW5mb1xuICAgICAgICAgICAgdGhpcy5UcnlSZW1vdmVDb25uZWN0aW5nKGV2dC5Db25uZWN0aW9uSWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5UeXBlID09IE5ldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQpIHtcblxuICAgICAgICAgICAgLy9yZW1vdmUgZnJvbSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgdGhpcy5UcnlSZW1vdmVDb25uZWN0aW9uKGV2dC5Db25uZWN0aW9uSWQpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlNlcnZlckluaXRpYWxpemVkKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1TZXJ2ZXJTdGF0dXMgPSBXZWJzb2NrZXRTZXJ2ZXJTdGF0dXMuT25saW5lO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlNlcnZlckluaXRGYWlsZWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubVNlcnZlclN0YXR1cyA9IFdlYnNvY2tldFNlcnZlclN0YXR1cy5PZmZsaW5lO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LlR5cGUgPT0gTmV0RXZlbnRUeXBlLlNlcnZlckNsb3NlZClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tU2VydmVyU3RhdHVzID0gV2Vic29ja2V0U2VydmVyU3RhdHVzLlNodXR0aW5nRG93bjtcbiAgICAgICAgICAgIC8vYW55IGNsZWFuaW5nIHVwIHRvIGRvP1xuICAgICAgICAgICAgdGhpcy5tU2VydmVyU3RhdHVzID0gV2Vic29ja2V0U2VydmVyU3RhdHVzLk9mZmxpbmU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLkVucXVldWVJbmNvbWluZyhldnQpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIEhhbmRsZU91dGdvaW5nRXZlbnRzKCk6IHZvaWQge1xuXG4gICAgICAgIHdoaWxlICh0aGlzLm1PdXRnb2luZ1F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBldnQgPSB0aGlzLm1PdXRnb2luZ1F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLlNlbmROZXR3b3JrRXZlbnQoZXZ0KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBwcml2YXRlIFNlbmRIZWFydGJlYXQoKSA6IHZvaWRcbiAgICB7XG4gICAgICAgIGxldCBtc2cgPSBuZXcgVWludDhBcnJheSgxKTtcbiAgICAgICAgbXNnWzBdID0gTmV0RXZlbnRUeXBlLk1ldGFIZWFydGJlYXQ7XG4gICAgICAgIHRoaXMuSW50ZXJuYWxTZW5kKG1zZyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBTZW5kVmVyc2lvbigpIDp2b2lkXG4gICAge1xuICAgICAgICBsZXQgbXNnID0gbmV3IFVpbnQ4QXJyYXkoMik7XG4gICAgICAgIG1zZ1swXSA9IE5ldEV2ZW50VHlwZS5NZXRhVmVyc2lvbjtcbiAgICAgICAgbXNnWzFdID0gV2Vic29ja2V0TmV0d29yay5QUk9UT0NPTF9WRVJTSU9OO1xuICAgICAgICB0aGlzLkludGVybmFsU2VuZChtc2cpO1xuICAgIH1cblxuICAgIHByaXZhdGUgU2VuZE5ldHdvcmtFdmVudChldnQ6IE5ldHdvcmtFdmVudCk6dm9pZFxuICAgIHtcbiAgICAgICAgdmFyIG1zZyA9IE5ldHdvcmtFdmVudC50b0J5dGVBcnJheShldnQpO1xuICAgICAgICB0aGlzLkludGVybmFsU2VuZChtc2cpO1xuICAgIH1cblxuICAgIHByaXZhdGUgSW50ZXJuYWxTZW5kKG1zZzogVWludDhBcnJheSk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMubVNvY2tldC5zZW5kKG1zZyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBOZXh0Q29ubmVjdGlvbklkKCk6IENvbm5lY3Rpb25JZCB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm1OZXh0T3V0Z29pbmdDb25uZWN0aW9uSWQ7XG4gICAgICAgIHRoaXMubU5leHRPdXRnb2luZ0Nvbm5lY3Rpb25JZCA9IG5ldyBDb25uZWN0aW9uSWQodGhpcy5tTmV4dE91dGdvaW5nQ29ubmVjdGlvbklkLmlkICsgMSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBHZXRSYW5kb21LZXkoKTogc3RyaW5nIHtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuXG5cbiAgICAvL2ludGVyZmFjZSBpbXBsZW1lbnRhdGlvblxuXG4gICAgcHVibGljIERlcXVldWUoKTogTmV0d29ya0V2ZW50IHtcbiAgICAgICAgaWYgKHRoaXMubUluY29taW5nUXVldWUubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1JbmNvbWluZ1F1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwdWJsaWMgUGVlaygpOiBOZXR3b3JrRXZlbnQge1xuICAgICAgICBpZiAodGhpcy5tSW5jb21pbmdRdWV1ZS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubUluY29taW5nUXVldWVbMF07XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwdWJsaWMgVXBkYXRlKCk6IHZvaWQge1xuICAgIFxuICAgICAgICB0aGlzLlVwZGF0ZUhlYXJ0YmVhdCgpO1xuICAgICAgICB0aGlzLkNoZWNrU2xlZXAoKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIEZsdXNoKCk6IHZvaWQge1xuICAgICAgICAvL2lkZWFsbHkgd2UgYnVmZmVyIGV2ZXJ5dGhpbmcgYW5kIHRoZW4gZmx1c2ggd2hlbiBpdCBpcyBjb25uZWN0ZWQgYXNcbiAgICAgICAgLy93ZWJzb2NrZXRzIGFyZW4ndCBzdXBwb3NlIHRvIGJlIHVzZWQgZm9yIHJlYWx0aW1lIGNvbW11bmljYXRpb24gYW55d2F5XG4gICAgICAgIGlmICh0aGlzLm1TdGF0dXMgPT0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0ZWQpXG4gICAgICAgICAgICB0aGlzLkhhbmRsZU91dGdvaW5nRXZlbnRzKCk7XG4gICAgfVxuICAgIHB1YmxpYyBTZW5kRGF0YShpZDogQ29ubmVjdGlvbklkLCBkYXRhOiBVaW50OEFycmF5LCAvKm9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwqLyByZWxpYWJsZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaWQgPT0gbnVsbCB8fCBpZC5pZCA9PSBDb25uZWN0aW9uSWQuSU5WQUxJRC5pZClcbiAgICAgICAge1xuICAgICAgICAgICAgU0xvZy5MVyhcIklnbm9yZWQgbWVzc2FnZS4gSW52YWxpZCBjb25uZWN0aW9uIGlkLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YSA9PSBudWxsIHx8IGRhdGEubGVuZ3RoID09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIFNMb2cuTFcoXCJJZ25vcmVkIG1lc3NhZ2UuIEludmFsaWQgZGF0YS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXZ0OiBOZXR3b3JrRXZlbnQ7XG4gICAgICAgIGlmIChyZWxpYWJsZSkge1xuICAgICAgICAgICAgZXZ0ID0gbmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuUmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQsIGlkLCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2dCA9IG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLlVucmVsaWFibGVNZXNzYWdlUmVjZWl2ZWQsIGlkLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuRW5xdWV1ZU91dGdvaW5nKGV2dCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwdWJsaWMgRGlzY29ubmVjdChpZDogQ29ubmVjdGlvbklkKTogdm9pZCB7XG4gICAgICAgIHZhciBldnQgPSBuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5EaXNjb25uZWN0ZWQsIGlkLCBudWxsKTtcbiAgICAgICAgdGhpcy5FbnF1ZXVlT3V0Z29pbmcoZXZ0KTtcbiAgICB9XG4gICAgcHVibGljIFNodXRkb3duKCk6IHZvaWQge1xuICAgICAgICB0aGlzLkNsZWFudXAoKTtcbiAgICAgICAgdGhpcy5tU3RhdHVzID0gV2Vic29ja2V0Q29ubmVjdGlvblN0YXR1cy5Ob3RDb25uZWN0ZWQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBEaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5tSXNEaXNwb3NlZCA9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5TaHV0ZG93bigpO1xuICAgICAgICAgICAgdGhpcy5tSXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBTdGFydFNlcnZlcigpOiB2b2lkO1xuICAgIHB1YmxpYyBTdGFydFNlcnZlcihhZGRyZXNzOiBzdHJpbmcpOiB2b2lkO1xuICAgIHB1YmxpYyBTdGFydFNlcnZlcihhZGRyZXNzPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChhZGRyZXNzID09IG51bGwpIHtcbiAgICAgICAgICAgIGFkZHJlc3MgPSBcIlwiICsgdGhpcy5HZXRSYW5kb21LZXkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm1TZXJ2ZXJTdGF0dXMgPT0gV2Vic29ja2V0U2VydmVyU3RhdHVzLk9mZmxpbmUpIHtcblxuICAgICAgICAgICAgdGhpcy5FbnN1cmVTZXJ2ZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLm1TZXJ2ZXJTdGF0dXMgPSBXZWJzb2NrZXRTZXJ2ZXJTdGF0dXMuU3RhcnRpbmc7XG4gICAgICAgICAgICAvL1RPRE86IGFkZHJlc3MgaXMgYSBzdHJpbmcgYnV0IHVieXRlYXJyYXkgaXMgZGVmaW5lZC4gd2lsbCBmYWlsIGlmIGJpbmFyeVxuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlT3V0Z29pbmcobmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVySW5pdGlhbGl6ZWQsIENvbm5lY3Rpb25JZC5JTlZBTElELCBhZGRyZXNzKSk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdGhpcy5FbnF1ZXVlSW5jb21pbmcobmV3IE5ldHdvcmtFdmVudChOZXRFdmVudFR5cGUuU2VydmVySW5pdEZhaWxlZCwgQ29ubmVjdGlvbklkLklOVkFMSUQsIGFkZHJlc3MpKTtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIFN0b3BTZXJ2ZXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuRW5xdWV1ZU91dGdvaW5nKG5ldyBOZXR3b3JrRXZlbnQoTmV0RXZlbnRUeXBlLlNlcnZlckNsb3NlZCwgQ29ubmVjdGlvbklkLklOVkFMSUQsIG51bGwpKTtcbiAgICB9XG4gICAgcHVibGljIENvbm5lY3QoYWRkcmVzczogc3RyaW5nKTogQ29ubmVjdGlvbklkIHtcblxuICAgICAgICB0aGlzLkVuc3VyZVNlcnZlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgdmFyIG5ld0NvbklkID0gdGhpcy5OZXh0Q29ubmVjdGlvbklkKCk7XG4gICAgICAgIHRoaXMubUNvbm5lY3RpbmcucHVzaChuZXdDb25JZC5pZCk7XG4gICAgICAgIHZhciBldnQgPSBuZXcgTmV0d29ya0V2ZW50KE5ldEV2ZW50VHlwZS5OZXdDb25uZWN0aW9uLCBuZXdDb25JZCwgYWRkcmVzcyk7XG4gICAgICAgIHRoaXMuRW5xdWV1ZU91dGdvaW5nKGV2dCk7XG5cbiAgICAgICAgcmV0dXJuIG5ld0NvbklkO1xuICAgIH1cbn1cblxuXG5leHBvcnQgbmFtZXNwYWNlIFdlYnNvY2tldE5ldHdvcmt7XG5cbiAgICBleHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbntcbiAgICAgICAgbUhlYXJ0YmVhdDpudW1iZXIgPSAzMDtcbiAgICAgICAgXG4gICAgICAgIGdldCBIZWFydGJlYXQoKTpudW1iZXJcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubUhlYXJ0YmVhdDtcbiAgICAgICAgfVxuICAgICAgICBzZXQgSGVhcnRiZWF0KHZhbHVlOm51bWJlcil7XG4gICAgICAgICAgICBpZih0aGlzLm1Mb2NrZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY2hhbmdlIGNvbmZpZ3VyYXRpb24gb25jZSB1c2VkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubUhlYXJ0YmVhdCA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbUxvY2tlZCA9IGZhbHNlO1xuXG4gICAgICAgIExvY2soKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubUxvY2tlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy9CZWxvdyB0ZXN0cyBvbmx5LiBNb3ZlIG91dCBsYXRlclxuXG5mdW5jdGlvbiBidWZmZXJUb1N0cmluZyhidWZmZXI6IFVpbnQ4QXJyYXkpOiBzdHJpbmcge1xuICAgIGxldCBhcnIgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLmJ1ZmZlciwgYnVmZmVyLmJ5dGVPZmZzZXQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC8gMik7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYXJyKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5nVG9CdWZmZXIoc3RyOiBzdHJpbmcpOiBVaW50OEFycmF5IHtcbiAgICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGggKiAyKTtcbiAgICBsZXQgYnVmVmlldyA9IG5ldyBVaW50MTZBcnJheShidWYpO1xuICAgIGZvciAodmFyIGkgPSAwLCBzdHJMZW4gPSBzdHIubGVuZ3RoOyBpIDwgc3RyTGVuOyBpKyspIHtcbiAgICAgICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIGxldCByZXN1bHQgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgIHJldHVybiByZXN1bHQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/network/WebsocketNetwork.ts\n");

/***/ }),

/***/ "./src/awrtc/network/index.ts":
/*!************************************!*\
  !*** ./src/awrtc/network/index.ts ***!
  \************************************/
/*! exports provided: NetEventType, NetEventDataType, NetworkEvent, ConnectionId, Queue, List, Output, Debug, Encoder, UTF16Encoding, Encoding, Random, Helper, SLogLevel, SLog, SignalingConfig, SignalingInfo, WebRtcPeerState, WebRtcInternalState, AWebRtcPeer, WebRtcDataPeer, WebRtcNetworkServerState, WebRtcNetwork, WebsocketConnectionStatus, WebsocketServerStatus, WebsocketNetwork, LocalNetwork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _INetwork__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./INetwork */ \"./src/awrtc/network/INetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetEventType\", function() { return _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetEventDataType\", function() { return _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetEventDataType\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NetworkEvent\", function() { return _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"NetworkEvent\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"ConnectionId\", function() { return _INetwork__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"]; });\n\n/* harmony import */ var _Helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Helper */ \"./src/awrtc/network/Helper.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Queue\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Queue\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"List\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"List\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Output\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Output\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Debug\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Debug\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Encoder\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Encoder\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"UTF16Encoding\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"UTF16Encoding\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Encoding\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Encoding\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Random\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Random\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Helper\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"Helper\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SLogLevel\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLogLevel\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SLog\", function() { return _Helper__WEBPACK_IMPORTED_MODULE_1__[\"SLog\"]; });\n\n/* harmony import */ var _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WebRtcPeer */ \"./src/awrtc/network/WebRtcPeer.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SignalingConfig\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"SignalingConfig\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SignalingInfo\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"SignalingInfo\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcPeerState\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"WebRtcPeerState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcInternalState\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"WebRtcInternalState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"AWebRtcPeer\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"AWebRtcPeer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcDataPeer\", function() { return _WebRtcPeer__WEBPACK_IMPORTED_MODULE_2__[\"WebRtcDataPeer\"]; });\n\n/* harmony import */ var _WebRtcNetwork__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WebRtcNetwork */ \"./src/awrtc/network/WebRtcNetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetworkServerState\", function() { return _WebRtcNetwork__WEBPACK_IMPORTED_MODULE_3__[\"WebRtcNetworkServerState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebRtcNetwork\", function() { return _WebRtcNetwork__WEBPACK_IMPORTED_MODULE_3__[\"WebRtcNetwork\"]; });\n\n/* harmony import */ var _WebsocketNetwork__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./WebsocketNetwork */ \"./src/awrtc/network/WebsocketNetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketConnectionStatus\", function() { return _WebsocketNetwork__WEBPACK_IMPORTED_MODULE_4__[\"WebsocketConnectionStatus\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketServerStatus\", function() { return _WebsocketNetwork__WEBPACK_IMPORTED_MODULE_4__[\"WebsocketServerStatus\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"WebsocketNetwork\", function() { return _WebsocketNetwork__WEBPACK_IMPORTED_MODULE_4__[\"WebsocketNetwork\"]; });\n\n/* harmony import */ var _LocalNetwork__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LocalNetwork */ \"./src/awrtc/network/LocalNetwork.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"LocalNetwork\", function() { return _LocalNetwork__WEBPACK_IMPORTED_MODULE_5__[\"LocalNetwork\"]; });\n\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy9uZXR3b3JrL2luZGV4LnRzPzFlOGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUV3QjtBQUNGO0FBQ0k7QUFDRztBQUNHO0FBQ0oiLCJmaWxlIjoiLi9zcmMvYXdydGMvbmV0d29yay9pbmRleC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTksIGJlY2F1c2Utd2h5LW5vdC5jb20gTGltaXRlZFxuQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG5tb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG5cbiogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG4qIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGNvcHlyaWdodCBob2xkZXIgbm9yIHRoZSBuYW1lcyBvZiBpdHNcbiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb21cbiAgdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbkFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbklNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRVxuRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUxcbkRBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SXG5TRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUlxuQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSxcbk9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG5PRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuKi9cblxuZXhwb3J0ICogZnJvbSAnLi9JTmV0d29yaydcbmV4cG9ydCAqIGZyb20gJy4vSGVscGVyJ1xuZXhwb3J0ICogZnJvbSAnLi9XZWJSdGNQZWVyJ1xuZXhwb3J0ICogZnJvbSAnLi9XZWJSdGNOZXR3b3JrJ1xuZXhwb3J0ICogZnJvbSAnLi9XZWJzb2NrZXROZXR3b3JrJ1xuZXhwb3J0ICogZnJvbSAnLi9Mb2NhbE5ldHdvcmsnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/network/index.ts\n");

/***/ }),

/***/ "./src/awrtc/unity/CAPI.ts":
/*!*********************************!*\
  !*** ./src/awrtc/unity/CAPI.ts ***!
  \*********************************/
/*! exports provided: CAPI_InitAsync, CAPI_PollInitState, CAPI_SLog_SetLogLevel, CAPI_WebRtcNetwork_IsAvailable, CAPI_WebRtcNetwork_IsBrowserSupported, CAPI_WebRtcNetwork_Create, CAPI_WebRtcNetwork_Release, CAPI_WebRtcNetwork_Connect, CAPI_WebRtcNetwork_StartServer, CAPI_WebRtcNetwork_StopServer, CAPI_WebRtcNetwork_Disconnect, CAPI_WebRtcNetwork_Shutdown, CAPI_WebRtcNetwork_Update, CAPI_WebRtcNetwork_Flush, CAPI_WebRtcNetwork_SendData, CAPI_WebRtcNetwork_SendDataEm, CAPI_WebRtcNetwork_GetBufferedAmount, CAPI_WebRtcNetwork_Dequeue, CAPI_WebRtcNetwork_Peek, CAPI_WebRtcNetwork_PeekEventDataLength, CAPI_WebRtcNetwork_CheckEventLength, CAPI_WebRtcNetwork_EventDataToUint8Array, CAPI_WebRtcNetwork_DequeueEm, CAPI_WebRtcNetwork_PeekEm, CAPI_MediaNetwork_IsAvailable, CAPI_MediaNetwork_HasUserMedia, CAPI_MediaNetwork_Create, CAPI_MediaNetwork_Configure, CAPI_MediaNetwork_GetConfigurationState, CAPI_MediaNetwork_GetConfigurationError, CAPI_MediaNetwork_ResetConfiguration, CAPI_MediaNetwork_TryGetFrame, CAPI_MediaNetwork_TryGetFrame_ToTexture, CAPI_MediaNetwork_TryGetFrame_Resolution, CAPI_MediaNetwork_TryGetFrameDataLength, CAPI_MediaNetwork_SetVolume, CAPI_MediaNetwork_HasAudioTrack, CAPI_MediaNetwork_HasVideoTrack, CAPI_MediaNetwork_SetMute, CAPI_MediaNetwork_IsMute, CAPI_DeviceApi_Update, CAPI_DeviceApi_RequestUpdate, CAPI_DeviceApi_LastUpdate, CAPI_Media_GetVideoDevices_Length, CAPI_Media_GetVideoDevices, CAPI_VideoInput_AddCanvasDevice, CAPI_VideoInput_AddDevice, CAPI_VideoInput_RemoveDevice, CAPI_VideoInput_UpdateFrame, GetUnityCanvas, GetUnityContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_InitAsync\", function() { return CAPI_InitAsync; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_PollInitState\", function() { return CAPI_PollInitState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_SLog_SetLogLevel\", function() { return CAPI_SLog_SetLogLevel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsAvailable\", function() { return CAPI_WebRtcNetwork_IsAvailable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsBrowserSupported\", function() { return CAPI_WebRtcNetwork_IsBrowserSupported; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Create\", function() { return CAPI_WebRtcNetwork_Create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Release\", function() { return CAPI_WebRtcNetwork_Release; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Connect\", function() { return CAPI_WebRtcNetwork_Connect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StartServer\", function() { return CAPI_WebRtcNetwork_StartServer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StopServer\", function() { return CAPI_WebRtcNetwork_StopServer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Disconnect\", function() { return CAPI_WebRtcNetwork_Disconnect; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Shutdown\", function() { return CAPI_WebRtcNetwork_Shutdown; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Update\", function() { return CAPI_WebRtcNetwork_Update; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Flush\", function() { return CAPI_WebRtcNetwork_Flush; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendData\", function() { return CAPI_WebRtcNetwork_SendData; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendDataEm\", function() { return CAPI_WebRtcNetwork_SendDataEm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_GetBufferedAmount\", function() { return CAPI_WebRtcNetwork_GetBufferedAmount; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Dequeue\", function() { return CAPI_WebRtcNetwork_Dequeue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Peek\", function() { return CAPI_WebRtcNetwork_Peek; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEventDataLength\", function() { return CAPI_WebRtcNetwork_PeekEventDataLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_CheckEventLength\", function() { return CAPI_WebRtcNetwork_CheckEventLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_EventDataToUint8Array\", function() { return CAPI_WebRtcNetwork_EventDataToUint8Array; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_DequeueEm\", function() { return CAPI_WebRtcNetwork_DequeueEm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEm\", function() { return CAPI_WebRtcNetwork_PeekEm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsAvailable\", function() { return CAPI_MediaNetwork_IsAvailable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasUserMedia\", function() { return CAPI_MediaNetwork_HasUserMedia; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Create\", function() { return CAPI_MediaNetwork_Create; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Configure\", function() { return CAPI_MediaNetwork_Configure; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationState\", function() { return CAPI_MediaNetwork_GetConfigurationState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationError\", function() { return CAPI_MediaNetwork_GetConfigurationError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_ResetConfiguration\", function() { return CAPI_MediaNetwork_ResetConfiguration; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame\", function() { return CAPI_MediaNetwork_TryGetFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_ToTexture\", function() { return CAPI_MediaNetwork_TryGetFrame_ToTexture; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_Resolution\", function() { return CAPI_MediaNetwork_TryGetFrame_Resolution; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrameDataLength\", function() { return CAPI_MediaNetwork_TryGetFrameDataLength; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetVolume\", function() { return CAPI_MediaNetwork_SetVolume; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasAudioTrack\", function() { return CAPI_MediaNetwork_HasAudioTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasVideoTrack\", function() { return CAPI_MediaNetwork_HasVideoTrack; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetMute\", function() { return CAPI_MediaNetwork_SetMute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsMute\", function() { return CAPI_MediaNetwork_IsMute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_Update\", function() { return CAPI_DeviceApi_Update; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_RequestUpdate\", function() { return CAPI_DeviceApi_RequestUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_LastUpdate\", function() { return CAPI_DeviceApi_LastUpdate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices_Length\", function() { return CAPI_Media_GetVideoDevices_Length; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices\", function() { return CAPI_Media_GetVideoDevices; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddCanvasDevice\", function() { return CAPI_VideoInput_AddCanvasDevice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddDevice\", function() { return CAPI_VideoInput_AddDevice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_RemoveDevice\", function() { return CAPI_VideoInput_RemoveDevice; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_UpdateFrame\", function() { return CAPI_VideoInput_UpdateFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GetUnityCanvas\", function() { return GetUnityCanvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GetUnityContext\", function() { return GetUnityContext; });\n/* harmony import */ var _network_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/index */ \"./src/awrtc/network/index.ts\");\n/* harmony import */ var _media_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../media/index */ \"./src/awrtc/media/index.ts\");\n/* harmony import */ var _media_browser_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../media_browser/index */ \"./src/awrtc/media_browser/index.ts\");\n/*\nCopyright (c) 2019, because-why-not.com Limited\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:\n\n* Redistributions of source code must retain the above copyright notice, this\n  list of conditions and the following disclaimer.\n\n* Redistributions in binary form must reproduce the above copyright notice,\n  this list of conditions and the following disclaimer in the documentation\n  and/or other materials provided with the distribution.\n\n* Neither the name of the copyright holder nor the names of its\n  contributors may be used to endorse or promote products derived from\n  this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\nFOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\nDAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\nSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\nCAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\nOR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n/**This file contains the mapping between the awrtc_browser library and\n * Unitys WebGL support. Not needed for regular use.\n */\n\n\n\nvar CAPI_InitMode = {\n    //Original mode. Devices will be unknown after startup\n    Default: 0,\n    //Waits for the desvice info to come in\n    //names might be missing though (browser security thing)\n    WaitForDevices: 1,\n    //Asks the user for camera / audio access to be able to\n    //get accurate device information\n    RequestAccess: 2\n};\nvar CAPI_InitState = {\n    Uninitialized: 0,\n    Initializing: 1,\n    Initialized: 2,\n    Failed: 3\n};\nvar gCAPI_InitState = CAPI_InitState.Uninitialized;\nvar gCAPI_Canvas = null;\nfunction CAPI_InitAsync(initmode) {\n    console.debug(\"CAPI_InitAsync mode: \" + initmode);\n    gCAPI_InitState = CAPI_InitState.Initializing;\n    if (GLctx && GLctx.canvas) {\n        gCAPI_Canvas = GLctx.canvas;\n    }\n    InitAutoplayWorkaround();\n    var hasDevApi = _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].IsApiAvailable();\n    if (hasDevApi && initmode == CAPI_InitMode.WaitForDevices) {\n        _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].Update();\n    }\n    else if (hasDevApi && initmode == CAPI_InitMode.RequestAccess) {\n        _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].RequestUpdate();\n    }\n    else {\n        //either no device access available or not requested. Switch\n        //to init state immediately without device info\n        gCAPI_InitState = CAPI_InitState.Initialized;\n        if (hasDevApi == false) {\n            console.debug(\"Initialized without accessible DeviceAPI\");\n        }\n    }\n}\nfunction InitAutoplayWorkaround() {\n    if (gCAPI_Canvas == null) {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LW(\"Autoplay workaround inactive. No canvas object known to register click & touch event handlers.\");\n        return;\n    }\n    var listener = null;\n    listener = function () {\n        //called during user input event\n        _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaStream\"].ResolveAutoplay();\n        gCAPI_Canvas.removeEventListener(\"click\", listener, false);\n        gCAPI_Canvas.removeEventListener(\"touchstart\", listener, false);\n    };\n    //If a stream runs into autoplay issues we add a listener for the next on click / touchstart event\n    //and resolve it on the next incoming event\n    _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaStream\"].onautoplayblocked = function () {\n        gCAPI_Canvas.addEventListener(\"click\", listener, false);\n        gCAPI_Canvas.addEventListener(\"touchstart\", listener, false);\n    };\n}\nfunction CAPI_PollInitState() {\n    //keep checking if the DeviceApi left pending state\n    //Once completed init is finished.\n    //Later we might do more here\n    if (_media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].IsPending == false && gCAPI_InitState == CAPI_InitState.Initializing) {\n        gCAPI_InitState = CAPI_InitState.Initialized;\n        console.debug(\"Init completed.\");\n    }\n    return gCAPI_InitState;\n}\n/**\n *\n * @param loglevel\n * None = 0,\n * Errors = 1,\n * Warnings = 2,\n * Verbose = 3\n */\nfunction CAPI_SLog_SetLogLevel(loglevel) {\n    if (loglevel < 0 || loglevel > 3) {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogError(\"Invalid log level \" + loglevel);\n        return;\n    }\n    _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].SetLogLevel(loglevel);\n}\nvar gCAPI_WebRtcNetwork_Instances = {};\nvar gCAPI_WebRtcNetwork_InstancesNextIndex = 1;\nfunction CAPI_WebRtcNetwork_IsAvailable() {\n    //used by C# component to check if this plugin is loaded.\n    //can only go wrong due to programming error / packaging\n    if (_network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcNetwork\"] && _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketNetwork\"])\n        return true;\n    return false;\n}\nfunction CAPI_WebRtcNetwork_IsBrowserSupported() {\n    if (RTCPeerConnection && RTCDataChannel)\n        return true;\n    return false;\n}\nfunction CAPI_WebRtcNetwork_Create(lConfiguration) {\n    var lIndex = gCAPI_WebRtcNetwork_InstancesNextIndex;\n    gCAPI_WebRtcNetwork_InstancesNextIndex++;\n    var signaling_class = \"LocalNetwork\";\n    var signaling_param = null;\n    var iceServers;\n    if (lConfiguration == null || typeof lConfiguration !== 'string' || lConfiguration.length === 0) {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogError(\"invalid configuration. Returning -1! Config: \" + lConfiguration);\n        return -1;\n    }\n    else {\n        var conf = JSON.parse(lConfiguration);\n        if (conf) {\n            if (conf.signaling) {\n                signaling_class = conf.signaling.class;\n                signaling_param = conf.signaling.param;\n            }\n            if (conf.iceServers) {\n                iceServers = conf.iceServers;\n            }\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].L(signaling_class);\n            //this seems to be broken after switch to modules\n            //let signalingNetworkClass = window[signaling_class];\n            //let signalingNetworkClass =  new (<any>window)[\"awrtc.LocalNetwork\"];\n            //console.debug(signalingNetworkClass);\n            var signalingNetworkClass = void 0;\n            if (signaling_class === \"LocalNetwork\") {\n                signalingNetworkClass = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"LocalNetwork\"];\n            }\n            else {\n                signalingNetworkClass = _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebsocketNetwork\"];\n            }\n            var signalingConfig = new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SignalingConfig\"](new signalingNetworkClass(signaling_param));\n            var rtcConfiguration = { iceServers: iceServers };\n            gCAPI_WebRtcNetwork_Instances[lIndex] = new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"WebRtcNetwork\"](signalingConfig, rtcConfiguration);\n        }\n        else {\n            _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogWarning(\"Parsing configuration failed. Configuration: \" + lConfiguration);\n            return -1;\n        }\n    }\n    //gCAPI_WebRtcNetwork_Instances[lIndex].OnLog = function (lMsg) {\n    //    console.debug(lMsg);\n    //};\n    return lIndex;\n}\nfunction CAPI_WebRtcNetwork_Release(lIndex) {\n    if (lIndex in gCAPI_WebRtcNetwork_Instances) {\n        gCAPI_WebRtcNetwork_Instances[lIndex].Dispose();\n        delete gCAPI_WebRtcNetwork_Instances[lIndex];\n    }\n}\nfunction CAPI_WebRtcNetwork_Connect(lIndex, lRoom) {\n    return gCAPI_WebRtcNetwork_Instances[lIndex].Connect(lRoom);\n}\nfunction CAPI_WebRtcNetwork_StartServer(lIndex, lRoom) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].StartServer(lRoom);\n}\nfunction CAPI_WebRtcNetwork_StopServer(lIndex) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].StopServer();\n}\nfunction CAPI_WebRtcNetwork_Disconnect(lIndex, lConnectionId) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].Disconnect(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId));\n}\nfunction CAPI_WebRtcNetwork_Shutdown(lIndex) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].Shutdown();\n}\nfunction CAPI_WebRtcNetwork_Update(lIndex) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].Update();\n}\nfunction CAPI_WebRtcNetwork_Flush(lIndex) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].Flush();\n}\nfunction CAPI_WebRtcNetwork_SendData(lIndex, lConnectionId, lUint8ArrayData, lReliable) {\n    gCAPI_WebRtcNetwork_Instances[lIndex].SendData(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId), lUint8ArrayData, lReliable);\n}\n//helper for emscripten\nfunction CAPI_WebRtcNetwork_SendDataEm(lIndex, lConnectionId, lUint8ArrayData, lUint8ArrayDataOffset, lUint8ArrayDataLength, lReliable) {\n    //console.debug(\"SendDataEm: \" + lReliable + \" length \" + lUint8ArrayDataLength + \" to \" + lConnectionId);\n    var arrayBuffer = new Uint8Array(lUint8ArrayData.buffer, lUint8ArrayDataOffset, lUint8ArrayDataLength);\n    return gCAPI_WebRtcNetwork_Instances[lIndex].SendData(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId), arrayBuffer, lReliable);\n}\nfunction CAPI_WebRtcNetwork_GetBufferedAmount(lIndex, lConnectionId, lReliable) {\n    return gCAPI_WebRtcNetwork_Instances[lIndex].GetBufferedAmount(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId), lReliable);\n}\nfunction CAPI_WebRtcNetwork_Dequeue(lIndex) {\n    return gCAPI_WebRtcNetwork_Instances[lIndex].Dequeue();\n}\nfunction CAPI_WebRtcNetwork_Peek(lIndex) {\n    return gCAPI_WebRtcNetwork_Instances[lIndex].Peek();\n}\n/**Allows to peek into the next event to figure out its length and allocate\n * the memory needed to store it before calling\n *      CAPI_WebRtcNetwork_DequeueEm\n *\n * @param {type} lIndex\n * @returns {Number}\n */\nfunction CAPI_WebRtcNetwork_PeekEventDataLength(lIndex) {\n    var lNetEvent = gCAPI_WebRtcNetwork_Instances[lIndex].Peek();\n    return CAPI_WebRtcNetwork_CheckEventLength(lNetEvent);\n}\n//helper\nfunction CAPI_WebRtcNetwork_CheckEventLength(lNetEvent) {\n    if (lNetEvent == null) {\n        //invalid event\n        return -1;\n    }\n    else if (lNetEvent.RawData == null) {\n        //no data\n        return 0;\n    }\n    else if (typeof lNetEvent.RawData === \"string\") {\n        //no user strings are allowed thus we get away with counting the characters\n        //(ASCII only!)\n        return lNetEvent.RawData.length;\n    }\n    else //message event types 1 and 2 only? check for it?\n     {\n        //its not null and not a string. can only be a Uint8Array if we didn't\n        //mess something up in the implementation\n        return lNetEvent.RawData.length;\n    }\n}\nfunction CAPI_WebRtcNetwork_EventDataToUint8Array(data, dataUint8Array, dataOffset, dataLength) {\n    //data can be null, string or Uint8Array\n    //return value will be the length of data we used\n    if (data == null) {\n        return 0;\n    }\n    else if ((typeof data) === \"string\") {\n        //in case we don't get a large enough array we need to cut off the string\n        var i = 0;\n        for (i = 0; i < data.length && i < dataLength; i++) {\n            dataUint8Array[dataOffset + i] = data.charCodeAt(i);\n        }\n        return i;\n    }\n    else {\n        var i = 0;\n        //in case we don't get a large enough array we need to cut off the string\n        for (i = 0; i < data.length && i < dataLength; i++) {\n            dataUint8Array[dataOffset + i] = data[i];\n        }\n        return i;\n    }\n}\n//Version for emscripten or anything that doesn't have a garbage collector.\n// The memory for everything needs to be allocated before the call.\nfunction CAPI_WebRtcNetwork_DequeueEm(lIndex, lTypeIntArray, lTypeIntIndex, lConidIntArray, lConidIndex, lDataUint8Array, lDataOffset, lDataLength, lDataLenIntArray, lDataLenIntIndex) {\n    var nEvt = CAPI_WebRtcNetwork_Dequeue(lIndex);\n    if (nEvt == null)\n        return false;\n    lTypeIntArray[lTypeIntIndex] = nEvt.Type;\n    lConidIntArray[lConidIndex] = nEvt.ConnectionId.id;\n    //console.debug(\"event\" + nEvt.netEventType);\n    var length = CAPI_WebRtcNetwork_EventDataToUint8Array(nEvt.RawData, lDataUint8Array, lDataOffset, lDataLength);\n    lDataLenIntArray[lDataLenIntIndex] = length; //return the length if so the user knows how much of the given array is used\n    return true;\n}\nfunction CAPI_WebRtcNetwork_PeekEm(lIndex, lTypeIntArray, lTypeIntIndex, lConidIntArray, lConidIndex, lDataUint8Array, lDataOffset, lDataLength, lDataLenIntArray, lDataLenIntIndex) {\n    var nEvt = CAPI_WebRtcNetwork_Peek(lIndex);\n    if (nEvt == null)\n        return false;\n    lTypeIntArray[lTypeIntIndex] = nEvt.Type;\n    lConidIntArray[lConidIndex] = nEvt.ConnectionId.id;\n    //console.debug(\"event\" + nEvt.netEventType);\n    var length = CAPI_WebRtcNetwork_EventDataToUint8Array(nEvt.RawData, lDataUint8Array, lDataOffset, lDataLength);\n    lDataLenIntArray[lDataLenIntIndex] = length; //return the length if so the user knows how much of the given array is used\n    return true;\n}\nfunction CAPI_MediaNetwork_IsAvailable() {\n    if (_media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaNetwork\"] && _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserWebRtcCall\"])\n        return true;\n    return false;\n}\nfunction CAPI_MediaNetwork_HasUserMedia() {\n    if (navigator && navigator.mediaDevices)\n        return true;\n    return false;\n}\nfunction CAPI_MediaNetwork_Create(lJsonConfiguration) {\n    var config = new _media_index__WEBPACK_IMPORTED_MODULE_1__[\"NetworkConfig\"]();\n    config = JSON.parse(lJsonConfiguration);\n    var mediaNetwork = new _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"BrowserMediaNetwork\"](config);\n    var lIndex = gCAPI_WebRtcNetwork_InstancesNextIndex;\n    gCAPI_WebRtcNetwork_InstancesNextIndex++;\n    gCAPI_WebRtcNetwork_Instances[lIndex] = mediaNetwork;\n    return lIndex;\n}\n//Configure(config: MediaConfig): void;\nfunction CAPI_MediaNetwork_Configure(lIndex, audio, video, minWidth, minHeight, maxWidth, maxHeight, idealWidth, idealHeight, minFps, maxFps, idealFps, deviceName) {\n    if (deviceName === void 0) { deviceName = \"\"; }\n    var config = new _media_index__WEBPACK_IMPORTED_MODULE_1__[\"MediaConfig\"]();\n    config.Audio = audio;\n    config.Video = video;\n    config.MinWidth = minWidth;\n    config.MinHeight = minHeight;\n    config.MaxWidth = maxWidth;\n    config.MaxHeight = maxHeight;\n    config.IdealWidth = idealWidth;\n    config.IdealHeight = idealHeight;\n    config.MinFps = minFps;\n    config.MaxFps = maxFps;\n    config.IdealFps = idealFps;\n    config.VideoDeviceName = deviceName;\n    config.FrameUpdates = true;\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    mediaNetwork.Configure(config);\n}\n//GetConfigurationState(): MediaConfigurationState;\nfunction CAPI_MediaNetwork_GetConfigurationState(lIndex) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.GetConfigurationState();\n}\n//Note: not yet glued to the C# version!\n//GetConfigurationError(): string;\nfunction CAPI_MediaNetwork_GetConfigurationError(lIndex) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.GetConfigurationError();\n}\n//ResetConfiguration(): void;\nfunction CAPI_MediaNetwork_ResetConfiguration(lIndex) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.ResetConfiguration();\n}\n//TryGetFrame(id: ConnectionId): RawFrame;\nfunction CAPI_MediaNetwork_TryGetFrame(lIndex, lConnectionId, lWidthInt32Array, lWidthIntArrayIndex, lHeightInt32Array, lHeightIntArrayIndex, lBufferUint8Array, lBufferUint8ArrayOffset, lBufferUint8ArrayLength) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    var frame = mediaNetwork.TryGetFrame(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId));\n    if (frame == null || frame.Buffer == null) {\n        return false;\n    }\n    else {\n        lWidthInt32Array[lWidthIntArrayIndex] = frame.Width;\n        lHeightInt32Array[lHeightIntArrayIndex] = frame.Height;\n        for (var i = 0; i < lBufferUint8ArrayLength && i < frame.Buffer.length; i++) {\n            lBufferUint8Array[lBufferUint8ArrayOffset + i] = frame.Buffer[i];\n        }\n        return true;\n    }\n}\nfunction CAPI_MediaNetwork_TryGetFrame_ToTexture(lIndex, lConnectionId, lWidth, lHeight, gl, texture) {\n    //console.log(\"CAPI_MediaNetwork_TryGetFrame_ToTexture\");\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    var frame = mediaNetwork.TryGetFrame(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId));\n    if (frame == null) {\n        return false;\n    }\n    else if (frame.Width != lWidth || frame.Height != lHeight) {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LW(\"CAPI_MediaNetwork_TryGetFrame_ToTexture failed. Width height expected: \" + frame.Width + \"x\" + frame.Height + \" but received \" + lWidth + \"x\" + lHeight);\n        return false;\n    }\n    else {\n        frame.ToTexture(gl, texture);\n        return true;\n    }\n}\n/*\nexport function CAPI_MediaNetwork_TryGetFrame_ToTexture2(lIndex: number, lConnectionId: number,\n    lWidthInt32Array: Int32Array, lWidthIntArrayIndex: number,\n    lHeightInt32Array: Int32Array, lHeightIntArrayIndex: number,\n    gl:WebGL2RenderingContext): WebGLTexture\n{\n    //console.log(\"CAPI_MediaNetwork_TryGetFrame_ToTexture\");\n    let mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex] as BrowserMediaNetwork;\n    let frame = mediaNetwork.TryGetFrame(new ConnectionId(lConnectionId));\n\n    if (frame == null) {\n        return false;\n    } else {\n        lWidthInt32Array[lWidthIntArrayIndex] = frame.Width;\n        lHeightInt32Array[lHeightIntArrayIndex] = frame.Height;\n        let texture  = frame.ToTexture2(gl);\n        return texture;\n    }\n}\n*/\nfunction CAPI_MediaNetwork_TryGetFrame_Resolution(lIndex, lConnectionId, lWidthInt32Array, lWidthIntArrayIndex, lHeightInt32Array, lHeightIntArrayIndex) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    var frame = mediaNetwork.PeekFrame(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](lConnectionId));\n    if (frame == null) {\n        return false;\n    }\n    else {\n        lWidthInt32Array[lWidthIntArrayIndex] = frame.Width;\n        lHeightInt32Array[lHeightIntArrayIndex] = frame.Height;\n        return true;\n    }\n}\n//Returns the frame buffer size or -1 if no frame is available\nfunction CAPI_MediaNetwork_TryGetFrameDataLength(lIndex, connectionId) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    var frame = mediaNetwork.PeekFrame(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](connectionId));\n    var length = -1;\n    //added frame.Buffer != null as the frame might be a LazyFrame just creating a copy of the html video element\n    //in the moment frame.Buffer is called. if this fails for any reasion it might return null despite\n    //the frame object itself being available\n    if (frame != null && frame.Buffer != null) {\n        length = frame.Buffer.length;\n    }\n    //SLog.L(\"data length:\" + length);\n    return length;\n}\nfunction CAPI_MediaNetwork_SetVolume(lIndex, volume, connectionId) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    mediaNetwork.SetVolume(volume, new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](connectionId));\n}\nfunction CAPI_MediaNetwork_HasAudioTrack(lIndex, connectionId) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.HasAudioTrack(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](connectionId));\n}\nfunction CAPI_MediaNetwork_HasVideoTrack(lIndex, connectionId) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.HasVideoTrack(new _network_index__WEBPACK_IMPORTED_MODULE_0__[\"ConnectionId\"](connectionId));\n}\nfunction CAPI_MediaNetwork_SetMute(lIndex, value) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    mediaNetwork.SetMute(value);\n}\nfunction CAPI_MediaNetwork_IsMute(lIndex) {\n    var mediaNetwork = gCAPI_WebRtcNetwork_Instances[lIndex];\n    return mediaNetwork.IsMute();\n}\nfunction CAPI_DeviceApi_Update() {\n    _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].Update();\n}\nfunction CAPI_DeviceApi_RequestUpdate() {\n    _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].RequestUpdate();\n}\nfunction CAPI_DeviceApi_LastUpdate() {\n    return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"DeviceApi\"].LastUpdate;\n}\nfunction CAPI_Media_GetVideoDevices_Length() {\n    return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.GetVideoDevices().length;\n}\nfunction CAPI_Media_GetVideoDevices(index) {\n    var devs = _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.GetVideoDevices();\n    if (devs.length > index) {\n        return devs[index];\n    }\n    else {\n        _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LE(\"Requested device with index \" + index + \" does not exist.\");\n        //it needs to be \"\" to behave the same to the C++ API. std::string can't be null\n        return \"\";\n    }\n}\nfunction CAPI_VideoInput_AddCanvasDevice(query, name, width, height, fps) {\n    var canvas = document.querySelector(query);\n    if (canvas) {\n        console.debug(\"CAPI_VideoInput_AddCanvasDevice\", { query: query, name: name, width: width, height: height, fps: fps });\n        if (width <= 0 || height <= 0) {\n            width = canvas.width;\n            height = canvas.height;\n        }\n        _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.VideoInput.AddCanvasDevice(canvas, name, width, height, fps); //, width, height, fps);\n        return true;\n    }\n    return false;\n}\nfunction CAPI_VideoInput_AddDevice(name, width, height, fps) {\n    _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.VideoInput.AddDevice(name, width, height, fps);\n}\nfunction CAPI_VideoInput_RemoveDevice(name) {\n    _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.VideoInput.RemoveDevice(name);\n}\nfunction CAPI_VideoInput_UpdateFrame(name, lBufferUint8Array, lBufferUint8ArrayOffset, lBufferUint8ArrayLength, width, height, rotation, firstRowIsBottom) {\n    var dataPtrClamped = null;\n    if (lBufferUint8Array && lBufferUint8ArrayLength > 0) {\n        dataPtrClamped = new Uint8ClampedArray(lBufferUint8Array.buffer, lBufferUint8ArrayOffset, lBufferUint8ArrayLength);\n    }\n    return _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"Media\"].SharedInstance.VideoInput.UpdateFrame(name, dataPtrClamped, width, height, _media_browser_index__WEBPACK_IMPORTED_MODULE_2__[\"VideoInputType\"].ARGB, rotation, firstRowIsBottom);\n}\nfunction GetUnityCanvas() {\n    if (gCAPI_Canvas !== null)\n        return gCAPI_Canvas;\n    _network_index__WEBPACK_IMPORTED_MODULE_0__[\"SLog\"].LogWarning(\"Using GetUnityCanvas without a known cavans reference.\");\n    return document.querySelector(\"canvas\");\n}\nfunction GetUnityContext() {\n    return GetUnityCanvas().getContext(\"webgl2\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy91bml0eS9DQVBJLnRzPzczMjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTRCRTtBQUNGOztHQUVHO0FBQ2dJO0FBQzlDO0FBQ2lEO0FBR3RJLElBQUksYUFBYSxHQUFHO0lBQ2hCLHNEQUFzRDtJQUN0RCxPQUFPLEVBQUUsQ0FBQztJQUNWLHVDQUF1QztJQUN2Qyx3REFBd0Q7SUFDeEQsY0FBYyxFQUFFLENBQUM7SUFDakIsdURBQXVEO0lBQ3ZELGlDQUFpQztJQUNqQyxhQUFhLEVBQUUsQ0FBQztDQUNuQixDQUFDO0FBRUYsSUFBSSxjQUFjLEdBQUc7SUFDakIsYUFBYSxFQUFFLENBQUM7SUFDaEIsWUFBWSxFQUFFLENBQUM7SUFDZixXQUFXLEVBQUUsQ0FBQztJQUNkLE1BQU0sRUFBRSxDQUFDO0NBQ1osQ0FBQztBQUNGLElBQUksZUFBZSxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUM7QUFDbkQsSUFBSSxZQUFZLEdBQXNCLElBQUksQ0FBQztBQUlwQyxTQUFTLGNBQWMsQ0FBQyxRQUFRO0lBQ25DLE9BQU8sQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEdBQUcsUUFBUSxDQUFDLENBQUM7SUFDbEQsZUFBZSxHQUFHLGNBQWMsQ0FBQyxZQUFZLENBQUM7SUFFOUMsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTtRQUN2QixZQUFZLEdBQUcsS0FBSyxDQUFDLE1BQTJCLENBQUM7S0FDcEQ7SUFDRCxzQkFBc0IsRUFBRSxDQUFDO0lBRXpCLElBQUksU0FBUyxHQUFHLDhEQUFTLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDM0MsSUFBSSxTQUFTLElBQUksUUFBUSxJQUFJLGFBQWEsQ0FBQyxjQUFjLEVBQUU7UUFDdkQsOERBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUN0QjtTQUFNLElBQUksU0FBUyxJQUFJLFFBQVEsSUFBSSxhQUFhLENBQUMsYUFBYSxFQUFFO1FBQzdELDhEQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7S0FDN0I7U0FBTTtRQUNILDREQUE0RDtRQUM1RCwrQ0FBK0M7UUFDL0MsZUFBZSxHQUFHLGNBQWMsQ0FBQyxXQUFXLENBQUM7UUFDN0MsSUFBSSxTQUFTLElBQUksS0FBSyxFQUFFO1lBQ3BCLE9BQU8sQ0FBQyxLQUFLLENBQUMsMENBQTBDLENBQUMsQ0FBQztTQUM3RDtLQUNKO0FBQ0wsQ0FBQztBQUVELFNBQVMsc0JBQXNCO0lBQzNCLElBQUcsWUFBWSxJQUFJLElBQUksRUFBQztRQUNwQixtREFBSSxDQUFDLEVBQUUsQ0FBQyxnR0FBZ0csQ0FBQyxDQUFDO1FBQzFHLE9BQU87S0FDVjtJQUVELElBQUksUUFBUSxHQUFjLElBQUksQ0FBQztJQUMvQixRQUFRLEdBQUc7UUFDUCxnQ0FBZ0M7UUFDaEMsdUVBQWtCLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDckMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDM0QsWUFBWSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDcEUsQ0FBQyxDQUFDO0lBQ0Ysa0dBQWtHO0lBQ2xHLDJDQUEyQztJQUMzQyx1RUFBa0IsQ0FBQyxpQkFBaUIsR0FBRztRQUNuQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN4RCxZQUFZLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNqRSxDQUFDLENBQUM7QUFDTixDQUFDO0FBRU0sU0FBUyxrQkFBa0I7SUFDOUIsbURBQW1EO0lBQ25ELGtDQUFrQztJQUNsQyw2QkFBNkI7SUFDN0IsSUFBSSw4REFBUyxDQUFDLFNBQVMsSUFBSSxLQUFLLElBQUksZUFBZSxJQUFJLGNBQWMsQ0FBQyxZQUFZLEVBQUU7UUFDaEYsZUFBZSxHQUFHLGNBQWMsQ0FBQyxXQUFXLENBQUM7UUFDN0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0tBQ3BDO0lBQ0QsT0FBTyxlQUFlLENBQUM7QUFDM0IsQ0FBQztBQUVEOzs7Ozs7O0dBT0c7QUFDSSxTQUFTLHFCQUFxQixDQUFDLFFBQWdCO0lBQ2xELElBQUksUUFBUSxHQUFHLENBQUMsSUFBSSxRQUFRLEdBQUcsQ0FBQyxFQUFFO1FBQzlCLG1EQUFJLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLE9BQU87S0FDVjtJQUNELG1EQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLENBQUM7QUFJRCxJQUFJLDZCQUE2QixHQUFvQyxFQUFFLENBQUM7QUFDeEUsSUFBSSxzQ0FBc0MsR0FBRyxDQUFDLENBQUM7QUFHeEMsU0FBUyw4QkFBOEI7SUFDMUMseURBQXlEO0lBQ3pELHdEQUF3RDtJQUN4RCxJQUFJLDREQUFhLElBQUksK0RBQWdCO1FBQ2pDLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFHTSxTQUFTLHFDQUFxQztJQUNqRCxJQUFJLGlCQUFpQixJQUFJLGNBQWM7UUFDbkMsT0FBTyxJQUFJLENBQUM7SUFFaEIsT0FBTyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUdNLFNBQVMseUJBQXlCLENBQUMsY0FBc0I7SUFDNUQsSUFBSSxNQUFNLEdBQUcsc0NBQXNDLENBQUM7SUFDcEQsc0NBQXNDLEVBQUUsQ0FBQztJQUV6QyxJQUFJLGVBQWUsR0FBRyxjQUFjLENBQUM7SUFDckMsSUFBSSxlQUFlLEdBQVEsSUFBSSxDQUFDO0lBQ2hDLElBQUksVUFBMEIsQ0FBQztJQUUvQixJQUFJLGNBQWMsSUFBSSxJQUFJLElBQUksT0FBTyxjQUFjLEtBQUssUUFBUSxJQUFJLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBRTdGLG1EQUFJLENBQUMsUUFBUSxDQUFDLCtDQUErQyxHQUFHLGNBQWMsQ0FBQyxDQUFDO1FBQ2hGLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDYjtTQUNJO1FBRUQsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUV0QyxJQUFJLElBQUksRUFBRTtZQUVOLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDaEIsZUFBZSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO2dCQUN2QyxlQUFlLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7YUFDMUM7WUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ2pCLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO2FBQ2hDO1lBQ0QsbURBQUksQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDeEIsaURBQWlEO1lBQ2pELHNEQUFzRDtZQUN0RCx1RUFBdUU7WUFDdkUsdUNBQXVDO1lBQ3ZDLElBQUkscUJBQXFCLFNBQUssQ0FBQztZQUMvQixJQUFJLGVBQWUsS0FBSyxjQUFjLEVBQUU7Z0JBQ3BDLHFCQUFxQixHQUFHLDJEQUFZLENBQUM7YUFDeEM7aUJBQU07Z0JBQ0gscUJBQXFCLEdBQUcsK0RBQWdCLENBQUM7YUFDNUM7WUFFRCxJQUFJLGVBQWUsR0FBRyxJQUFJLDhEQUFlLENBQUMsSUFBSSxxQkFBcUIsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1lBR3RGLElBQUksZ0JBQWdCLEdBQXFCLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxDQUFDO1lBRXBFLDZCQUE2QixDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksNERBQWEsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztTQUNoRzthQUFNO1lBQ0gsbURBQUksQ0FBQyxVQUFVLENBQUMsK0NBQStDLEdBQUcsY0FBYyxDQUFDLENBQUM7WUFDbEYsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUNiO0tBQ0o7SUFDRCxpRUFBaUU7SUFDakUsMEJBQTBCO0lBQzFCLElBQUk7SUFDSixPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBRU0sU0FBUywwQkFBMEIsQ0FBQyxNQUFjO0lBQ3JELElBQUksTUFBTSxJQUFJLDZCQUE2QixFQUFFO1FBQ3pDLDZCQUE2QixDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2hELE9BQU8sNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDaEQ7QUFDTCxDQUFDO0FBRU0sU0FBUywwQkFBMEIsQ0FBQyxNQUFjLEVBQUUsS0FBYTtJQUNwRSxPQUFPLDZCQUE2QixDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRU0sU0FBUyw4QkFBOEIsQ0FBQyxNQUFjLEVBQUUsS0FBYTtJQUN4RSw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDN0QsQ0FBQztBQUNNLFNBQVMsNkJBQTZCLENBQUMsTUFBYztJQUN4RCw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztBQUN2RCxDQUFDO0FBQ00sU0FBUyw2QkFBNkIsQ0FBQyxNQUFjLEVBQUUsYUFBcUI7SUFDL0UsNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksMkRBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0FBQ3RGLENBQUM7QUFFTSxTQUFTLDJCQUEyQixDQUFDLE1BQWM7SUFDdEQsNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7QUFDckQsQ0FBQztBQUVNLFNBQVMseUJBQXlCLENBQUMsTUFBYztJQUNwRCw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNuRCxDQUFDO0FBRU0sU0FBUyx3QkFBd0IsQ0FBQyxNQUFjO0lBQ25ELDZCQUE2QixDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2xELENBQUM7QUFFTSxTQUFTLDJCQUEyQixDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUFFLGVBQTJCLEVBQUUsU0FBa0I7SUFDOUgsNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksMkRBQVksQ0FBQyxhQUFhLENBQUMsRUFBRSxlQUFlLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDaEgsQ0FBQztBQUVELHVCQUF1QjtBQUNoQixTQUFTLDZCQUE2QixDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUFFLGVBQTJCLEVBQUUscUJBQTZCLEVBQUUscUJBQTZCLEVBQUUsU0FBa0I7SUFDOUwsMEdBQTBHO0lBQzFHLElBQUksV0FBVyxHQUFHLElBQUksVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUscUJBQXFCLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUN2RyxPQUFPLDZCQUE2QixDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLDJEQUFZLENBQUMsYUFBYSxDQUFDLEVBQUUsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ25ILENBQUM7QUFFTSxTQUFTLG9DQUFvQyxDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUFFLFNBQWtCO0lBQzFHLE9BQU8sNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsaUJBQWlCLENBQUMsSUFBSSwyREFBWSxDQUFDLGFBQWEsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQy9HLENBQUM7QUFHTSxTQUFTLDBCQUEwQixDQUFDLE1BQWM7SUFDckQsT0FBTyw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMzRCxDQUFDO0FBQ00sU0FBUyx1QkFBdUIsQ0FBQyxNQUFjO0lBQ2xELE9BQU8sNkJBQTZCLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDeEQsQ0FBQztBQUVEOzs7Ozs7R0FNRztBQUNJLFNBQVMsc0NBQXNDLENBQUMsTUFBTTtJQUN6RCxJQUFJLFNBQVMsR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUM3RCxPQUFPLG1DQUFtQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFELENBQUM7QUFDRCxRQUFRO0FBQ0QsU0FBUyxtQ0FBbUMsQ0FBQyxTQUF1QjtJQUN2RSxJQUFJLFNBQVMsSUFBSSxJQUFJLEVBQUU7UUFDbkIsZUFBZTtRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDYjtTQUFNLElBQUksU0FBUyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUU7UUFDbEMsU0FBUztRQUNULE9BQU8sQ0FBQyxDQUFDO0tBQ1o7U0FBTSxJQUFJLE9BQU8sU0FBUyxDQUFDLE9BQU8sS0FBSyxRQUFRLEVBQUU7UUFDOUMsMkVBQTJFO1FBQzNFLGVBQWU7UUFDZixPQUFPLFNBQVMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0tBQ25DO1NBQU0saURBQWlEO0tBQ3hEO1FBQ0ksc0VBQXNFO1FBQ3RFLHlDQUF5QztRQUV6QyxPQUFPLFNBQVMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0tBQ25DO0FBQ0wsQ0FBQztBQUNNLFNBQVMsd0NBQXdDLENBQUMsSUFBUyxFQUFFLGNBQTBCLEVBQUUsVUFBa0IsRUFBRSxVQUFrQjtJQUNsSSx3Q0FBd0M7SUFDeEMsaURBQWlEO0lBQ2pELElBQUksSUFBSSxJQUFJLElBQUksRUFBRTtRQUNkLE9BQU8sQ0FBQyxDQUFDO0tBQ1o7U0FBTSxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDbkMseUVBQXlFO1FBQ3pFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2hELGNBQWMsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN2RDtRQUNELE9BQU8sQ0FBQyxDQUFDO0tBQ1o7U0FDSTtRQUNELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLHlFQUF5RTtRQUN6RSxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNoRCxjQUFjLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM1QztRQUNELE9BQU8sQ0FBQyxDQUFDO0tBQ1o7QUFDTCxDQUFDO0FBRUQsMkVBQTJFO0FBQzNFLG1FQUFtRTtBQUU1RCxTQUFTLDRCQUE0QixDQUFDLE1BQWMsRUFBRSxhQUF5QixFQUFFLGFBQXFCLEVBQUUsY0FBMEIsRUFBRSxXQUFtQixFQUFFLGVBQTJCLEVBQUUsV0FBbUIsRUFBRSxXQUFtQixFQUFFLGdCQUE0QixFQUFFLGdCQUF3QjtJQUN6UixJQUFJLElBQUksR0FBRywwQkFBMEIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QyxJQUFJLElBQUksSUFBSSxJQUFJO1FBQ1osT0FBTyxLQUFLLENBQUM7SUFFakIsYUFBYSxDQUFDLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDekMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO0lBRW5ELDZDQUE2QztJQUM3QyxJQUFJLE1BQU0sR0FBRyx3Q0FBd0MsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDL0csZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyw0RUFBNEU7SUFFekgsT0FBTyxJQUFJLENBQUM7QUFDaEIsQ0FBQztBQUNNLFNBQVMseUJBQXlCLENBQUMsTUFBYyxFQUFFLGFBQXlCLEVBQUUsYUFBcUIsRUFBRSxjQUEwQixFQUFFLFdBQW1CLEVBQUUsZUFBMkIsRUFBRSxXQUFtQixFQUFFLFdBQW1CLEVBQUUsZ0JBQTRCLEVBQUUsZ0JBQXdCO0lBQ3RSLElBQUksSUFBSSxHQUFHLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLElBQUksSUFBSSxJQUFJLElBQUk7UUFDWixPQUFPLEtBQUssQ0FBQztJQUVqQixhQUFhLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN6QyxjQUFjLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7SUFFbkQsNkNBQTZDO0lBQzdDLElBQUksTUFBTSxHQUFHLHdDQUF3QyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUMvRyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLDRFQUE0RTtJQUV6SCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDO0FBSU0sU0FBUyw2QkFBNkI7SUFFekMsSUFBSSx3RUFBbUIsSUFBSSxzRUFBaUI7UUFDeEMsT0FBTyxJQUFJLENBQUM7SUFDaEIsT0FBTyxLQUFLLENBQUM7QUFDakIsQ0FBQztBQUVNLFNBQVMsOEJBQThCO0lBQzFDLElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxZQUFZO1FBQ25DLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFFTSxTQUFTLHdCQUF3QixDQUFDLGtCQUFrQjtJQUV2RCxJQUFJLE1BQU0sR0FBRyxJQUFJLDBEQUFhLEVBQUUsQ0FBQztJQUNqQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhDLElBQUksWUFBWSxHQUFHLElBQUksd0VBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFbkQsSUFBSSxNQUFNLEdBQUcsc0NBQXNDLENBQUM7SUFDcEQsc0NBQXNDLEVBQUUsQ0FBQztJQUV6Qyw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUM7SUFDckQsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQVFELHVDQUF1QztBQUNoQyxTQUFTLDJCQUEyQixDQUFDLE1BQWMsRUFBRSxLQUFjLEVBQUUsS0FBYyxFQUN0RixRQUFnQixFQUFFLFNBQWlCLEVBQ25DLFFBQWdCLEVBQUUsU0FBaUIsRUFDbkMsVUFBa0IsRUFBRSxXQUFtQixFQUN2QyxNQUFjLEVBQUUsTUFBYyxFQUFFLFFBQWdCLEVBQUUsVUFBdUI7SUFBdkIsNENBQXVCO0lBRXpFLElBQUksTUFBTSxHQUFnQixJQUFJLHdEQUFXLEVBQUUsQ0FBQztJQUM1QyxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNyQixNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNyQixNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixNQUFNLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixNQUFNLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixNQUFNLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUMvQixNQUFNLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztJQUVqQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN2QixNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN2QixNQUFNLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUUzQixNQUFNLENBQUMsZUFBZSxHQUFHLFVBQVUsQ0FBQztJQUVwQyxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztJQUUzQixJQUFJLFlBQVksR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQXdCLENBQUM7SUFDaEYsWUFBWSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUVuQyxDQUFDO0FBQ0QsbURBQW1EO0FBQzVDLFNBQVMsdUNBQXVDLENBQUMsTUFBYztJQUVsRSxJQUFJLFlBQVksR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQXdCLENBQUM7SUFDaEYsT0FBTyxZQUFZLENBQUMscUJBQXFCLEVBQVksQ0FBQztBQUMxRCxDQUFDO0FBRUQsd0NBQXdDO0FBQ3hDLGtDQUFrQztBQUMzQixTQUFTLHVDQUF1QyxDQUFDLE1BQWM7SUFDbEUsSUFBSSxZQUFZLEdBQUcsNkJBQTZCLENBQUMsTUFBTSxDQUF3QixDQUFDO0lBQ2hGLE9BQU8sWUFBWSxDQUFDLHFCQUFxQixFQUFFLENBQUM7QUFFaEQsQ0FBQztBQUVELDZCQUE2QjtBQUN0QixTQUFTLG9DQUFvQyxDQUFDLE1BQWM7SUFDL0QsSUFBSSxZQUFZLEdBQUcsNkJBQTZCLENBQUMsTUFBTSxDQUF3QixDQUFDO0lBQ2hGLE9BQU8sWUFBWSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDN0MsQ0FBQztBQUVELDBDQUEwQztBQUNuQyxTQUFTLDZCQUE2QixDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUMvRSxnQkFBNEIsRUFBRSxtQkFBMkIsRUFDekQsaUJBQTZCLEVBQUUsb0JBQTRCLEVBQzNELGlCQUE2QixFQUFFLHVCQUErQixFQUFFLHVCQUErQjtJQUMvRixJQUFJLFlBQVksR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQXdCLENBQUM7SUFDaEYsSUFBSSxLQUFLLEdBQUcsWUFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLDJEQUFZLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUV0RSxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxJQUFJLEVBQUU7UUFDdkMsT0FBTyxLQUFLLENBQUM7S0FDaEI7U0FBTTtRQUNILGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUNwRCxpQkFBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFFdkQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLHVCQUF1QixJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6RSxpQkFBaUIsQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BFO1FBQ0QsT0FBTyxJQUFJLENBQUM7S0FDZjtBQUNMLENBQUM7QUFFTSxTQUFTLHVDQUF1QyxDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUN6RixNQUFjLEVBQ2QsT0FBZSxFQUNmLEVBQTBCLEVBQUUsT0FBcUI7SUFDakQseURBQXlEO0lBQ3pELElBQUksWUFBWSxHQUFHLDZCQUE2QixDQUFDLE1BQU0sQ0FBd0IsQ0FBQztJQUNoRixJQUFJLEtBQUssR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDLElBQUksMkRBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBRXRFLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtRQUNmLE9BQU8sS0FBSyxDQUFDO0tBQ2hCO1NBQU0sSUFBSSxLQUFLLENBQUMsS0FBSyxJQUFJLE1BQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLE9BQU8sRUFBRTtRQUN6RCxtREFBSSxDQUFDLEVBQUUsQ0FBQyx5RUFBeUUsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLGdCQUFnQixHQUFHLE1BQU0sR0FBRyxHQUFHLEdBQUcsT0FBTyxDQUFDLENBQUM7UUFDbEssT0FBTyxLQUFLLENBQUM7S0FDaEI7U0FBTTtRQUNILEtBQUssQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzdCLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7QUFDTCxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQkU7QUFDSyxTQUFTLHdDQUF3QyxDQUFDLE1BQWMsRUFBRSxhQUFxQixFQUMxRixnQkFBNEIsRUFBRSxtQkFBMkIsRUFDekQsaUJBQTZCLEVBQUUsb0JBQTRCO0lBQzNELElBQUksWUFBWSxHQUFHLDZCQUE2QixDQUFDLE1BQU0sQ0FBd0IsQ0FBQztJQUNoRixJQUFJLEtBQUssR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksMkRBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBRXBFLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtRQUNmLE9BQU8sS0FBSyxDQUFDO0tBQ2hCO1NBQU07UUFDSCxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDcEQsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ3ZELE9BQU8sSUFBSSxDQUFDO0tBQ2Y7QUFDTCxDQUFDO0FBRUQsOERBQThEO0FBQ3ZELFNBQVMsdUNBQXVDLENBQUMsTUFBYyxFQUFFLFlBQW9CO0lBQ3hGLElBQUksWUFBWSxHQUFHLDZCQUE2QixDQUFDLE1BQU0sQ0FBd0IsQ0FBQztJQUNoRixJQUFJLEtBQUssR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksMkRBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0lBRW5FLElBQUksTUFBTSxHQUFXLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLDZHQUE2RztJQUM3RyxrR0FBa0c7SUFDbEcseUNBQXlDO0lBQ3pDLElBQUksS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLElBQUksRUFBRTtRQUN2QyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7S0FDaEM7SUFFRCxrQ0FBa0M7SUFDbEMsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQUNNLFNBQVMsMkJBQTJCLENBQUMsTUFBYyxFQUFFLE1BQWMsRUFBRSxZQUFvQjtJQUU1RixJQUFJLFlBQVksR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQXdCLENBQUM7SUFDaEYsWUFBWSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSwyREFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDbkUsQ0FBQztBQUVNLFNBQVMsK0JBQStCLENBQUMsTUFBYyxFQUFFLFlBQW9CO0lBQ2hGLElBQUksWUFBWSxHQUFHLDZCQUE2QixDQUFDLE1BQU0sQ0FBd0IsQ0FBQztJQUNoRixPQUFPLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSwyREFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdEUsQ0FBQztBQUNNLFNBQVMsK0JBQStCLENBQUMsTUFBYyxFQUFFLFlBQW9CO0lBRWhGLElBQUksWUFBWSxHQUFHLDZCQUE2QixDQUFDLE1BQU0sQ0FBd0IsQ0FBQztJQUNoRixPQUFPLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSwyREFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDdEUsQ0FBQztBQUVNLFNBQVMseUJBQXlCLENBQUMsTUFBYyxFQUFFLEtBQWM7SUFDcEUsSUFBSSxZQUFZLEdBQUcsNkJBQTZCLENBQUMsTUFBTSxDQUF3QixDQUFDO0lBQ2hGLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVNLFNBQVMsd0JBQXdCLENBQUMsTUFBYztJQUNuRCxJQUFJLFlBQVksR0FBRyw2QkFBNkIsQ0FBQyxNQUFNLENBQXdCLENBQUM7SUFDaEYsT0FBTyxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDakMsQ0FBQztBQUdNLFNBQVMscUJBQXFCO0lBQ2pDLDhEQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDdkIsQ0FBQztBQUNNLFNBQVMsNEJBQTRCO0lBQ3hDLDhEQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDOUIsQ0FBQztBQUNNLFNBQVMseUJBQXlCO0lBQ3JDLE9BQU8sOERBQVMsQ0FBQyxVQUFVLENBQUM7QUFDaEMsQ0FBQztBQUVNLFNBQVMsaUNBQWlDO0lBQzdDLE9BQU8sMERBQUssQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLENBQUMsTUFBTSxDQUFDO0FBQ3pELENBQUM7QUFDTSxTQUFTLDBCQUEwQixDQUFDLEtBQWE7SUFDcEQsSUFBTSxJQUFJLEdBQUcsMERBQUssQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDcEQsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssRUFBRTtRQUNyQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUN0QjtTQUNJO1FBQ0QsbURBQUksQ0FBQyxFQUFFLENBQUMsOEJBQThCLEdBQUcsS0FBSyxHQUFHLGtCQUFrQixDQUFDLENBQUM7UUFDckUsZ0ZBQWdGO1FBQ2hGLE9BQU8sRUFBRSxDQUFDO0tBQ2I7QUFDTCxDQUFDO0FBR00sU0FBUywrQkFBK0IsQ0FBQyxLQUFhLEVBQUUsSUFBWSxFQUFFLEtBQWEsRUFBRSxNQUFjLEVBQUUsR0FBVztJQUNuSCxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBc0IsQ0FBQztJQUNoRSxJQUFJLE1BQU0sRUFBRTtRQUNSLE9BQU8sQ0FBQyxLQUFLLENBQUMsaUNBQWlDLEVBQUUsRUFBRSxLQUFLLFNBQUUsSUFBSSxRQUFFLEtBQUssU0FBRSxNQUFNLFVBQUUsR0FBRyxPQUFFLENBQUMsQ0FBQztRQUN0RixJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLENBQUMsRUFBRTtZQUMzQixLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUNyQixNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztTQUMxQjtRQUNELDBEQUFLLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsTUFBMkIsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyx5QkFBd0I7UUFDL0gsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFDTSxTQUFTLHlCQUF5QixDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsTUFBYyxFQUFFLEdBQVc7SUFDOUYsMERBQUssQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN4RSxDQUFDO0FBRU0sU0FBUyw0QkFBNEIsQ0FBQyxJQUFZO0lBQ3JELDBEQUFLLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdkQsQ0FBQztBQUNNLFNBQVMsMkJBQTJCLENBQUMsSUFBWSxFQUNwRCxpQkFBNkIsRUFBRSx1QkFBK0IsRUFBRSx1QkFBK0IsRUFDL0YsS0FBYSxFQUFFLE1BQWMsRUFDN0IsUUFBZ0IsRUFBRSxnQkFBeUI7SUFDM0MsSUFBSSxjQUFjLEdBQXNCLElBQUksQ0FBQztJQUM3QyxJQUFJLGlCQUFpQixJQUFJLHVCQUF1QixHQUFHLENBQUMsRUFBRTtRQUNsRCxjQUFjLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsdUJBQXVCLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztLQUN0SDtJQUNELE9BQU8sMERBQUssQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsbUVBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixDQUFDLENBQUM7QUFDN0ksQ0FBQztBQUdNLFNBQVMsY0FBYztJQUMxQixJQUFJLFlBQVksS0FBSyxJQUFJO1FBQ3JCLE9BQU8sWUFBWSxDQUFDO0lBQ3hCLG1EQUFJLENBQUMsVUFBVSxDQUFDLHdEQUF3RCxDQUFDLENBQUM7SUFDMUUsT0FBTyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLENBQUM7QUFDTSxTQUFTLGVBQWU7SUFDM0IsT0FBTyxjQUFjLEVBQUUsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDakQsQ0FBQyIsImZpbGUiOiIuL3NyYy9hd3J0Yy91bml0eS9DQVBJLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgMjAxOSwgYmVjYXVzZS13aHktbm90LmNvbSBMaW1pdGVkXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cblxuKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cbiogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFXG5GT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTFxuREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1JcblNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSXG5DQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLFxuT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbk9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4qL1xuLyoqVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBtYXBwaW5nIGJldHdlZW4gdGhlIGF3cnRjX2Jyb3dzZXIgbGlicmFyeSBhbmRcbiAqIFVuaXR5cyBXZWJHTCBzdXBwb3J0LiBOb3QgbmVlZGVkIGZvciByZWd1bGFyIHVzZS5cbiAqL1xuaW1wb3J0IHsgU0xvZywgV2ViUnRjTmV0d29yaywgU2lnbmFsaW5nQ29uZmlnLCBOZXR3b3JrRXZlbnQsIENvbm5lY3Rpb25JZCwgTG9jYWxOZXR3b3JrLCBXZWJzb2NrZXROZXR3b3JrIH0gZnJvbSBcIi4uL25ldHdvcmsvaW5kZXhcIlxuaW1wb3J0IHsgTWVkaWFDb25maWd1cmF0aW9uU3RhdGUsIE5ldHdvcmtDb25maWcsIE1lZGlhQ29uZmlnIH0gZnJvbSBcIi4uL21lZGlhL2luZGV4XCI7XG5pbXBvcnQgeyBCcm93c2VyTWVkaWFTdHJlYW0sIEJyb3dzZXJNZWRpYU5ldHdvcmssIERldmljZUFwaSwgQnJvd3NlcldlYlJ0Y0NhbGwsIE1lZGlhLCBWaWRlb0lucHV0VHlwZSB9IGZyb20gXCIuLi9tZWRpYV9icm93c2VyL2luZGV4XCI7XG5cblxudmFyIENBUElfSW5pdE1vZGUgPSB7XG4gICAgLy9PcmlnaW5hbCBtb2RlLiBEZXZpY2VzIHdpbGwgYmUgdW5rbm93biBhZnRlciBzdGFydHVwXG4gICAgRGVmYXVsdDogMCxcbiAgICAvL1dhaXRzIGZvciB0aGUgZGVzdmljZSBpbmZvIHRvIGNvbWUgaW5cbiAgICAvL25hbWVzIG1pZ2h0IGJlIG1pc3NpbmcgdGhvdWdoIChicm93c2VyIHNlY3VyaXR5IHRoaW5nKVxuICAgIFdhaXRGb3JEZXZpY2VzOiAxLFxuICAgIC8vQXNrcyB0aGUgdXNlciBmb3IgY2FtZXJhIC8gYXVkaW8gYWNjZXNzIHRvIGJlIGFibGUgdG9cbiAgICAvL2dldCBhY2N1cmF0ZSBkZXZpY2UgaW5mb3JtYXRpb25cbiAgICBSZXF1ZXN0QWNjZXNzOiAyXG59O1xuXG52YXIgQ0FQSV9Jbml0U3RhdGUgPSB7XG4gICAgVW5pbml0aWFsaXplZDogMCxcbiAgICBJbml0aWFsaXppbmc6IDEsXG4gICAgSW5pdGlhbGl6ZWQ6IDIsXG4gICAgRmFpbGVkOiAzXG59O1xudmFyIGdDQVBJX0luaXRTdGF0ZSA9IENBUElfSW5pdFN0YXRlLlVuaW5pdGlhbGl6ZWQ7XG52YXIgZ0NBUElfQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IG51bGw7XG5cbmRlY2xhcmUgdmFyIEdMY3R4OiBhbnk7XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX0luaXRBc3luYyhpbml0bW9kZSkge1xuICAgIGNvbnNvbGUuZGVidWcoXCJDQVBJX0luaXRBc3luYyBtb2RlOiBcIiArIGluaXRtb2RlKTtcbiAgICBnQ0FQSV9Jbml0U3RhdGUgPSBDQVBJX0luaXRTdGF0ZS5Jbml0aWFsaXppbmc7XG5cbiAgICBpZiAoR0xjdHggJiYgR0xjdHguY2FudmFzKSB7XG4gICAgICAgIGdDQVBJX0NhbnZhcyA9IEdMY3R4LmNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICB9XG4gICAgSW5pdEF1dG9wbGF5V29ya2Fyb3VuZCgpO1xuXG4gICAgbGV0IGhhc0RldkFwaSA9IERldmljZUFwaS5Jc0FwaUF2YWlsYWJsZSgpO1xuICAgIGlmIChoYXNEZXZBcGkgJiYgaW5pdG1vZGUgPT0gQ0FQSV9Jbml0TW9kZS5XYWl0Rm9yRGV2aWNlcykge1xuICAgICAgICBEZXZpY2VBcGkuVXBkYXRlKCk7XG4gICAgfSBlbHNlIGlmIChoYXNEZXZBcGkgJiYgaW5pdG1vZGUgPT0gQ0FQSV9Jbml0TW9kZS5SZXF1ZXN0QWNjZXNzKSB7XG4gICAgICAgIERldmljZUFwaS5SZXF1ZXN0VXBkYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy9laXRoZXIgbm8gZGV2aWNlIGFjY2VzcyBhdmFpbGFibGUgb3Igbm90IHJlcXVlc3RlZC4gU3dpdGNoXG4gICAgICAgIC8vdG8gaW5pdCBzdGF0ZSBpbW1lZGlhdGVseSB3aXRob3V0IGRldmljZSBpbmZvXG4gICAgICAgIGdDQVBJX0luaXRTdGF0ZSA9IENBUElfSW5pdFN0YXRlLkluaXRpYWxpemVkO1xuICAgICAgICBpZiAoaGFzRGV2QXBpID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiSW5pdGlhbGl6ZWQgd2l0aG91dCBhY2Nlc3NpYmxlIERldmljZUFQSVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gSW5pdEF1dG9wbGF5V29ya2Fyb3VuZCgpe1xuICAgIGlmKGdDQVBJX0NhbnZhcyA9PSBudWxsKXtcbiAgICAgICAgU0xvZy5MVyhcIkF1dG9wbGF5IHdvcmthcm91bmQgaW5hY3RpdmUuIE5vIGNhbnZhcyBvYmplY3Qga25vd24gdG8gcmVnaXN0ZXIgY2xpY2sgJiB0b3VjaCBldmVudCBoYW5kbGVycy5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbGlzdGVuZXIgOiAoKT0+dm9pZCA9IG51bGw7XG4gICAgbGlzdGVuZXIgPSAoKT0+e1xuICAgICAgICAvL2NhbGxlZCBkdXJpbmcgdXNlciBpbnB1dCBldmVudFxuICAgICAgICBCcm93c2VyTWVkaWFTdHJlYW0uUmVzb2x2ZUF1dG9wbGF5KCk7XG4gICAgICAgIGdDQVBJX0NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgZ0NBUElfQ2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgfTtcbiAgICAvL0lmIGEgc3RyZWFtIHJ1bnMgaW50byBhdXRvcGxheSBpc3N1ZXMgd2UgYWRkIGEgbGlzdGVuZXIgZm9yIHRoZSBuZXh0IG9uIGNsaWNrIC8gdG91Y2hzdGFydCBldmVudFxuICAgIC8vYW5kIHJlc29sdmUgaXQgb24gdGhlIG5leHQgaW5jb21pbmcgZXZlbnRcbiAgICBCcm93c2VyTWVkaWFTdHJlYW0ub25hdXRvcGxheWJsb2NrZWQgPSAoKT0+e1xuICAgICAgICBnQ0FQSV9DYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgICAgIGdDQVBJX0NhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1BvbGxJbml0U3RhdGUoKSB7XG4gICAgLy9rZWVwIGNoZWNraW5nIGlmIHRoZSBEZXZpY2VBcGkgbGVmdCBwZW5kaW5nIHN0YXRlXG4gICAgLy9PbmNlIGNvbXBsZXRlZCBpbml0IGlzIGZpbmlzaGVkLlxuICAgIC8vTGF0ZXIgd2UgbWlnaHQgZG8gbW9yZSBoZXJlXG4gICAgaWYgKERldmljZUFwaS5Jc1BlbmRpbmcgPT0gZmFsc2UgJiYgZ0NBUElfSW5pdFN0YXRlID09IENBUElfSW5pdFN0YXRlLkluaXRpYWxpemluZykge1xuICAgICAgICBnQ0FQSV9Jbml0U3RhdGUgPSBDQVBJX0luaXRTdGF0ZS5Jbml0aWFsaXplZDtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkluaXQgY29tcGxldGVkLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGdDQVBJX0luaXRTdGF0ZTtcbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBsb2dsZXZlbCBcbiAqIE5vbmUgPSAwLFxuICogRXJyb3JzID0gMSxcbiAqIFdhcm5pbmdzID0gMixcbiAqIFZlcmJvc2UgPSAzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1NMb2dfU2V0TG9nTGV2ZWwobG9nbGV2ZWw6IG51bWJlcikge1xuICAgIGlmIChsb2dsZXZlbCA8IDAgfHwgbG9nbGV2ZWwgPiAzKSB7XG4gICAgICAgIFNMb2cuTG9nRXJyb3IoXCJJbnZhbGlkIGxvZyBsZXZlbCBcIiArIGxvZ2xldmVsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTTG9nLlNldExvZ0xldmVsKGxvZ2xldmVsKTtcbn1cblxuXG5cbnZhciBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlczogeyBbaWQ6IG51bWJlcl06IFdlYlJ0Y05ldHdvcmsgfSA9IHt9O1xudmFyIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzTmV4dEluZGV4ID0gMTtcblxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX0lzQXZhaWxhYmxlKCkge1xuICAgIC8vdXNlZCBieSBDIyBjb21wb25lbnQgdG8gY2hlY2sgaWYgdGhpcyBwbHVnaW4gaXMgbG9hZGVkLlxuICAgIC8vY2FuIG9ubHkgZ28gd3JvbmcgZHVlIHRvIHByb2dyYW1taW5nIGVycm9yIC8gcGFja2FnaW5nXG4gICAgaWYgKFdlYlJ0Y05ldHdvcmsgJiYgV2Vic29ja2V0TmV0d29yaylcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfSXNCcm93c2VyU3VwcG9ydGVkKCkge1xuICAgIGlmIChSVENQZWVyQ29ubmVjdGlvbiAmJiBSVENEYXRhQ2hhbm5lbClcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfV2ViUnRjTmV0d29ya19DcmVhdGUobENvbmZpZ3VyYXRpb246IHN0cmluZykge1xuICAgIHZhciBsSW5kZXggPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc05leHRJbmRleDtcbiAgICBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc05leHRJbmRleCsrO1xuXG4gICAgdmFyIHNpZ25hbGluZ19jbGFzcyA9IFwiTG9jYWxOZXR3b3JrXCI7XG4gICAgdmFyIHNpZ25hbGluZ19wYXJhbTogYW55ID0gbnVsbDtcbiAgICB2YXIgaWNlU2VydmVyczogUlRDSWNlU2VydmVyW107XG5cbiAgICBpZiAobENvbmZpZ3VyYXRpb24gPT0gbnVsbCB8fCB0eXBlb2YgbENvbmZpZ3VyYXRpb24gIT09ICdzdHJpbmcnIHx8IGxDb25maWd1cmF0aW9uLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAgIFNMb2cuTG9nRXJyb3IoXCJpbnZhbGlkIGNvbmZpZ3VyYXRpb24uIFJldHVybmluZyAtMSEgQ29uZmlnOiBcIiArIGxDb25maWd1cmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBlbHNlIHtcblxuICAgICAgICB2YXIgY29uZiA9IEpTT04ucGFyc2UobENvbmZpZ3VyYXRpb24pO1xuXG4gICAgICAgIGlmIChjb25mKSB7XG5cbiAgICAgICAgICAgIGlmIChjb25mLnNpZ25hbGluZykge1xuICAgICAgICAgICAgICAgIHNpZ25hbGluZ19jbGFzcyA9IGNvbmYuc2lnbmFsaW5nLmNsYXNzO1xuICAgICAgICAgICAgICAgIHNpZ25hbGluZ19wYXJhbSA9IGNvbmYuc2lnbmFsaW5nLnBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmYuaWNlU2VydmVycykge1xuICAgICAgICAgICAgICAgIGljZVNlcnZlcnMgPSBjb25mLmljZVNlcnZlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTTG9nLkwoc2lnbmFsaW5nX2NsYXNzKTtcbiAgICAgICAgICAgIC8vdGhpcyBzZWVtcyB0byBiZSBicm9rZW4gYWZ0ZXIgc3dpdGNoIHRvIG1vZHVsZXNcbiAgICAgICAgICAgIC8vbGV0IHNpZ25hbGluZ05ldHdvcmtDbGFzcyA9IHdpbmRvd1tzaWduYWxpbmdfY2xhc3NdO1xuICAgICAgICAgICAgLy9sZXQgc2lnbmFsaW5nTmV0d29ya0NsYXNzID0gIG5ldyAoPGFueT53aW5kb3cpW1wiYXdydGMuTG9jYWxOZXR3b3JrXCJdO1xuICAgICAgICAgICAgLy9jb25zb2xlLmRlYnVnKHNpZ25hbGluZ05ldHdvcmtDbGFzcyk7XG4gICAgICAgICAgICBsZXQgc2lnbmFsaW5nTmV0d29ya0NsYXNzOiBhbnk7XG4gICAgICAgICAgICBpZiAoc2lnbmFsaW5nX2NsYXNzID09PSBcIkxvY2FsTmV0d29ya1wiKSB7XG4gICAgICAgICAgICAgICAgc2lnbmFsaW5nTmV0d29ya0NsYXNzID0gTG9jYWxOZXR3b3JrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaWduYWxpbmdOZXR3b3JrQ2xhc3MgPSBXZWJzb2NrZXROZXR3b3JrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc2lnbmFsaW5nQ29uZmlnID0gbmV3IFNpZ25hbGluZ0NvbmZpZyhuZXcgc2lnbmFsaW5nTmV0d29ya0NsYXNzKHNpZ25hbGluZ19wYXJhbSkpO1xuXG5cbiAgICAgICAgICAgIGxldCBydGNDb25maWd1cmF0aW9uOiBSVENDb25maWd1cmF0aW9uID0geyBpY2VTZXJ2ZXJzOiBpY2VTZXJ2ZXJzIH07XG5cbiAgICAgICAgICAgIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gPSBuZXcgV2ViUnRjTmV0d29yayhzaWduYWxpbmdDb25maWcsIHJ0Y0NvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU0xvZy5Mb2dXYXJuaW5nKFwiUGFyc2luZyBjb25maWd1cmF0aW9uIGZhaWxlZC4gQ29uZmlndXJhdGlvbjogXCIgKyBsQ29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy9nQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLk9uTG9nID0gZnVuY3Rpb24gKGxNc2cpIHtcbiAgICAvLyAgICBjb25zb2xlLmRlYnVnKGxNc2cpO1xuICAgIC8vfTtcbiAgICByZXR1cm4gbEluZGV4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX1JlbGVhc2UobEluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAobEluZGV4IGluIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzKSB7XG4gICAgICAgIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0uRGlzcG9zZSgpO1xuICAgICAgICBkZWxldGUgZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfQ29ubmVjdChsSW5kZXg6IG51bWJlciwgbFJvb206IHN0cmluZykge1xuICAgIHJldHVybiBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLkNvbm5lY3QobFJvb20pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX1N0YXJ0U2VydmVyKGxJbmRleDogbnVtYmVyLCBsUm9vbTogc3RyaW5nKSB7XG4gICAgZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5TdGFydFNlcnZlcihsUm9vbSk7XG59XG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX1N0b3BTZXJ2ZXIobEluZGV4OiBudW1iZXIpIHtcbiAgICBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLlN0b3BTZXJ2ZXIoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfRGlzY29ubmVjdChsSW5kZXg6IG51bWJlciwgbENvbm5lY3Rpb25JZDogbnVtYmVyKSB7XG4gICAgZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5EaXNjb25uZWN0KG5ldyBDb25uZWN0aW9uSWQobENvbm5lY3Rpb25JZCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX1NodXRkb3duKGxJbmRleDogbnVtYmVyKSB7XG4gICAgZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5TaHV0ZG93bigpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX1VwZGF0ZShsSW5kZXg6IG51bWJlcikge1xuICAgIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0uVXBkYXRlKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfRmx1c2gobEluZGV4OiBudW1iZXIpIHtcbiAgICBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLkZsdXNoKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfU2VuZERhdGEobEluZGV4OiBudW1iZXIsIGxDb25uZWN0aW9uSWQ6IG51bWJlciwgbFVpbnQ4QXJyYXlEYXRhOiBVaW50OEFycmF5LCBsUmVsaWFibGU6IGJvb2xlYW4pIHtcbiAgICBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLlNlbmREYXRhKG5ldyBDb25uZWN0aW9uSWQobENvbm5lY3Rpb25JZCksIGxVaW50OEFycmF5RGF0YSwgbFJlbGlhYmxlKTtcbn1cblxuLy9oZWxwZXIgZm9yIGVtc2NyaXB0ZW5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfU2VuZERhdGFFbShsSW5kZXg6IG51bWJlciwgbENvbm5lY3Rpb25JZDogbnVtYmVyLCBsVWludDhBcnJheURhdGE6IFVpbnQ4QXJyYXksIGxVaW50OEFycmF5RGF0YU9mZnNldDogbnVtYmVyLCBsVWludDhBcnJheURhdGFMZW5ndGg6IG51bWJlciwgbFJlbGlhYmxlOiBib29sZWFuKSB7XG4gICAgLy9jb25zb2xlLmRlYnVnKFwiU2VuZERhdGFFbTogXCIgKyBsUmVsaWFibGUgKyBcIiBsZW5ndGggXCIgKyBsVWludDhBcnJheURhdGFMZW5ndGggKyBcIiB0byBcIiArIGxDb25uZWN0aW9uSWQpO1xuICAgIHZhciBhcnJheUJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGxVaW50OEFycmF5RGF0YS5idWZmZXIsIGxVaW50OEFycmF5RGF0YU9mZnNldCwgbFVpbnQ4QXJyYXlEYXRhTGVuZ3RoKTtcbiAgICByZXR1cm4gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5TZW5kRGF0YShuZXcgQ29ubmVjdGlvbklkKGxDb25uZWN0aW9uSWQpLCBhcnJheUJ1ZmZlciwgbFJlbGlhYmxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfV2ViUnRjTmV0d29ya19HZXRCdWZmZXJlZEFtb3VudChsSW5kZXg6IG51bWJlciwgbENvbm5lY3Rpb25JZDogbnVtYmVyLCBsUmVsaWFibGU6IGJvb2xlYW4pIHtcbiAgICByZXR1cm4gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5HZXRCdWZmZXJlZEFtb3VudChuZXcgQ29ubmVjdGlvbklkKGxDb25uZWN0aW9uSWQpLCBsUmVsaWFibGUpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfRGVxdWV1ZShsSW5kZXg6IG51bWJlcik6IE5ldHdvcmtFdmVudCB7XG4gICAgcmV0dXJuIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0uRGVxdWV1ZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIENBUElfV2ViUnRjTmV0d29ya19QZWVrKGxJbmRleDogbnVtYmVyKTogTmV0d29ya0V2ZW50IHtcbiAgICByZXR1cm4gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XS5QZWVrKCk7XG59XG5cbi8qKkFsbG93cyB0byBwZWVrIGludG8gdGhlIG5leHQgZXZlbnQgdG8gZmlndXJlIG91dCBpdHMgbGVuZ3RoIGFuZCBhbGxvY2F0ZVxuICogdGhlIG1lbW9yeSBuZWVkZWQgdG8gc3RvcmUgaXQgYmVmb3JlIGNhbGxpbmdcbiAqICAgICAgQ0FQSV9XZWJSdGNOZXR3b3JrX0RlcXVldWVFbVxuICogXG4gKiBAcGFyYW0ge3R5cGV9IGxJbmRleFxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIENBUElfV2ViUnRjTmV0d29ya19QZWVrRXZlbnREYXRhTGVuZ3RoKGxJbmRleCkge1xuICAgIHZhciBsTmV0RXZlbnQgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdLlBlZWsoKTtcbiAgICByZXR1cm4gQ0FQSV9XZWJSdGNOZXR3b3JrX0NoZWNrRXZlbnRMZW5ndGgobE5ldEV2ZW50KTtcbn1cbi8vaGVscGVyXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9XZWJSdGNOZXR3b3JrX0NoZWNrRXZlbnRMZW5ndGgobE5ldEV2ZW50OiBOZXR3b3JrRXZlbnQpIHtcbiAgICBpZiAobE5ldEV2ZW50ID09IG51bGwpIHtcbiAgICAgICAgLy9pbnZhbGlkIGV2ZW50XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGxOZXRFdmVudC5SYXdEYXRhID09IG51bGwpIHtcbiAgICAgICAgLy9ubyBkYXRhXG4gICAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxOZXRFdmVudC5SYXdEYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIC8vbm8gdXNlciBzdHJpbmdzIGFyZSBhbGxvd2VkIHRodXMgd2UgZ2V0IGF3YXkgd2l0aCBjb3VudGluZyB0aGUgY2hhcmFjdGVyc1xuICAgICAgICAvLyhBU0NJSSBvbmx5ISlcbiAgICAgICAgcmV0dXJuIGxOZXRFdmVudC5SYXdEYXRhLmxlbmd0aDtcbiAgICB9IGVsc2UgLy9tZXNzYWdlIGV2ZW50IHR5cGVzIDEgYW5kIDIgb25seT8gY2hlY2sgZm9yIGl0P1xuICAgIHtcbiAgICAgICAgLy9pdHMgbm90IG51bGwgYW5kIG5vdCBhIHN0cmluZy4gY2FuIG9ubHkgYmUgYSBVaW50OEFycmF5IGlmIHdlIGRpZG4ndFxuICAgICAgICAvL21lc3Mgc29tZXRoaW5nIHVwIGluIHRoZSBpbXBsZW1lbnRhdGlvblxuXG4gICAgICAgIHJldHVybiBsTmV0RXZlbnQuUmF3RGF0YS5sZW5ndGg7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIENBUElfV2ViUnRjTmV0d29ya19FdmVudERhdGFUb1VpbnQ4QXJyYXkoZGF0YTogYW55LCBkYXRhVWludDhBcnJheTogVWludDhBcnJheSwgZGF0YU9mZnNldDogbnVtYmVyLCBkYXRhTGVuZ3RoOiBudW1iZXIpIHtcbiAgICAvL2RhdGEgY2FuIGJlIG51bGwsIHN0cmluZyBvciBVaW50OEFycmF5XG4gICAgLy9yZXR1cm4gdmFsdWUgd2lsbCBiZSB0aGUgbGVuZ3RoIG9mIGRhdGEgd2UgdXNlZFxuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGRhdGEpID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIC8vaW4gY2FzZSB3ZSBkb24ndCBnZXQgYSBsYXJnZSBlbm91Z2ggYXJyYXkgd2UgbmVlZCB0byBjdXQgb2ZmIHRoZSBzdHJpbmdcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGggJiYgaSA8IGRhdGFMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGF0YVVpbnQ4QXJyYXlbZGF0YU9mZnNldCArIGldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAvL2luIGNhc2Ugd2UgZG9uJ3QgZ2V0IGEgbGFyZ2UgZW5vdWdoIGFycmF5IHdlIG5lZWQgdG8gY3V0IG9mZiB0aGUgc3RyaW5nXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aCAmJiBpIDwgZGF0YUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhVWludDhBcnJheVtkYXRhT2Zmc2V0ICsgaV0gPSBkYXRhW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxuLy9WZXJzaW9uIGZvciBlbXNjcmlwdGVuIG9yIGFueXRoaW5nIHRoYXQgZG9lc24ndCBoYXZlIGEgZ2FyYmFnZSBjb2xsZWN0b3IuXG4vLyBUaGUgbWVtb3J5IGZvciBldmVyeXRoaW5nIG5lZWRzIHRvIGJlIGFsbG9jYXRlZCBiZWZvcmUgdGhlIGNhbGwuXG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfRGVxdWV1ZUVtKGxJbmRleDogbnVtYmVyLCBsVHlwZUludEFycmF5OiBJbnQzMkFycmF5LCBsVHlwZUludEluZGV4OiBudW1iZXIsIGxDb25pZEludEFycmF5OiBJbnQzMkFycmF5LCBsQ29uaWRJbmRleDogbnVtYmVyLCBsRGF0YVVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXksIGxEYXRhT2Zmc2V0OiBudW1iZXIsIGxEYXRhTGVuZ3RoOiBudW1iZXIsIGxEYXRhTGVuSW50QXJyYXk6IEludDMyQXJyYXksIGxEYXRhTGVuSW50SW5kZXg6IG51bWJlcikge1xuICAgIHZhciBuRXZ0ID0gQ0FQSV9XZWJSdGNOZXR3b3JrX0RlcXVldWUobEluZGV4KTtcbiAgICBpZiAobkV2dCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBsVHlwZUludEFycmF5W2xUeXBlSW50SW5kZXhdID0gbkV2dC5UeXBlO1xuICAgIGxDb25pZEludEFycmF5W2xDb25pZEluZGV4XSA9IG5FdnQuQ29ubmVjdGlvbklkLmlkO1xuXG4gICAgLy9jb25zb2xlLmRlYnVnKFwiZXZlbnRcIiArIG5FdnQubmV0RXZlbnRUeXBlKTtcbiAgICB2YXIgbGVuZ3RoID0gQ0FQSV9XZWJSdGNOZXR3b3JrX0V2ZW50RGF0YVRvVWludDhBcnJheShuRXZ0LlJhd0RhdGEsIGxEYXRhVWludDhBcnJheSwgbERhdGFPZmZzZXQsIGxEYXRhTGVuZ3RoKTtcbiAgICBsRGF0YUxlbkludEFycmF5W2xEYXRhTGVuSW50SW5kZXhdID0gbGVuZ3RoOyAvL3JldHVybiB0aGUgbGVuZ3RoIGlmIHNvIHRoZSB1c2VyIGtub3dzIGhvdyBtdWNoIG9mIHRoZSBnaXZlbiBhcnJheSBpcyB1c2VkXG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1dlYlJ0Y05ldHdvcmtfUGVla0VtKGxJbmRleDogbnVtYmVyLCBsVHlwZUludEFycmF5OiBJbnQzMkFycmF5LCBsVHlwZUludEluZGV4OiBudW1iZXIsIGxDb25pZEludEFycmF5OiBJbnQzMkFycmF5LCBsQ29uaWRJbmRleDogbnVtYmVyLCBsRGF0YVVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXksIGxEYXRhT2Zmc2V0OiBudW1iZXIsIGxEYXRhTGVuZ3RoOiBudW1iZXIsIGxEYXRhTGVuSW50QXJyYXk6IEludDMyQXJyYXksIGxEYXRhTGVuSW50SW5kZXg6IG51bWJlcikge1xuICAgIHZhciBuRXZ0ID0gQ0FQSV9XZWJSdGNOZXR3b3JrX1BlZWsobEluZGV4KTtcbiAgICBpZiAobkV2dCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICBsVHlwZUludEFycmF5W2xUeXBlSW50SW5kZXhdID0gbkV2dC5UeXBlO1xuICAgIGxDb25pZEludEFycmF5W2xDb25pZEluZGV4XSA9IG5FdnQuQ29ubmVjdGlvbklkLmlkO1xuXG4gICAgLy9jb25zb2xlLmRlYnVnKFwiZXZlbnRcIiArIG5FdnQubmV0RXZlbnRUeXBlKTtcbiAgICB2YXIgbGVuZ3RoID0gQ0FQSV9XZWJSdGNOZXR3b3JrX0V2ZW50RGF0YVRvVWludDhBcnJheShuRXZ0LlJhd0RhdGEsIGxEYXRhVWludDhBcnJheSwgbERhdGFPZmZzZXQsIGxEYXRhTGVuZ3RoKTtcbiAgICBsRGF0YUxlbkludEFycmF5W2xEYXRhTGVuSW50SW5kZXhdID0gbGVuZ3RoOyAvL3JldHVybiB0aGUgbGVuZ3RoIGlmIHNvIHRoZSB1c2VyIGtub3dzIGhvdyBtdWNoIG9mIHRoZSBnaXZlbiBhcnJheSBpcyB1c2VkXG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19Jc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcblxuICAgIGlmIChCcm93c2VyTWVkaWFOZXR3b3JrICYmIEJyb3dzZXJXZWJSdGNDYWxsKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19IYXNVc2VyTWVkaWEoKTogYm9vbGVhbiB7XG4gICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19DcmVhdGUobEpzb25Db25maWd1cmF0aW9uKTogbnVtYmVyIHtcblxuICAgIGxldCBjb25maWcgPSBuZXcgTmV0d29ya0NvbmZpZygpO1xuICAgIGNvbmZpZyA9IEpTT04ucGFyc2UobEpzb25Db25maWd1cmF0aW9uKTtcblxuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBuZXcgQnJvd3Nlck1lZGlhTmV0d29yayhjb25maWcpO1xuXG4gICAgdmFyIGxJbmRleCA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzTmV4dEluZGV4O1xuICAgIGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzTmV4dEluZGV4Kys7XG5cbiAgICBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdID0gbWVkaWFOZXR3b3JrO1xuICAgIHJldHVybiBsSW5kZXg7XG59XG5cblxuXG5cblxuXG5cbi8vQ29uZmlndXJlKGNvbmZpZzogTWVkaWFDb25maWcpOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFOZXR3b3JrX0NvbmZpZ3VyZShsSW5kZXg6IG51bWJlciwgYXVkaW86IGJvb2xlYW4sIHZpZGVvOiBib29sZWFuLFxuICAgIG1pbldpZHRoOiBudW1iZXIsIG1pbkhlaWdodDogbnVtYmVyLFxuICAgIG1heFdpZHRoOiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyLFxuICAgIGlkZWFsV2lkdGg6IG51bWJlciwgaWRlYWxIZWlnaHQ6IG51bWJlcixcbiAgICBtaW5GcHM6IG51bWJlciwgbWF4RnBzOiBudW1iZXIsIGlkZWFsRnBzOiBudW1iZXIsIGRldmljZU5hbWU6IHN0cmluZyA9IFwiXCIpIHtcblxuICAgIGxldCBjb25maWc6IE1lZGlhQ29uZmlnID0gbmV3IE1lZGlhQ29uZmlnKCk7XG4gICAgY29uZmlnLkF1ZGlvID0gYXVkaW87XG4gICAgY29uZmlnLlZpZGVvID0gdmlkZW87XG4gICAgY29uZmlnLk1pbldpZHRoID0gbWluV2lkdGg7XG4gICAgY29uZmlnLk1pbkhlaWdodCA9IG1pbkhlaWdodDtcbiAgICBjb25maWcuTWF4V2lkdGggPSBtYXhXaWR0aDtcbiAgICBjb25maWcuTWF4SGVpZ2h0ID0gbWF4SGVpZ2h0O1xuICAgIGNvbmZpZy5JZGVhbFdpZHRoID0gaWRlYWxXaWR0aDtcbiAgICBjb25maWcuSWRlYWxIZWlnaHQgPSBpZGVhbEhlaWdodDtcblxuICAgIGNvbmZpZy5NaW5GcHMgPSBtaW5GcHM7XG4gICAgY29uZmlnLk1heEZwcyA9IG1heEZwcztcbiAgICBjb25maWcuSWRlYWxGcHMgPSBpZGVhbEZwcztcblxuICAgIGNvbmZpZy5WaWRlb0RldmljZU5hbWUgPSBkZXZpY2VOYW1lO1xuXG4gICAgY29uZmlnLkZyYW1lVXBkYXRlcyA9IHRydWU7XG5cbiAgICBsZXQgbWVkaWFOZXR3b3JrID0gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XSBhcyBCcm93c2VyTWVkaWFOZXR3b3JrO1xuICAgIG1lZGlhTmV0d29yay5Db25maWd1cmUoY29uZmlnKTtcblxufVxuLy9HZXRDb25maWd1cmF0aW9uU3RhdGUoKTogTWVkaWFDb25maWd1cmF0aW9uU3RhdGU7XG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9NZWRpYU5ldHdvcmtfR2V0Q29uZmlndXJhdGlvblN0YXRlKGxJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcblxuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdIGFzIEJyb3dzZXJNZWRpYU5ldHdvcms7XG4gICAgcmV0dXJuIG1lZGlhTmV0d29yay5HZXRDb25maWd1cmF0aW9uU3RhdGUoKSBhcyBudW1iZXI7XG59XG5cbi8vTm90ZTogbm90IHlldCBnbHVlZCB0byB0aGUgQyMgdmVyc2lvbiFcbi8vR2V0Q29uZmlndXJhdGlvbkVycm9yKCk6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19HZXRDb25maWd1cmF0aW9uRXJyb3IobEluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdIGFzIEJyb3dzZXJNZWRpYU5ldHdvcms7XG4gICAgcmV0dXJuIG1lZGlhTmV0d29yay5HZXRDb25maWd1cmF0aW9uRXJyb3IoKTtcblxufVxuXG4vL1Jlc2V0Q29uZmlndXJhdGlvbigpOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFOZXR3b3JrX1Jlc2V0Q29uZmlndXJhdGlvbihsSW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdIGFzIEJyb3dzZXJNZWRpYU5ldHdvcms7XG4gICAgcmV0dXJuIG1lZGlhTmV0d29yay5SZXNldENvbmZpZ3VyYXRpb24oKTtcbn1cblxuLy9UcnlHZXRGcmFtZShpZDogQ29ubmVjdGlvbklkKTogUmF3RnJhbWU7XG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9NZWRpYU5ldHdvcmtfVHJ5R2V0RnJhbWUobEluZGV4OiBudW1iZXIsIGxDb25uZWN0aW9uSWQ6IG51bWJlcixcbiAgICBsV2lkdGhJbnQzMkFycmF5OiBJbnQzMkFycmF5LCBsV2lkdGhJbnRBcnJheUluZGV4OiBudW1iZXIsXG4gICAgbEhlaWdodEludDMyQXJyYXk6IEludDMyQXJyYXksIGxIZWlnaHRJbnRBcnJheUluZGV4OiBudW1iZXIsXG4gICAgbEJ1ZmZlclVpbnQ4QXJyYXk6IFVpbnQ4QXJyYXksIGxCdWZmZXJVaW50OEFycmF5T2Zmc2V0OiBudW1iZXIsIGxCdWZmZXJVaW50OEFycmF5TGVuZ3RoOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgbWVkaWFOZXR3b3JrID0gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XSBhcyBCcm93c2VyTWVkaWFOZXR3b3JrO1xuICAgIGxldCBmcmFtZSA9IG1lZGlhTmV0d29yay5UcnlHZXRGcmFtZShuZXcgQ29ubmVjdGlvbklkKGxDb25uZWN0aW9uSWQpKTtcblxuICAgIGlmIChmcmFtZSA9PSBudWxsIHx8IGZyYW1lLkJ1ZmZlciA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsV2lkdGhJbnQzMkFycmF5W2xXaWR0aEludEFycmF5SW5kZXhdID0gZnJhbWUuV2lkdGg7XG4gICAgICAgIGxIZWlnaHRJbnQzMkFycmF5W2xIZWlnaHRJbnRBcnJheUluZGV4XSA9IGZyYW1lLkhlaWdodDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxCdWZmZXJVaW50OEFycmF5TGVuZ3RoICYmIGkgPCBmcmFtZS5CdWZmZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxCdWZmZXJVaW50OEFycmF5W2xCdWZmZXJVaW50OEFycmF5T2Zmc2V0ICsgaV0gPSBmcmFtZS5CdWZmZXJbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9NZWRpYU5ldHdvcmtfVHJ5R2V0RnJhbWVfVG9UZXh0dXJlKGxJbmRleDogbnVtYmVyLCBsQ29ubmVjdGlvbklkOiBudW1iZXIsXG4gICAgbFdpZHRoOiBudW1iZXIsXG4gICAgbEhlaWdodDogbnVtYmVyLFxuICAgIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUpOiBib29sZWFuIHtcbiAgICAvL2NvbnNvbGUubG9nKFwiQ0FQSV9NZWRpYU5ldHdvcmtfVHJ5R2V0RnJhbWVfVG9UZXh0dXJlXCIpO1xuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdIGFzIEJyb3dzZXJNZWRpYU5ldHdvcms7XG4gICAgbGV0IGZyYW1lID0gbWVkaWFOZXR3b3JrLlRyeUdldEZyYW1lKG5ldyBDb25uZWN0aW9uSWQobENvbm5lY3Rpb25JZCkpO1xuXG4gICAgaWYgKGZyYW1lID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoZnJhbWUuV2lkdGggIT0gbFdpZHRoIHx8IGZyYW1lLkhlaWdodCAhPSBsSGVpZ2h0KSB7XG4gICAgICAgIFNMb2cuTFcoXCJDQVBJX01lZGlhTmV0d29ya19UcnlHZXRGcmFtZV9Ub1RleHR1cmUgZmFpbGVkLiBXaWR0aCBoZWlnaHQgZXhwZWN0ZWQ6IFwiICsgZnJhbWUuV2lkdGggKyBcInhcIiArIGZyYW1lLkhlaWdodCArIFwiIGJ1dCByZWNlaXZlZCBcIiArIGxXaWR0aCArIFwieFwiICsgbEhlaWdodCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmcmFtZS5Ub1RleHR1cmUoZ2wsIHRleHR1cmUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4vKlxuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFOZXR3b3JrX1RyeUdldEZyYW1lX1RvVGV4dHVyZTIobEluZGV4OiBudW1iZXIsIGxDb25uZWN0aW9uSWQ6IG51bWJlcixcbiAgICBsV2lkdGhJbnQzMkFycmF5OiBJbnQzMkFycmF5LCBsV2lkdGhJbnRBcnJheUluZGV4OiBudW1iZXIsIFxuICAgIGxIZWlnaHRJbnQzMkFycmF5OiBJbnQzMkFycmF5LCBsSGVpZ2h0SW50QXJyYXlJbmRleDogbnVtYmVyLFxuICAgIGdsOldlYkdMMlJlbmRlcmluZ0NvbnRleHQpOiBXZWJHTFRleHR1cmVcbntcbiAgICAvL2NvbnNvbGUubG9nKFwiQ0FQSV9NZWRpYU5ldHdvcmtfVHJ5R2V0RnJhbWVfVG9UZXh0dXJlXCIpO1xuICAgIGxldCBtZWRpYU5ldHdvcmsgPSBnQ0FQSV9XZWJSdGNOZXR3b3JrX0luc3RhbmNlc1tsSW5kZXhdIGFzIEJyb3dzZXJNZWRpYU5ldHdvcms7XG4gICAgbGV0IGZyYW1lID0gbWVkaWFOZXR3b3JrLlRyeUdldEZyYW1lKG5ldyBDb25uZWN0aW9uSWQobENvbm5lY3Rpb25JZCkpO1xuXG4gICAgaWYgKGZyYW1lID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxXaWR0aEludDMyQXJyYXlbbFdpZHRoSW50QXJyYXlJbmRleF0gPSBmcmFtZS5XaWR0aDtcbiAgICAgICAgbEhlaWdodEludDMyQXJyYXlbbEhlaWdodEludEFycmF5SW5kZXhdID0gZnJhbWUuSGVpZ2h0O1xuICAgICAgICBsZXQgdGV4dHVyZSAgPSBmcmFtZS5Ub1RleHR1cmUyKGdsKTtcbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxufVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19UcnlHZXRGcmFtZV9SZXNvbHV0aW9uKGxJbmRleDogbnVtYmVyLCBsQ29ubmVjdGlvbklkOiBudW1iZXIsXG4gICAgbFdpZHRoSW50MzJBcnJheTogSW50MzJBcnJheSwgbFdpZHRoSW50QXJyYXlJbmRleDogbnVtYmVyLFxuICAgIGxIZWlnaHRJbnQzMkFycmF5OiBJbnQzMkFycmF5LCBsSGVpZ2h0SW50QXJyYXlJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICBsZXQgZnJhbWUgPSBtZWRpYU5ldHdvcmsuUGVla0ZyYW1lKG5ldyBDb25uZWN0aW9uSWQobENvbm5lY3Rpb25JZCkpO1xuXG4gICAgaWYgKGZyYW1lID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxXaWR0aEludDMyQXJyYXlbbFdpZHRoSW50QXJyYXlJbmRleF0gPSBmcmFtZS5XaWR0aDtcbiAgICAgICAgbEhlaWdodEludDMyQXJyYXlbbEhlaWdodEludEFycmF5SW5kZXhdID0gZnJhbWUuSGVpZ2h0O1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbi8vUmV0dXJucyB0aGUgZnJhbWUgYnVmZmVyIHNpemUgb3IgLTEgaWYgbm8gZnJhbWUgaXMgYXZhaWxhYmxlXG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9NZWRpYU5ldHdvcmtfVHJ5R2V0RnJhbWVEYXRhTGVuZ3RoKGxJbmRleDogbnVtYmVyLCBjb25uZWN0aW9uSWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICBsZXQgZnJhbWUgPSBtZWRpYU5ldHdvcmsuUGVla0ZyYW1lKG5ldyBDb25uZWN0aW9uSWQoY29ubmVjdGlvbklkKSk7XG5cbiAgICBsZXQgbGVuZ3RoOiBudW1iZXIgPSAtMTtcbiAgICAvL2FkZGVkIGZyYW1lLkJ1ZmZlciAhPSBudWxsIGFzIHRoZSBmcmFtZSBtaWdodCBiZSBhIExhenlGcmFtZSBqdXN0IGNyZWF0aW5nIGEgY29weSBvZiB0aGUgaHRtbCB2aWRlbyBlbGVtZW50XG4gICAgLy9pbiB0aGUgbW9tZW50IGZyYW1lLkJ1ZmZlciBpcyBjYWxsZWQuIGlmIHRoaXMgZmFpbHMgZm9yIGFueSByZWFzaW9uIGl0IG1pZ2h0IHJldHVybiBudWxsIGRlc3BpdGVcbiAgICAvL3RoZSBmcmFtZSBvYmplY3QgaXRzZWxmIGJlaW5nIGF2YWlsYWJsZVxuICAgIGlmIChmcmFtZSAhPSBudWxsICYmIGZyYW1lLkJ1ZmZlciAhPSBudWxsKSB7XG4gICAgICAgIGxlbmd0aCA9IGZyYW1lLkJ1ZmZlci5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy9TTG9nLkwoXCJkYXRhIGxlbmd0aDpcIiArIGxlbmd0aCk7XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19TZXRWb2x1bWUobEluZGV4OiBudW1iZXIsIHZvbHVtZTogbnVtYmVyLCBjb25uZWN0aW9uSWQ6IG51bWJlcik6IHZvaWQge1xuXG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICBtZWRpYU5ldHdvcmsuU2V0Vm9sdW1lKHZvbHVtZSwgbmV3IENvbm5lY3Rpb25JZChjb25uZWN0aW9uSWQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFOZXR3b3JrX0hhc0F1ZGlvVHJhY2sobEluZGV4OiBudW1iZXIsIGNvbm5lY3Rpb25JZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICByZXR1cm4gbWVkaWFOZXR3b3JrLkhhc0F1ZGlvVHJhY2sobmV3IENvbm5lY3Rpb25JZChjb25uZWN0aW9uSWQpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19IYXNWaWRlb1RyYWNrKGxJbmRleDogbnVtYmVyLCBjb25uZWN0aW9uSWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuXG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICByZXR1cm4gbWVkaWFOZXR3b3JrLkhhc1ZpZGVvVHJhY2sobmV3IENvbm5lY3Rpb25JZChjb25uZWN0aW9uSWQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFOZXR3b3JrX1NldE11dGUobEluZGV4OiBudW1iZXIsIHZhbHVlOiBib29sZWFuKSB7XG4gICAgbGV0IG1lZGlhTmV0d29yayA9IGdDQVBJX1dlYlJ0Y05ldHdvcmtfSW5zdGFuY2VzW2xJbmRleF0gYXMgQnJvd3Nlck1lZGlhTmV0d29yaztcbiAgICBtZWRpYU5ldHdvcmsuU2V0TXV0ZSh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhTmV0d29ya19Jc011dGUobEluZGV4OiBudW1iZXIpIHtcbiAgICBsZXQgbWVkaWFOZXR3b3JrID0gZ0NBUElfV2ViUnRjTmV0d29ya19JbnN0YW5jZXNbbEluZGV4XSBhcyBCcm93c2VyTWVkaWFOZXR3b3JrO1xuICAgIHJldHVybiBtZWRpYU5ldHdvcmsuSXNNdXRlKCk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfRGV2aWNlQXBpX1VwZGF0ZSgpOiB2b2lkIHtcbiAgICBEZXZpY2VBcGkuVXBkYXRlKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9EZXZpY2VBcGlfUmVxdWVzdFVwZGF0ZSgpOiB2b2lkIHtcbiAgICBEZXZpY2VBcGkuUmVxdWVzdFVwZGF0ZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIENBUElfRGV2aWNlQXBpX0xhc3RVcGRhdGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gRGV2aWNlQXBpLkxhc3RVcGRhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX01lZGlhX0dldFZpZGVvRGV2aWNlc19MZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWVkaWEuU2hhcmVkSW5zdGFuY2UuR2V0VmlkZW9EZXZpY2VzKCkubGVuZ3RoO1xufVxuZXhwb3J0IGZ1bmN0aW9uIENBUElfTWVkaWFfR2V0VmlkZW9EZXZpY2VzKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRldnMgPSBNZWRpYS5TaGFyZWRJbnN0YW5jZS5HZXRWaWRlb0RldmljZXMoKTtcbiAgICBpZiAoZGV2cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICByZXR1cm4gZGV2c1tpbmRleF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBTTG9nLkxFKFwiUmVxdWVzdGVkIGRldmljZSB3aXRoIGluZGV4IFwiICsgaW5kZXggKyBcIiBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgIC8vaXQgbmVlZHMgdG8gYmUgXCJcIiB0byBiZWhhdmUgdGhlIHNhbWUgdG8gdGhlIEMrKyBBUEkuIHN0ZDo6c3RyaW5nIGNhbid0IGJlIG51bGxcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1ZpZGVvSW5wdXRfQWRkQ2FudmFzRGV2aWNlKHF1ZXJ5OiBzdHJpbmcsIG5hbWU6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZwczogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xuICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkNBUElfVmlkZW9JbnB1dF9BZGRDYW52YXNEZXZpY2VcIiwgeyBxdWVyeSwgbmFtZSwgd2lkdGgsIGhlaWdodCwgZnBzIH0pO1xuICAgICAgICBpZiAod2lkdGggPD0gMCB8fCBoZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgd2lkdGggPSBjYW52YXMud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIE1lZGlhLlNoYXJlZEluc3RhbmNlLlZpZGVvSW5wdXQuQWRkQ2FudmFzRGV2aWNlKGNhbnZhcyBhcyBIVE1MQ2FudmFzRWxlbWVudCwgbmFtZSwgd2lkdGgsIGhlaWdodCwgZnBzKTsvLywgd2lkdGgsIGhlaWdodCwgZnBzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDQVBJX1ZpZGVvSW5wdXRfQWRkRGV2aWNlKG5hbWU6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZwczogbnVtYmVyKSB7XG4gICAgTWVkaWEuU2hhcmVkSW5zdGFuY2UuVmlkZW9JbnB1dC5BZGREZXZpY2UobmFtZSwgd2lkdGgsIGhlaWdodCwgZnBzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENBUElfVmlkZW9JbnB1dF9SZW1vdmVEZXZpY2UobmFtZTogc3RyaW5nKSB7XG4gICAgTWVkaWEuU2hhcmVkSW5zdGFuY2UuVmlkZW9JbnB1dC5SZW1vdmVEZXZpY2UobmFtZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gQ0FQSV9WaWRlb0lucHV0X1VwZGF0ZUZyYW1lKG5hbWU6IHN0cmluZyxcbiAgICBsQnVmZmVyVWludDhBcnJheTogVWludDhBcnJheSwgbEJ1ZmZlclVpbnQ4QXJyYXlPZmZzZXQ6IG51bWJlciwgbEJ1ZmZlclVpbnQ4QXJyYXlMZW5ndGg6IG51bWJlcixcbiAgICB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcixcbiAgICByb3RhdGlvbjogbnVtYmVyLCBmaXJzdFJvd0lzQm90dG9tOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgbGV0IGRhdGFQdHJDbGFtcGVkOiBVaW50OENsYW1wZWRBcnJheSA9IG51bGw7XG4gICAgaWYgKGxCdWZmZXJVaW50OEFycmF5ICYmIGxCdWZmZXJVaW50OEFycmF5TGVuZ3RoID4gMCkge1xuICAgICAgICBkYXRhUHRyQ2xhbXBlZCA9IG5ldyBVaW50OENsYW1wZWRBcnJheShsQnVmZmVyVWludDhBcnJheS5idWZmZXIsIGxCdWZmZXJVaW50OEFycmF5T2Zmc2V0LCBsQnVmZmVyVWludDhBcnJheUxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiBNZWRpYS5TaGFyZWRJbnN0YW5jZS5WaWRlb0lucHV0LlVwZGF0ZUZyYW1lKG5hbWUsIGRhdGFQdHJDbGFtcGVkLCB3aWR0aCwgaGVpZ2h0LCBWaWRlb0lucHV0VHlwZS5BUkdCLCByb3RhdGlvbiwgZmlyc3RSb3dJc0JvdHRvbSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEdldFVuaXR5Q2FudmFzKCk6IEhUTUxDYW52YXNFbGVtZW50IHtcbiAgICBpZiAoZ0NBUElfQ2FudmFzICE9PSBudWxsKVxuICAgICAgICByZXR1cm4gZ0NBUElfQ2FudmFzO1xuICAgIFNMb2cuTG9nV2FybmluZyhcIlVzaW5nIEdldFVuaXR5Q2FudmFzIHdpdGhvdXQgYSBrbm93biBjYXZhbnMgcmVmZXJlbmNlLlwiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBHZXRVbml0eUNvbnRleHQoKTogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB7XG4gICAgcmV0dXJuIEdldFVuaXR5Q2FudmFzKCkuZ2V0Q29udGV4dChcIndlYmdsMlwiKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/awrtc/unity/CAPI.ts\n");

/***/ }),

/***/ "./src/awrtc/unity/index.ts":
/*!**********************************!*\
  !*** ./src/awrtc/unity/index.ts ***!
  \**********************************/
/*! exports provided: CAPI_InitAsync, CAPI_PollInitState, CAPI_SLog_SetLogLevel, CAPI_WebRtcNetwork_IsAvailable, CAPI_WebRtcNetwork_IsBrowserSupported, CAPI_WebRtcNetwork_Create, CAPI_WebRtcNetwork_Release, CAPI_WebRtcNetwork_Connect, CAPI_WebRtcNetwork_StartServer, CAPI_WebRtcNetwork_StopServer, CAPI_WebRtcNetwork_Disconnect, CAPI_WebRtcNetwork_Shutdown, CAPI_WebRtcNetwork_Update, CAPI_WebRtcNetwork_Flush, CAPI_WebRtcNetwork_SendData, CAPI_WebRtcNetwork_SendDataEm, CAPI_WebRtcNetwork_GetBufferedAmount, CAPI_WebRtcNetwork_Dequeue, CAPI_WebRtcNetwork_Peek, CAPI_WebRtcNetwork_PeekEventDataLength, CAPI_WebRtcNetwork_CheckEventLength, CAPI_WebRtcNetwork_EventDataToUint8Array, CAPI_WebRtcNetwork_DequeueEm, CAPI_WebRtcNetwork_PeekEm, CAPI_MediaNetwork_IsAvailable, CAPI_MediaNetwork_HasUserMedia, CAPI_MediaNetwork_Create, CAPI_MediaNetwork_Configure, CAPI_MediaNetwork_GetConfigurationState, CAPI_MediaNetwork_GetConfigurationError, CAPI_MediaNetwork_ResetConfiguration, CAPI_MediaNetwork_TryGetFrame, CAPI_MediaNetwork_TryGetFrame_ToTexture, CAPI_MediaNetwork_TryGetFrame_Resolution, CAPI_MediaNetwork_TryGetFrameDataLength, CAPI_MediaNetwork_SetVolume, CAPI_MediaNetwork_HasAudioTrack, CAPI_MediaNetwork_HasVideoTrack, CAPI_MediaNetwork_SetMute, CAPI_MediaNetwork_IsMute, CAPI_DeviceApi_Update, CAPI_DeviceApi_RequestUpdate, CAPI_DeviceApi_LastUpdate, CAPI_Media_GetVideoDevices_Length, CAPI_Media_GetVideoDevices, CAPI_VideoInput_AddCanvasDevice, CAPI_VideoInput_AddDevice, CAPI_VideoInput_RemoveDevice, CAPI_VideoInput_UpdateFrame, GetUnityCanvas, GetUnityContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _CAPI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CAPI */ \"./src/awrtc/unity/CAPI.ts\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_InitAsync\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_InitAsync\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_PollInitState\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_PollInitState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_SLog_SetLogLevel\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_SLog_SetLogLevel\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsAvailable\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_IsAvailable\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_IsBrowserSupported\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_IsBrowserSupported\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Create\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Create\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Release\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Release\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Connect\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Connect\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StartServer\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_StartServer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_StopServer\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_StopServer\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Disconnect\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Disconnect\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Shutdown\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Shutdown\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Update\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Update\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Flush\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Flush\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendData\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_SendData\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_SendDataEm\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_SendDataEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_GetBufferedAmount\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_GetBufferedAmount\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Dequeue\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Dequeue\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_Peek\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_Peek\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEventDataLength\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_PeekEventDataLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_CheckEventLength\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_CheckEventLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_EventDataToUint8Array\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_EventDataToUint8Array\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_DequeueEm\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_DequeueEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_WebRtcNetwork_PeekEm\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_WebRtcNetwork_PeekEm\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsAvailable\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_IsAvailable\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasUserMedia\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_HasUserMedia\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Create\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_Create\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_Configure\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_Configure\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationState\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_GetConfigurationState\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_GetConfigurationError\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_GetConfigurationError\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_ResetConfiguration\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_ResetConfiguration\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_TryGetFrame\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_ToTexture\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_TryGetFrame_ToTexture\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrame_Resolution\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_TryGetFrame_Resolution\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_TryGetFrameDataLength\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_TryGetFrameDataLength\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetVolume\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_SetVolume\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasAudioTrack\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_HasAudioTrack\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_HasVideoTrack\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_HasVideoTrack\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_SetMute\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_SetMute\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_MediaNetwork_IsMute\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_MediaNetwork_IsMute\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_Update\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_DeviceApi_Update\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_RequestUpdate\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_DeviceApi_RequestUpdate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_DeviceApi_LastUpdate\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_DeviceApi_LastUpdate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices_Length\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_Media_GetVideoDevices_Length\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_Media_GetVideoDevices\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_Media_GetVideoDevices\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddCanvasDevice\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_VideoInput_AddCanvasDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_AddDevice\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_VideoInput_AddDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_RemoveDevice\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_VideoInput_RemoveDevice\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"CAPI_VideoInput_UpdateFrame\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"CAPI_VideoInput_UpdateFrame\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GetUnityCanvas\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"GetUnityCanvas\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GetUnityContext\", function() { return _CAPI__WEBPACK_IMPORTED_MODULE_0__[\"GetUnityContext\"]; });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3J0Yy8uL3NyYy9hd3J0Yy91bml0eS9pbmRleC50cz85ODg1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWdDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXNCIiwiZmlsZSI6Ii4vc3JjL2F3cnRjL3VuaXR5L2luZGV4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAoYykgMjAxOSwgYmVjYXVzZS13aHktbm90LmNvbSBMaW1pdGVkXG5BbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4qIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cblxuKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cbiogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlciBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuICB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFXG5GT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTFxuREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1JcblNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSXG5DQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLFxuT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbk9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4qL1xuaW1wb3J0IHsgTWVkaWEgfSBmcm9tIFwiLi4vbWVkaWFfYnJvd3Nlci9NZWRpYVwiO1xuaW1wb3J0IHsgR2V0VW5pdHlDYW52YXMgfSBmcm9tIFwiLi9DQVBJXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL0NBUElcIlxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/awrtc/unity/index.ts\n");

/***/ })

/******/ });
});